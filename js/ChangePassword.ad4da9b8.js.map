{"version":3,"sources":["webpack:///./src/views/Account/ChangePassword.vue?c056","webpack:///./src/apis/member.ts","webpack:///./src/views/Account/ChangePassword.vue","webpack:///./src/views/Account/ChangePassword.vue?504f","webpack:///./src/views/Account/ChangePassword.vue?5e85"],"names":["getMembers","category","q","params","url","method","getMember","id","getMemberRoles","getMemberTeams","getMemberBusinessUnits","postMember","data","email","nickname","role","teams","phone","active","business_unit","postMemberPassword","postMemberAvatar","file","FormData","append","JSON","stringify","postContactUs","class","body-style","type","password","isPasswordError","isPasswordSame","newPassword","confirmPassword","onSave","Component","name","setup","router","value","title","message","push","render","__scopeId"],"mappings":"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","file":"js/ChangePassword.ad4da9b8.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ChangePassword.vue?vue&type=style&index=0&id=4a6f7440&scoped=true&lang=stylus\"","import request from \"@/apis/http\";\nimport { AxiosPromise } from \"axios\";\nimport { Member, MemberTeam, ContactUsParams, MemberRole } from \"@/typings/member\";\n\nexport function getMembers(\n  category?: string,\n  q?: string\n): AxiosPromise<Member[]> {\n  const params: { category?: string; q?: string } = {};\n\n  if (category) params.category = category;\n  if (q) params.q = q;\n  return request({\n    url: \"/members/\",\n    method: \"GET\",\n    params\n  });\n}\n\nexport function getMember(id?: number): AxiosPromise<Member> {\n  if (id) {\n    return request({\n      url: `/member/${id}/`,\n      method: \"GET\"\n    });\n  }\n  return request({\n    url: `/member/`,\n    method: \"GET\"\n  });\n}\n\nexport function getMemberRoles(id?: number, params?: { category?: string }): AxiosPromise<MemberRole[]> {\n  if (id) {\n    return request({\n      url: `/member/${id}/roles/`,\n      method: \"GET\",\n      params\n    });\n  }\n  return request({\n    url: `/member/roles/`,\n    method: \"GET\",\n    params\n  });\n}\n\n// Haven't id means get self teams data by token.\nexport function getMemberTeams(\n  id?: number,\n  params?: { category?: string }\n): AxiosPromise<MemberTeam[]> {\n  if (id) {\n    return request({\n      url: `/member/${id}/teams/`,\n      method: \"GET\",\n      params\n    });\n  }\n  return request({\n    url: \"/member/teams/\",\n    method: \"GET\",\n    params\n  });\n}\n\nexport function getMemberBusinessUnits(id?: number): AxiosPromise<string[]> {\n  if (id) {\n    return request({\n      url: `/member/${id}/business_units/`,\n      method: \"GET\"\n    });\n  }\n  return request({\n    url: \"/member/business_units/\",\n    method: \"GET\"\n  });\n}\n\nexport function postMember(params: Member, id?: number) {\n  const data = {\n    email: params.email,\n    nickname: params.nickname,\n    role: params.role,\n    teams: params.teams,\n    phone: params.phone,\n    active: params.active,\n    business_unit: params.business_unit\n  };\n  if (id) {\n    return request({\n      url: `/member/${id}/`,\n      method: \"PUT\",\n      data\n    });\n  }\n  return request({\n    url: `/member/`,\n    method: \"PUT\",\n    data\n  });\n}\n\nexport function postMemberPassword(data: { password: string }) {\n  return request({\n    url: `/member/`,\n    method: \"PUT\",\n    data\n  });\n}\n\nexport function postMemberAvatar(file: File, id?: number) {\n  const data = new FormData();\n  data.append(\"file\", file);\n  if (id) data.append(\"member\", JSON.stringify(id));\n\n  return request({\n    url: \"/member/medias/\",\n    method: \"POST\",\n    data\n  });\n}\n\nexport function postContactUs(data: ContactUsParams) {\n  return request({\n    url: `/mail/contact_us/`,\n    method: \"POST\",\n    data\n  });\n}\n","<template>\n  <div id=\"change-password-component\">\n    <el-card\n      class=\"card\"\n      :body-style=\"{\n        padding: '20px 50px'\n      }\"\n    >\n      <div class=\"title-container\">\n        <p>Change Password</p>\n      </div>\n      <div class=\"main\">\n        <div class=\"item\">\n          <p>Password</p>\n          <el-input type=\"password\" v-model=\"password\"></el-input>\n        </div>\n        <div\n          class=\"item\"\n          :class=\"{ 'error-1': isPasswordError, 'error-2': isPasswordSame }\"\n        >\n          <p>New Password</p>\n          <el-input type=\"password\" v-model=\"newPassword\"></el-input>\n        </div>\n        <div class=\"item\" :class=\"{ error: isPasswordError }\">\n          <p>Confirm Password</p>\n          <el-input type=\"password\" v-model=\"confirmPassword\"></el-input>\n        </div>\n      </div>\n      <div class=\"footer\">\n        <el-button type=\"success\" @click=\"onSave\">Save</el-button>\n      </div>\n    </el-card>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, ref } from \"vue\";\nimport { postMemberPassword } from \"@/apis/member\";\nimport { ElNotification } from \"element-plus\";\nimport { removeRefreshToken, removeToken } from \"@/utils\";\nimport { useRouter } from \"vue-router\";\n\nconst Component = defineComponent({\n  name: \"ChangePassword\",\n  setup() {\n    const router = useRouter();\n    const password = ref(\"\");\n    const newPassword = ref(\"\");\n    const confirmPassword = ref(\"\");\n    const isPasswordSame = ref(false);\n    const isPasswordError = ref(false);\n\n    const onSave = async () => {\n      if (!password.value || !newPassword.value || !confirmPassword.value) {\n        return;\n      }\n      if (password.value === newPassword.value) {\n        isPasswordError.value = false;\n        isPasswordSame.value = true;\n        return;\n      }\n      if (newPassword.value !== confirmPassword.value) {\n        isPasswordSame.value = false;\n        isPasswordError.value = true;\n        return;\n      }\n\n      await postMemberPassword({ password: newPassword.value });\n      ElNotification({\n        type: \"success\",\n        title: \"SUCCESS\",\n        message: \"Change password successfully.\"\n      });\n      password.value = \"\";\n      newPassword.value = \"\";\n      confirmPassword.value = \"\";\n      removeToken();\n      removeRefreshToken();\n      await router.push({ name: \"Login\" });\n    };\n\n    return {\n      password,\n      newPassword,\n      confirmPassword,\n      isPasswordSame,\n      isPasswordError,\n\n      onSave\n    };\n  }\n});\n\nexport default Component;\n</script>\n\n<style scoped lang=\"stylus\">\n#change-password-component\n  page-container()\n  flex()\n\n  .card\n    width 50%\n\n    .title-container\n      display inline-block\n      margin-bottom 15px\n      padding-right 15px\n      font-size $font-size-zoom-title\n      font-weight 600\n      line-height 40px\n      border-bottom 2px solid $color-secondary\n\n    .item\n      position relative\n      padding 15px 0\n\n      p\n        font-size $font-size-lg2x\n        font-weight 400\n        margin-bottom 15px\n\n      :deep() .el-input\n        width 100%\n\n    .error-1::before\n      position absolute\n      bottom -15px\n      left 5px\n      content 'Your new password should be different from your previous password'\n      color red\n      font-size 12px\n\n    .error-2::before\n      position absolute\n      bottom -5px\n      left 5px\n      content 'The new password cannot be the same as the current password'\n      color red\n      font-size 12px\n\n    .error::before\n      position absolute\n      bottom -5px\n      left 5px\n      content 'The password confirmation does not match'\n      color red\n      font-size 12px\n\n    .footer\n      padding 15px 0\n      flex(flex-end)\n</style>\n","\nimport { defineComponent, ref } from \"vue\";\nimport { postMemberPassword } from \"@/apis/member\";\nimport { ElNotification } from \"element-plus\";\nimport { removeRefreshToken, removeToken } from \"@/utils\";\nimport { useRouter } from \"vue-router\";\n\nconst Component = defineComponent({\n  name: \"ChangePassword\",\n  setup() {\n    const router = useRouter();\n    const password = ref(\"\");\n    const newPassword = ref(\"\");\n    const confirmPassword = ref(\"\");\n    const isPasswordSame = ref(false);\n    const isPasswordError = ref(false);\n\n    const onSave = async () => {\n      if (!password.value || !newPassword.value || !confirmPassword.value) {\n        return;\n      }\n      if (password.value === newPassword.value) {\n        isPasswordError.value = false;\n        isPasswordSame.value = true;\n        return;\n      }\n      if (newPassword.value !== confirmPassword.value) {\n        isPasswordSame.value = false;\n        isPasswordError.value = true;\n        return;\n      }\n\n      await postMemberPassword({ password: newPassword.value });\n      ElNotification({\n        type: \"success\",\n        title: \"SUCCESS\",\n        message: \"Change password successfully.\"\n      });\n      password.value = \"\";\n      newPassword.value = \"\";\n      confirmPassword.value = \"\";\n      removeToken();\n      removeRefreshToken();\n      await router.push({ name: \"Login\" });\n    };\n\n    return {\n      password,\n      newPassword,\n      confirmPassword,\n      isPasswordSame,\n      isPasswordError,\n\n      onSave\n    };\n  }\n});\n\nexport default Component;\n","import { render } from \"./ChangePassword.vue?vue&type=template&id=4a6f7440&scoped=true\"\nimport script from \"./ChangePassword.vue?vue&type=script&lang=ts\"\nexport * from \"./ChangePassword.vue?vue&type=script&lang=ts\"\n\nimport \"./ChangePassword.vue?vue&type=style&index=0&id=4a6f7440&scoped=true&lang=stylus\"\nscript.render = render\nscript.__scopeId = \"data-v-4a6f7440\"\n\nexport default script"],"sourceRoot":""}