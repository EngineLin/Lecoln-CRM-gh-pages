{"version":3,"sources":["webpack:///./src/components/CollectionCardSelectable.vue?c79d","webpack:///./src/components/FabricCardSelectable.vue?9f3d","webpack:///./src/views/Project/StageFabricsDuplicateDialog.vue?2531","webpack:///./src/views/Project/StageFabrics.vue?1149","webpack:///./src/views/Project/StageEditDialog.vue?e124","webpack:///./src/views/Project/Timeline.vue?46cc","webpack:///./src/views/Project/AddProjectFabricDialog.vue?1189","webpack:///./src/views/Project/ProjectDetail.vue?7d04","webpack:///./src/components/FabricCardSelectable.vue","webpack:///./src/components/FabricCardSelectable.vue?c2ab","webpack:///./src/components/FabricCardSelectable.vue?871f","webpack:///./src/views/Project/CreateStageDialog.vue?a92d","webpack:///./src/views/Project/CreateStageDialog.vue?961b","webpack:///./src/views/Project/EndDialog.vue?9a1f","webpack:///./src/components/FilterTag.vue?b809","webpack:///./src/views/Project/InformDialog.vue?32ea","webpack:///./src/views/Project/UsersDialog.vue?64b3","webpack:///./src/views/Project/EndDialog.vue?5489","webpack:///./src/views/Project/ProjectDetail.vue?0158","webpack:///./src/components/CollectionCardSelectable.vue","webpack:///./src/components/CollectionCardSelectable.vue?7bc4","webpack:///./src/components/CollectionCardSelectable.vue?7a55","webpack:///./src/views/Project/ProjectDetail.vue","webpack:///./src/views/Project/Timeline.vue","webpack:///./src/views/Project/AddProjectFabricDialog.vue","webpack:///./src/views/Project/AddProjectFabricDialog.vue?c180","webpack:///./src/views/Project/AddProjectFabricDialog.vue?34ac","webpack:///./src/views/Project/Timeline.vue?3136","webpack:///./src/views/Project/Timeline.vue?32c0","webpack:///./src/views/Project/StageFabrics.vue","webpack:///./src/views/Project/StageFabricsDuplicateDialog.vue","webpack:///./src/views/Project/StageFabricsDuplicateDialog.vue?2fc0","webpack:///./src/views/Project/StageFabricsDuplicateDialog.vue?f937","webpack:///./src/views/Project/StageFabricsDialog.vue","webpack:///./src/views/Project/StageFabricsDialog.vue?0b3d","webpack:///./src/views/Project/StageFabricsDialog.vue?2572","webpack:///./src/views/Project/StageFabrics.vue?f7d3","webpack:///./src/views/Project/StageFabrics.vue?1488","webpack:///./src/views/Project/UsersDialog.vue","webpack:///./src/views/Project/UsersDialog.vue?3699","webpack:///./src/views/Project/UsersDialog.vue?7cd0","webpack:///./src/views/Project/CreateStageDialog.vue","webpack:///./src/views/Project/CreateStageDialog.vue?7199","webpack:///./src/views/Project/CreateStageDialog.vue?124a","webpack:///./src/views/Project/StageEditDialog.vue","webpack:///./src/views/Project/StageEditDialog.vue?d4f4","webpack:///./src/views/Project/StageEditDialog.vue?0a67","webpack:///./src/views/Project/InformDialog.vue","webpack:///./src/views/Project/InformDialog.vue?9271","webpack:///./src/views/Project/InformDialog.vue?ef7d","webpack:///./src/views/Project/EndDialog.vue","webpack:///./src/views/Project/EndDialog.vue?fa62","webpack:///./src/views/Project/EndDialog.vue?e8d1","webpack:///./src/views/Project/ProjectDetail.vue?aea1","webpack:///./src/views/Project/ProjectDetail.vue?05f3","webpack:///./src/views/Project/StageFabricsDialog.vue?396e","webpack:///./src/components/FilterTag.vue","webpack:///./src/components/FilterTag.vue?49d3","webpack:///./src/components/FilterTag.vue?eeb2"],"names":["id","class","style","onImageClick","selected","icon","data","name","art_no","sap_art_no","real_composition","Component","props","type","Object","default","Boolean","setup","emit","params","value","formatImageUrl","render","__scopeId","images","image","index","key","_images","fabric_images","length","projectData","effect","color","getTagColor","status","dayjs","expected_end_at","format","company","buyer","season","join","garment_factory","getGarmentFactoryName","can_view_joined_members","onUsersClick","hasButtons","onAddStageClick","projectStage","newestId","onEditStageClick","onInformClick","onEndClick","gutter","span","project","stage","stageData","onStageClick","onLoad","ref","price","created_at","description","stageattachements","file","onAttachmentDownload","stage-data","project-id","parseInt","onStageFabricsLoad","disabled","isOpenInputDiscussion","discussionValue","rows","placeholder","onNewline","onDiscuss","onUploadClick","filesStore","discussions","item","nickname","username","is_me","editDiscussionId","onDiscussionDeleteClick","onDiscussionEditClick","message","clearable","attachements","onDiscussionFileDeleteClick","split","msg","includes","endFile","src","logo","alt","supplier","projectStages","activeStageId","onDotClick","started_at","startFile","onReload","title","getTitle","step","visible","width","getDialogWidth","onDialogClosed","top","footer","onBack","onGoCollectionFabrics","onConfirm","onGoFabrics","onGoCollections","fabricType","onUploadPhoto","collectionOptions","form","collection","onCollectionSelect","fabricOptions","fabric","onFabricSelect","searchFabricValue","prefix","pageCount","background","layout","current-page","page","page-count","onPaginationChange","components","CollectionCardSelectable","FabricCardSelectable","projectId","datePickerDisabled","date","isBefore","undefined","q","results","total_pages","open","initiate_project","collection_fabrics","map","it","_page","_form","start_fabric","end_fabric","element","document","createElement","accept","multiple","addEventListener","files","start_fabric_image","click","seasonOptions","AddProjectFabricDialog","addProjectFabricDialog","JSON","parse","stringify","stages","reverse","end_fabric_image","url","window","onReference","onUpload","onExpand","stagemedias","_","splitAt","image_url","selectValue","stageId","init","to_project","filter","selectedId","concat","forEach","target","find","demo_fabric","mainFile","height","autoplay","arrow","indicator-position","splitEvery","list","_item","_index","onCarouseItemClick","FabricImageWith3DMode","StageFabricsDuplicateDialog","StageFabricsDialog","Number","uploadDialog","fabricDialog","i","owner","canChange","filterable","options","label","checked","tags","tag","closable","onTagCloseClick","FilterTag","joinedMembers","availableMembers","lock","reduce","userList","users","_list","user","company_name","member_id","availableResponse","joinedResponse","joined_member","owner__nickname","can_change_joined_members","popper-class","side","sideOptions","fetch-suggestions","onQuerySearch","value-format","onDoneClick","fetchOptions","createFilter","queryString","option","toLowerCase","indexOf","cb","text","stagenameOptions","custom-class","members","member","email","subjectValue","textValue","onSend","getTarget","projectName","sender","router","success","push","query","reason","colors","adapter","Completed","Dropped","Delayed","getHasButtons","Timeline","StageFabrics","UsersDialog","CreateStageDialog","StageEditDialog","InformDialog","EndDialog","String","store","rightContainer","usersDialog","createStageDialog","editStageDialog","informDialog","endDialog","garmentFactories","fetchStageDetail","$el","scrollTop","loadingInstance","factories","brands","dispatch","replace","close","can_add_stage","_id","size","disable-transitions","onCloseTag","context"],"mappings":"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","file":"js/ProjectDetail.ad6a4599.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./CollectionCardSelectable.vue?vue&type=style&index=0&id=61644ad4&scoped=true&lang=stylus\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./FabricCardSelectable.vue?vue&type=style&index=0&id=3f79852e&scoped=true&lang=stylus\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./StageFabricsDuplicateDialog.vue?vue&type=style&index=0&id=2dd2201c&scoped=true&lang=stylus\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./StageFabrics.vue?vue&type=style&index=0&id=3f5c9d03&scoped=true&lang=stylus\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./StageEditDialog.vue?vue&type=style&index=0&id=cbff4862&scoped=true&lang=stylus\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Timeline.vue?vue&type=style&index=0&id=e3ccca7c&scoped=true&lang=stylus\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./AddProjectFabricDialog.vue?vue&type=style&index=0&id=63381dc4&scoped=true&lang=stylus\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ProjectDetail.vue?vue&type=style&index=1&id=0eb96195&lang=css\"","<template>\n  <div id=\"fabric-card-selectable-component\">\n    <div\n      class=\"cover-image\"\n      :style=\"{\n        backgroundImage: `url('${formatImageUrl(data.image_url + '@250-250')}')`\n      }\"\n      @click=\"onImageClick\"\n    >\n      <font-awesome-icon\n        v-if=\"selected\"\n        class=\"icon\"\n        :icon=\"['fas', 'check-square']\"\n      ></font-awesome-icon>\n      <font-awesome-icon\n        v-else\n        class=\"icon\"\n        :icon=\"['fas', 'square']\"\n      ></font-awesome-icon>\n    </div>\n    <div class=\"content-container\">\n      <div class=\"content-wrapper\" :style=\"{ width: 'auto' }\">\n        <h3 class=\"title\">{{ data.name }}</h3>\n      </div>\n      <div class=\"hover-information-wrapper\">\n        <p v-if=\"data.art_no\" class=\"description\">{{ data.art_no }}</p>\n        <p v-if=\"data.sap_art_no\" class=\"description\">{{ data.sap_art_no }}</p>\n        <p v-if=\"data.real_composition\" class=\"description\">\n          {{ data.real_composition }}\n        </p>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, toRefs, PropType } from \"vue\";\nimport { formatImageUrl } from \"@/utils/image\";\nimport { FabricCardSelectableEmit, FabricResult } from \"@/typings/fabric\";\n\nconst Component = defineComponent({\n  name: \"FabricCard\",\n  props: {\n    data: {\n      type: Object as PropType<FabricResult>,\n      default: () => ({})\n    },\n    selected: {\n      type: Boolean,\n      default: false\n    }\n  },\n  setup(props, { emit }) {\n    const { data, selected } = toRefs(props);\n\n    const onImageClick = async () => {\n      const params: FabricCardSelectableEmit = {\n        id: data.value.id,\n        selected: selected.value,\n        data: data.value\n      };\n      emit(\"select\", params);\n    };\n\n    return {\n      onImageClick,\n      formatImageUrl\n    };\n  }\n});\n\nexport default Component;\n</script>\n\n<style scoped lang=\"stylus\">\n#fabric-card-selectable-component\n  width 100%\n  border solid 1px $color-secondary\n  &:hover\n    .hover-information-wrapper\n      display block !important\n\n  .cover-image\n    position relative\n    width 100%\n    height 0\n    padding-bottom 100%\n    background-repeat no-repeat\n    background-position center\n    background-size cover\n    cursor pointer\n\n    .icon\n      position absolute\n      top -15px\n      right -15px\n      width 30px\n      height 30px\n      color $color-secondary\n      background white\n\n  .content-container\n    position relative\n    flex(flex-start, center)\n    height 45px\n    padding 15px\n\n    .content-wrapper\n      .title\n        text-align left\n        font-size $font-size-large\n        margin-bottom 5px\n\n    .hover-information-wrapper\n      display none\n      border-right solid 1px $color-secondary\n      border-bottom solid 1px $color-secondary\n      border-left solid 1px $color-secondary\n      position absolute\n      z-index 99\n      bottom 0\n      left -1px\n      right -1px\n      transform translateY(100%)\n      background white\n      padding 15px\n      &::before\n        position absolute\n        content ''\n        width 90%\n        height 1px\n        background $color-secondary\n        top 0\n        left 5%\n      .description\n        text-align left\n        font-size $font-size-small\n        font-weight 400\n        padding 8px 0\n</style>\n","\nimport { defineComponent, toRefs, PropType } from \"vue\";\nimport { formatImageUrl } from \"@/utils/image\";\nimport { FabricCardSelectableEmit, FabricResult } from \"@/typings/fabric\";\n\nconst Component = defineComponent({\n  name: \"FabricCard\",\n  props: {\n    data: {\n      type: Object as PropType<FabricResult>,\n      default: () => ({})\n    },\n    selected: {\n      type: Boolean,\n      default: false\n    }\n  },\n  setup(props, { emit }) {\n    const { data, selected } = toRefs(props);\n\n    const onImageClick = async () => {\n      const params: FabricCardSelectableEmit = {\n        id: data.value.id,\n        selected: selected.value,\n        data: data.value\n      };\n      emit(\"select\", params);\n    };\n\n    return {\n      onImageClick,\n      formatImageUrl\n    };\n  }\n});\n\nexport default Component;\n","import { render } from \"./FabricCardSelectable.vue?vue&type=template&id=3f79852e&scoped=true\"\nimport script from \"./FabricCardSelectable.vue?vue&type=script&lang=ts\"\nexport * from \"./FabricCardSelectable.vue?vue&type=script&lang=ts\"\n\nimport \"./FabricCardSelectable.vue?vue&type=style&index=0&id=3f79852e&scoped=true&lang=stylus\"\nscript.render = render\nscript.__scopeId = \"data-v-3f79852e\"\n\nexport default script","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./CreateStageDialog.vue?vue&type=style&index=0&id=2ba33000&scoped=true&lang=stylus\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./CreateStageDialog.vue?vue&type=style&index=1&id=2ba33000&lang=stylus\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./EndDialog.vue?vue&type=style&index=1&id=8123c9e8&lang=stylus\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./FilterTag.vue?vue&type=style&index=0&id=b8791da2&scoped=true&lang=stylus\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./InformDialog.vue?vue&type=style&index=0&id=0270001b&scoped=true&lang=stylus\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./UsersDialog.vue?vue&type=style&index=0&id=ac59c5ee&scoped=true&lang=stylus\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./EndDialog.vue?vue&type=style&index=0&id=8123c9e8&scoped=true&lang=stylus\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ProjectDetail.vue?vue&type=style&index=0&id=0eb96195&scoped=true&lang=stylus\"","<template>\n  <div id=\"collection-card-selectable-component\">\n    <div class=\"cover-images-container\" @click=\"onImageClick\">\n      <div class=\"cover-images-wrapper\">\n        <div class=\"col\" v-for=\"(image, index) in images\" :key=\"index\">\n          <div\n            class=\"cover-image\"\n            :style=\"{\n              backgroundImage: `url('${\n                image ? formatImageUrl(image + '@150-150') : defaultImage\n              }')`\n            }\"\n          ></div>\n        </div>\n        <font-awesome-icon\n          v-if=\"selected\"\n          class=\"icon\"\n          :icon=\"['fas', 'check-square']\"\n        ></font-awesome-icon>\n        <font-awesome-icon\n          v-else\n          class=\"icon\"\n          :icon=\"['fas', 'square']\"\n        ></font-awesome-icon>\n      </div>\n    </div>\n\n    <div class=\"content-container\">\n      <div class=\"content-wrapper\" :style=\"{ width: 'auto' }\">\n        <h3 class=\"title\">{{ data.name }}</h3>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, toRefs, PropType, computed } from \"vue\";\nimport * as _ from \"ramda\";\nimport { formatImageUrl } from \"@/utils/image\";\nimport { FabricCardSelectableEmit } from \"@/typings/fabric\";\nimport { CollectionCardResponse } from \"@/typings/collection\";\n\nconst Component = defineComponent({\n  name: \"FabricCard\",\n  props: {\n    data: {\n      type: Object as PropType<CollectionCardResponse>,\n      default: () => ({})\n    },\n    selected: {\n      type: Boolean,\n      default: false\n    }\n  },\n  setup(props, { emit }) {\n    const { data, selected } = toRefs(props);\n\n    const images = computed(() => {\n      const _images = _.splitAt(4, data.value.fabric_images)[0];\n      if (_images.length === 4) return _images;\n      return _.splitAt(4, [..._images, null, null, null, null])[0];\n    });\n\n    const onImageClick = async () => {\n      const params: FabricCardSelectableEmit = {\n        id: data.value.id,\n        selected: selected.value,\n        data: data.value\n      };\n      emit(\"select\", params);\n    };\n\n    return {\n      images,\n\n      onImageClick,\n\n      formatImageUrl\n    };\n  }\n});\n\nexport default Component;\n</script>\n\n<style scoped lang=\"stylus\">\n#collection-card-selectable-component\n  width 100%\n  border solid 1px $color-secondary\n  box-shadow: 0 4px 6px 0 rgba(0, 0, 0, 0.2), 0 5px 10px 0 rgba(0, 0, 0, 0.19);\n  &:hover\n    box-shadow: 0 8px 10px 0 rgba(0, 0, 0, 0.2), 0 10px 20px 0 rgba(0, 0, 0, 0.19);\n\n  .cover-images-container\n    position relative\n    width 100%\n    height 0\n    padding-bottom 100%\n    cursor pointer\n    .cover-images-wrapper\n      position absolute\n      top 0\n      left 0\n      width 100%\n      height calc(100% - 1px)\n      border-bottom 1px solid $color-secondary\n      flex()\n      flex-wrap wrap\n\n      .col\n        width 50%\n\n      .cover-image\n        width 100%\n        height 0\n        padding-bottom 100%\n        background-repeat no-repeat\n        background-position center\n        background-size cover\n\n      .icon\n        position absolute\n        top -15px\n        right -15px\n        width 30px\n        height 30px\n        color $color-secondary\n        background white\n\n  .content-container\n    display flex\n    justify-content center\n    align-items center\n    padding 14px 14px\n    min-height 42px\n    .content-wrapper\n      .title\n        text-align left\n        font-size $font-size-normal\n        font-weight 600\n    .buttons-group\n      width 30%\n      .button-wrapper\n        display flex\n        flex-direction column\n        justify-content center\n        align-items center\n        cursor pointer\n        .icon\n          width 24px\n          height 24px\n          margin-bottom 5px\n        .icon-name\n          font-size $font-size-small\n          font-weight 400\n</style>\n","\nimport { defineComponent, toRefs, PropType, computed } from \"vue\";\nimport * as _ from \"ramda\";\nimport { formatImageUrl } from \"@/utils/image\";\nimport { FabricCardSelectableEmit } from \"@/typings/fabric\";\nimport { CollectionCardResponse } from \"@/typings/collection\";\n\nconst Component = defineComponent({\n  name: \"FabricCard\",\n  props: {\n    data: {\n      type: Object as PropType<CollectionCardResponse>,\n      default: () => ({})\n    },\n    selected: {\n      type: Boolean,\n      default: false\n    }\n  },\n  setup(props, { emit }) {\n    const { data, selected } = toRefs(props);\n\n    const images = computed(() => {\n      const _images = _.splitAt(4, data.value.fabric_images)[0];\n      if (_images.length === 4) return _images;\n      return _.splitAt(4, [..._images, null, null, null, null])[0];\n    });\n\n    const onImageClick = async () => {\n      const params: FabricCardSelectableEmit = {\n        id: data.value.id,\n        selected: selected.value,\n        data: data.value\n      };\n      emit(\"select\", params);\n    };\n\n    return {\n      images,\n\n      onImageClick,\n\n      formatImageUrl\n    };\n  }\n});\n\nexport default Component;\n","import { render } from \"./CollectionCardSelectable.vue?vue&type=template&id=61644ad4&scoped=true\"\nimport script from \"./CollectionCardSelectable.vue?vue&type=script&lang=ts\"\nexport * from \"./CollectionCardSelectable.vue?vue&type=script&lang=ts\"\n\nimport \"./CollectionCardSelectable.vue?vue&type=style&index=0&id=61644ad4&scoped=true&lang=stylus\"\nscript.render = render\nscript.__scopeId = \"data-v-61644ad4\"\n\nexport default script","<template>\n  <div id=\"project-detail-component\">\n    <div class=\"top-container\">\n      <div class=\"title-wrapper\" v-if=\"projectData\">\n        <h1>{{ projectData.name }}</h1>\n        <el-tag effect=\"dark\" :color=\"getTagColor(projectData.status)\">\n          {{ projectData.status }}\n        </el-tag>\n        <p>\n          Expected Finish Time:\n          {{ dayjs(projectData.expected_end_at).format(\"YYYY-MM-DD\") }}\n        </p>\n        <p>Brand: {{ projectData.company.buyer.name }}</p>\n        <p v-if=\"projectData.season.length\">\n          Season: {{ projectData.season.join(\", \") }}\n        </p>\n        <p v-if=\"projectData.garment_factory\">\n          Garment Factory:\n          {{ getGarmentFactoryName(projectData.garment_factory) }}\n        </p>\n      </div>\n\n      <div class=\"right-container\">\n        <el-button\n          v-if=\"projectData && projectData.can_view_joined_members\"\n          type=\"info\"\n          @click=\"onUsersClick\"\n        >\n          Users\n        </el-button>\n        <el-button\n          v-if=\"hasButtons\"\n          v-permission=\"'project_status_update'\"\n          type=\"success\"\n          @click=\"onAddStageClick\"\n        >\n          Add Stage\n        </el-button>\n        <el-button\n          v-if=\"projectStage && projectStage.id === newestId && hasButtons\"\n          v-permission=\"'project_stage_update'\"\n          type=\"success\"\n          @click=\"onEditStageClick\"\n        >\n          Edit Stage\n        </el-button>\n        <el-button v-if=\"hasButtons\" type=\"success\" @click=\"onInformClick\"\n          >Inform</el-button\n        >\n        <el-button\n          v-if=\"projectData && hasButtons\"\n          v-permission=\"'project_status_update'\"\n          type=\"success\"\n          @click=\"onEndClick\"\n        >\n          End\n        </el-button>\n      </div>\n    </div>\n\n    <div class=\"main-container\" v-if=\"projectData\">\n      <el-row :gutter=\"40\" style=\"margin: 0;\">\n        <el-col class=\"left-container\" :span=\"8\" style=\"padding-left: 0;\">\n          <Timeline\n            :project=\"projectData\"\n            :stage=\"stageData\"\n            @click-stage=\"onStageClick\"\n            @reload=\"onLoad\"\n          ></Timeline>\n        </el-col>\n\n        <el-col\n          class=\"right-container\"\n          :span=\"16\"\n          style=\"padding-right: 0;\"\n          ref=\"rightContainer\"\n        >\n          <template v-if=\"stageData\">\n            <div class=\"card\">\n              <h3 class=\"title\">Stage</h3>\n              <p class=\"content\">{{ stageData.name }}</p>\n            </div>\n\n            <div class=\"card\">\n              <h3 class=\"title\">Price</h3>\n              <p class=\"content\">{{ stageData.price }}</p>\n            </div>\n\n            <div class=\"card\">\n              <h3 class=\"title\">Start Date</h3>\n              <p class=\"content\">\n                {{ dayjs(stageData.created_at).format(\"YYYY.MM.DD\") }}\n              </p>\n            </div>\n\n            <div class=\"card\">\n              <h3 class=\"title\">Description</h3>\n              <p class=\"content\">{{ stageData.description || \"Empty...\" }}</p>\n              <div class=\"report-container\">\n                <div\n                  v-for=\"file in stageData.stageattachements\"\n                  :key=\"file.id\"\n                  class=\"report-item\"\n                  @click=\"onAttachmentDownload(file)\"\n                >\n                  <font-awesome-icon\n                    class=\"icon\"\n                    :icon=\"['far', 'file']\"\n                  ></font-awesome-icon>\n                  <p>{{ file.name }}</p>\n                </div>\n              </div>\n            </div>\n\n            <div class=\"card\">\n              <StageFabrics\n                :stage-data=\"stageData\"\n                :project-id=\"parseInt(id, 10)\"\n                @load=\"onStageFabricsLoad\"\n              ></StageFabrics>\n            </div>\n            <div class=\"card\">\n              <h3 class=\"title\">Discussion</h3>\n              <div class=\"input-discussion\">\n                <font-awesome-icon\n                  class=\"user\"\n                  :icon=\"['far', 'user-circle']\"\n                ></font-awesome-icon>\n                <div\n                  :disabled=\"!isOpenInputDiscussion\"\n                  class=\"textarea-container\"\n                >\n                  <textarea\n                    v-model=\"discussionValue\"\n                    name=\"text\"\n                    rows=\"1\"\n                    placeholder=\"Write a comment...\"\n                    @keydown.enter.exact.prevent\n                    @keydown.enter.shift.prevent\n                    @keydown.enter.alt.prevent\n                    @keyup.enter.exact=\"onDiscuss\"\n                    @keydown.enter.shift.exact=\"onNewline\"\n                    @keydown.enter.alt.exact=\"onNewline\"\n                  ></textarea>\n                  <el-button\n                    icon=\"el-icon-position\"\n                    @click=\"onDiscuss\"\n                  ></el-button>\n                </div>\n                <div class=\"upload-wrapper\">\n                  <font-awesome-icon\n                    class=\"paperclip\"\n                    :icon=\"['fas', 'paperclip']\"\n                    @click=\"onUploadClick\"\n                  ></font-awesome-icon>\n                  <div v-if=\"filesStore\" class=\"count\">\n                    {{ filesStore.length }}\n                  </div>\n                </div>\n              </div>\n              <div\n                v-for=\"item in projectData.discussions\"\n                :key=\"item\"\n                class=\"chat-item\"\n              >\n                <div class=\"avatar-container\">\n                  <font-awesome-icon\n                    class=\"icon\"\n                    :icon=\"['far', 'user-circle']\"\n                  ></font-awesome-icon>\n                  <div class=\"name-container\">\n                    <div class=\"name-wrapper\">\n                      <div class=\"name\">\n                        {{ item.nickname || item.username }}\n                      </div>\n                      <time>{{\n                        dayjs(item.created_at).format(\"YYYY-MM-DD hh:mm:ss\")\n                      }}</time>\n                    </div>\n                    <div v-if=\"item.is_me\" class=\"console-wrapper\">\n                      <font-awesome-icon\n                        v-if=\"editDiscussionId !== item.id\"\n                        class=\"icon\"\n                        :icon=\"['fas', 'edit']\"\n                        @click=\"editDiscussionId = item.id\"\n                      ></font-awesome-icon>\n                      <font-awesome-icon\n                        v-if=\"editDiscussionId !== item.id\"\n                        class=\"icon\"\n                        :icon=\"['far', 'trash-alt']\"\n                        @click=\"onDiscussionDeleteClick(item.id)\"\n                      ></font-awesome-icon>\n                      <font-awesome-icon\n                        v-if=\"editDiscussionId === item.id\"\n                        class=\"icon icon-check\"\n                        :icon=\"['fas', 'check']\"\n                        @click=\"onDiscussionEditClick(item.id, item.message)\"\n                      ></font-awesome-icon>\n                      <font-awesome-icon\n                        v-if=\"editDiscussionId === item.id\"\n                        class=\"icon icon-close\"\n                        :icon=\"['fas', 'times']\"\n                        @click=\"editDiscussionId = -1\"\n                      ></font-awesome-icon>\n                    </div>\n                  </div>\n                </div>\n                <div v-if=\"editDiscussionId === item.id\" class=\"edit-content\">\n                  <el-input\n                    type=\"textarea\"\n                    v-model=\"item.message\"\n                    :rows=\"3\"\n                    clearable\n                  >\n                  </el-input>\n                  <div class=\"files-wrapper\">\n                    <div\n                      v-for=\"file in item.attachements\"\n                      :key=\"file.id\"\n                      class=\"file-item\"\n                    >\n                      <font-awesome-icon\n                        class=\"cancel-icon\"\n                        :icon=\"['fas', 'times-circle']\"\n                        @click=\"onDiscussionFileDeleteClick(file.id)\"\n                      ></font-awesome-icon>\n                      <font-awesome-icon\n                        class=\"icon\"\n                        :icon=\"['far', 'file']\"\n                      ></font-awesome-icon>\n                      <p>{{ file.name }}</p>\n                    </div>\n                  </div>\n                </div>\n                <div v-else class=\"content\">\n                  <p\n                    class=\"message\"\n                    v-for=\"(msg, index) in item.message.split('\\n')\"\n                    :key=\"index\"\n                  >\n                    {{ msg }}\n                  </p>\n                  <div class=\"files-wrapper\">\n                    <div\n                      v-for=\"file in item.attachements\"\n                      :key=\"file.id\"\n                      class=\"file-item\"\n                      @click=\"onAttachmentDownload(file)\"\n                    >\n                      <font-awesome-icon\n                        class=\"icon\"\n                        :icon=\"['far', 'file']\"\n                      ></font-awesome-icon>\n                      <p>{{ file.name }}</p>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </template>\n        </el-col>\n      </el-row>\n    </div>\n\n    <UsersDialog ref=\"usersDialog\"></UsersDialog>\n    <CreateStageDialog\n      ref=\"createStageDialog\"\n      @load=\"onLoad\"\n    ></CreateStageDialog>\n    <StageEditDialog ref=\"editStageDialog\" @load=\"onLoad\"></StageEditDialog>\n    <InformDialog ref=\"informDialog\"></InformDialog>\n    <EndDialog ref=\"endDialog\" @load=\"onLoad\"></EndDialog>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, ref, onMounted, watch, toRefs, computed } from \"vue\";\nimport { useRouter } from \"vue-router\";\nimport dayjs from \"dayjs\";\n\nimport Timeline from \"./Timeline.vue\";\nimport StageFabrics from \"./StageFabrics.vue\";\nimport UsersDialog from \"./UsersDialog.vue\";\nimport CreateStageDialog from \"./CreateStageDialog.vue\";\nimport StageEditDialog from \"./StageEditDialog.vue\";\nimport InformDialog from \"./InformDialog.vue\";\nimport EndDialog from \"./EndDialog.vue\";\n\nimport { formatImageUrl, loading } from \"@/utils\";\nimport {\n  deleteDicussionFile,\n  getAvaliableOptions,\n  getProject,\n  getProjectStage,\n  postCreateDiscussion,\n  postDeleteDiscussion,\n  postEditDiscussion\n} from \"@/apis/project\";\nimport {\n  Attachment,\n  DiscussionInput,\n  Project,\n  ProjectStage,\n  Stage\n} from \"@/typings/project\";\nimport { iCreateDialog } from \"@/typings/component\";\nimport { ElNotification } from \"element-plus\";\nimport { useStore } from \"vuex\";\nimport { PostNotificationReadByProject } from \"@/typings/store\";\n\nconst colors = [\"#5470c6\", \"#91cc76\", \"#f8c858\", \"#e66\"];\n\nconst getTagColor = (tag: string): string => {\n  const adapter: Adapter<string> = {\n    \"In Progress\": colors[0],\n    Completed: colors[1],\n    \"Completed but delayed\": colors[1],\n    Dropped: colors[3],\n    Delayed: colors[2],\n    default: \"\"\n  };\n  return adapter[tag] || adapter.default;\n};\n\nconst getHasButtons = (project: Project | null): boolean => {\n  if (!project) return false;\n  const adapter: Adapter<boolean> = {\n    \"In Progress\": true,\n    Completed: true,\n    \"Completed but delayed\": false,\n    Dropped: false,\n    Delayed: true,\n    default: false\n  };\n  return adapter[project.status] || adapter.default;\n};\n\nconst Component = defineComponent({\n  name: \"ProjectDetail\",\n  components: {\n    Timeline,\n    StageFabrics,\n    UsersDialog,\n    CreateStageDialog,\n    StageEditDialog,\n    InformDialog,\n    EndDialog\n  },\n  props: {\n    id: {\n      type: String,\n      default: \"\"\n    }\n  },\n  setup(props) {\n    const store = useStore();\n    const router = useRouter();\n    const { id } = toRefs(props);\n    const rightContainer = ref<iCreateDialog | null>(null);\n    const usersDialog = ref<iCreateDialog | null>(null);\n    const createStageDialog = ref<iCreateDialog | null>(null);\n    const editStageDialog = ref<iCreateDialog | null>(null);\n    const informDialog = ref<iCreateDialog | null>(null);\n    const endDialog = ref<iCreateDialog | null>(null);\n\n    const projectData = ref<Project | null>(null);\n    const projectStage = ref<ProjectStage | null>(null);\n    const stageData = ref<Stage | null>(null);\n    const garmentFactories = ref<{ id: number; name: string }[] | null>(null);\n    const discussionValue = ref(\"\");\n    const editDiscussionId = ref(-1);\n    const isOpenInputDiscussion = ref(true);\n    const filesStore = ref<FileList | null>(null);\n    const newestId = ref(-1);\n\n    const hasButtons = computed(() => getHasButtons(projectData.value));\n\n    const getGarmentFactoryName = (id: number): string => {\n      if (!garmentFactories.value) return \"\";\n      const target = garmentFactories.value!.find(\n        (it: { id: number; name: string }) => it.id === id\n      );\n      return target ? target.name : \"\";\n    };\n\n    const fetchStageDetail = async (stage: ProjectStage) => {\n      projectStage.value = stage;\n      const { data } = await getProjectStage(stage.id);\n      stageData.value = data;\n      // @ts-ignore\n      rightContainer.value && (rightContainer.value.$el.scrollTop = 0);\n    };\n\n    const init = async () => {\n      const loadingInstance = loading();\n      try {\n        const { data: factories } = await getAvaliableOptions(\n          \"garment_factory\"\n        );\n        garmentFactories.value = factories.brands;\n        const { data } = await getProject(parseInt(id.value, 10));\n        projectData.value = data;\n\n        if (data.stages.length) {\n          const target = data.stages[data.stages.length - 1];\n          newestId.value = target.id;\n          await fetchStageDetail(target);\n        }\n\n        // Set all notifications read.\n        await store.dispatch(\n          PostNotificationReadByProject,\n          parseInt(id.value, 10)\n        );\n      } catch (_) {\n        await router.replace({ name: \"Error\" });\n      } finally {\n        loadingInstance.close();\n      }\n    };\n\n    onMounted(init);\n    watch([id], init);\n\n    const onUsersClick = () => {\n      if (!usersDialog.value || !projectData.value) return;\n      usersDialog.value.open(projectData.value);\n    };\n\n    const onAddStageClick = () => {\n      if (!createStageDialog.value || !projectData.value) return;\n      if (!projectData.value.can_add_stage) {\n        return ElNotification({\n          type: \"warning\",\n          title: \"No permission\",\n          message: \"You have no permission to do this.\"\n        });\n      }\n      createStageDialog.value.open(projectData.value);\n    };\n    const onEditStageClick = () => {\n      if (!editStageDialog.value || !projectStage.value) return;\n      editStageDialog.value.open({\n        project: projectData.value,\n        stage: projectStage.value\n      });\n    };\n    const onInformClick = () => {\n      if (!informDialog.value || !projectData.value) return;\n      informDialog.value.open(projectData.value);\n    };\n    const onEndClick = () => {\n      if (!endDialog.value || !projectData.value) return;\n      endDialog.value.open(projectData.value);\n    };\n    const onStageClick = async (data: ProjectStage) => {\n      await fetchStageDetail(data);\n    };\n    const onNewline = () => {\n      discussionValue.value = `${discussionValue.value}\\n`;\n    };\n    const onDiscuss = async () => {\n      if (!discussionValue.value && !filesStore.value) return;\n\n      isOpenInputDiscussion.value = false;\n      try {\n        const params: DiscussionInput = {\n          project: parseInt(id.value, 10),\n          message: discussionValue.value\n        };\n        if (filesStore.value) params.files = filesStore.value;\n\n        // Reset\n        discussionValue.value = \"\";\n        filesStore.value = null;\n\n        await postCreateDiscussion(params);\n\n        // re-fetch\n        const { data } = await getProject(parseInt(id.value, 10));\n        projectData.value = data;\n      } finally {\n        isOpenInputDiscussion.value = true;\n      }\n    };\n    const onDiscussionEditClick = async (_id: number, message: string) => {\n      await postEditDiscussion(_id, message);\n      const { data } = await getProject(parseInt(id.value, 10));\n      projectData.value = data;\n      editDiscussionId.value = -1;\n    };\n    const onDiscussionDeleteClick = async (_id: number) => {\n      await postDeleteDiscussion(_id);\n      ElNotification({\n        type: \"success\",\n        title: \"Delete Discussion\",\n        message: \"Success delete discussion.\"\n      });\n      const { data } = await getProject(parseInt(id.value, 10));\n      projectData.value = data;\n    };\n    const onDiscussionFileDeleteClick = async (_id: number) => {\n      await deleteDicussionFile(_id);\n      ElNotification({\n        type: \"success\",\n        title: \"Delete File\",\n        message: \"Success delete file.\"\n      });\n      const { data } = await getProject(parseInt(id.value, 10));\n      projectData.value = data;\n    };\n\n    const onUploadClick = () => {\n      if (!projectStage.value) return;\n\n      const element = document.createElement(\"input\");\n      element.type = \"file\";\n      element.accept = \"image/*\";\n      element.multiple = true;\n      element.addEventListener(\"change\", async () => {\n        if (!projectStage.value) return;\n\n        if (element.files) {\n          filesStore.value = element.files;\n        }\n      });\n      element.click();\n    };\n\n    const onAttachmentDownload = (data: Attachment) => {\n      window.open(formatImageUrl(data.file));\n    };\n\n    const onLoad = async () => {\n      await init();\n    };\n\n    const onStageFabricsLoad = async () => {\n      if (!projectStage.value) return;\n      const { data } = await getProjectStage(projectStage.value.id);\n      stageData.value = data;\n    };\n\n    return {\n      rightContainer,\n      usersDialog,\n      createStageDialog,\n      editStageDialog,\n      informDialog,\n      endDialog,\n      projectData,\n      stageData,\n      garmentFactories,\n      discussionValue,\n      isOpenInputDiscussion,\n      filesStore,\n      projectStage,\n      newestId,\n      editDiscussionId,\n      hasButtons,\n\n      onUsersClick,\n      onAddStageClick,\n      onEditStageClick,\n      onInformClick,\n      onEndClick,\n      onStageClick,\n      onNewline,\n      onDiscuss,\n      onDiscussionEditClick,\n      onDiscussionDeleteClick,\n      onDiscussionFileDeleteClick,\n      onUploadClick,\n      onAttachmentDownload,\n      onLoad,\n      onStageFabricsLoad,\n\n      getTagColor,\n      getGarmentFactoryName,\n      dayjs\n    };\n  }\n});\n\nexport default Component;\n</script>\n\n<style scoped lang=\"stylus\">\n#project-detail-component\n  background-color $color-background\n  padding 30px 0 0\n  .top-container\n    flex(space-between, flex-start)\n    margin-bottom 20px\n    height 180px\n    .title-wrapper\n      h1\n        margin-top 15px\n        font-size $font-size-zoom-title\n      :deep() .el-tag\n        margin-top 10px\n        border-color transparent\n      p\n        margin-top 10px\n        font-size $font-size-lg2x\n    .right-container\n       margin-top 15px\n       flex()\n       :deep() .el-button\n         margin-right 15px\n\n  .main-container\n    padding 30px 0\n    .left-container\n      height calc(100vh - 340px)\n      overflow-y scroll\n\n    .right-container\n      height calc(100vh - 340px)\n      overflow-y scroll\n\n    .card\n      background white\n      border-radius 15px\n      box-sizing border-box\n      padding 15px 30px\n      margin-bottom 30px\n      width 100%\n      .input-discussion\n        flex()\n        padding-bottom 15px\n        margin 15px 0\n        border-bottom 1px solid $color-gray\n        width 100%\n        :deep() .el-input\n          width calc(100% - 84px)\n        :deep() .el-icon-position\n          font-weight 600\n          font-size 16px\n        .user\n          width 30px\n          height 30px\n          margin-right 15px\n        .upload-wrapper\n          position relative\n          .paperclip\n            width 24px\n            height 24px\n            margin-left 15px\n            cursor pointer\n          .count\n            position absolute\n            right -10px\n            top -10px\n            border-radius 50%\n            flex()\n            width 18px\n            height 18px\n            font-size $font-size-normal\n            background $color-active\n            color white\n\n      .title\n        font-size $font-size-large\n        font-weight 600\n        border-bottom 1px solid $color-black\n        padding-bottom 10px\n        width 200px\n      .content\n        font-size $font-size-large\n        font-weight 400\n        line-height 30px\n        margin 10px 0\n        .message\n          min-height 30px\n        .files-wrapper\n          flex(flex-end)\n          flex-wrap wrap\n          .file-item\n            display inline-block\n            flex(flex-end)\n            cursor pointer\n            padding-top 10px\n            font-size $font-size-lg2x\n            margin-right 10px\n            .icon\n              margin-right 10px\n\n    .report-container\n      flex(flex-end)\n      padding 15px 0\n      .report-item\n        flex(flex-end)\n        width 200px\n        cursor pointer\n        .icon\n          width 30px\n          height 30px\n          margin-right 15px\n        p\n          font-size $font-size-lg3x\n          font-weight bold\n\n    .chat-item\n      &:hover\n        .name-container\n          .console-wrapper\n            .icon\n              display block !important\n      .avatar-container\n        flex(flex-start)\n        margin 15px 0\n        .icon\n          width 30px\n          height 30px\n          margin-right 15px\n        .name-container\n          width 100%\n          flex(space-between, flex-end)\n          .name-wrapper\n            flex()\n            .name\n              font-size $font-size-large\n              font-weight 500\n              margin-right 10px\n            time\n              font-size $font-size-small\n          .console-wrapper\n            flex()\n            .icon\n              display none\n              width 15px\n              height 15px\n              margin 0 5px\n              cursor pointer\n            .icon-check\n              display block\n              color $color-active\n            .icon-close\n              display block\n\n      .edit-content\n        position relative\n        margin-left 45px\n        :deep() .el-textarea__inner\n          line-height 30px\n          font-size $font-size-large\n          padding 15px\n          border 2px solid $color-active\n\n        .files-wrapper\n          position absolute\n          bottom 15px\n          right 15px\n          flex(flex-end)\n          flex-wrap wrap\n          .file-item\n            position relative\n            display inline-block\n            flex(flex-end)\n            padding-top 10px\n            font-size $font-size-lg2x\n            margin-right 10px\n            .cancel-icon\n              width 10px\n              height 10px\n              position absolute\n              left -5px\n              top 5px\n              cursor pointer\n            .icon\n              margin-right 10px\n      .content\n        background $color-gray\n        border-radius 10px\n        padding 15px\n        margin-left 45px\n    .bottom-container\n      flex(flex-end)\n</style>\n\n<style>\n.textarea-container {\n  display: flex;\n  align-items: center;\n  flex: 1;\n}\n.textarea-container textarea {\n  width: 100%;\n  padding: 11.5px;\n}\n</style>\n","<template>\n  <div v-if=\"project\" id=\"timeline-component\">\n    <template v-if=\"project && project.status.includes('Completed')\">\n      <div v-if=\"endFile\" class=\"fabric-wrapper\">\n        <div\n          class=\"image\"\n          :style=\"{\n            backgroundImage: `url('${formatImageUrl(\n              endFile.file || endFile.image_url\n            ) + '@150-150'}')`\n          }\"\n          @click=\"onImageClick(endFile.id)\"\n        ></div>\n      </div>\n      <div v-else class=\"upload-image-wrapper\" @click=\"onUploadClick('end')\">\n        <div class=\"icon-wrapper\">\n          <font-awesome-icon\n            class=\"icon\"\n            :icon=\"['fas', 'plus']\"\n          ></font-awesome-icon>\n        </div>\n        <div class=\"content-wrapper\">\n          Add\n        </div>\n      </div>\n    </template>\n\n    <div class=\"top-container\">\n      <div class=\"brand\">\n        <img\n          :src=\"formatImageUrl(project.company.buyer.logo)\"\n          :alt=\"project.company.buyer.name\"\n        />\n      </div>\n      <div class=\"brand\">\n        <img :src=\"formatImageUrl(project.company.supplier.logo)\" alt=\"\" />\n      </div>\n    </div>\n\n    <div class=\"main-container\">\n      <div\n        v-for=\"stage in projectStages\"\n        :key=\"stage.id\"\n        :class=\"{ active: stage.id === activeStageId }\"\n      >\n        <div\n          class=\"dot-solid\"\n          :class=\"{\n            right: stage.side === project.company.supplier.id,\n            left: stage.side === project.company.buyer.id\n          }\"\n          @click.stop=\"onDotClick(stage)\"\n        >\n          <div class=\"content primary-container\">\n            <p class=\"time\">\n              {{ dayjs(stage.started_at).format(\"YYYY.MM.DD\") }}\n            </p>\n            <p class=\"name\">{{ stage.name }}</p>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- Start Fabric Image -->\n    <div v-if=\"startFile\" class=\"fabric-wrapper\">\n      <div\n        class=\"image\"\n        :style=\"{\n          backgroundImage: `url('${formatImageUrl(\n            startFile.file || startFile.image_url\n          ) + '@150-150'}')`\n        }\"\n        @click=\"onImageClick(startFile.id)\"\n      >\n        <div v-if=\"!project.status.includes('Completed')\" class=\"edit-button\">\n          <font-awesome-icon\n            class=\"icon\"\n            :icon=\"['fas', 'pen']\"\n            @click.stop=\"onUploadClick('start')\"\n          ></font-awesome-icon>\n        </div>\n      </div>\n    </div>\n    <div v-else class=\"upload-image-wrapper\" @click=\"onUploadClick('start')\">\n      <div class=\"icon-wrapper\">\n        <font-awesome-icon\n          class=\"icon\"\n          :icon=\"['fas', 'plus']\"\n        ></font-awesome-icon>\n      </div>\n      <div class=\"content-wrapper\">\n        Add\n      </div>\n    </div>\n\n    <AddProjectFabricDialog\n      ref=\"addProjectFabricDialog\"\n      @reload=\"onReload\"\n    ></AddProjectFabricDialog>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, PropType, toRefs, computed, ref, Ref } from \"vue\";\nimport dayjs from \"dayjs\";\nimport {\n  Project,\n  ProjectFabricResponse,\n  ProjectStage,\n  Stage\n} from \"@/typings/project\";\nimport { formatImageUrl } from \"@/utils\";\nimport { iCreateDialog } from \"@/typings/component\";\nimport AddProjectFabricDialog from \"./AddProjectFabricDialog.vue\";\nimport { FabricResult } from \"@/typings/fabric\";\n\nconst Component = defineComponent({\n  name: \"Timeline\",\n  components: {\n    AddProjectFabricDialog\n  },\n  props: {\n    project: {\n      type: Object as PropType<Project>,\n      default: null\n    },\n    stage: {\n      type: Object as PropType<Stage>,\n      default: null\n    }\n  },\n  setup(props, { emit }) {\n    const { project, stage } = toRefs(props);\n    const addProjectFabricDialog: Ref<iCreateDialog | null> = ref(null);\n\n    const projectStages = computed(() => {\n      return JSON.parse(JSON.stringify(project.value.stages)).reverse();\n    });\n    const startFile = computed<FabricResult | ProjectFabricResponse | null>(\n      () => {\n        return project.value.start_fabric || project.value.start_fabric_image;\n      }\n    );\n    const endFile = computed<FabricResult | ProjectFabricResponse | null>(\n      () => {\n        return project.value.end_fabric || project.value.end_fabric_image;\n      }\n    );\n    const activeStageId = computed(() => {\n      return stage.value ? stage.value.id : -1;\n    });\n\n    const onDotClick = (data: ProjectStage) => {\n      emit(\"click-stage\", data);\n    };\n\n    const onImageClick = (id: number): void => {\n      const url = `${process.env.VUE_APP_DOMAIN}/web/fabric/${id}`;\n      window.open(url, \"blank\");\n    };\n\n    const onUploadClick = async (type: string) => {\n      if (!addProjectFabricDialog.value) return;\n      addProjectFabricDialog.value.open({ type, id: project.value.id });\n    };\n\n    const onReload = async () => {\n      emit(\"reload\");\n    };\n\n    return {\n      projectStages,\n      addProjectFabricDialog,\n      startFile,\n      endFile,\n      activeStageId,\n\n      onDotClick,\n      onImageClick,\n      onUploadClick,\n      onReload,\n\n      dayjs,\n      formatImageUrl\n    };\n  }\n});\n\nexport default Component;\n</script>\n\n<style scoped lang=\"stylus\">\n#timeline-component\n  width 100%\n  .top-container\n    flex(space-between)\n    padding 15px 0\n    .brand\n      background white\n      flex()\n      box-sizing border-box\n      border-radius 50%\n      border 1px solid $color-border-gray\n      overflow hidden\n      width 60px\n      height 60px\n      img\n        width 100%\n        height auto\n\n  .main-container\n    position relative\n    &:before\n      position absolute\n      content ''\n      width 2px\n      height calc(100% - 100px)\n      background $color-black\n      top 50%\n      left 50%\n      transform translate(-50%, -50%)\n      z-index 1\n\n    .dot\n      position relative\n      height 100px\n      &:before\n        box-sizing border-box\n        border 2px solid $color-black\n        background white\n        position absolute\n        content ''\n        top 50%\n        left 50%\n        transform translate(-50%, -50%)\n        width 20px\n        height 20px\n        border-radius 50%\n        z-index 2\n\n    .dot-solid\n      cursor pointer\n      position relative\n      height 100px\n      &:before\n        position absolute\n        background $color-black\n        content ''\n        top 50%\n        left 50%\n        z-index 2\n        transform translate(-50%, -50%)\n        width 12px\n        height 12px\n        border-radius 50%\n\n    .right\n      position relative\n      &:after\n        content ''\n        position absolute\n        top 50%\n        left 50%\n        transform translate(6px, -50%)\n        height 2px\n        width 50px\n        background $color-black\n      .content\n        position absolute\n        top 0\n        left calc(50% + 70px)\n        text-align left\n\n    .left\n      flex(flex-start)\n      &:after\n        content ''\n        position absolute\n        top 50%\n        right 48%\n        transform translate(-10px, -50%)\n        height 2px\n        width 54px\n        background $color-black\n      .content\n        position absolute\n        top 0\n        right calc(50% + 74px)\n        text-align right\n\n    .primary-container\n      flex(center, flex-start)\n      flex-direction column\n      height 100%\n      .time\n        font-size $font-size-small\n        font-weight 400\n      .name\n        font-size $font-size-large\n        font-weight 500\n\n    .secondary-container\n      flex(center, flex-start)\n      flex-direction column\n      height 100%\n      .name\n        font-size $font-size-lg2x\n        font-weight 500\n\n  .active\n    color $color-active\n    .dot-solid\n      &:before\n        background $color-active\n    .right\n      &:after\n        background $color-active\n    .left\n      &:after\n        background $color-active\n\n  .fabric-wrapper\n    flex()\n    .image\n      position relative\n      background-container(contain)\n      box-sizing border-box\n      border 1px solid $color-black\n      cursor pointer\n      width 150px\n      height 150px\n    .edit-button\n      flex()\n      width 24px\n      height 24px\n      border-radius 50%\n      border 1px solid $color-black\n      box-sizing border-box\n      position absolute\n      bottom -6px\n      right -6px\n      background-color white\n      .icon\n        width 16px\n        height 16px\n  .upload-image-wrapper\n    margin 0 auto\n    width 150px\n    height 150px\n    border 1px solid $color-secondary\n    cursor pointer\n    background white\n    .icon-wrapper\n      flex()\n      border-bottom 1px solid $color-secondary\n      .icon\n        width 80px\n        height 80px\n        padding 20px\n    .content-wrapper\n      flex()\n      height 29px\n      font-weight bold\n      color $color-black\n      font-size $font-size-lg3x\n</style>\n","<template>\n  <div id=\"add-project-fabric-dialog-component\">\n    <el-dialog\n      :title=\"getTitle(step)\"\n      v-model=\"visible\"\n      :width=\"getDialogWidth(step)\"\n      @closed=\"onDialogClosed\"\n      top=\"45px\"\n    >\n      <!--Step 1-->\n      <div class=\"step-1-container\" v-if=\"step === 1\">\n        <h2>Where to add fabric?</h2>\n        <div class=\"buttons-wrapper\">\n          <el-button class=\"button\" type=\"success\" @click=\"onGoFabrics\">\n            Choose from Fabrics\n          </el-button>\n          <div class=\"line\"></div>\n          <el-button class=\"button\" type=\"success\" @click=\"onGoCollections\">\n            Choose from Collections\n          </el-button>\n          <template v-if=\"fabricType === 'start'\">\n            <div class=\"line\"></div>\n            <el-button class=\"button\" type=\"success\" @click=\"onUploadPhoto\">\n              Upload Photo\n            </el-button>\n          </template>\n        </div>\n      </div>\n\n      <!--Step 2 Choose collection-->\n      <div class=\"step-2-container\" v-if=\"step === 2\">\n        <el-row :gutter=\"60\">\n          <el-col v-for=\"item in collectionOptions\" :key=\"item.id\" :span=\"8\">\n            <CollectionCardSelectable\n              :data=\"item\"\n              :selected=\"form.collection === item.id\"\n              @select=\"onCollectionSelect\"\n            ></CollectionCardSelectable>\n          </el-col>\n        </el-row>\n      </div>\n\n      <!--Step 3 Choose collection's fabric-->\n      <div class=\"step-3-container\" v-if=\"step === 3\">\n        <el-row :gutter=\"60\">\n          <el-col v-for=\"item in fabricOptions\" :key=\"item.id\" :span=\"6\">\n            <FabricCardSelectable\n              :data=\"item\"\n              :selected=\"form.fabric === item.id\"\n              @select=\"onFabricSelect\"\n            ></FabricCardSelectable>\n          </el-col>\n        </el-row>\n      </div>\n\n      <!--Step 4 Choose fabric-->\n      <div class=\"step-4-container\" v-if=\"step === 4\">\n        <div class=\"search-bar-wrapper\">\n          <el-input\n            placeholder=\"Search Fabric...\"\n            v-model=\"searchFabricValue\"\n            clearable\n          >\n            <template #prefix>\n              <font-awesome-icon\n                style=\"color: #444444; font-size: 18px;\"\n                :icon=\"['fas', 'search']\"\n              ></font-awesome-icon>\n            </template>\n          </el-input>\n        </div>\n        <el-row :gutter=\"60\">\n          <el-col v-for=\"item in fabricOptions\" :key=\"item.id\" :span=\"6\">\n            <FabricCardSelectable\n              :data=\"item\"\n              :selected=\"form.fabric === item.id\"\n              @select=\"onFabricSelect\"\n            ></FabricCardSelectable>\n          </el-col>\n        </el-row>\n        <div class=\"pagination-wrapper\">\n          <el-pagination\n            v-if=\"pageCount\"\n            background\n            layout=\"prev, pager, next\"\n            :current-page=\"page\"\n            :page-count=\"pageCount\"\n            @current-change=\"onPaginationChange\"\n          >\n          </el-pagination>\n        </div>\n      </div>\n\n      <template #footer>\n        <span class=\"dialog-footer\">\n          <el-button\n            v-if=\"step === 2 || step === 3 || step === 4\"\n            type=\"info\"\n            @click=\"onBack\"\n          >\n            Back\n          </el-button>\n\n          <el-button\n            v-if=\"step === 2\"\n            type=\"success\"\n            @click=\"onGoCollectionFabrics\"\n          >\n            Next\n          </el-button>\n          <el-button\n            v-if=\"step === 3 || step === 4\"\n            type=\"success\"\n            @click=\"onConfirm\"\n          >\n            Done\n          </el-button>\n        </span>\n      </template>\n    </el-dialog>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, ref, reactive, watch, toRefs } from \"vue\";\nimport dayjs from \"dayjs\";\nimport CollectionCardSelectable from \"@/components/CollectionCardSelectable.vue\";\nimport FabricCardSelectable from \"@/components/FabricCardSelectable.vue\";\nimport {\n  FabricCardSelectableEmit,\n  FabricResult,\n  FabricsParams\n} from \"@/typings/fabric\";\nimport {\n  postUploadProjectFabric,\n  putUploadProjectFabric\n} from \"@/apis/project\";\nimport { getCollection, getCollections } from \"@/apis/collection\";\nimport {\n  CollectionCardResponse,\n  CollectionFabrics,\n  CollectionsParams\n} from \"@/typings/collection\";\nimport { getFabrics } from \"@/apis/fabric\";\nimport { ElNotification } from \"element-plus\";\nimport { seasonOptions } from \"@/views/Collection/options\";\nimport { UploadProjectFabricParams } from \"@/typings/project\";\n\nconst getDialogWidth = (step: number) => {\n  return [\"\", \"30%\", \"80%\", \"80%\", \"80%\"][step];\n};\n\nconst getTitle = (step: number) => {\n  return [\n    \"\",\n    \"\",\n    \"Choose Collection\",\n    \"Choose Collection's fabric\",\n    \"Choose Fabric\"\n  ][step];\n};\n\nconst Component = defineComponent({\n  name: \"CreateDialog\",\n  components: {\n    CollectionCardSelectable,\n    FabricCardSelectable\n  },\n  setup(props, { emit }) {\n    const visible = ref(false);\n    const fabricType = ref(\"start\");\n    const projectId = ref(-1);\n    const step = ref(1);\n    const page = ref(1);\n    const pageCount = ref(0);\n    const datePickerDisabled = (date: Date) => {\n      return dayjs(date).isBefore(dayjs());\n    };\n\n    const collectionOptions = ref<CollectionCardResponse[]>([]);\n    const fabricOptions = ref<FabricResult[]>([]);\n    const searchFabricValue = ref(\"\");\n    const form = reactive<{\n      fabric?: number;\n      collection?: number;\n    }>({\n      fabric: undefined,\n      collection: undefined\n    });\n\n    watch([searchFabricValue], async () => {\n      const params: FabricsParams = { q: searchFabricValue.value };\n      const { data } = await getFabrics(params);\n      fabricOptions.value = data.results;\n      page.value = 1;\n      pageCount.value = data.total_pages;\n    });\n\n    const open = async ({ type, id }: { type: string; id: number }) => {\n      fabricType.value = type;\n      projectId.value = id;\n      step.value = 1;\n      visible.value = true;\n    };\n\n    const onGoCollections = async () => {\n      step.value = 2;\n      const { data } = await getCollections({ initiate_project: true });\n      collectionOptions.value = data;\n    };\n\n    const onGoCollectionFabrics = async () => {\n      if (!form.collection) {\n        return ElNotification({\n          type: \"warning\",\n          title: \"Warning\",\n          message: \"You should choose a collection to continue.\"\n        });\n      }\n      searchFabricValue.value = \"\";\n      step.value = 3;\n      const { data } = await getCollection(`${form.collection}`);\n      fabricOptions.value = data.collection_fabrics.map(\n        (it: CollectionFabrics) => it.fabric\n      );\n    };\n\n    const onGoFabrics = async () => {\n      step.value = 4;\n      const params: FabricsParams = {};\n      const { data } = await getFabrics(params);\n      fabricOptions.value = data.results;\n      page.value = 1;\n      pageCount.value = data.total_pages;\n    };\n\n    const onCollectionSelect = (data: FabricCardSelectableEmit) => {\n      if (data.selected) return;\n      form.collection = data.id;\n    };\n\n    const onFabricSelect = (data: FabricCardSelectableEmit) => {\n      if (data.selected) return;\n      form.fabric = data.id;\n    };\n\n    const onPaginationChange = async (_page: number) => {\n      const params: FabricsParams = { page: _page };\n      const { data } = await getFabrics(params);\n      fabricOptions.value = data.results;\n      page.value = _page;\n      pageCount.value = data.total_pages;\n    };\n\n    const onConfirm = async () => {\n      const _form: UploadProjectFabricParams = {};\n      if (form.collection) {\n        _form.collection = form.collection;\n      }\n      if (fabricType.value === \"start\") {\n        _form.start_fabric = form.fabric;\n      }\n      if (fabricType.value === \"end\") {\n        _form.end_fabric = form.fabric;\n      }\n      await putUploadProjectFabric(projectId.value, _form);\n      emit(\"reload\");\n      visible.value = false;\n    };\n\n    const onBack = async () => {\n      form.fabric = undefined;\n      form.collection = undefined;\n      step.value = 1;\n    };\n\n    // Initial\n    const onDialogClosed = () => {\n      step.value = 1;\n      page.value = 1;\n      pageCount.value = 0;\n      collectionOptions.value = [];\n      fabricOptions.value = [];\n      form.fabric = undefined;\n      form.collection = undefined;\n    };\n\n    const onUploadPhoto = () => {\n      const element = document.createElement(\"input\");\n      element.type = \"file\";\n      element.accept = \"image/*\";\n      element.multiple = true;\n      element.addEventListener(\"change\", async () => {\n        if (element.files) {\n          const { data } = await postUploadProjectFabric(element.files[0]);\n          const form: UploadProjectFabricParams = {\n            start_fabric_image: data.id\n          };\n          await putUploadProjectFabric(projectId.value, form);\n          emit(\"reload\");\n          visible.value = false;\n        }\n      });\n      element.click();\n    };\n\n    return {\n      fabricType,\n      visible,\n      step,\n      page,\n      pageCount,\n      form,\n      searchFabricValue,\n      collectionOptions,\n      fabricOptions,\n      seasonOptions,\n\n      open,\n      onGoCollections,\n      onGoCollectionFabrics,\n      onGoFabrics,\n      onCollectionSelect,\n      onFabricSelect,\n      onPaginationChange,\n      onConfirm,\n      onBack,\n      onDialogClosed,\n      onUploadPhoto,\n\n      dayjs,\n      datePickerDisabled,\n      getDialogWidth,\n      getTitle\n    };\n  }\n});\n\nexport default Component;\n</script>\n\n<style scoped lang=\"stylus\">\n#add-project-fabric-dialog-component\n  .step-1-container\n    h2\n      text-align center\n    .buttons-wrapper\n      flex()\n      flex-direction column\n      padding 30px 0 0\n\n      .button\n        height 60px\n        width 200px\n        margin 0\n      .text-button\n        flex()\n        height 100px\n        width 200px\n        margin 0\n        color $color-active\n      .line\n        width 80%\n        height 1px\n        background $color-gray\n        margin 20px auto\n\n  .step-4-container\n    .search-bar-wrapper\n      flex(flex-start)\n      margin-bottom 30px\n      .el-input\n        width 300px\n        :deep() .el-input__prefix\n          flex()\n      p\n        font-weight 400\n        font-size $font-size-large\n        margin-right 15px\n    .pagination-wrapper\n      flex()\n      width 100%\n      padding 15px 0\n</style>\n","\nimport { defineComponent, ref, reactive, watch, toRefs } from \"vue\";\nimport dayjs from \"dayjs\";\nimport CollectionCardSelectable from \"@/components/CollectionCardSelectable.vue\";\nimport FabricCardSelectable from \"@/components/FabricCardSelectable.vue\";\nimport {\n  FabricCardSelectableEmit,\n  FabricResult,\n  FabricsParams\n} from \"@/typings/fabric\";\nimport {\n  postUploadProjectFabric,\n  putUploadProjectFabric\n} from \"@/apis/project\";\nimport { getCollection, getCollections } from \"@/apis/collection\";\nimport {\n  CollectionCardResponse,\n  CollectionFabrics,\n  CollectionsParams\n} from \"@/typings/collection\";\nimport { getFabrics } from \"@/apis/fabric\";\nimport { ElNotification } from \"element-plus\";\nimport { seasonOptions } from \"@/views/Collection/options\";\nimport { UploadProjectFabricParams } from \"@/typings/project\";\n\nconst getDialogWidth = (step: number) => {\n  return [\"\", \"30%\", \"80%\", \"80%\", \"80%\"][step];\n};\n\nconst getTitle = (step: number) => {\n  return [\n    \"\",\n    \"\",\n    \"Choose Collection\",\n    \"Choose Collection's fabric\",\n    \"Choose Fabric\"\n  ][step];\n};\n\nconst Component = defineComponent({\n  name: \"CreateDialog\",\n  components: {\n    CollectionCardSelectable,\n    FabricCardSelectable\n  },\n  setup(props, { emit }) {\n    const visible = ref(false);\n    const fabricType = ref(\"start\");\n    const projectId = ref(-1);\n    const step = ref(1);\n    const page = ref(1);\n    const pageCount = ref(0);\n    const datePickerDisabled = (date: Date) => {\n      return dayjs(date).isBefore(dayjs());\n    };\n\n    const collectionOptions = ref<CollectionCardResponse[]>([]);\n    const fabricOptions = ref<FabricResult[]>([]);\n    const searchFabricValue = ref(\"\");\n    const form = reactive<{\n      fabric?: number;\n      collection?: number;\n    }>({\n      fabric: undefined,\n      collection: undefined\n    });\n\n    watch([searchFabricValue], async () => {\n      const params: FabricsParams = { q: searchFabricValue.value };\n      const { data } = await getFabrics(params);\n      fabricOptions.value = data.results;\n      page.value = 1;\n      pageCount.value = data.total_pages;\n    });\n\n    const open = async ({ type, id }: { type: string; id: number }) => {\n      fabricType.value = type;\n      projectId.value = id;\n      step.value = 1;\n      visible.value = true;\n    };\n\n    const onGoCollections = async () => {\n      step.value = 2;\n      const { data } = await getCollections({ initiate_project: true });\n      collectionOptions.value = data;\n    };\n\n    const onGoCollectionFabrics = async () => {\n      if (!form.collection) {\n        return ElNotification({\n          type: \"warning\",\n          title: \"Warning\",\n          message: \"You should choose a collection to continue.\"\n        });\n      }\n      searchFabricValue.value = \"\";\n      step.value = 3;\n      const { data } = await getCollection(`${form.collection}`);\n      fabricOptions.value = data.collection_fabrics.map(\n        (it: CollectionFabrics) => it.fabric\n      );\n    };\n\n    const onGoFabrics = async () => {\n      step.value = 4;\n      const params: FabricsParams = {};\n      const { data } = await getFabrics(params);\n      fabricOptions.value = data.results;\n      page.value = 1;\n      pageCount.value = data.total_pages;\n    };\n\n    const onCollectionSelect = (data: FabricCardSelectableEmit) => {\n      if (data.selected) return;\n      form.collection = data.id;\n    };\n\n    const onFabricSelect = (data: FabricCardSelectableEmit) => {\n      if (data.selected) return;\n      form.fabric = data.id;\n    };\n\n    const onPaginationChange = async (_page: number) => {\n      const params: FabricsParams = { page: _page };\n      const { data } = await getFabrics(params);\n      fabricOptions.value = data.results;\n      page.value = _page;\n      pageCount.value = data.total_pages;\n    };\n\n    const onConfirm = async () => {\n      const _form: UploadProjectFabricParams = {};\n      if (form.collection) {\n        _form.collection = form.collection;\n      }\n      if (fabricType.value === \"start\") {\n        _form.start_fabric = form.fabric;\n      }\n      if (fabricType.value === \"end\") {\n        _form.end_fabric = form.fabric;\n      }\n      await putUploadProjectFabric(projectId.value, _form);\n      emit(\"reload\");\n      visible.value = false;\n    };\n\n    const onBack = async () => {\n      form.fabric = undefined;\n      form.collection = undefined;\n      step.value = 1;\n    };\n\n    // Initial\n    const onDialogClosed = () => {\n      step.value = 1;\n      page.value = 1;\n      pageCount.value = 0;\n      collectionOptions.value = [];\n      fabricOptions.value = [];\n      form.fabric = undefined;\n      form.collection = undefined;\n    };\n\n    const onUploadPhoto = () => {\n      const element = document.createElement(\"input\");\n      element.type = \"file\";\n      element.accept = \"image/*\";\n      element.multiple = true;\n      element.addEventListener(\"change\", async () => {\n        if (element.files) {\n          const { data } = await postUploadProjectFabric(element.files[0]);\n          const form: UploadProjectFabricParams = {\n            start_fabric_image: data.id\n          };\n          await putUploadProjectFabric(projectId.value, form);\n          emit(\"reload\");\n          visible.value = false;\n        }\n      });\n      element.click();\n    };\n\n    return {\n      fabricType,\n      visible,\n      step,\n      page,\n      pageCount,\n      form,\n      searchFabricValue,\n      collectionOptions,\n      fabricOptions,\n      seasonOptions,\n\n      open,\n      onGoCollections,\n      onGoCollectionFabrics,\n      onGoFabrics,\n      onCollectionSelect,\n      onFabricSelect,\n      onPaginationChange,\n      onConfirm,\n      onBack,\n      onDialogClosed,\n      onUploadPhoto,\n\n      dayjs,\n      datePickerDisabled,\n      getDialogWidth,\n      getTitle\n    };\n  }\n});\n\nexport default Component;\n","import { render } from \"./AddProjectFabricDialog.vue?vue&type=template&id=63381dc4&scoped=true\"\nimport script from \"./AddProjectFabricDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./AddProjectFabricDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./AddProjectFabricDialog.vue?vue&type=style&index=0&id=63381dc4&scoped=true&lang=stylus\"\nscript.render = render\nscript.__scopeId = \"data-v-63381dc4\"\n\nexport default script","\nimport { defineComponent, PropType, toRefs, computed, ref, Ref } from \"vue\";\nimport dayjs from \"dayjs\";\nimport {\n  Project,\n  ProjectFabricResponse,\n  ProjectStage,\n  Stage\n} from \"@/typings/project\";\nimport { formatImageUrl } from \"@/utils\";\nimport { iCreateDialog } from \"@/typings/component\";\nimport AddProjectFabricDialog from \"./AddProjectFabricDialog.vue\";\nimport { FabricResult } from \"@/typings/fabric\";\n\nconst Component = defineComponent({\n  name: \"Timeline\",\n  components: {\n    AddProjectFabricDialog\n  },\n  props: {\n    project: {\n      type: Object as PropType<Project>,\n      default: null\n    },\n    stage: {\n      type: Object as PropType<Stage>,\n      default: null\n    }\n  },\n  setup(props, { emit }) {\n    const { project, stage } = toRefs(props);\n    const addProjectFabricDialog: Ref<iCreateDialog | null> = ref(null);\n\n    const projectStages = computed(() => {\n      return JSON.parse(JSON.stringify(project.value.stages)).reverse();\n    });\n    const startFile = computed<FabricResult | ProjectFabricResponse | null>(\n      () => {\n        return project.value.start_fabric || project.value.start_fabric_image;\n      }\n    );\n    const endFile = computed<FabricResult | ProjectFabricResponse | null>(\n      () => {\n        return project.value.end_fabric || project.value.end_fabric_image;\n      }\n    );\n    const activeStageId = computed(() => {\n      return stage.value ? stage.value.id : -1;\n    });\n\n    const onDotClick = (data: ProjectStage) => {\n      emit(\"click-stage\", data);\n    };\n\n    const onImageClick = (id: number): void => {\n      const url = `${process.env.VUE_APP_DOMAIN}/web/fabric/${id}`;\n      window.open(url, \"blank\");\n    };\n\n    const onUploadClick = async (type: string) => {\n      if (!addProjectFabricDialog.value) return;\n      addProjectFabricDialog.value.open({ type, id: project.value.id });\n    };\n\n    const onReload = async () => {\n      emit(\"reload\");\n    };\n\n    return {\n      projectStages,\n      addProjectFabricDialog,\n      startFile,\n      endFile,\n      activeStageId,\n\n      onDotClick,\n      onImageClick,\n      onUploadClick,\n      onReload,\n\n      dayjs,\n      formatImageUrl\n    };\n  }\n});\n\nexport default Component;\n","import { render } from \"./Timeline.vue?vue&type=template&id=e3ccca7c&scoped=true\"\nimport script from \"./Timeline.vue?vue&type=script&lang=ts\"\nexport * from \"./Timeline.vue?vue&type=script&lang=ts\"\n\nimport \"./Timeline.vue?vue&type=style&index=0&id=e3ccca7c&scoped=true&lang=stylus\"\nscript.render = render\nscript.__scopeId = \"data-v-e3ccca7c\"\n\nexport default script","<template>\n  <div id=\"stage-fabrics-component\">\n    <div class=\"top-wrapper\">\n      <h3 class=\"title\">Fabrics</h3>\n      <div class=\"console-wrapper\">\n        <font-awesome-icon\n          class=\"icon\"\n          :icon=\"['far', 'clone']\"\n          @click=\"onReference\"\n        ></font-awesome-icon>\n        <font-awesome-icon\n          class=\"icon\"\n          :icon=\"['fas', 'upload']\"\n          @click=\"onUpload\"\n        ></font-awesome-icon>\n        <font-awesome-icon\n          class=\"icon\"\n          :icon=\"['fas', 'expand-alt']\"\n          @click=\"onExpand\"\n        ></font-awesome-icon>\n      </div>\n    </div>\n    <el-row v-if=\"stageData.stagemedias.length\" :gutter=\"30\">\n      <el-col\n        v-for=\"item in _.splitAt(3, stageData.stagemedias)[0]\"\n        :key=\"item.id\"\n        :span=\"8\"\n      >\n        <img\n          class=\"fabric-image\"\n          :src=\"formatImageUrl(item.image_url)\"\n          :alt=\"'fabric-image-' + item.id\"\n        />\n      </el-col>\n    </el-row>\n    <div class=\"empty\" v-else>\n      <p>No Data</p>\n    </div>\n    <StageFabricsDuplicateDialog\n      ref=\"uploadDialog\"\n      @load=\"onLoad\"\n    ></StageFabricsDuplicateDialog>\n    <StageFabricsDialog ref=\"fabricDialog\"> </StageFabricsDialog>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, ref, PropType, toRefs } from \"vue\";\nimport * as _ from \"ramda\";\n\nimport StageFabricsDuplicateDialog from \"./StageFabricsDuplicateDialog.vue\";\nimport StageFabricsDialog from \"./StageFabricsDialog.vue\";\nimport { Stage, StageMediaParams } from \"@/typings/project\";\nimport { postStageMediaCreate } from \"@/apis/project\";\nimport { formatImageUrl } from \"@/utils\";\nimport { iCreateDialog } from \"@/typings/component\";\n\nconst Component = defineComponent({\n  name: \"StageFabrics\",\n  components: { StageFabricsDuplicateDialog, StageFabricsDialog },\n  props: {\n    projectId: {\n      type: Number,\n      default: 0\n    },\n    stageData: {\n      type: Object as PropType<Stage>,\n      default: null\n    }\n  },\n  setup(props, { emit }) {\n    const uploadDialog = ref<iCreateDialog | null>(null);\n    const fabricDialog = ref<iCreateDialog | null>(null);\n    const { stageData, projectId } = toRefs(props);\n    const list = ref([]);\n\n    const onReference = () => {\n      if (!uploadDialog.value) return;\n      uploadDialog.value.open({\n        stageId: stageData.value.id,\n        projectId: projectId.value\n      });\n    };\n\n    const onUpload = () => {\n      const element = document.createElement(\"input\");\n      element.type = \"file\";\n      element.accept = \"image/*\";\n      element.multiple = true;\n      element.addEventListener(\"change\", async () => {\n        if (element.files && stageData.value) {\n          for (let i = 0; i < element.files.length; i++) {\n            const params: StageMediaParams = {\n              stage: stageData.value.id,\n              file: element.files[i]\n            };\n            await postStageMediaCreate(params);\n          }\n          emit(\"load\");\n        }\n      });\n      element.click();\n    };\n\n    const onExpand = () => {\n      if (!fabricDialog.value) return;\n      fabricDialog.value.open(stageData.value);\n    };\n\n    const onLoad = () => {\n      emit(\"load\");\n    };\n\n    return {\n      uploadDialog,\n      fabricDialog,\n      list,\n\n      onReference,\n      onUpload,\n      onExpand,\n      onLoad,\n\n      _,\n      formatImageUrl\n    };\n  }\n});\n\nexport default Component;\n</script>\n\n<style scoped lang=\"stylus\">\n#stage-fabrics-component\n  .top-wrapper\n    flex(space-between)\n    padding-bottom 30px\n    .title\n      font-size $font-size-large\n      font-weight 600\n      border-bottom 1px solid $color-black\n      padding-bottom 10px\n      width 200px\n    .console-wrapper\n      flex(space-between)\n      width 100px\n      .icon\n        width 20px\n        height 20px\n        cursor pointer\n  .fabric-image\n    width 100%\n  .empty\n    padding 30px 0\n    text-align center\n    color $color-secondary\n    font-size $font-size-lg3x\n    font-weight 400\n</style>\n","<template>\n  <div id=\"project-stage-fabrics-duplicate-dialog-component\">\n    <el-dialog title=\"Choose Fabric\" v-model=\"visible\" width=\"80%\" top=\"45px\">\n      <div v-if=\"fabricOptions\">\n        <el-row :gutter=\"60\">\n          <el-col\n            v-for=\"item in fabricOptions.results\"\n            :key=\"item.id\"\n            :span=\"6\"\n          >\n            <FabricCardSelectable\n              :data=\"item\"\n              :selected=\"selectValue.includes(item.id)\"\n              @select=\"onFabricSelect\"\n            ></FabricCardSelectable>\n          </el-col>\n        </el-row>\n        <div class=\"pagination-wrapper\">\n          <el-pagination\n            v-if=\"pageCount\"\n            background\n            layout=\"prev, pager, next\"\n            :current-page=\"page\"\n            :page-count=\"pageCount\"\n            @current-change=\"onPaginationChange\"\n          >\n          </el-pagination>\n        </div>\n      </div>\n      <template #footer>\n        <span class=\"dialog-footer\">\n          <el-button type=\"info\" @click=\"visible = false\">\n            Cancel\n          </el-button>\n          <el-button type=\"success\" @click=\"onConfirm\">\n            Done\n          </el-button>\n        </span>\n      </template>\n    </el-dialog>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, ref } from \"vue\";\nimport FabricCardSelectable from \"@/components/FabricCardSelectable.vue\";\nimport {\n  FabricCardSelectableEmit,\n  FabricResult,\n  FabricsParams,\n  FabricsResponse\n} from \"@/typings/fabric\";\nimport { getFabrics } from \"@/apis/fabric\";\nimport { postStageMediaCreate } from \"@/apis/project\";\nimport { StageMediaParams } from \"@/typings/project\";\n\nconst Component = defineComponent({\n  name: \"CreateDialog\",\n  components: {\n    FabricCardSelectable\n  },\n  setup(_, { emit }) {\n    const visible = ref(false);\n    const projectId = ref(0);\n    const stageId = ref(0);\n    const selectValue = ref<number[]>([]);\n    const pageCount = ref(0);\n    const page = ref(1);\n\n    const fabricOptions = ref<FabricsResponse | null>(null);\n\n    const init = async () => {\n      const params: FabricsParams = {\n        to_project: projectId.value,\n        page: page.value\n      };\n      const { data } = await getFabrics(params);\n      fabricOptions.value = data;\n      pageCount.value = data.total_pages;\n    };\n\n    const open = async (data: { stageId: number; projectId: number }) => {\n      projectId.value = data.projectId;\n      stageId.value = data.stageId;\n      visible.value = true;\n      await init();\n    };\n\n    const onFabricSelect = (data: FabricCardSelectableEmit) => {\n      if (data.selected) {\n        selectValue.value = selectValue.value.filter(\n          (selectedId: number) => selectedId !== data.id\n        );\n      } else {\n        selectValue.value = selectValue.value.concat(data.id);\n      }\n    };\n\n    const onConfirm = async () => {\n      if (!fabricOptions.value) return;\n\n      selectValue.value.forEach(async (selectedId: number) => {\n        const target = fabricOptions.value!.results.find(\n          (it: FabricResult) => it.id === selectedId\n        );\n        if (!target) return;\n        const params: StageMediaParams = {\n          stage: stageId.value,\n          demo_fabric: target.id\n        };\n        await postStageMediaCreate(params);\n      });\n\n      emit(\"load\");\n      visible.value = false;\n    };\n\n    const onPaginationChange = async (_page: number) => {\n      page.value = _page;\n      await init();\n    };\n\n    return {\n      visible,\n      selectValue,\n      fabricOptions,\n      page,\n      pageCount,\n\n      open,\n      onConfirm,\n      onFabricSelect,\n      onPaginationChange\n    };\n  }\n});\n\nexport default Component;\n</script>\n\n<style scoped lang=\"stylus\">\n#project-stage-fabrics-duplicate-dialog-component\n  :deep() .el-col\n    margin-bottom 30px\n\n  .pagination-wrapper\n    flex()\n    width 100%\n    padding 30px 0 0\n</style>\n","\nimport { defineComponent, ref } from \"vue\";\nimport FabricCardSelectable from \"@/components/FabricCardSelectable.vue\";\nimport {\n  FabricCardSelectableEmit,\n  FabricResult,\n  FabricsParams,\n  FabricsResponse\n} from \"@/typings/fabric\";\nimport { getFabrics } from \"@/apis/fabric\";\nimport { postStageMediaCreate } from \"@/apis/project\";\nimport { StageMediaParams } from \"@/typings/project\";\n\nconst Component = defineComponent({\n  name: \"CreateDialog\",\n  components: {\n    FabricCardSelectable\n  },\n  setup(_, { emit }) {\n    const visible = ref(false);\n    const projectId = ref(0);\n    const stageId = ref(0);\n    const selectValue = ref<number[]>([]);\n    const pageCount = ref(0);\n    const page = ref(1);\n\n    const fabricOptions = ref<FabricsResponse | null>(null);\n\n    const init = async () => {\n      const params: FabricsParams = {\n        to_project: projectId.value,\n        page: page.value\n      };\n      const { data } = await getFabrics(params);\n      fabricOptions.value = data;\n      pageCount.value = data.total_pages;\n    };\n\n    const open = async (data: { stageId: number; projectId: number }) => {\n      projectId.value = data.projectId;\n      stageId.value = data.stageId;\n      visible.value = true;\n      await init();\n    };\n\n    const onFabricSelect = (data: FabricCardSelectableEmit) => {\n      if (data.selected) {\n        selectValue.value = selectValue.value.filter(\n          (selectedId: number) => selectedId !== data.id\n        );\n      } else {\n        selectValue.value = selectValue.value.concat(data.id);\n      }\n    };\n\n    const onConfirm = async () => {\n      if (!fabricOptions.value) return;\n\n      selectValue.value.forEach(async (selectedId: number) => {\n        const target = fabricOptions.value!.results.find(\n          (it: FabricResult) => it.id === selectedId\n        );\n        if (!target) return;\n        const params: StageMediaParams = {\n          stage: stageId.value,\n          demo_fabric: target.id\n        };\n        await postStageMediaCreate(params);\n      });\n\n      emit(\"load\");\n      visible.value = false;\n    };\n\n    const onPaginationChange = async (_page: number) => {\n      page.value = _page;\n      await init();\n    };\n\n    return {\n      visible,\n      selectValue,\n      fabricOptions,\n      page,\n      pageCount,\n\n      open,\n      onConfirm,\n      onFabricSelect,\n      onPaginationChange\n    };\n  }\n});\n\nexport default Component;\n","import { render } from \"./StageFabricsDuplicateDialog.vue?vue&type=template&id=2dd2201c&scoped=true\"\nimport script from \"./StageFabricsDuplicateDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./StageFabricsDuplicateDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./StageFabricsDuplicateDialog.vue?vue&type=style&index=0&id=2dd2201c&scoped=true&lang=stylus\"\nscript.render = render\nscript.__scopeId = \"data-v-2dd2201c\"\n\nexport default script","<template>\n  <div id=\"project-stage-fabrics-duplicate-dialog-component\">\n    <el-dialog title=\"Fabric\" v-model=\"visible\" width=\"500px\" top=\"45px\">\n      <div class=\"fabric-images-container\">\n        <div class=\"main-image-container\">\n          <div class=\"main-image\">\n            <FabricImageWith3DMode\n              :image=\"formatImageUrl(mainFile)\"\n            ></FabricImageWith3DMode>\n          </div>\n        </div>\n        <el-carousel\n          height=\"150px\"\n          :autoplay=\"false\"\n          arrow=\"always\"\n          indicator-position=\"none\"\n        >\n          <el-carousel-item\n            v-for=\"(item, index) in _.splitEvery(3, list)\"\n            :key=\"index\"\n          >\n            <div class=\"carouse-item\">\n              <img\n                v-for=\"(_item, _index) in item\"\n                :key=\"_index\"\n                class=\"secondary-image\"\n                :class=\"{ active: _item.id === selectedId }\"\n                :src=\"formatImageUrl(_item.image_url) + '@250-250'\"\n                :alt=\"_item.name\"\n                @click=\"onCarouseItemClick(_item.id)\"\n              />\n            </div>\n          </el-carousel-item>\n        </el-carousel>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, ref, computed } from \"vue\";\nimport * as _ from \"ramda\";\n\nimport FabricImageWith3DMode from \"@/components/FabricImageWith3DMode.vue\";\nimport { Attachment, Stage } from \"@/typings/project\";\nimport { formatImageUrl } from \"@/utils\";\n\nconst Component = defineComponent({\n  name: \"StageFabricsDialog\",\n  components: {\n    FabricImageWith3DMode\n  },\n  setup() {\n    const visible = ref(false);\n    const selectedId = ref(0);\n    const mainFile = ref(\"\");\n    const list = ref<Attachment[]>([]);\n\n    const open = async (data: Stage) => {\n      list.value = data.stagemedias;\n      if (list.value.length) {\n        selectedId.value = list.value[0].id;\n        mainFile.value = list.value[0].image_url;\n      }\n      visible.value = true;\n    };\n\n    const onCarouseItemClick = (id: number) => {\n      selectedId.value = id;\n      const target = list.value.find((it: Attachment) => it.id === id);\n      if (target) {\n        mainFile.value = target.image_url;\n      } else {\n        mainFile.value = \"\";\n      }\n    };\n\n    return {\n      list,\n      visible,\n      mainFile,\n      selectedId,\n\n      open,\n      onCarouseItemClick,\n\n      formatImageUrl,\n      _\n    };\n  }\n});\n\nexport default Component;\n</script>\n\n<style scoped lang=\"stylus\">\n#project-stage-fabrics-duplicate-dialog-component\n  .fabric-images-container\n    .main-image-container\n      position relative\n      width 100%\n      padding-bottom 100%\n      margin-bottom 20px\n      .main-image\n        position absolute\n        top 0\n        right 0\n        bottom 0\n        left 0\n    .carouse-item\n      margin 0\n      height 150px\n      flex(flex-start)\n      img\n        cursor pointer\n\n    .secondary-image\n      width 30%\n      height 120px\n      margin 0 1.5%\n    .active\n      border 2px solid $color-active\n\n  :deep() .el-carousel\n    padding 0 25px\n\n  :deep() .carouse-item\n    margin 0 40px\n\n  :deep() .el-carousel__arrow\n    background transparent\n    color black\n    font-size $font-size-title\n    font-weight 900\n\n  :deep() .el-carousel__arrow--right\n    right -30px\n\n  :deep() .el-carousel__arrow--left\n    left -30px\n\n  :deep() .el-dialog__header\n    .title\n      font-size $font-size-title\n      padding-bottom 10px\n    .description\n      font-size $font-size-lg3x\n</style>\n","\nimport { defineComponent, ref, computed } from \"vue\";\nimport * as _ from \"ramda\";\n\nimport FabricImageWith3DMode from \"@/components/FabricImageWith3DMode.vue\";\nimport { Attachment, Stage } from \"@/typings/project\";\nimport { formatImageUrl } from \"@/utils\";\n\nconst Component = defineComponent({\n  name: \"StageFabricsDialog\",\n  components: {\n    FabricImageWith3DMode\n  },\n  setup() {\n    const visible = ref(false);\n    const selectedId = ref(0);\n    const mainFile = ref(\"\");\n    const list = ref<Attachment[]>([]);\n\n    const open = async (data: Stage) => {\n      list.value = data.stagemedias;\n      if (list.value.length) {\n        selectedId.value = list.value[0].id;\n        mainFile.value = list.value[0].image_url;\n      }\n      visible.value = true;\n    };\n\n    const onCarouseItemClick = (id: number) => {\n      selectedId.value = id;\n      const target = list.value.find((it: Attachment) => it.id === id);\n      if (target) {\n        mainFile.value = target.image_url;\n      } else {\n        mainFile.value = \"\";\n      }\n    };\n\n    return {\n      list,\n      visible,\n      mainFile,\n      selectedId,\n\n      open,\n      onCarouseItemClick,\n\n      formatImageUrl,\n      _\n    };\n  }\n});\n\nexport default Component;\n","import { render } from \"./StageFabricsDialog.vue?vue&type=template&id=4c875014&scoped=true\"\nimport script from \"./StageFabricsDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./StageFabricsDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./StageFabricsDialog.vue?vue&type=style&index=0&id=4c875014&scoped=true&lang=stylus\"\nscript.render = render\nscript.__scopeId = \"data-v-4c875014\"\n\nexport default script","\nimport { defineComponent, ref, PropType, toRefs } from \"vue\";\nimport * as _ from \"ramda\";\n\nimport StageFabricsDuplicateDialog from \"./StageFabricsDuplicateDialog.vue\";\nimport StageFabricsDialog from \"./StageFabricsDialog.vue\";\nimport { Stage, StageMediaParams } from \"@/typings/project\";\nimport { postStageMediaCreate } from \"@/apis/project\";\nimport { formatImageUrl } from \"@/utils\";\nimport { iCreateDialog } from \"@/typings/component\";\n\nconst Component = defineComponent({\n  name: \"StageFabrics\",\n  components: { StageFabricsDuplicateDialog, StageFabricsDialog },\n  props: {\n    projectId: {\n      type: Number,\n      default: 0\n    },\n    stageData: {\n      type: Object as PropType<Stage>,\n      default: null\n    }\n  },\n  setup(props, { emit }) {\n    const uploadDialog = ref<iCreateDialog | null>(null);\n    const fabricDialog = ref<iCreateDialog | null>(null);\n    const { stageData, projectId } = toRefs(props);\n    const list = ref([]);\n\n    const onReference = () => {\n      if (!uploadDialog.value) return;\n      uploadDialog.value.open({\n        stageId: stageData.value.id,\n        projectId: projectId.value\n      });\n    };\n\n    const onUpload = () => {\n      const element = document.createElement(\"input\");\n      element.type = \"file\";\n      element.accept = \"image/*\";\n      element.multiple = true;\n      element.addEventListener(\"change\", async () => {\n        if (element.files && stageData.value) {\n          for (let i = 0; i < element.files.length; i++) {\n            const params: StageMediaParams = {\n              stage: stageData.value.id,\n              file: element.files[i]\n            };\n            await postStageMediaCreate(params);\n          }\n          emit(\"load\");\n        }\n      });\n      element.click();\n    };\n\n    const onExpand = () => {\n      if (!fabricDialog.value) return;\n      fabricDialog.value.open(stageData.value);\n    };\n\n    const onLoad = () => {\n      emit(\"load\");\n    };\n\n    return {\n      uploadDialog,\n      fabricDialog,\n      list,\n\n      onReference,\n      onUpload,\n      onExpand,\n      onLoad,\n\n      _,\n      formatImageUrl\n    };\n  }\n});\n\nexport default Component;\n","import { render } from \"./StageFabrics.vue?vue&type=template&id=3f5c9d03&scoped=true\"\nimport script from \"./StageFabrics.vue?vue&type=script&lang=ts\"\nexport * from \"./StageFabrics.vue?vue&type=script&lang=ts\"\n\nimport \"./StageFabrics.vue?vue&type=style&index=0&id=3f5c9d03&scoped=true&lang=stylus\"\nscript.render = render\nscript.__scopeId = \"data-v-3f5c9d03\"\n\nexport default script","<template>\n  <div id=\"project-users-dialog-component\">\n    <el-dialog title=\"Manage Users\" v-model=\"visible\" width=\"40%\" top=\"45px\">\n      <div class=\"inputs-container\">\n        <div class=\"select-item flex\">\n          <p>Owner: {{ owner }}</p>\n        </div>\n        <div v-if=\"canChange\" class=\"select-item\">\n          <p>Add Users:</p>\n          <el-select v-model=\"selectValue\" filterable placeholder=\"Select\">\n            <el-option\n              v-for=\"item in options\"\n              :key=\"item.value\"\n              :label=\"item.label\"\n              :value=\"item.value\"\n              :disabled=\"item.checked\"\n            >\n            </el-option>\n          </el-select>\n        </div>\n        <div class=\"tag-container\" v-if=\"tags.length\">\n          <p>Users:</p>\n          <FilterTag\n            v-for=\"tag in tags\"\n            :key=\"tag.value\"\n            :data=\"tag.label\"\n            :closable=\"canChange\"\n            @close=\"onTagCloseClick(tag.value)\"\n          ></FilterTag>\n        </div>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, ref, computed, watch } from \"vue\";\n\nimport FilterTag from \"@/components/FilterTag.vue\";\nimport { OptionItem, OptionItemResponse } from \"@/typings/asideFilter\";\nimport { AvailableMember, JoinedMember, User } from \"@/typings/collection\";\nimport {\n  getProjectAvailableMember,\n  getProjectJoinedMembers,\n  postProjectJoinedMemberUpdate\n} from \"@/apis/project\";\nimport { Project, ProjectUpdateJoinedMemberParams } from \"@/typings/project\";\n\nconst Component = defineComponent({\n  name: \"UsersDialog\",\n  components: {\n    FilterTag\n  },\n  setup() {\n    const visible = ref(false);\n    const projectId = ref(0);\n    const owner = ref(\"\");\n    const canChange = ref(false);\n    const joinedMembers = ref<JoinedMember[]>([]);\n    const availableMembers = ref<AvailableMember[]>([]);\n    const selectValue = ref(\"\");\n    const lock = ref(false);\n\n    const tags = computed<OptionItemResponse[]>(() => {\n      return joinedMembers.value.reduce(\n        (list: OptionItemResponse[], company: JoinedMember) => {\n          const userList = company.users.reduce(\n            (_list: OptionItemResponse[], user: User) => {\n              const item: OptionItemResponse = {\n                label: company.company_name + \"-\" + user.username,\n                value: `${user.id}`\n              };\n              return [..._list, item];\n            },\n            []\n          );\n          return [...list, ...userList];\n        },\n        []\n      );\n    });\n\n    const options = computed<OptionItem[]>(() => {\n      return availableMembers.value.map((item: AvailableMember) => ({\n        label: item.username,\n        value: item.member_id,\n        checked: false\n      }));\n    });\n\n    const init = async () => {\n      if (canChange.value) {\n        const { data: availableResponse } = await getProjectAvailableMember({\n          id: projectId.value,\n          q: \"\"\n        });\n        availableMembers.value = availableResponse;\n      }\n\n      const { data: joinedResponse } = await getProjectJoinedMembers(\n        projectId.value\n      );\n      joinedMembers.value = joinedResponse;\n    };\n\n    watch(selectValue, async id => {\n      if (!id || typeof id !== \"number\") return;\n      const params: ProjectUpdateJoinedMemberParams = {\n        id: projectId.value,\n        joined_member: id\n      };\n      await postProjectJoinedMemberUpdate(params);\n      selectValue.value = \"\";\n      await init();\n    });\n\n    const open = async (data: Project) => {\n      projectId.value = data.id;\n      owner.value = data.owner__nickname;\n      canChange.value = data.can_change_joined_members;\n      visible.value = true;\n      await init();\n    };\n\n    const onTagCloseClick = async (id: number) => {\n      if (lock.value) return;\n\n      lock.value = true;\n      try {\n        const params: ProjectUpdateJoinedMemberParams = {\n          id: projectId.value,\n          joined_member: id\n        };\n        await postProjectJoinedMemberUpdate(params);\n        await init();\n      } finally {\n        lock.value = false;\n      }\n    };\n\n    return {\n      tags,\n      options,\n      visible,\n      canChange,\n      selectValue,\n      owner,\n\n      open,\n      onTagCloseClick\n    };\n  }\n});\n\nexport default Component;\n</script>\n\n<style scoped lang=\"stylus\">\n#project-users-dialog-component\n  .select-item\n    margin-bottom 30px\n    p\n      margin 10px 0\n      font-size 16px\n      font-weight 600\n\n    :deep() .el-select\n      width 100%\n  .flex\n    padding-right 30px\n    flex(space-between)\n    .copy\n      cursor pointer\n      border-bottom 1px solid $color-secondary\n  .tag-container\n    margin-top 20px\n    p\n      margin 10px 0\n      font-size 16px\n      font-weight 600\n</style>\n","\nimport { defineComponent, ref, computed, watch } from \"vue\";\n\nimport FilterTag from \"@/components/FilterTag.vue\";\nimport { OptionItem, OptionItemResponse } from \"@/typings/asideFilter\";\nimport { AvailableMember, JoinedMember, User } from \"@/typings/collection\";\nimport {\n  getProjectAvailableMember,\n  getProjectJoinedMembers,\n  postProjectJoinedMemberUpdate\n} from \"@/apis/project\";\nimport { Project, ProjectUpdateJoinedMemberParams } from \"@/typings/project\";\n\nconst Component = defineComponent({\n  name: \"UsersDialog\",\n  components: {\n    FilterTag\n  },\n  setup() {\n    const visible = ref(false);\n    const projectId = ref(0);\n    const owner = ref(\"\");\n    const canChange = ref(false);\n    const joinedMembers = ref<JoinedMember[]>([]);\n    const availableMembers = ref<AvailableMember[]>([]);\n    const selectValue = ref(\"\");\n    const lock = ref(false);\n\n    const tags = computed<OptionItemResponse[]>(() => {\n      return joinedMembers.value.reduce(\n        (list: OptionItemResponse[], company: JoinedMember) => {\n          const userList = company.users.reduce(\n            (_list: OptionItemResponse[], user: User) => {\n              const item: OptionItemResponse = {\n                label: company.company_name + \"-\" + user.username,\n                value: `${user.id}`\n              };\n              return [..._list, item];\n            },\n            []\n          );\n          return [...list, ...userList];\n        },\n        []\n      );\n    });\n\n    const options = computed<OptionItem[]>(() => {\n      return availableMembers.value.map((item: AvailableMember) => ({\n        label: item.username,\n        value: item.member_id,\n        checked: false\n      }));\n    });\n\n    const init = async () => {\n      if (canChange.value) {\n        const { data: availableResponse } = await getProjectAvailableMember({\n          id: projectId.value,\n          q: \"\"\n        });\n        availableMembers.value = availableResponse;\n      }\n\n      const { data: joinedResponse } = await getProjectJoinedMembers(\n        projectId.value\n      );\n      joinedMembers.value = joinedResponse;\n    };\n\n    watch(selectValue, async id => {\n      if (!id || typeof id !== \"number\") return;\n      const params: ProjectUpdateJoinedMemberParams = {\n        id: projectId.value,\n        joined_member: id\n      };\n      await postProjectJoinedMemberUpdate(params);\n      selectValue.value = \"\";\n      await init();\n    });\n\n    const open = async (data: Project) => {\n      projectId.value = data.id;\n      owner.value = data.owner__nickname;\n      canChange.value = data.can_change_joined_members;\n      visible.value = true;\n      await init();\n    };\n\n    const onTagCloseClick = async (id: number) => {\n      if (lock.value) return;\n\n      lock.value = true;\n      try {\n        const params: ProjectUpdateJoinedMemberParams = {\n          id: projectId.value,\n          joined_member: id\n        };\n        await postProjectJoinedMemberUpdate(params);\n        await init();\n      } finally {\n        lock.value = false;\n      }\n    };\n\n    return {\n      tags,\n      options,\n      visible,\n      canChange,\n      selectValue,\n      owner,\n\n      open,\n      onTagCloseClick\n    };\n  }\n});\n\nexport default Component;\n","import { render } from \"./UsersDialog.vue?vue&type=template&id=ac59c5ee&scoped=true\"\nimport script from \"./UsersDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./UsersDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./UsersDialog.vue?vue&type=style&index=0&id=ac59c5ee&scoped=true&lang=stylus\"\nscript.render = render\nscript.__scopeId = \"data-v-ac59c5ee\"\n\nexport default script","<template>\n  <div id=\"create-stage-dialog-component\">\n    <el-dialog title=\"Add Stage\" v-model=\"visible\" width=\"50%\" top=\"45px\">\n      <div class=\"input-name-wrapper\">\n        <el-select\n          class=\"select\"\n          popper-class=\"select-popper\"\n          v-model=\"form.side\"\n        >\n          <el-option\n            v-for=\"item in sideOptions\"\n            :key=\"item.value\"\n            :label=\"item.label\"\n            :value=\"item.value\"\n          ></el-option>\n        </el-select>\n        <el-autocomplete\n          class=\"input\"\n          v-model=\"form.name\"\n          :fetch-suggestions=\"onQuerySearch\"\n          placeholder=\"Stage name...\"\n        ></el-autocomplete>\n      </div>\n\n      <div class=\"price-wrapper\">\n        <label>\n          Started At:\n        </label>\n        <el-date-picker\n          v-model=\"form.started_at\"\n          :style=\"{ width: '100%' }\"\n          value-format=\"YYYY-MM-DDThh:mm:ss\"\n          placeholder=\"Select Date\"\n        >\n        </el-date-picker>\n      </div>\n\n      <div class=\"price-wrapper\">\n        <label>\n          Price:\n        </label>\n        <el-input\n          class=\"input\"\n          v-model=\"form.price\"\n          placeholder=\"Stage price...\"\n          type=\"number\"\n        ></el-input>\n      </div>\n\n      <div class=\"textarea-wrapper\">\n        <el-input\n          type=\"textarea\"\n          placeholder=\"Stage description...\"\n          v-model=\"form.description\"\n          :rows=\"10\"\n        ></el-input>\n        <div class=\"upload-wrapper\">\n          <font-awesome-icon\n            class=\"paperclip\"\n            :icon=\"['fas', 'paperclip']\"\n            @click=\"onUploadClick\"\n          ></font-awesome-icon>\n          <div v-if=\"filesStore\" class=\"count\">\n            {{ filesStore.length }}\n          </div>\n        </div>\n      </div>\n\n      <div class=\"bottom-wrapper\">\n        <font-awesome-icon\n          class=\"alert-icon\"\n          :icon=\"['fas', 'info-circle']\"\n        ></font-awesome-icon>\n        <p class=\"alert-text\">Cannot edit after adding stage</p>\n        <el-button type=\"info\" @click=\"onDoneClick\">Add Stage</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, ref, reactive, watch } from \"vue\";\nimport { Project, StageCreateInputs } from \"@/typings/project\";\nimport { OptionItem } from \"@/typings/asideFilter\";\nimport { getStagenames, postCreateStage } from \"@/apis/project\";\n\nconst Component = defineComponent({\n  name: \"CreateStageDialog\",\n  setup(_, { emit }) {\n    const visible = ref(false);\n    const sideOptions = ref<OptionItem[]>([]);\n    const filesStore = ref<FileList | null>(null);\n    const options = ref<string[]>([]);\n    const form = reactive<StageCreateInputs>({\n      name: \"\",\n      description: \"\",\n      project: -1,\n      side: -1,\n      price: 0,\n      started_at: \"\"\n    });\n\n    const fetchOptions = async () => {\n      const { data } = await getStagenames(form.project, form.side);\n      options.value = data;\n    };\n\n    const open = async (data: Project) => {\n      form.name = \"\";\n      form.description = \"\";\n      form.project = data.id;\n      form.side = data.company.supplier.id;\n      form.price = 0;\n      form.started_at = \"\";\n      filesStore.value = null;\n\n      sideOptions.value = [\n        {\n          label: data.company.supplier.name,\n          value: data.company.supplier.id,\n          checked: false\n        },\n        {\n          label: data.company.buyer.name,\n          value: data.company.buyer.id,\n          checked: false\n        }\n      ];\n\n      visible.value = true;\n    };\n\n    const createFilter = (queryString: string) => {\n      return (option: string) => {\n        return option.toLowerCase().indexOf(queryString.toLowerCase()) === 0;\n      };\n    };\n\n    watch(() => form.side, fetchOptions);\n\n    const onQuerySearch = async (queryString: string, cb: Function) => {\n      const results = queryString\n        ? options.value.filter(createFilter(queryString))\n        : options.value;\n      cb(results.map((text: string) => ({ value: text })));\n    };\n\n    const onUploadClick = () => {\n      const element = document.createElement(\"input\");\n      element.type = \"file\";\n      element.accept = \"image/*\";\n      element.multiple = true;\n      element.addEventListener(\"change\", async () => {\n        if (element.files) {\n          filesStore.value = element.files;\n        }\n      });\n      element.click();\n    };\n\n    const onDoneClick = async () => {\n      if (filesStore.value) {\n        form.files = filesStore.value;\n      }\n      visible.value = false;\n      await postCreateStage(form);\n      emit(\"load\");\n    };\n\n    return {\n      visible,\n      form,\n      sideOptions,\n      filesStore,\n\n      open,\n      onQuerySearch,\n      onUploadClick,\n      onDoneClick\n    };\n  }\n});\n\nexport default Component;\n</script>\n\n<style scoped lang=\"stylus\">\n#create-stage-dialog-component\n  .input-name-wrapper\n    margin-left -10px\n    flex()\n    .select\n      width 30%\n      transform translateX(10px)\n      z-index 9\n      :deep() .el-input__inner\n        background $color-button-gray\n        border $color-button-gray\n        color white\n        height 50px\n      :deep() .el-select__caret\n        height 50px\n  .price-wrapper\n    flex()\n    margin-top 15px\n    label\n      padding-left 15px\n      width calc(40% - 20px)\n      font-size $font-size-lg3x\n      white-space nowrap\n\n  :deep() .el-autocomplete\n    border 3px solid $color-button-gray\n    border-radius 8px\n    width 100%\n    height 42px\n    .el-input__inner\n      height 42px\n      &:focus\n        border none\n\n  .textarea-wrapper\n    position relative\n    margin 20px 0\n\n    :deep() .el-textarea__inner\n      border 3px solid $color-button-gray\n      border-radius 8px\n      padding 15px\n\n    .upload-wrapper\n      position absolute\n      right 15px\n      bottom 15px\n      .paperclip\n        width 30px\n        height 30px\n        margin-left 15px\n        cursor pointer\n      .count\n        flex()\n        position absolute\n        right -10px\n        top -10px\n        border-radius 50%\n        width 18px\n        height 18px\n        font-size $font-size-normal\n        background $color-active\n        color white\n  .bottom-wrapper\n    flex(flex-end)\n    .alert-icon\n      font-size 15px\n      margin-right 10px\n    .alert-text\n      font-size $font-size-normal\n      line-height 15px\n      margin-right 15px\n</style>\n\n<style lang=\"stylus\">\n.select-popper\n  background $color-button-gray\n  border $color-button-gray !important\n  .el-popper__arrow::before\n    background $color-button-gray !important\n  .el-select-dropdown__item\n    background $color-button-gray\n    color white\n  .selected\n    color $color-active\n</style>\n","\nimport { defineComponent, ref, reactive, watch } from \"vue\";\nimport { Project, StageCreateInputs } from \"@/typings/project\";\nimport { OptionItem } from \"@/typings/asideFilter\";\nimport { getStagenames, postCreateStage } from \"@/apis/project\";\n\nconst Component = defineComponent({\n  name: \"CreateStageDialog\",\n  setup(_, { emit }) {\n    const visible = ref(false);\n    const sideOptions = ref<OptionItem[]>([]);\n    const filesStore = ref<FileList | null>(null);\n    const options = ref<string[]>([]);\n    const form = reactive<StageCreateInputs>({\n      name: \"\",\n      description: \"\",\n      project: -1,\n      side: -1,\n      price: 0,\n      started_at: \"\"\n    });\n\n    const fetchOptions = async () => {\n      const { data } = await getStagenames(form.project, form.side);\n      options.value = data;\n    };\n\n    const open = async (data: Project) => {\n      form.name = \"\";\n      form.description = \"\";\n      form.project = data.id;\n      form.side = data.company.supplier.id;\n      form.price = 0;\n      form.started_at = \"\";\n      filesStore.value = null;\n\n      sideOptions.value = [\n        {\n          label: data.company.supplier.name,\n          value: data.company.supplier.id,\n          checked: false\n        },\n        {\n          label: data.company.buyer.name,\n          value: data.company.buyer.id,\n          checked: false\n        }\n      ];\n\n      visible.value = true;\n    };\n\n    const createFilter = (queryString: string) => {\n      return (option: string) => {\n        return option.toLowerCase().indexOf(queryString.toLowerCase()) === 0;\n      };\n    };\n\n    watch(() => form.side, fetchOptions);\n\n    const onQuerySearch = async (queryString: string, cb: Function) => {\n      const results = queryString\n        ? options.value.filter(createFilter(queryString))\n        : options.value;\n      cb(results.map((text: string) => ({ value: text })));\n    };\n\n    const onUploadClick = () => {\n      const element = document.createElement(\"input\");\n      element.type = \"file\";\n      element.accept = \"image/*\";\n      element.multiple = true;\n      element.addEventListener(\"change\", async () => {\n        if (element.files) {\n          filesStore.value = element.files;\n        }\n      });\n      element.click();\n    };\n\n    const onDoneClick = async () => {\n      if (filesStore.value) {\n        form.files = filesStore.value;\n      }\n      visible.value = false;\n      await postCreateStage(form);\n      emit(\"load\");\n    };\n\n    return {\n      visible,\n      form,\n      sideOptions,\n      filesStore,\n\n      open,\n      onQuerySearch,\n      onUploadClick,\n      onDoneClick\n    };\n  }\n});\n\nexport default Component;\n","import { render } from \"./CreateStageDialog.vue?vue&type=template&id=2ba33000&scoped=true\"\nimport script from \"./CreateStageDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./CreateStageDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./CreateStageDialog.vue?vue&type=style&index=0&id=2ba33000&scoped=true&lang=stylus\"\nimport \"./CreateStageDialog.vue?vue&type=style&index=1&id=2ba33000&lang=stylus\"\nscript.render = render\nscript.__scopeId = \"data-v-2ba33000\"\n\nexport default script","<template>\n  <div id=\"fabric-create-project-dialog-component\">\n    <el-dialog title=\"Edit Stage\" v-model=\"visible\" width=\"40%\" top=\"45px\">\n      <div class=\"inputs-container\">\n        <el-row :gutter=\"30\">\n          <el-col :span=\"24\">\n            <p class=\"label\">Name</p>\n            <el-autocomplete\n              class=\"input\"\n              v-model=\"form.name\"\n              :fetch-suggestions=\"onQuerySearch\"\n              placeholder=\"Stage name...\"\n            ></el-autocomplete>\n          </el-col>\n          <el-col :span=\"24\">\n            <p class=\"label\">Price</p>\n            <el-input v-model=\"form.price\" type=\"number\" clearable></el-input>\n          </el-col>\n          <el-col :span=\"24\">\n            <p class=\"label\">Description</p>\n            <el-input\n              type=\"textarea\"\n              placeholder=\"Stage description...\"\n              v-model=\"form.description\"\n              :rows=\"10\"\n            ></el-input>\n          </el-col>\n        </el-row>\n      </div>\n      <template #footer>\n        <span class=\"dialog-footer\">\n          <el-button type=\"info\" @click=\"visible = false\">Cancel</el-button>\n          <el-button type=\"success\" @click=\"onConfirm\">\n            Done\n          </el-button>\n        </span>\n      </template>\n    </el-dialog>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, ref, reactive } from \"vue\";\nimport { getStagenames, postUpdateStage } from \"@/apis/project\";\nimport { ProjectStage, StageUpdate, Project } from \"@/typings/project\";\n\nconst Component = defineComponent({\n  name: \"StageEditDialog\",\n  setup(_, { emit }) {\n    const visible = ref(false);\n    const stagenameOptions = ref<string[]>([]);\n\n    const form = reactive<StageUpdate>({\n      id: -1,\n      name: \"\",\n      price: 0,\n      description: \"\"\n    });\n\n    const fetchOptions = async (project: Project) => {\n      const { data } = await getStagenames(\n        project.id,\n        project.company.supplier.id\n      );\n      stagenameOptions.value = data;\n    };\n\n    const open = async ({\n      project,\n      stage\n    }: {\n      project: Project;\n      stage: ProjectStage;\n    }) => {\n      visible.value = true;\n      form.id = stage.id;\n      form.name = stage.name;\n      form.price = stage.price;\n      form.description = stage.description;\n\n      await fetchOptions(project);\n    };\n\n    const createFilter = (queryString: string) => {\n      return (option: string) => {\n        return option.toLowerCase().indexOf(queryString.toLowerCase()) === 0;\n      };\n    };\n\n    const onQuerySearch = async (queryString: string, cb: Function) => {\n      const results = queryString\n        ? stagenameOptions.value.filter(createFilter(queryString))\n        : stagenameOptions.value;\n      cb(results.map((text: string) => ({ value: text })));\n    };\n\n    const onConfirm = async () => {\n      await postUpdateStage(form);\n      visible.value = false;\n      emit(\"load\");\n    };\n\n    return {\n      form,\n      visible,\n      stagenameOptions,\n\n      open,\n      onQuerySearch,\n      onConfirm\n    };\n  }\n});\n\nexport default Component;\n</script>\n\n<style scoped lang=\"stylus\">\n#fabric-create-project-dialog-component\n  .inputs-container\n    padding 0 10%\n    .label\n      text-align start\n      font-size $font-size-large\n      font-weight 500\n      padding 0 8px\n      margin-bottom 15px\n\n    :deep() .el-col\n      margin-bottom 30px\n\n    :deep() .el-input\n      width 100%\n\n    :deep() .el-select\n      width 100%\n</style>\n","\nimport { defineComponent, ref, reactive } from \"vue\";\nimport { getStagenames, postUpdateStage } from \"@/apis/project\";\nimport { ProjectStage, StageUpdate, Project } from \"@/typings/project\";\n\nconst Component = defineComponent({\n  name: \"StageEditDialog\",\n  setup(_, { emit }) {\n    const visible = ref(false);\n    const stagenameOptions = ref<string[]>([]);\n\n    const form = reactive<StageUpdate>({\n      id: -1,\n      name: \"\",\n      price: 0,\n      description: \"\"\n    });\n\n    const fetchOptions = async (project: Project) => {\n      const { data } = await getStagenames(\n        project.id,\n        project.company.supplier.id\n      );\n      stagenameOptions.value = data;\n    };\n\n    const open = async ({\n      project,\n      stage\n    }: {\n      project: Project;\n      stage: ProjectStage;\n    }) => {\n      visible.value = true;\n      form.id = stage.id;\n      form.name = stage.name;\n      form.price = stage.price;\n      form.description = stage.description;\n\n      await fetchOptions(project);\n    };\n\n    const createFilter = (queryString: string) => {\n      return (option: string) => {\n        return option.toLowerCase().indexOf(queryString.toLowerCase()) === 0;\n      };\n    };\n\n    const onQuerySearch = async (queryString: string, cb: Function) => {\n      const results = queryString\n        ? stagenameOptions.value.filter(createFilter(queryString))\n        : stagenameOptions.value;\n      cb(results.map((text: string) => ({ value: text })));\n    };\n\n    const onConfirm = async () => {\n      await postUpdateStage(form);\n      visible.value = false;\n      emit(\"load\");\n    };\n\n    return {\n      form,\n      visible,\n      stagenameOptions,\n\n      open,\n      onQuerySearch,\n      onConfirm\n    };\n  }\n});\n\nexport default Component;\n","import { render } from \"./StageEditDialog.vue?vue&type=template&id=cbff4862&scoped=true\"\nimport script from \"./StageEditDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./StageEditDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./StageEditDialog.vue?vue&type=style&index=0&id=cbff4862&scoped=true&lang=stylus\"\nscript.render = render\nscript.__scopeId = \"data-v-cbff4862\"\n\nexport default script","<template>\n  <el-dialog\n    custom-class=\"inform-dialog-component\"\n    v-model=\"visible\"\n    :width=\"step === 1 ? '400px' : '900px'\"\n    top=\"45px\"\n  >\n    <h2>{{ title }}</h2>\n    <template v-if=\"step === 1\">\n      <div class=\"buttons-wrapper\">\n        <el-button class=\"button\" type=\"success\" @click=\"onConfirm\">\n          Confirm\n        </el-button>\n        <el-button class=\"button\" type=\"info\" @click=\"visible = false\">\n          Cancel\n        </el-button>\n      </div>\n    </template>\n    <template v-if=\"step === 2\">\n      <div class=\"item-container\">\n        <label>Brand:</label>\n        <p>{{ project.company.buyer.name }}</p>\n      </div>\n      <div class=\"item-container\">\n        <label>Email:</label>\n        <div class=\"email-tags-wrapper\">\n          <FilterTag\n            v-for=\"(member, index) in members\"\n            :key=\"index\"\n            :data=\"`${member.username} <${member.email}>`\"\n            :closable=\"true\"\n            @close=\"onTagCloseClick(member.email)\"\n          ></FilterTag>\n        </div>\n      </div>\n      <div class=\"item-container\">\n        <label>Email Subject:</label>\n        <el-input v-model=\"subjectValue\" clearable> </el-input>\n      </div>\n      <div class=\"textarea-container\">\n        <label>Text:</label>\n        <el-input\n          type=\"textarea\"\n          rows=\"5\"\n          v-model=\"textValue\"\n          placeholder=\"Text...\"\n        >\n        </el-input>\n      </div>\n      <div class=\"buttons-wrapper\">\n        <el-button class=\"button\" type=\"success\" @click=\"onSend\">\n          Send\n        </el-button>\n        <el-button class=\"button\" type=\"info\" @click=\"visible = false\">\n          Cancel\n        </el-button>\n      </div>\n    </template>\n  </el-dialog>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, ref } from \"vue\";\nimport { Project } from \"@/typings/project\";\nimport FilterTag from \"@/components/FilterTag.vue\";\nimport { postInform, getInform } from \"@/apis/project\";\nimport { ElNotification } from \"element-plus\";\n\nconst Component = defineComponent({\n  name: \"InformDialog\",\n  components: {\n    FilterTag\n  },\n  setup(_) {\n    const visible = ref(false);\n    const step = ref(1);\n    const project = ref<Project | null>(null);\n    const projectId = ref(0);\n    const title = ref(\"\");\n    const members = ref<{ username: string; email: string }[]>([]);\n    const subjectValue = ref(\"\");\n    const textValue = ref(\"\");\n\n    function getTarget(data: Project): string {\n      const { side, company } = data;\n      const { buyer, supplier } = company;\n      if (buyer.id === side) return supplier.name;\n      if (supplier.id === side) return buyer.name;\n      return \"unknown\";\n    }\n\n    const open = async (data: Project) => {\n      step.value = 1;\n      members.value = [];\n      project.value = data;\n      projectId.value = data.id;\n      title.value = `Inform ${getTarget(data)} ?`;\n      visible.value = true;\n    };\n\n    const onTagCloseClick = (email: string) => {\n      members.value = members.value.filter(\n        (member: { username: string; email: string }) => member.email !== email\n      );\n    };\n\n    const onConfirm = async () => {\n      try {\n        const { data } = await getInform(projectId.value);\n        members.value = data.members;\n        title.value = `Inform Email`;\n        const projectName = project.value ? project.value.name : \"unknown\";\n        subjectValue.value = `Informed of a new established status of ${projectName}.`;\n        textValue.value = `${data.sender.username} has informed you of a new established status of project ${projectName}.\\nTo check the project, visit https://weaverbird.bilabasia.com/web, and take necessary action.`;\n        step.value = 2;\n      } catch (e) {\n        visible.value = false;\n      }\n    };\n\n    const onSend = async () => {\n      try {\n        await postInform(\n          projectId.value,\n          subjectValue.value,\n          textValue.value,\n          members.value\n            .map((member: { username: string; email: string }) => member.email)\n            .filter((email: string | null) => !!email)\n        );\n        ElNotification({\n          title: \"Success\",\n          type: \"success\",\n          message: `Informed successfully`\n        });\n      } finally {\n        visible.value = false;\n      }\n    };\n\n    return {\n      visible,\n      step,\n      project,\n      title,\n      members,\n      subjectValue,\n      textValue,\n\n      open,\n      onTagCloseClick,\n      onConfirm,\n      onSend\n    };\n  }\n});\n\nexport default Component;\n</script>\n\n<style scoped lang=\"stylus\">\n.inform-dialog-component\n  h2\n    text-align center\n    font-weight 500\n\n  .checkbox-container\n    margin-top 30px\n    display flex\n    justify-content center\n    align-items center\n\n  .buttons-wrapper\n    padding 30px 0 0\n    flex()\n\n  .button\n    margin 0 15px\n    width 30%\n    height 40px\n\n  .item-container\n    flex(flex-start)\n    margin-top 15px\n    label\n      min-width 200px\n      font-size $font-size-lg2x\n      font-weight bold\n      margin-right 15px\n    p\n      font-size $font-size-lg2x\n      font-weight 500\n  .textarea-container\n    flex(flex-start, flex-start, column)\n    margin-top 15px\n    label\n      font-size $font-size-lg2x\n      font-weight bold\n      margin-bottom 15px\n    p\n      font-size $font-size-lg2x\n      font-weight 500\n</style>\n","\nimport { defineComponent, ref } from \"vue\";\nimport { Project } from \"@/typings/project\";\nimport FilterTag from \"@/components/FilterTag.vue\";\nimport { postInform, getInform } from \"@/apis/project\";\nimport { ElNotification } from \"element-plus\";\n\nconst Component = defineComponent({\n  name: \"InformDialog\",\n  components: {\n    FilterTag\n  },\n  setup(_) {\n    const visible = ref(false);\n    const step = ref(1);\n    const project = ref<Project | null>(null);\n    const projectId = ref(0);\n    const title = ref(\"\");\n    const members = ref<{ username: string; email: string }[]>([]);\n    const subjectValue = ref(\"\");\n    const textValue = ref(\"\");\n\n    function getTarget(data: Project): string {\n      const { side, company } = data;\n      const { buyer, supplier } = company;\n      if (buyer.id === side) return supplier.name;\n      if (supplier.id === side) return buyer.name;\n      return \"unknown\";\n    }\n\n    const open = async (data: Project) => {\n      step.value = 1;\n      members.value = [];\n      project.value = data;\n      projectId.value = data.id;\n      title.value = `Inform ${getTarget(data)} ?`;\n      visible.value = true;\n    };\n\n    const onTagCloseClick = (email: string) => {\n      members.value = members.value.filter(\n        (member: { username: string; email: string }) => member.email !== email\n      );\n    };\n\n    const onConfirm = async () => {\n      try {\n        const { data } = await getInform(projectId.value);\n        members.value = data.members;\n        title.value = `Inform Email`;\n        const projectName = project.value ? project.value.name : \"unknown\";\n        subjectValue.value = `Informed of a new established status of ${projectName}.`;\n        textValue.value = `${data.sender.username} has informed you of a new established status of project ${projectName}.\\nTo check the project, visit https://weaverbird.bilabasia.com/web, and take necessary action.`;\n        step.value = 2;\n      } catch (e) {\n        visible.value = false;\n      }\n    };\n\n    const onSend = async () => {\n      try {\n        await postInform(\n          projectId.value,\n          subjectValue.value,\n          textValue.value,\n          members.value\n            .map((member: { username: string; email: string }) => member.email)\n            .filter((email: string | null) => !!email)\n        );\n        ElNotification({\n          title: \"Success\",\n          type: \"success\",\n          message: `Informed successfully`\n        });\n      } finally {\n        visible.value = false;\n      }\n    };\n\n    return {\n      visible,\n      step,\n      project,\n      title,\n      members,\n      subjectValue,\n      textValue,\n\n      open,\n      onTagCloseClick,\n      onConfirm,\n      onSend\n    };\n  }\n});\n\nexport default Component;\n","import { render } from \"./InformDialog.vue?vue&type=template&id=0270001b&scoped=true\"\nimport script from \"./InformDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./InformDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./InformDialog.vue?vue&type=style&index=0&id=0270001b&scoped=true&lang=stylus\"\nscript.render = render\nscript.__scopeId = \"data-v-0270001b\"\n\nexport default script","<template>\n  <el-dialog\n    custom-class=\"end-dialog-component\"\n    v-model=\"visible\"\n    width=\"600px\"\n    top=\"45px\"\n    @closed=\"step = 1\"\n  >\n    <template v-if=\"step === 1\">\n      <h2>End Project</h2>\n      <div class=\"buttons-wrapper\">\n        <div class=\"button-container\">\n          <el-button class=\"button\" type=\"info\" @click=\"step = 2\">\n            Drop\n          </el-button>\n          <p class=\"text info\">Drop the project and</p>\n          <p class=\"text info\">input the reason of dropping.</p>\n        </div>\n        <div class=\"button-container\">\n          <el-button class=\"button\" type=\"success\" @click=\"onConfirm(true)\">\n            Complete\n          </el-button>\n          <p class=\"text success\">Project completed successfully.</p>\n          <p class=\"text success\">Upload the outcome fabric.</p>\n        </div>\n      </div>\n    </template>\n    <template v-if=\"step === 2\">\n      <h2>Why did the project fail?</h2>\n      <el-input class=\"textarea\" type=\"textarea\" rows=\"6\" v-model=\"textValue\">\n      </el-input>\n      <div class=\"buttons-wrapper\">\n        <el-button class=\"button\" type=\"info\" @click=\"onConfirm(false)\">\n          Done\n        </el-button>\n      </div>\n    </template>\n  </el-dialog>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, ref } from \"vue\";\nimport { postProjectStatusUpdate } from \"@/apis/project\";\nimport { Project } from \"@/typings/project\";\nimport { ElNotification } from \"element-plus\";\nimport { useRouter } from \"vue-router\";\n\nconst Component = defineComponent({\n  name: \"EndDialog\",\n  setup(_, { emit }) {\n    const router = useRouter();\n    const visible = ref(false);\n    const textValue = ref(\"\");\n    const projectId = ref(0);\n    const step = ref(1);\n\n    const open = async (data: Project) => {\n      projectId.value = data.id;\n      visible.value = true;\n    };\n\n    const onConfirm = async (success: boolean) => {\n      if (success) {\n        await router.push({\n          name: \"FabricUpload\",\n          query: { id: projectId.value }\n        });\n      } else {\n        const { data } = await postProjectStatusUpdate({\n          id: projectId.value,\n          success: false,\n          reason: textValue.value\n        });\n        ElNotification({\n          title: \"Success\",\n          type: \"success\",\n          message: `Change status to ${data.status}.`\n        });\n        emit(\"load\");\n        visible.value = false;\n      }\n    };\n\n    return {\n      visible,\n      textValue,\n      step,\n\n      open,\n      onConfirm\n    };\n  }\n});\n\nexport default Component;\n</script>\n\n<style scoped lang=\"stylus\">\n.end-dialog-component\n  h2\n    text-align center\n    font-weight 500\n\n  .textarea\n    width 340px\n    margin-top 30px\n\n  .buttons-wrapper\n    margin 0 auto\n    width 400px\n    padding 30px 0 0\n    flex(space-between)\n    flex-direction row-reverse\n    .button-container\n      flex()\n      flex-direction column\n      width 50%\n      .button\n        height 40px\n        margin-bottom 15px\n      .text\n        font-size $font-size-small\n      .success\n        color $color-active\n      .info\n        color $color-secondary\n</style>\n\n<style lang=\"stylus\">\n.end-dialog-component\n  .el-dialog__body\n    flex(flex-start)\n    flex-direction column\n</style>\n","\nimport { defineComponent, ref } from \"vue\";\nimport { postProjectStatusUpdate } from \"@/apis/project\";\nimport { Project } from \"@/typings/project\";\nimport { ElNotification } from \"element-plus\";\nimport { useRouter } from \"vue-router\";\n\nconst Component = defineComponent({\n  name: \"EndDialog\",\n  setup(_, { emit }) {\n    const router = useRouter();\n    const visible = ref(false);\n    const textValue = ref(\"\");\n    const projectId = ref(0);\n    const step = ref(1);\n\n    const open = async (data: Project) => {\n      projectId.value = data.id;\n      visible.value = true;\n    };\n\n    const onConfirm = async (success: boolean) => {\n      if (success) {\n        await router.push({\n          name: \"FabricUpload\",\n          query: { id: projectId.value }\n        });\n      } else {\n        const { data } = await postProjectStatusUpdate({\n          id: projectId.value,\n          success: false,\n          reason: textValue.value\n        });\n        ElNotification({\n          title: \"Success\",\n          type: \"success\",\n          message: `Change status to ${data.status}.`\n        });\n        emit(\"load\");\n        visible.value = false;\n      }\n    };\n\n    return {\n      visible,\n      textValue,\n      step,\n\n      open,\n      onConfirm\n    };\n  }\n});\n\nexport default Component;\n","import { render } from \"./EndDialog.vue?vue&type=template&id=8123c9e8&scoped=true\"\nimport script from \"./EndDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./EndDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./EndDialog.vue?vue&type=style&index=0&id=8123c9e8&scoped=true&lang=stylus\"\nimport \"./EndDialog.vue?vue&type=style&index=1&id=8123c9e8&lang=stylus\"\nscript.render = render\nscript.__scopeId = \"data-v-8123c9e8\"\n\nexport default script","\nimport { defineComponent, ref, onMounted, watch, toRefs, computed } from \"vue\";\nimport { useRouter } from \"vue-router\";\nimport dayjs from \"dayjs\";\n\nimport Timeline from \"./Timeline.vue\";\nimport StageFabrics from \"./StageFabrics.vue\";\nimport UsersDialog from \"./UsersDialog.vue\";\nimport CreateStageDialog from \"./CreateStageDialog.vue\";\nimport StageEditDialog from \"./StageEditDialog.vue\";\nimport InformDialog from \"./InformDialog.vue\";\nimport EndDialog from \"./EndDialog.vue\";\n\nimport { formatImageUrl, loading } from \"@/utils\";\nimport {\n  deleteDicussionFile,\n  getAvaliableOptions,\n  getProject,\n  getProjectStage,\n  postCreateDiscussion,\n  postDeleteDiscussion,\n  postEditDiscussion\n} from \"@/apis/project\";\nimport {\n  Attachment,\n  DiscussionInput,\n  Project,\n  ProjectStage,\n  Stage\n} from \"@/typings/project\";\nimport { iCreateDialog } from \"@/typings/component\";\nimport { ElNotification } from \"element-plus\";\nimport { useStore } from \"vuex\";\nimport { PostNotificationReadByProject } from \"@/typings/store\";\n\nconst colors = [\"#5470c6\", \"#91cc76\", \"#f8c858\", \"#e66\"];\n\nconst getTagColor = (tag: string): string => {\n  const adapter: Adapter<string> = {\n    \"In Progress\": colors[0],\n    Completed: colors[1],\n    \"Completed but delayed\": colors[1],\n    Dropped: colors[3],\n    Delayed: colors[2],\n    default: \"\"\n  };\n  return adapter[tag] || adapter.default;\n};\n\nconst getHasButtons = (project: Project | null): boolean => {\n  if (!project) return false;\n  const adapter: Adapter<boolean> = {\n    \"In Progress\": true,\n    Completed: true,\n    \"Completed but delayed\": false,\n    Dropped: false,\n    Delayed: true,\n    default: false\n  };\n  return adapter[project.status] || adapter.default;\n};\n\nconst Component = defineComponent({\n  name: \"ProjectDetail\",\n  components: {\n    Timeline,\n    StageFabrics,\n    UsersDialog,\n    CreateStageDialog,\n    StageEditDialog,\n    InformDialog,\n    EndDialog\n  },\n  props: {\n    id: {\n      type: String,\n      default: \"\"\n    }\n  },\n  setup(props) {\n    const store = useStore();\n    const router = useRouter();\n    const { id } = toRefs(props);\n    const rightContainer = ref<iCreateDialog | null>(null);\n    const usersDialog = ref<iCreateDialog | null>(null);\n    const createStageDialog = ref<iCreateDialog | null>(null);\n    const editStageDialog = ref<iCreateDialog | null>(null);\n    const informDialog = ref<iCreateDialog | null>(null);\n    const endDialog = ref<iCreateDialog | null>(null);\n\n    const projectData = ref<Project | null>(null);\n    const projectStage = ref<ProjectStage | null>(null);\n    const stageData = ref<Stage | null>(null);\n    const garmentFactories = ref<{ id: number; name: string }[] | null>(null);\n    const discussionValue = ref(\"\");\n    const editDiscussionId = ref(-1);\n    const isOpenInputDiscussion = ref(true);\n    const filesStore = ref<FileList | null>(null);\n    const newestId = ref(-1);\n\n    const hasButtons = computed(() => getHasButtons(projectData.value));\n\n    const getGarmentFactoryName = (id: number): string => {\n      if (!garmentFactories.value) return \"\";\n      const target = garmentFactories.value!.find(\n        (it: { id: number; name: string }) => it.id === id\n      );\n      return target ? target.name : \"\";\n    };\n\n    const fetchStageDetail = async (stage: ProjectStage) => {\n      projectStage.value = stage;\n      const { data } = await getProjectStage(stage.id);\n      stageData.value = data;\n      // @ts-ignore\n      rightContainer.value && (rightContainer.value.$el.scrollTop = 0);\n    };\n\n    const init = async () => {\n      const loadingInstance = loading();\n      try {\n        const { data: factories } = await getAvaliableOptions(\n          \"garment_factory\"\n        );\n        garmentFactories.value = factories.brands;\n        const { data } = await getProject(parseInt(id.value, 10));\n        projectData.value = data;\n\n        if (data.stages.length) {\n          const target = data.stages[data.stages.length - 1];\n          newestId.value = target.id;\n          await fetchStageDetail(target);\n        }\n\n        // Set all notifications read.\n        await store.dispatch(\n          PostNotificationReadByProject,\n          parseInt(id.value, 10)\n        );\n      } catch (_) {\n        await router.replace({ name: \"Error\" });\n      } finally {\n        loadingInstance.close();\n      }\n    };\n\n    onMounted(init);\n    watch([id], init);\n\n    const onUsersClick = () => {\n      if (!usersDialog.value || !projectData.value) return;\n      usersDialog.value.open(projectData.value);\n    };\n\n    const onAddStageClick = () => {\n      if (!createStageDialog.value || !projectData.value) return;\n      if (!projectData.value.can_add_stage) {\n        return ElNotification({\n          type: \"warning\",\n          title: \"No permission\",\n          message: \"You have no permission to do this.\"\n        });\n      }\n      createStageDialog.value.open(projectData.value);\n    };\n    const onEditStageClick = () => {\n      if (!editStageDialog.value || !projectStage.value) return;\n      editStageDialog.value.open({\n        project: projectData.value,\n        stage: projectStage.value\n      });\n    };\n    const onInformClick = () => {\n      if (!informDialog.value || !projectData.value) return;\n      informDialog.value.open(projectData.value);\n    };\n    const onEndClick = () => {\n      if (!endDialog.value || !projectData.value) return;\n      endDialog.value.open(projectData.value);\n    };\n    const onStageClick = async (data: ProjectStage) => {\n      await fetchStageDetail(data);\n    };\n    const onNewline = () => {\n      discussionValue.value = `${discussionValue.value}\\n`;\n    };\n    const onDiscuss = async () => {\n      if (!discussionValue.value && !filesStore.value) return;\n\n      isOpenInputDiscussion.value = false;\n      try {\n        const params: DiscussionInput = {\n          project: parseInt(id.value, 10),\n          message: discussionValue.value\n        };\n        if (filesStore.value) params.files = filesStore.value;\n\n        // Reset\n        discussionValue.value = \"\";\n        filesStore.value = null;\n\n        await postCreateDiscussion(params);\n\n        // re-fetch\n        const { data } = await getProject(parseInt(id.value, 10));\n        projectData.value = data;\n      } finally {\n        isOpenInputDiscussion.value = true;\n      }\n    };\n    const onDiscussionEditClick = async (_id: number, message: string) => {\n      await postEditDiscussion(_id, message);\n      const { data } = await getProject(parseInt(id.value, 10));\n      projectData.value = data;\n      editDiscussionId.value = -1;\n    };\n    const onDiscussionDeleteClick = async (_id: number) => {\n      await postDeleteDiscussion(_id);\n      ElNotification({\n        type: \"success\",\n        title: \"Delete Discussion\",\n        message: \"Success delete discussion.\"\n      });\n      const { data } = await getProject(parseInt(id.value, 10));\n      projectData.value = data;\n    };\n    const onDiscussionFileDeleteClick = async (_id: number) => {\n      await deleteDicussionFile(_id);\n      ElNotification({\n        type: \"success\",\n        title: \"Delete File\",\n        message: \"Success delete file.\"\n      });\n      const { data } = await getProject(parseInt(id.value, 10));\n      projectData.value = data;\n    };\n\n    const onUploadClick = () => {\n      if (!projectStage.value) return;\n\n      const element = document.createElement(\"input\");\n      element.type = \"file\";\n      element.accept = \"image/*\";\n      element.multiple = true;\n      element.addEventListener(\"change\", async () => {\n        if (!projectStage.value) return;\n\n        if (element.files) {\n          filesStore.value = element.files;\n        }\n      });\n      element.click();\n    };\n\n    const onAttachmentDownload = (data: Attachment) => {\n      window.open(formatImageUrl(data.file));\n    };\n\n    const onLoad = async () => {\n      await init();\n    };\n\n    const onStageFabricsLoad = async () => {\n      if (!projectStage.value) return;\n      const { data } = await getProjectStage(projectStage.value.id);\n      stageData.value = data;\n    };\n\n    return {\n      rightContainer,\n      usersDialog,\n      createStageDialog,\n      editStageDialog,\n      informDialog,\n      endDialog,\n      projectData,\n      stageData,\n      garmentFactories,\n      discussionValue,\n      isOpenInputDiscussion,\n      filesStore,\n      projectStage,\n      newestId,\n      editDiscussionId,\n      hasButtons,\n\n      onUsersClick,\n      onAddStageClick,\n      onEditStageClick,\n      onInformClick,\n      onEndClick,\n      onStageClick,\n      onNewline,\n      onDiscuss,\n      onDiscussionEditClick,\n      onDiscussionDeleteClick,\n      onDiscussionFileDeleteClick,\n      onUploadClick,\n      onAttachmentDownload,\n      onLoad,\n      onStageFabricsLoad,\n\n      getTagColor,\n      getGarmentFactoryName,\n      dayjs\n    };\n  }\n});\n\nexport default Component;\n","import { render } from \"./ProjectDetail.vue?vue&type=template&id=0eb96195&scoped=true\"\nimport script from \"./ProjectDetail.vue?vue&type=script&lang=ts\"\nexport * from \"./ProjectDetail.vue?vue&type=script&lang=ts\"\n\nimport \"./ProjectDetail.vue?vue&type=style&index=0&id=0eb96195&scoped=true&lang=stylus\"\nimport \"./ProjectDetail.vue?vue&type=style&index=1&id=0eb96195&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-0eb96195\"\n\nexport default script","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./StageFabricsDialog.vue?vue&type=style&index=0&id=4c875014&scoped=true&lang=stylus\"","<template>\n  <el-tag\n    id=\"filter-tag-component\"\n    type=\"success\"\n    size=\"medium\"\n    :closable=\"closable\"\n    :disable-transitions=\"false\"\n    @close=\"onCloseTag\"\n  >\n    {{ data }}\n  </el-tag>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, toRefs } from \"vue\";\n\nconst Component = defineComponent({\n  name: \"FilterTag\",\n  props: {\n    data: {\n      type: String,\n      default: \"\"\n    },\n    closable: {\n      type: Boolean,\n      default: false\n    }\n  },\n  setup(props, context) {\n    const { data } = toRefs(props);\n\n    const onCloseTag = () => {\n      context.emit(\"close\", data.value);\n    };\n\n    return {\n      onCloseTag\n    };\n  }\n});\n\nexport default Component;\n</script>\n\n<style scoped lang=\"stylus\">\n#filter-tag-component\n  margin 0 15px 10px 0\n  background $color-tag-background\n  color $color-tag-text\n  padding 0 15px\n  height 40px\n  line-height 38px\n  font-size $font-size-large\n</style>\n","\nimport { defineComponent, toRefs } from \"vue\";\n\nconst Component = defineComponent({\n  name: \"FilterTag\",\n  props: {\n    data: {\n      type: String,\n      default: \"\"\n    },\n    closable: {\n      type: Boolean,\n      default: false\n    }\n  },\n  setup(props, context) {\n    const { data } = toRefs(props);\n\n    const onCloseTag = () => {\n      context.emit(\"close\", data.value);\n    };\n\n    return {\n      onCloseTag\n    };\n  }\n});\n\nexport default Component;\n","import { render } from \"./FilterTag.vue?vue&type=template&id=b8791da2&scoped=true\"\nimport script from \"./FilterTag.vue?vue&type=script&lang=ts\"\nexport * from \"./FilterTag.vue?vue&type=script&lang=ts\"\n\nimport \"./FilterTag.vue?vue&type=style&index=0&id=b8791da2&scoped=true&lang=stylus\"\nscript.render = render\nscript.__scopeId = \"data-v-b8791da2\"\n\nexport default script"],"sourceRoot":""}