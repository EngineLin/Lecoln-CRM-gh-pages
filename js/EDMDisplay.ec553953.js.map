{"version":3,"sources":["webpack:///./node_modules/core-js/internals/get-substitution.js","webpack:///./node_modules/core-js/modules/es.string.trim.js","webpack:///./node_modules/core-js/modules/es.string.replace.js","webpack:///./src/views/EDM/EDMDisplay.vue?303c","webpack:///./src/apis/member.ts","webpack:///./src/views/EDM/SendConfirmDialog.vue?0ac1","webpack:///./src/utils/createInviteHtml.ts","webpack:///./src/views/EDM/InviteDialog.vue?8a81","webpack:///./src/views/EDM/InviteConfirmDialog.vue?188b","webpack:///./src/views/EDM/EDMDisplay.vue","webpack:///./src/views/EDM/InviteDialog.vue","webpack:///./src/views/EDM/InviteDialog.vue?d562","webpack:///./src/views/EDM/InviteDialog.vue?a623","webpack:///./src/views/EDM/InviteConfirmDialog.vue","webpack:///./src/views/EDM/InviteConfirmDialog.vue?1081","webpack:///./src/views/EDM/InviteConfirmDialog.vue?b8d0","webpack:///./src/views/EDM/SendConfirmDialog.vue","webpack:///./src/views/EDM/SendConfirmDialog.vue?d7c3","webpack:///./src/views/EDM/SendConfirmDialog.vue?9eca","webpack:///./src/views/EDM/EDMDisplay.vue?4107","webpack:///./src/views/EDM/EDMDisplay.vue?fe53","webpack:///./node_modules/core-js/internals/string-trim-forced.js"],"names":["toObject","floor","Math","replace","SUBSTITUTION_SYMBOLS","SUBSTITUTION_SYMBOLS_NO_NAMED","module","exports","matched","str","position","captures","namedCaptures","replacement","tailPos","length","m","symbols","undefined","call","match","ch","capture","charAt","slice","n","f","$","$trim","trim","forcedStringTrimMethod","target","proto","forced","this","fixRegExpWellKnownSymbolLogic","anObject","toLength","toInteger","requireObjectCoercible","advanceStringIndex","getSubstitution","regExpExec","max","min","maybeToString","it","String","REPLACE","nativeReplace","maybeCallNative","reason","REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE","REPLACE_KEEPS_$0","UNSAFE_SUBSTITUTE","searchValue","replaceValue","O","replacer","regexp","indexOf","res","done","value","rx","S","functionalReplace","global","fullUnicode","unicode","lastIndex","results","result","push","matchStr","accumulatedResult","nextSourcePosition","i","index","j","groups","replacerArgs","concat","apply","getMembers","category","q","params","url","method","getMember","id","getMemberRoles","getMemberTeams","getMemberBusinessUnits","postMember","data","email","nickname","role","teams","phone","active","business_unit","postMemberPassword","postMemberAvatar","file","FormData","append","JSON","stringify","postContactUs","createCover","coverImage","createInviteHtml","company","text","class","subject","placeholder","emailList","title","key","type","onEditClick","onSendClick","messageBody","split","msg","coverPhoto","src","formatImageUrl","alt","message","collections","item","span","style","fabric","name","real_composition","ref","onInviteDialogNext","onInviteDialogConfirm","onSendDialogConfirm","custom-class","visible","width","disabled","form","brand","fetch-suggestions","onQuerySearchBrand","label","businessUnit","onQuerySearchBusinessUnit","rows","onCancel","onSubmit","initText","Component","setup","_","emit","companyList","businessUnitList","isLock","init","companies","map","open","createFilter","queryString","option","toLowerCase","cb","filter","test","trial_type","html_message","render","__scopeId","top","footer","onConfirm","checkList","checked","emails","components","SendConfirmDialog","InviteConfirmDialog","InviteDialog","props","Number","default","store","router","inviteDialog","sendConfirmDialog","inviteConfirmDialog","brandName","collectionId","inviteIndex","inviteEmails","detail","state","edm","tempCollections","collection","fetchCollection","dispatch","collection_fabrics","loadingInstance","recipient_brand","message_body","cover_photo","chosen_collection","recipients","close","send","invite","recipient_list","mail","sender","checkEmailListSend","noIncludesEmailList","includes","includesEmailList","confirm","distinguishCancelAndClose","confirmButtonText","cancelButtonText","then","fails","whitespaces","non","METHOD_NAME"],"mappings":"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","file":"js/EDMDisplay.ec553953.js","sourcesContent":["var toObject = require('../internals/to-object');\n\nvar floor = Math.floor;\nvar replace = ''.replace;\nvar SUBSTITUTION_SYMBOLS = /\\$([$&'`]|\\d{1,2}|<[^>]*>)/g;\nvar SUBSTITUTION_SYMBOLS_NO_NAMED = /\\$([$&'`]|\\d{1,2})/g;\n\n// `GetSubstitution` abstract operation\n// https://tc39.es/ecma262/#sec-getsubstitution\nmodule.exports = function (matched, str, position, captures, namedCaptures, replacement) {\n  var tailPos = position + matched.length;\n  var m = captures.length;\n  var symbols = SUBSTITUTION_SYMBOLS_NO_NAMED;\n  if (namedCaptures !== undefined) {\n    namedCaptures = toObject(namedCaptures);\n    symbols = SUBSTITUTION_SYMBOLS;\n  }\n  return replace.call(replacement, symbols, function (match, ch) {\n    var capture;\n    switch (ch.charAt(0)) {\n      case '$': return '$';\n      case '&': return matched;\n      case '`': return str.slice(0, position);\n      case \"'\": return str.slice(tailPos);\n      case '<':\n        capture = namedCaptures[ch.slice(1, -1)];\n        break;\n      default: // \\d\\d?\n        var n = +ch;\n        if (n === 0) return match;\n        if (n > m) {\n          var f = floor(n / 10);\n          if (f === 0) return match;\n          if (f <= m) return captures[f - 1] === undefined ? ch.charAt(1) : captures[f - 1] + ch.charAt(1);\n          return match;\n        }\n        capture = captures[n - 1];\n    }\n    return capture === undefined ? '' : capture;\n  });\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar $trim = require('../internals/string-trim').trim;\nvar forcedStringTrimMethod = require('../internals/string-trim-forced');\n\n// `String.prototype.trim` method\n// https://tc39.es/ecma262/#sec-string.prototype.trim\n$({ target: 'String', proto: true, forced: forcedStringTrimMethod('trim') }, {\n  trim: function trim() {\n    return $trim(this);\n  }\n});\n","'use strict';\nvar fixRegExpWellKnownSymbolLogic = require('../internals/fix-regexp-well-known-symbol-logic');\nvar anObject = require('../internals/an-object');\nvar toLength = require('../internals/to-length');\nvar toInteger = require('../internals/to-integer');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar advanceStringIndex = require('../internals/advance-string-index');\nvar getSubstitution = require('../internals/get-substitution');\nvar regExpExec = require('../internals/regexp-exec-abstract');\n\nvar max = Math.max;\nvar min = Math.min;\n\nvar maybeToString = function (it) {\n  return it === undefined ? it : String(it);\n};\n\n// @@replace logic\nfixRegExpWellKnownSymbolLogic('replace', 2, function (REPLACE, nativeReplace, maybeCallNative, reason) {\n  var REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE = reason.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE;\n  var REPLACE_KEEPS_$0 = reason.REPLACE_KEEPS_$0;\n  var UNSAFE_SUBSTITUTE = REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE ? '$' : '$0';\n\n  return [\n    // `String.prototype.replace` method\n    // https://tc39.es/ecma262/#sec-string.prototype.replace\n    function replace(searchValue, replaceValue) {\n      var O = requireObjectCoercible(this);\n      var replacer = searchValue == undefined ? undefined : searchValue[REPLACE];\n      return replacer !== undefined\n        ? replacer.call(searchValue, O, replaceValue)\n        : nativeReplace.call(String(O), searchValue, replaceValue);\n    },\n    // `RegExp.prototype[@@replace]` method\n    // https://tc39.es/ecma262/#sec-regexp.prototype-@@replace\n    function (regexp, replaceValue) {\n      if (\n        (!REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE && REPLACE_KEEPS_$0) ||\n        (typeof replaceValue === 'string' && replaceValue.indexOf(UNSAFE_SUBSTITUTE) === -1)\n      ) {\n        var res = maybeCallNative(nativeReplace, regexp, this, replaceValue);\n        if (res.done) return res.value;\n      }\n\n      var rx = anObject(regexp);\n      var S = String(this);\n\n      var functionalReplace = typeof replaceValue === 'function';\n      if (!functionalReplace) replaceValue = String(replaceValue);\n\n      var global = rx.global;\n      if (global) {\n        var fullUnicode = rx.unicode;\n        rx.lastIndex = 0;\n      }\n      var results = [];\n      while (true) {\n        var result = regExpExec(rx, S);\n        if (result === null) break;\n\n        results.push(result);\n        if (!global) break;\n\n        var matchStr = String(result[0]);\n        if (matchStr === '') rx.lastIndex = advanceStringIndex(S, toLength(rx.lastIndex), fullUnicode);\n      }\n\n      var accumulatedResult = '';\n      var nextSourcePosition = 0;\n      for (var i = 0; i < results.length; i++) {\n        result = results[i];\n\n        var matched = String(result[0]);\n        var position = max(min(toInteger(result.index), S.length), 0);\n        var captures = [];\n        // NOTE: This is equivalent to\n        //   captures = result.slice(1).map(maybeToString)\n        // but for some reason `nativeSlice.call(result, 1, result.length)` (called in\n        // the slice polyfill when slicing native arrays) \"doesn't work\" in safari 9 and\n        // causes a crash (https://pastebin.com/N21QzeQA) when trying to debug it.\n        for (var j = 1; j < result.length; j++) captures.push(maybeToString(result[j]));\n        var namedCaptures = result.groups;\n        if (functionalReplace) {\n          var replacerArgs = [matched].concat(captures, position, S);\n          if (namedCaptures !== undefined) replacerArgs.push(namedCaptures);\n          var replacement = String(replaceValue.apply(undefined, replacerArgs));\n        } else {\n          replacement = getSubstitution(matched, S, position, captures, namedCaptures, replaceValue);\n        }\n        if (position >= nextSourcePosition) {\n          accumulatedResult += S.slice(nextSourcePosition, position) + replacement;\n          nextSourcePosition = position + matched.length;\n        }\n      }\n      return accumulatedResult + S.slice(nextSourcePosition);\n    }\n  ];\n});\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./EDMDisplay.vue?vue&type=style&index=0&id=67e0d876&scoped=true&lang=stylus\"","import request from \"@/apis/http\";\nimport { AxiosPromise } from \"axios\";\nimport { Member, MemberTeam, ContactUsParams, MemberRole } from \"@/typings/member\";\n\nexport function getMembers(\n  category?: string,\n  q?: string\n): AxiosPromise<Member[]> {\n  const params: { category?: string; q?: string } = {};\n\n  if (category) params.category = category;\n  if (q) params.q = q;\n  return request({\n    url: \"/members/\",\n    method: \"GET\",\n    params\n  });\n}\n\nexport function getMember(id?: number): AxiosPromise<Member> {\n  if (id) {\n    return request({\n      url: `/member/${id}/`,\n      method: \"GET\"\n    });\n  }\n  return request({\n    url: `/member/`,\n    method: \"GET\"\n  });\n}\n\nexport function getMemberRoles(id?: number, params?: { category?: string }): AxiosPromise<MemberRole[]> {\n  if (id) {\n    return request({\n      url: `/member/${id}/roles/`,\n      method: \"GET\",\n      params\n    });\n  }\n  return request({\n    url: `/member/roles/`,\n    method: \"GET\",\n    params\n  });\n}\n\n// Haven't id means get self teams data by token.\nexport function getMemberTeams(\n  id?: number,\n  params?: { category?: string }\n): AxiosPromise<MemberTeam[]> {\n  if (id) {\n    return request({\n      url: `/member/${id}/teams/`,\n      method: \"GET\",\n      params\n    });\n  }\n  return request({\n    url: \"/member/teams/\",\n    method: \"GET\",\n    params\n  });\n}\n\nexport function getMemberBusinessUnits(id?: number): AxiosPromise<string[]> {\n  if (id) {\n    return request({\n      url: `/member/${id}/business_units/`,\n      method: \"GET\"\n    });\n  }\n  return request({\n    url: \"/member/business_units/\",\n    method: \"GET\"\n  });\n}\n\nexport function postMember(params: Member, id?: number) {\n  const data = {\n    email: params.email,\n    nickname: params.nickname,\n    role: params.role,\n    teams: params.teams,\n    phone: params.phone,\n    active: params.active,\n    business_unit: params.business_unit\n  };\n  if (id) {\n    return request({\n      url: `/member/${id}/`,\n      method: \"PUT\",\n      data\n    });\n  }\n  return request({\n    url: `/member/`,\n    method: \"PUT\",\n    data\n  });\n}\n\nexport function postMemberPassword(data: { password: string }) {\n  return request({\n    url: `/member/`,\n    method: \"PUT\",\n    data\n  });\n}\n\nexport function postMemberAvatar(file: File, id?: number) {\n  const data = new FormData();\n  data.append(\"file\", file);\n  if (id) data.append(\"member\", JSON.stringify(id));\n\n  return request({\n    url: \"/member/medias/\",\n    method: \"POST\",\n    data\n  });\n}\n\nexport function postContactUs(data: ContactUsParams) {\n  return request({\n    url: `/mail/contact_us/`,\n    method: \"POST\",\n    data\n  });\n}\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./SendConfirmDialog.vue?vue&type=style&index=0&id=31dec52f&scoped=true&lang=stylus\"","const createCover = () => {\n  const coverImage = process.env.VUE_APP_INVITE_COVER_URL;\n  return `\n  <table\n    align=\"center\"\n    border=\"0\"\n    cellpadding=\"0\"\n    cellspacing=\"0\"\n    width=\"100%\"\n  >\n    <tr>\n      <td style=\"font-size: 0; line-height: 0;\" height=\"4\">\n        &nbsp;\n      </td>\n    </tr>\n    <tr>\n      <td width=\"592\" valign=\"top\" style=\"padding-right: 0; padding-left: 0;\">\n        <img\n          src=\"${coverImage}\"\n          alt=\"\"\n          width=\"600\"\n          height=\"337\"\n          style=\"display: block;\"\n        />\n      </td>\n    </tr>\n  </table>\n  `;\n};\n\nexport const createInviteHtml = (company: string, text: string) => {\n  return `\n    <!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\n      <html xmlns=\"http://www.w3.org/1999/xhtml\">\n　      <head>\n　　      <meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" />\n　　        <title>Invite ${company}</title>\n　　      <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"/>\n　      </head>\n        <body style=\"margin: 0; padding: 0;\">\n          <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\">\n　　        <tr>\n              <table\n                align=\"center\"\n                border=\"0\"\n                cellpadding=\"0\"\n                cellspacing=\"0\"\n                width=\"600\"\n              >\n                <tr>\n                  <td\n                    style=\"padding-top: 0; padding-right: 0; padding-bottom: 0; padding-left: 0;\"\n                  >\n                   ${createCover()}\n                   </td>\n                 </tr>\n                 <tr>\n                  <td style=\"font-size: 0; line-height: 0;\" height=\"30\">\n                    &nbsp;\n                  </td>\n                 </tr>\n                 <tr>\n                   <td style=\"padding-right: 15px; padding-left: 15px;\">\n                     <p style=\"font-size: 16px; font-weight: 500; padding: 0; margin: 0; font-family: Avenir; color: #2c3e50;\">\n                      ${text.replace(/\\n/g, \"<br />\")}\n                     </p>\n                   </td>\n                 </tr>\n                 <tr>\n                   <td style=\"font-size: 0; line-height: 0;\" height=\"30\">\n                     &nbsp;\n                   </td>\n                 </tr>\n                 <tr>\n                   <td style=\"padding-right: 15px; padding-left: 15px;\">\n                     <p style=\"font-size: 16px; font-weight: 500; padding: 0; margin: 0; font-family: Avenir; color: #2c3e50;\">\n                      Invite Link: <br>\n                      {invite_link}\n                     </p>\n                   </td>\n                 </tr>\n                 <tr>\n                   <td style=\"font-size: 0; line-height: 0;\" height=\"30\">\n                     &nbsp;\n                   </td>\n                 </tr>\n              </table>\n　　        </tr>\n          </table>\n        </body>\n     </html>\n  `;\n};\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./InviteDialog.vue?vue&type=style&index=0&id=0ef6115f&scoped=true&lang=stylus\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./InviteConfirmDialog.vue?vue&type=style&index=0&id=31b103c2&scoped=true&lang=stylus\"","<template>\n  <div id=\"edm-display-component\">\n    <div class=\"main-container\">\n      <div class=\"top-container\">\n        <div class=\"title-container\">\n          <h1 class=\"title\">{{ subject }}</h1>\n          <div class=\"input-item\">\n            <label class=\"label\">Send email to: </label>\n            <el-input v-model=\"email\" placeholder=\"e-mail\"></el-input>\n          </div>\n          <p class=\"note\">\n            If sending to more than one email address, separate with \",\"\n          </p>\n          <div class=\"sent-email-wrapper\">\n            <el-collapse v-if=\"emailList.length\">\n              <el-collapse-item title=\"This EDM had been sent to:\">\n                <p\n                  class=\"email-text\"\n                  v-for=\"(email, index) in emailList\"\n                  :key=\"index\"\n                >\n                  {{ email }}\n                </p>\n              </el-collapse-item>\n            </el-collapse>\n          </div>\n        </div>\n\n        <div class=\"button-container\">\n          <el-button\n            v-permission=\"'edm_update'\"\n            type=\"success\"\n            @click=\"onEditClick\"\n            >Edit\n          </el-button>\n          <el-button type=\"success\" @click=\"onSendClick\">Send</el-button>\n        </div>\n      </div>\n\n      <div class=\"text-container\">\n        <p v-for=\"(msg, index) in messageBody.split(/\\n/)\" :key=\"index\">\n          {{ msg || \"&nbsp;\" }}\n        </p>\n      </div>\n\n      <div class=\"cover-container\">\n        <div v-if=\"coverPhoto\" class=\"template-container\">\n          <img\n            class=\"edm-cover-image\"\n            :src=\"formatImageUrl(coverPhoto.file)\"\n            alt=\"cover\"\n          />\n        </div>\n      </div>\n\n      <div class=\"text-container\">\n        <p v-for=\"(msg, index) in message.split(/\\n/)\" :key=\"index\">\n          {{ msg || \"&nbsp;\" }}\n        </p>\n      </div>\n\n      <div class=\"fabrics-container\" v-if=\"collections.length\">\n        <el-row>\n          <el-col v-for=\"(item, index) in collections\" :key=\"index\" :span=\"12\">\n            <div class=\"card\">\n              <div\n                class=\"image\"\n                :style=\"{\n                  backgroundImage: `url('${formatImageUrl(\n                    item.fabric.image_url\n                  ) + '@150-150'}')`\n                }\"\n              ></div>\n              <div class=\"right-container\">\n                <h3>{{ item.fabric.name }}</h3>\n                <p>{{ item.fabric.real_composition }}</p>\n              </div>\n            </div>\n          </el-col>\n        </el-row>\n      </div>\n    </div>\n    <InviteDialog ref=\"inviteDialog\" @next=\"onInviteDialogNext\"></InviteDialog>\n    <InviteConfirmDialog\n      ref=\"inviteConfirmDialog\"\n      @confirm=\"onInviteDialogConfirm\"\n    ></InviteConfirmDialog>\n    <SendConfirmDialog\n      ref=\"sendConfirmDialog\"\n      @confirm=\"onSendDialogConfirm\"\n    ></SendConfirmDialog>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, ref, toRefs, computed, onMounted } from \"vue\";\nimport { useStore } from \"vuex\";\n\nimport { formatImageUrl, loading } from \"@/utils\";\n\nimport InviteDialog from \"./InviteDialog.vue\";\nimport InviteConfirmDialog from \"./InviteConfirmDialog.vue\";\nimport SendConfirmDialog from \"./SendConfirmDialog.vue\";\nimport { GetCollection, GetEdm, PostSendEdm } from \"@/typings/store\";\nimport { EdmCover, EdmParams, SendEdmParams } from \"@/typings/edm\";\nimport { ElNotification, ElMessageBox } from \"element-plus\";\nimport { useRouter } from \"vue-router\";\nimport { getSentEmail, postUpdateEdm } from \"@/apis/edm\";\nimport { iCreateDialog } from \"@/typings/component\";\n\nconst Component = defineComponent({\n  name: \"EDMDisplay\",\n  components: {\n    SendConfirmDialog,\n    InviteConfirmDialog,\n    InviteDialog\n  },\n  props: {\n    id: {\n      type: Number,\n      default: 0\n    }\n  },\n  setup(props) {\n    const store = useStore();\n    const router = useRouter();\n\n    const { id } = toRefs(props);\n\n    const inviteDialog = ref<iCreateDialog | null>(null);\n    const sendConfirmDialog = ref<iCreateDialog | null>(null);\n    const inviteConfirmDialog = ref<iCreateDialog | null>(null);\n    const email = ref(\"\");\n    const subject = ref(\"\");\n    const brandName = ref(\"\");\n    const message = ref(\"\");\n    const messageBody = ref(\"\");\n    const collectionId = ref(-1);\n    const collections = ref([]);\n    const coverPhoto = ref<EdmCover | null>(null);\n    const emailList = ref<string[]>([]);\n    const inviteIndex = ref(0);\n    const inviteEmails = ref<string[]>([]);\n\n    const detail = computed(() => store.state.edm.detail);\n    const tempCollections = computed(() => store.state.collection.detail);\n\n    const fetchCollection = async (id: number) => {\n      await store.dispatch(GetCollection, id);\n      collections.value = tempCollections.value.collection_fabrics;\n    };\n\n    const init = async () => {\n      const loadingInstance = loading();\n      try {\n        await store.dispatch(GetEdm, id.value);\n        subject.value = detail.value.subject;\n        brandName.value = detail.value.recipient_brand;\n        message.value = detail.value.message;\n        messageBody.value = detail.value.message_body;\n        coverPhoto.value = detail.value.cover_photo;\n        collectionId.value = detail.value.chosen_collection;\n\n        const { data: email } = await getSentEmail(id.value);\n        emailList.value = email.recipients;\n\n        if (collectionId.value) {\n          await fetchCollection(collectionId.value);\n        }\n      } finally {\n        loadingInstance.close();\n      }\n    };\n\n    onMounted(async () => await init());\n\n    const onEditClick = async () => {\n      // *** Check permission\n      const params: EdmParams = {\n        subject: detail.value.subject,\n        message: detail.value.message,\n        message_body: detail.value.messageBody,\n        html_message: detail.value.html_message,\n        chosen_collection: collectionId.value\n      };\n      if (coverPhoto.value) {\n        params.cover_photo = coverPhoto.value.id;\n      }\n      await postUpdateEdm(id.value, params);\n      // ***\n\n      await router.push({ name: \"EDMDetail\", params: { id: id.value } });\n    };\n\n    const send = async (emails: string[], invite?: boolean) => {\n      const params: SendEdmParams = {\n        recipient_list: emails,\n        mail: id.value,\n        sender: 1\n      };\n\n      try {\n        await store.dispatch(PostSendEdm, params);\n        ElNotification({\n          title: \"Success\",\n          type: \"success\",\n          message: `Send e-mail successfully.`\n        });\n        const { data } = await getSentEmail(id.value);\n        emailList.value = data.recipients;\n\n        if (invite && inviteConfirmDialog.value) {\n          inviteConfirmDialog.value.open(\n            email.value.split(\",\").map(it => it.trim())\n          );\n        }\n      } finally {\n        email.value = \"\";\n      }\n    };\n\n    const checkEmailListSend = async () => {\n      const emails = email.value.split(\",\").map(it => it.trim());\n      const noIncludesEmailList = emails.filter(\n        email => !emailList.value.includes(email)\n      );\n      const includesEmailList = emails.filter(email =>\n        emailList.value.includes(email)\n      );\n      if (!includesEmailList.length) {\n        await send(emails, true);\n        return;\n      }\n\n      if (noIncludesEmailList.length) await send(noIncludesEmailList);\n      if (!sendConfirmDialog.value) return;\n      sendConfirmDialog.value.open(includesEmailList);\n    };\n\n    const onSendClick = async () => {\n      if (!email.value) {\n        return ElNotification({\n          title: \"Warning\",\n          type: \"warning\",\n          message: `You should enter email.`\n        });\n      }\n\n      if (collections.value.length) {\n        await checkEmailListSend();\n        return;\n      }\n      ElMessageBox.confirm(`No collection is chosen`, \"Are you sure?\", {\n        distinguishCancelAndClose: true,\n        confirmButtonText: \"Yes\",\n        cancelButtonText: \"Back\"\n      }).then(async () => {\n        await checkEmailListSend();\n      });\n    };\n\n    const onSendDialogConfirm = async (emails: string[]) => {\n      await send(emails, true);\n    };\n\n    const onInviteDialogConfirm = async (emails: string[]) => {\n      inviteEmails.value = emails;\n      inviteIndex.value = 0;\n      if (inviteDialog.value) {\n        inviteDialog.value.open(inviteEmails.value[inviteIndex.value]);\n      }\n    };\n\n    const onInviteDialogNext = async () => {\n      inviteIndex.value += 1;\n      if (inviteIndex.value >= inviteEmails.value.length) return;\n      if (inviteDialog.value) {\n        inviteDialog.value.open(inviteEmails.value[inviteIndex.value]);\n      }\n    };\n\n    return {\n      inviteDialog,\n      sendConfirmDialog,\n      inviteConfirmDialog,\n      email,\n      subject,\n      brandName,\n      message,\n      messageBody,\n      coverPhoto,\n      collections,\n      collectionId,\n      detail,\n      emailList,\n\n      onEditClick,\n      onSendClick,\n      onSendDialogConfirm,\n      onInviteDialogConfirm,\n      onInviteDialogNext,\n\n      formatImageUrl\n    };\n  }\n});\n\nexport default Component;\n</script>\n\n<style scoped lang=\"stylus\">\n#edm-display-component\n  page-container()\n\n  .top-container\n    flex(space-between, flex-start)\n    margin-bottom 30px\n\n    .title-container\n      .title\n        line-height 50px\n        font-size $font-size-lg4x\n        font-weight 600\n\n      .input-item\n        flex(flex-start)\n        margin-bottom 15px\n\n        .label\n          margin-right 15px\n          white-space nowrap\n\n        .el-input\n          width 250px\n\n      .note\n        color $color-secondary\n        font-size $font-size-small\n\n        span\n          display inline-block\n          width 8px\n\n      .sent-email-wrapper\n        margin 8px 0\n\n        .email-text\n          font-size $font-size-small\n          padding-bottom 5px\n\n    .button-container\n      height 50px\n\n  .main-container\n    width 600px\n    margin 0 auto\n    padding-bottom 30px\n\n    .text-container\n      box-sizing border-box\n      padding 30px 15px\n      width 604px\n      margin-bottom 30px\n      background white\n      border 1px solid $color-border-gray\n      p\n        font-size 16px\n        font-weight 500\n        word-break break-all\n\n    .cover-container\n      box-sizing border-box\n      padding 0 0 4px\n      width 604px\n      margin-bottom 30px\n      background white\n      border 1px solid $color-border-gray\n\n      .template-container\n        width 592px\n        height 392px\n        margin 4px 4px 0\n\n        .edm-cover-image\n          width 100%\n          height 100%\n\n    .fabrics-container\n      width 604px\n      margin-bottom 30px\n      box-sizing border-box\n      padding 15px 4px 0\n      border 2px solid $color-border-gray\n      background white\n\n      .card\n        flex()\n        width 296px\n        backagorund blue\n        margin-bottom 15px\n\n        .right-container\n          width 156px\n\n          h3\n            font-size $font-size-lg2x\n            font-weight 700\n            margin-bottom 15px\n\n          p\n            font-size $font-size-normal\n            font-weight 600\n\n        .image\n          width 140px\n          height 140px\n          margin-right 15px\n          background-repeat no-repeat\n          background-position center\n          background-size cover\n\n      :deep() .el-col\n        margin-bottom 15px\n\n    .button-container\n      flex(flex-end)\n\n  :deep() .el-collapse\n    background-color $color-background\n    border none\n\n  :deep() .el-collapse-item__header\n    margin 8px 0\n    font-size $font-size-normal\n    font-weight 700\n    background-color $color-background\n    border none\n\n  :deep() .el-collapse-item__wrap\n    background-color $color-background\n    border none\n</style>\n","<template>\n  <el-dialog\n    custom-class=\"inform-dialog-component\"\n    v-model=\"visible\"\n    width=\"600px\"\n  >\n    <div>\n      <div class=\"item\">\n        <p>Email</p>\n        <el-input disabled type=\"email\" v-model=\"form.email\"></el-input>\n      </div>\n      <div class=\"item\">\n        <p>Brand</p>\n        <el-autocomplete\n          class=\"input\"\n          v-model=\"form.brand\"\n          :fetch-suggestions=\"onQuerySearchBrand\"\n          placeholder=\"Brand...\"\n        ></el-autocomplete>\n      </div>\n      <div class=\"item\">\n        <p>Company Type</p>\n        <el-select v-model=\"form.type\" placeholder=\"Type...\">\n          <el-option value=\"buyer\" label=\"Buyer\">\n            Buyer\n          </el-option>\n          <el-option value=\"garment_factory\" label=\"Garment Factory\">\n            Garment Factory\n          </el-option>\n        </el-select>\n      </div>\n      <div class=\"item\">\n        <p>Business unit</p>\n        <el-autocomplete\n          class=\"input\"\n          v-model=\"form.businessUnit\"\n          :fetch-suggestions=\"onQuerySearchBusinessUnit\"\n          placeholder=\"Business Unit...\"\n        ></el-autocomplete>\n      </div>\n      <div class=\"item\">\n        <p>Text</p>\n        <el-input type=\"textarea\" rows=\"8\" v-model=\"form.text\"></el-input>\n      </div>\n    </div>\n    <div class=\"buttons-wrapper\">\n      <el-button class=\"button\" type=\"info\" @click=\"onCancel\">\n        Cancel\n      </el-button>\n      <el-button class=\"button\" type=\"success\" @click=\"onSubmit\">\n        Send\n      </el-button>\n    </div>\n  </el-dialog>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, ref, reactive } from \"vue\";\nimport { getCompanies } from \"@/apis/company\";\nimport { getMemberBusinessUnits } from \"@/apis/member\";\nimport { CompanyCardResponse } from \"@/typings/company\";\nimport { ElNotification } from \"element-plus\";\nimport { postCreateInvitation } from \"@/apis/auth\";\nimport { createInviteHtml } from \"@/utils/createInviteHtml\";\nimport { emailRule } from \"@/utils\";\n\nconst initText =\n  \"Dear ,\\n\" +\n  \"We are delighted to invite you to join Weaverbird.\\n\" +\n  \"Follow the attached link to activate your account.\\n\" +\n  \"We look forward to welcoming you as a new member.\";\n\nconst Component = defineComponent({\n  name: \"InformDialog\",\n  setup(_, { emit }) {\n    const visible = ref(false);\n    const form = reactive({\n      email: \"\",\n      brand: null,\n      type: \"buyer\",\n      businessUnit: \"\",\n      text: initText\n    });\n    const companyList = ref<string[]>([]);\n    const businessUnitList = ref<string[]>([]);\n    const isLock = ref(false);\n\n    const init = async () => {\n      const { data: companies } = await getCompanies({\n        category: \"invitation\"\n      });\n      const { data: businessUnit } = await getMemberBusinessUnits();\n      companyList.value = companies.map((it: CompanyCardResponse) => it.name);\n      businessUnitList.value = businessUnit;\n    };\n\n    const open = async (email: string) => {\n      form.email = email;\n      visible.value = true;\n      await init();\n    };\n\n    const createFilter = (queryString: string) => {\n      return (option: string) => {\n        return option.toLowerCase().indexOf(queryString.toLowerCase()) === 0;\n      };\n    };\n\n    const onQuerySearchBrand = async (queryString: string, cb: Function) => {\n      const results = queryString\n        ? companyList.value.filter(createFilter(queryString))\n        : companyList.value;\n      cb(results.map((text: string) => ({ value: text })));\n    };\n\n    const onQuerySearchBusinessUnit = async (\n      queryString: string,\n      cb: Function\n    ) => {\n      const results = queryString\n        ? businessUnitList.value.filter(createFilter(queryString))\n        : businessUnitList.value;\n      cb(results.map((text: string) => ({ value: text })));\n    };\n\n    const onCancel = () => {\n      form.email = \"\";\n      form.brand = null;\n      form.type = \"buyer\";\n      form.businessUnit = \"\";\n      form.text = initText;\n      isLock.value = false;\n      visible.value = false;\n      emit(\"next\");\n    };\n\n    const onSubmit = async () => {\n      if (!form.email || !emailRule.test(form.email)) {\n        ElNotification({\n          title: \"Error\",\n          type: \"error\",\n          message: `Please enter a valid email address.`\n        });\n        return;\n      }\n      if (!form.brand) {\n        ElNotification({\n          title: \"Error\",\n          type: \"error\",\n          message: `Please select the brand. `\n        });\n        return;\n      }\n      const params = {\n        email: form.email,\n        company: form.brand,\n        business_unit: form.businessUnit,\n        trial_type: form.type,\n        html_message: createInviteHtml(form.brand!, form.text)\n      };\n      try {\n        const { data } = await postCreateInvitation(params);\n        ElNotification({\n          title: \"Success\",\n          type: \"success\",\n          message: `Invitation successfully sent to ${data.email}`\n        });\n      } catch (e) {\n        ElNotification({\n          title: \"Error\",\n          type: \"error\",\n          message: `Can't send Invitation.`\n        });\n      } finally {\n        form.email = \"\";\n        form.brand = null;\n        form.type = \"buyer\";\n        form.businessUnit = \"\";\n        form.text = initText;\n        isLock.value = false;\n        visible.value = false;\n        emit(\"next\");\n      }\n    };\n\n    return {\n      visible,\n      form,\n\n      open,\n      onQuerySearchBrand,\n      onQuerySearchBusinessUnit,\n      onCancel,\n      onSubmit\n    };\n  }\n});\n\nexport default Component;\n</script>\n\n<style scoped lang=\"stylus\">\n.inform-dialog-component\n  h2\n    text-align center\n    font-weight 500\n\n  .buttons-wrapper\n    padding 30px 0 0\n    flex()\n\n  .button\n    margin 0 15px\n    width 30%\n    height 40px\n\n  .item\n    padding 15px 0\n\n    p\n      font-size $font-size-lg2x\n      font-weight 400\n      margin-bottom 15px\n\n    :deep() .el-input\n      width 100%\n\n    :deep() .el-autocomplete\n      width 100%\n\n    :deep() .el-select\n      width 100%\n\n  .footer\n    padding 15px 0\n    flex(flex-end)\n</style>\n","\nimport { defineComponent, ref, reactive } from \"vue\";\nimport { getCompanies } from \"@/apis/company\";\nimport { getMemberBusinessUnits } from \"@/apis/member\";\nimport { CompanyCardResponse } from \"@/typings/company\";\nimport { ElNotification } from \"element-plus\";\nimport { postCreateInvitation } from \"@/apis/auth\";\nimport { createInviteHtml } from \"@/utils/createInviteHtml\";\nimport { emailRule } from \"@/utils\";\n\nconst initText =\n  \"Dear ,\\n\" +\n  \"We are delighted to invite you to join Weaverbird.\\n\" +\n  \"Follow the attached link to activate your account.\\n\" +\n  \"We look forward to welcoming you as a new member.\";\n\nconst Component = defineComponent({\n  name: \"InformDialog\",\n  setup(_, { emit }) {\n    const visible = ref(false);\n    const form = reactive({\n      email: \"\",\n      brand: null,\n      type: \"buyer\",\n      businessUnit: \"\",\n      text: initText\n    });\n    const companyList = ref<string[]>([]);\n    const businessUnitList = ref<string[]>([]);\n    const isLock = ref(false);\n\n    const init = async () => {\n      const { data: companies } = await getCompanies({\n        category: \"invitation\"\n      });\n      const { data: businessUnit } = await getMemberBusinessUnits();\n      companyList.value = companies.map((it: CompanyCardResponse) => it.name);\n      businessUnitList.value = businessUnit;\n    };\n\n    const open = async (email: string) => {\n      form.email = email;\n      visible.value = true;\n      await init();\n    };\n\n    const createFilter = (queryString: string) => {\n      return (option: string) => {\n        return option.toLowerCase().indexOf(queryString.toLowerCase()) === 0;\n      };\n    };\n\n    const onQuerySearchBrand = async (queryString: string, cb: Function) => {\n      const results = queryString\n        ? companyList.value.filter(createFilter(queryString))\n        : companyList.value;\n      cb(results.map((text: string) => ({ value: text })));\n    };\n\n    const onQuerySearchBusinessUnit = async (\n      queryString: string,\n      cb: Function\n    ) => {\n      const results = queryString\n        ? businessUnitList.value.filter(createFilter(queryString))\n        : businessUnitList.value;\n      cb(results.map((text: string) => ({ value: text })));\n    };\n\n    const onCancel = () => {\n      form.email = \"\";\n      form.brand = null;\n      form.type = \"buyer\";\n      form.businessUnit = \"\";\n      form.text = initText;\n      isLock.value = false;\n      visible.value = false;\n      emit(\"next\");\n    };\n\n    const onSubmit = async () => {\n      if (!form.email || !emailRule.test(form.email)) {\n        ElNotification({\n          title: \"Error\",\n          type: \"error\",\n          message: `Please enter a valid email address.`\n        });\n        return;\n      }\n      if (!form.brand) {\n        ElNotification({\n          title: \"Error\",\n          type: \"error\",\n          message: `Please select the brand. `\n        });\n        return;\n      }\n      const params = {\n        email: form.email,\n        company: form.brand,\n        business_unit: form.businessUnit,\n        trial_type: form.type,\n        html_message: createInviteHtml(form.brand!, form.text)\n      };\n      try {\n        const { data } = await postCreateInvitation(params);\n        ElNotification({\n          title: \"Success\",\n          type: \"success\",\n          message: `Invitation successfully sent to ${data.email}`\n        });\n      } catch (e) {\n        ElNotification({\n          title: \"Error\",\n          type: \"error\",\n          message: `Can't send Invitation.`\n        });\n      } finally {\n        form.email = \"\";\n        form.brand = null;\n        form.type = \"buyer\";\n        form.businessUnit = \"\";\n        form.text = initText;\n        isLock.value = false;\n        visible.value = false;\n        emit(\"next\");\n      }\n    };\n\n    return {\n      visible,\n      form,\n\n      open,\n      onQuerySearchBrand,\n      onQuerySearchBusinessUnit,\n      onCancel,\n      onSubmit\n    };\n  }\n});\n\nexport default Component;\n","import { render } from \"./InviteDialog.vue?vue&type=template&id=0ef6115f&scoped=true\"\nimport script from \"./InviteDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./InviteDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./InviteDialog.vue?vue&type=style&index=0&id=0ef6115f&scoped=true&lang=stylus\"\nscript.render = render\nscript.__scopeId = \"data-v-0ef6115f\"\n\nexport default script","<template>\n  <div id=\"invite-confirm-dialog-component\">\n    <el-dialog v-model=\"visible\" width=\"600px\" top=\"45px\">\n      <div class=\"title-container\">\n        <h2>Also send invitation to</h2>\n      </div>\n      <div class=\"checkbox-container\">\n        <div class=\"input-item\" v-for=\"(item, index) in checkList\" :key=\"index\">\n          <el-checkbox v-model=\"item.checked\" :label=\"item.label\"></el-checkbox>\n        </div>\n      </div>\n      <template #footer>\n        <div class=\"dialog-footer\">\n          <el-button type=\"info\" @click=\"visible = false\">\n            Skip\n          </el-button>\n          <el-button type=\"success\" @click=\"onConfirm\">\n            Next\n          </el-button>\n        </div>\n      </template>\n    </el-dialog>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, ref, watchEffect } from \"vue\";\nimport { CheckItem } from \"@/typings/edm\";\n\nconst Component = defineComponent({\n  name: \"InviteConfirmDialog\",\n  setup(_, { emit }) {\n    const visible = ref(false);\n    const emails = ref<string[]>([]);\n    const checkList = ref<CheckItem[]>([]);\n\n    watchEffect(() => {\n      checkList.value = emails.value.map(\n        (email: string): CheckItem => ({ label: email, checked: true })\n      );\n    });\n\n    const open = (data: string[]) => {\n      emails.value = data;\n      visible.value = true;\n    };\n\n    const onConfirm = () => {\n      const data: string[] = checkList.value\n        .filter((it: CheckItem) => !!it.checked)\n        .map((it: CheckItem) => it.label);\n      emit(\"confirm\", data);\n      visible.value = false;\n    };\n\n    return {\n      visible,\n      checkList,\n      open,\n\n      onConfirm\n    };\n  }\n});\n\nexport default Component;\n</script>\n\n<style scoped lang=\"stylus\">\n#invite-confirm-dialog-component\n  .title-container\n    padding 15px 0\n    text-align center\n  .checkbox-container\n    flex(flex-start, flex-start)\n    flex-direction column\n    padding 15px 100px 0\n    .input-item\n      margin-top 15px\n      :deep() .el-checkbox__label\n        font-size $font-size-lg2x\n</style>\n","\nimport { defineComponent, ref, watchEffect } from \"vue\";\nimport { CheckItem } from \"@/typings/edm\";\n\nconst Component = defineComponent({\n  name: \"InviteConfirmDialog\",\n  setup(_, { emit }) {\n    const visible = ref(false);\n    const emails = ref<string[]>([]);\n    const checkList = ref<CheckItem[]>([]);\n\n    watchEffect(() => {\n      checkList.value = emails.value.map(\n        (email: string): CheckItem => ({ label: email, checked: true })\n      );\n    });\n\n    const open = (data: string[]) => {\n      emails.value = data;\n      visible.value = true;\n    };\n\n    const onConfirm = () => {\n      const data: string[] = checkList.value\n        .filter((it: CheckItem) => !!it.checked)\n        .map((it: CheckItem) => it.label);\n      emit(\"confirm\", data);\n      visible.value = false;\n    };\n\n    return {\n      visible,\n      checkList,\n      open,\n\n      onConfirm\n    };\n  }\n});\n\nexport default Component;\n","import { render } from \"./InviteConfirmDialog.vue?vue&type=template&id=31b103c2&scoped=true\"\nimport script from \"./InviteConfirmDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./InviteConfirmDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./InviteConfirmDialog.vue?vue&type=style&index=0&id=31b103c2&scoped=true&lang=stylus\"\nscript.render = render\nscript.__scopeId = \"data-v-31b103c2\"\n\nexport default script","<template>\n  <div id=\"send-confirm-dialog-component\">\n    <el-dialog v-model=\"visible\" width=\"600px\" top=\"45px\">\n      <div class=\"title-container\">\n        <h2>This EDM has been send to these emails before.</h2>\n        <h2>Check if you still want to send the EDM.</h2>\n      </div>\n      <div class=\"checkbox-container\">\n        <div class=\"input-item\" v-for=\"(item, index) in checkList\" :key=\"index\">\n          <el-checkbox v-model=\"item.checked\" :label=\"item.label\"></el-checkbox>\n        </div>\n      </div>\n      <template #footer>\n        <div class=\"dialog-footer\">\n          <el-button type=\"info\" @click=\"visible = false\">\n            Back\n          </el-button>\n          <el-button type=\"success\" @click=\"onConfirm\">\n            Send\n          </el-button>\n        </div>\n      </template>\n    </el-dialog>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, ref, watchEffect } from \"vue\";\nimport { CheckItem } from \"@/typings/edm\";\n\nconst Component = defineComponent({\n  name: \"SendConfirmDialog\",\n  setup(_, { emit }) {\n    const visible = ref(false);\n    const emails = ref<string[]>([]);\n    const checkList = ref<CheckItem[]>([]);\n\n    watchEffect(() => {\n      checkList.value = emails.value.map(\n        (email: string): CheckItem => ({ label: email, checked: true })\n      );\n    });\n\n    const open = (data: string[]) => {\n      emails.value = data;\n      visible.value = true;\n    };\n\n    const onConfirm = () => {\n      const data: string[] = checkList.value\n        .filter((it: CheckItem) => !!it.checked)\n        .map((it: CheckItem) => it.label);\n      emit(\"confirm\", data);\n      visible.value = false;\n    };\n\n    return {\n      visible,\n      checkList,\n      open,\n\n      onConfirm\n    };\n  }\n});\n\nexport default Component;\n</script>\n\n<style scoped lang=\"stylus\">\n#send-confirm-dialog-component\n  .title-container\n    padding 15px 0\n    text-align center\n  .checkbox-container\n    flex(flex-start, flex-start)\n    flex-direction column\n    padding 15px 100px 0\n    .input-item\n      margin-top 15px\n      :deep() .el-checkbox__label\n        font-size $font-size-lg2x\n</style>\n","\nimport { defineComponent, ref, watchEffect } from \"vue\";\nimport { CheckItem } from \"@/typings/edm\";\n\nconst Component = defineComponent({\n  name: \"SendConfirmDialog\",\n  setup(_, { emit }) {\n    const visible = ref(false);\n    const emails = ref<string[]>([]);\n    const checkList = ref<CheckItem[]>([]);\n\n    watchEffect(() => {\n      checkList.value = emails.value.map(\n        (email: string): CheckItem => ({ label: email, checked: true })\n      );\n    });\n\n    const open = (data: string[]) => {\n      emails.value = data;\n      visible.value = true;\n    };\n\n    const onConfirm = () => {\n      const data: string[] = checkList.value\n        .filter((it: CheckItem) => !!it.checked)\n        .map((it: CheckItem) => it.label);\n      emit(\"confirm\", data);\n      visible.value = false;\n    };\n\n    return {\n      visible,\n      checkList,\n      open,\n\n      onConfirm\n    };\n  }\n});\n\nexport default Component;\n","import { render } from \"./SendConfirmDialog.vue?vue&type=template&id=31dec52f&scoped=true\"\nimport script from \"./SendConfirmDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./SendConfirmDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./SendConfirmDialog.vue?vue&type=style&index=0&id=31dec52f&scoped=true&lang=stylus\"\nscript.render = render\nscript.__scopeId = \"data-v-31dec52f\"\n\nexport default script","\nimport { defineComponent, ref, toRefs, computed, onMounted } from \"vue\";\nimport { useStore } from \"vuex\";\n\nimport { formatImageUrl, loading } from \"@/utils\";\n\nimport InviteDialog from \"./InviteDialog.vue\";\nimport InviteConfirmDialog from \"./InviteConfirmDialog.vue\";\nimport SendConfirmDialog from \"./SendConfirmDialog.vue\";\nimport { GetCollection, GetEdm, PostSendEdm } from \"@/typings/store\";\nimport { EdmCover, EdmParams, SendEdmParams } from \"@/typings/edm\";\nimport { ElNotification, ElMessageBox } from \"element-plus\";\nimport { useRouter } from \"vue-router\";\nimport { getSentEmail, postUpdateEdm } from \"@/apis/edm\";\nimport { iCreateDialog } from \"@/typings/component\";\n\nconst Component = defineComponent({\n  name: \"EDMDisplay\",\n  components: {\n    SendConfirmDialog,\n    InviteConfirmDialog,\n    InviteDialog\n  },\n  props: {\n    id: {\n      type: Number,\n      default: 0\n    }\n  },\n  setup(props) {\n    const store = useStore();\n    const router = useRouter();\n\n    const { id } = toRefs(props);\n\n    const inviteDialog = ref<iCreateDialog | null>(null);\n    const sendConfirmDialog = ref<iCreateDialog | null>(null);\n    const inviteConfirmDialog = ref<iCreateDialog | null>(null);\n    const email = ref(\"\");\n    const subject = ref(\"\");\n    const brandName = ref(\"\");\n    const message = ref(\"\");\n    const messageBody = ref(\"\");\n    const collectionId = ref(-1);\n    const collections = ref([]);\n    const coverPhoto = ref<EdmCover | null>(null);\n    const emailList = ref<string[]>([]);\n    const inviteIndex = ref(0);\n    const inviteEmails = ref<string[]>([]);\n\n    const detail = computed(() => store.state.edm.detail);\n    const tempCollections = computed(() => store.state.collection.detail);\n\n    const fetchCollection = async (id: number) => {\n      await store.dispatch(GetCollection, id);\n      collections.value = tempCollections.value.collection_fabrics;\n    };\n\n    const init = async () => {\n      const loadingInstance = loading();\n      try {\n        await store.dispatch(GetEdm, id.value);\n        subject.value = detail.value.subject;\n        brandName.value = detail.value.recipient_brand;\n        message.value = detail.value.message;\n        messageBody.value = detail.value.message_body;\n        coverPhoto.value = detail.value.cover_photo;\n        collectionId.value = detail.value.chosen_collection;\n\n        const { data: email } = await getSentEmail(id.value);\n        emailList.value = email.recipients;\n\n        if (collectionId.value) {\n          await fetchCollection(collectionId.value);\n        }\n      } finally {\n        loadingInstance.close();\n      }\n    };\n\n    onMounted(async () => await init());\n\n    const onEditClick = async () => {\n      // *** Check permission\n      const params: EdmParams = {\n        subject: detail.value.subject,\n        message: detail.value.message,\n        message_body: detail.value.messageBody,\n        html_message: detail.value.html_message,\n        chosen_collection: collectionId.value\n      };\n      if (coverPhoto.value) {\n        params.cover_photo = coverPhoto.value.id;\n      }\n      await postUpdateEdm(id.value, params);\n      // ***\n\n      await router.push({ name: \"EDMDetail\", params: { id: id.value } });\n    };\n\n    const send = async (emails: string[], invite?: boolean) => {\n      const params: SendEdmParams = {\n        recipient_list: emails,\n        mail: id.value,\n        sender: 1\n      };\n\n      try {\n        await store.dispatch(PostSendEdm, params);\n        ElNotification({\n          title: \"Success\",\n          type: \"success\",\n          message: `Send e-mail successfully.`\n        });\n        const { data } = await getSentEmail(id.value);\n        emailList.value = data.recipients;\n\n        if (invite && inviteConfirmDialog.value) {\n          inviteConfirmDialog.value.open(\n            email.value.split(\",\").map(it => it.trim())\n          );\n        }\n      } finally {\n        email.value = \"\";\n      }\n    };\n\n    const checkEmailListSend = async () => {\n      const emails = email.value.split(\",\").map(it => it.trim());\n      const noIncludesEmailList = emails.filter(\n        email => !emailList.value.includes(email)\n      );\n      const includesEmailList = emails.filter(email =>\n        emailList.value.includes(email)\n      );\n      if (!includesEmailList.length) {\n        await send(emails, true);\n        return;\n      }\n\n      if (noIncludesEmailList.length) await send(noIncludesEmailList);\n      if (!sendConfirmDialog.value) return;\n      sendConfirmDialog.value.open(includesEmailList);\n    };\n\n    const onSendClick = async () => {\n      if (!email.value) {\n        return ElNotification({\n          title: \"Warning\",\n          type: \"warning\",\n          message: `You should enter email.`\n        });\n      }\n\n      if (collections.value.length) {\n        await checkEmailListSend();\n        return;\n      }\n      ElMessageBox.confirm(`No collection is chosen`, \"Are you sure?\", {\n        distinguishCancelAndClose: true,\n        confirmButtonText: \"Yes\",\n        cancelButtonText: \"Back\"\n      }).then(async () => {\n        await checkEmailListSend();\n      });\n    };\n\n    const onSendDialogConfirm = async (emails: string[]) => {\n      await send(emails, true);\n    };\n\n    const onInviteDialogConfirm = async (emails: string[]) => {\n      inviteEmails.value = emails;\n      inviteIndex.value = 0;\n      if (inviteDialog.value) {\n        inviteDialog.value.open(inviteEmails.value[inviteIndex.value]);\n      }\n    };\n\n    const onInviteDialogNext = async () => {\n      inviteIndex.value += 1;\n      if (inviteIndex.value >= inviteEmails.value.length) return;\n      if (inviteDialog.value) {\n        inviteDialog.value.open(inviteEmails.value[inviteIndex.value]);\n      }\n    };\n\n    return {\n      inviteDialog,\n      sendConfirmDialog,\n      inviteConfirmDialog,\n      email,\n      subject,\n      brandName,\n      message,\n      messageBody,\n      coverPhoto,\n      collections,\n      collectionId,\n      detail,\n      emailList,\n\n      onEditClick,\n      onSendClick,\n      onSendDialogConfirm,\n      onInviteDialogConfirm,\n      onInviteDialogNext,\n\n      formatImageUrl\n    };\n  }\n});\n\nexport default Component;\n","import { render } from \"./EDMDisplay.vue?vue&type=template&id=67e0d876&scoped=true\"\nimport script from \"./EDMDisplay.vue?vue&type=script&lang=ts\"\nexport * from \"./EDMDisplay.vue?vue&type=script&lang=ts\"\n\nimport \"./EDMDisplay.vue?vue&type=style&index=0&id=67e0d876&scoped=true&lang=stylus\"\nscript.render = render\nscript.__scopeId = \"data-v-67e0d876\"\n\nexport default script","var fails = require('../internals/fails');\nvar whitespaces = require('../internals/whitespaces');\n\nvar non = '\\u200B\\u0085\\u180E';\n\n// check that a method works with the correct list\n// of whitespaces and has a correct name\nmodule.exports = function (METHOD_NAME) {\n  return fails(function () {\n    return !!whitespaces[METHOD_NAME]() || non[METHOD_NAME]() != non || whitespaces[METHOD_NAME].name !== METHOD_NAME;\n  });\n};\n"],"sourceRoot":""}