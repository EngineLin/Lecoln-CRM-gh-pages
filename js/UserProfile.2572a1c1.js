(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["UserProfile"],{"0677":function(e,t,a){},"067c":function(e,t,a){"use strict";a("170b")},"170b":function(e,t,a){},"6ec5":function(e,t,a){"use strict";a.d(t,"e",(function(){return c})),a.d(t,"a",(function(){return r})),a.d(t,"c",(function(){return l})),a.d(t,"d",(function(){return o})),a.d(t,"b",(function(){return i})),a.d(t,"g",(function(){return u})),a.d(t,"i",(function(){return s})),a.d(t,"h",(function(){return d})),a.d(t,"f",(function(){return b}));var n=a("415e");function c(e,t){var a={};return e&&(a.category=e),t&&(a.q=t),Object(n["a"])({url:"/members/",method:"GET",params:a})}function r(e){return e?Object(n["a"])({url:"/member/".concat(e,"/"),method:"GET"}):Object(n["a"])({url:"/member/",method:"GET"})}function l(e,t){return e?Object(n["a"])({url:"/member/".concat(e,"/roles/"),method:"GET",params:t}):Object(n["a"])({url:"/member/roles/",method:"GET",params:t})}function o(e,t){return e?Object(n["a"])({url:"/member/".concat(e,"/teams/"),method:"GET",params:t}):Object(n["a"])({url:"/member/teams/",method:"GET",params:t})}function i(e){return e?Object(n["a"])({url:"/member/".concat(e,"/business_units/"),method:"GET"}):Object(n["a"])({url:"/member/business_units/",method:"GET"})}function u(e,t){var a={email:e.email,nickname:e.nickname,role:e.role,teams:e.teams,phone:e.phone,active:e.active,business_unit:e.business_unit};return t?Object(n["a"])({url:"/member/".concat(t,"/"),method:"PUT",data:a}):Object(n["a"])({url:"/member/",method:"PUT",data:a})}function s(e){return Object(n["a"])({url:"/member/",method:"PUT",data:e})}function d(e,t){var a=new FormData;return a.append("file",e),t&&a.append("member",JSON.stringify(t)),Object(n["a"])({url:"/member/medias/",method:"POST",data:a})}function b(e){return Object(n["a"])({url:"/mail/contact_us/",method:"POST",data:e})}},"70cd":function(e,t,a){"use strict";a("0677")},b9be:function(e,t,a){"use strict";a.r(t);var n=a("7a23"),c=Object(n["withScopeId"])("data-v-91d94cfa");Object(n["pushScopeId"])("data-v-91d94cfa");var r={id:"user-profile-component"},l={class:"top-container"},o={key:0,class:"avatar-container"},i=Object(n["createTextVNode"])(" Upload "),u={key:0,class:"main-container"},s={class:"item"},d=Object(n["createVNode"])("p",{class:"label"},"Username",-1),b={class:"item"},m=Object(n["createVNode"])("p",{class:"label"},"Nickname",-1),p={class:"item"},O=Object(n["createVNode"])("p",{class:"label"},"Email",-1),v={class:"item"},f=Object(n["createVNode"])("p",{class:"label"},"Phone",-1),j={class:"item"},h=Object(n["createVNode"])("p",{class:"label"},"Company",-1),k={class:"item"},V=Object(n["createVNode"])("p",{class:"label"},"Role",-1),N={class:"item"},g=Object(n["createVNode"])("p",{class:"label"},"Team",-1),y={class:"item"},w=Object(n["createVNode"])("p",{class:"label"},"Business Unit",-1),C={class:"item"},x=Object(n["createVNode"])("p",{class:"label"},"Active",-1),B={class:"item done-wrapper"},U=Object(n["createTextVNode"])(" Done ");Object(n["popScopeId"])();var S=c((function(e,t,a,S,T,_){var E=Object(n["resolveComponent"])("font-awesome-icon"),I=Object(n["resolveComponent"])("el-button"),R=Object(n["resolveComponent"])("el-input"),G=Object(n["resolveComponent"])("el-option"),P=Object(n["resolveComponent"])("el-select"),J=Object(n["resolveComponent"])("el-autocomplete"),D=Object(n["resolveComponent"])("Switch"),A=Object(n["resolveDirective"])("permission");return Object(n["openBlock"])(),Object(n["createBlock"])("div",r,[Object(n["createVNode"])("div",l,[e.detail?(Object(n["openBlock"])(),Object(n["createBlock"])("div",o,[Object(n["createVNode"])("div",{class:"avatar",style:{backgroundImage:"url('".concat(e.formatImageUrl(e.detail.photo),"')")}},[e.detail.photo?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createBlock"])(E,{key:0,class:"icon",icon:["fas","user"]}))],4),e.editable?(Object(n["openBlock"])(),Object(n["createBlock"])(I,{key:0,type:"primary",onClick:e.onUpload},{default:c((function(){return[i]})),_:1},8,["onClick"])):Object(n["createCommentVNode"])("",!0)])):Object(n["createCommentVNode"])("",!0),e.editable?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createBlock"])("div",{key:1,class:"button-edit",onClick:t[1]||(t[1]=function(){return e.onEditClick&&e.onEditClick.apply(e,arguments)})},[Object(n["withDirectives"])(Object(n["createVNode"])(E,{class:"icon",icon:["fas","edit"]},null,512),[[A,"member_update"]])]))]),e.detail?(Object(n["openBlock"])(),Object(n["createBlock"])("div",u,[Object(n["createVNode"])("div",s,[d,Object(n["createVNode"])(R,{class:"value",type:"text",modelValue:e.detail.username,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.detail.username=t}),disabled:""},null,8,["modelValue"])]),Object(n["createVNode"])("div",b,[m,Object(n["createVNode"])(R,{class:["value",{editable:e.editable}],type:"text",modelValue:e.detail.nickname,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.detail.nickname=t}),disabled:!e.editable},null,8,["class","modelValue","disabled"])]),Object(n["createVNode"])("div",p,[O,Object(n["createVNode"])(R,{class:["value",{editable:e.editable}],type:"text",modelValue:e.detail.email,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.detail.email=t}),disabled:!e.editable},null,8,["class","modelValue","disabled"])]),Object(n["createVNode"])("div",v,[f,Object(n["createVNode"])(R,{class:["value",{editable:e.editable}],type:"text",modelValue:e.detail.phone,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.detail.phone=t}),disabled:!e.editable},null,8,["class","modelValue","disabled"])]),Object(n["createVNode"])("div",j,[h,Object(n["createVNode"])(R,{class:"value",type:"text",modelValue:e.detail.company,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.detail.company=t}),disabled:""},null,8,["modelValue"])]),Object(n["createVNode"])("div",k,[V,Object(n["createVNode"])("div",{class:["team-wrapper",{editable:e.editable}]},[Object(n["createVNode"])(P,{modelValue:e.detail.role,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.detail.role=t}),disabled:!e.editable||e.roleOptions.length<2},{default:c((function(){return[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.roleOptions,(function(t,a){return Object(n["openBlock"])(),Object(n["createBlock"])(G,{key:a,value:t.value,label:t.label,disabled:!e.editable},null,8,["value","label","disabled"])})),128))]})),_:1},8,["modelValue","disabled"])],2)]),Object(n["createVNode"])("div",N,[g,Object(n["createVNode"])("div",{class:["team-wrapper",{editable:e.editable}]},[Object(n["createVNode"])(P,{modelValue:e.detail.teams,"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.detail.teams=t}),multiple:"",disabled:!e.editable||!e.teamOptions.length<2},{default:c((function(){return[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.teamOptions,(function(e){return Object(n["openBlock"])(),Object(n["createBlock"])(G,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","disabled"])],2)]),Object(n["createVNode"])("div",y,[w,Object(n["createVNode"])("div",{class:["team-wrapper",{editable:e.editable}]},[Object(n["createVNode"])(J,{class:"input",modelValue:e.detail.business_unit,"onUpdate:modelValue":t[9]||(t[9]=function(t){return e.detail.business_unit=t}),"fetch-suggestions":e.onQuerySearch,disabled:!e.editable},null,8,["modelValue","fetch-suggestions","disabled"])],2)]),Object(n["createVNode"])("div",C,[x,Object(n["createVNode"])(D,{value:e.detail.active,onChange:e.onActiveClick},null,8,["value","onChange"])]),Object(n["createVNode"])("div",B,[e.editable?(Object(n["openBlock"])(),Object(n["createBlock"])(I,{key:0,type:"success",onClick:e.onDoneClick},{default:c((function(){return[U]})),_:1},8,["onClick"])):Object(n["createCommentVNode"])("",!0)])])):Object(n["createCommentVNode"])("",!0)])})),T=a("1da1"),_=(a("96cf"),a("d81d"),a("b0c0"),a("caad"),a("2532"),a("4de4"),a("3fd4")),E=Object(n["withScopeId"])("data-v-3bad8cdc"),I=E((function(e,t,a,c,r,l){return Object(n["openBlock"])(),Object(n["createBlock"])("div",null,[Object(n["createVNode"])("input",{type:"checkbox",id:"switch",checked:e.value},null,8,["checked"]),Object(n["createVNode"])("label",{for:"switch",onClick:t[1]||(t[1]=Object(n["withModifiers"])((function(){return e.onClick&&e.onClick.apply(e,arguments)}),["prevent"]))}," Active ")])})),R=Object(n["defineComponent"])({name:"Switch",props:{value:{type:Boolean,default:!1}},setup:function(e,t){var a=t.emit,c=Object(n["toRefs"])(e),r=c.value,l=function(){a("change",!r.value)};return{onClick:l}}}),G=R;a("067c");G.render=I,G.__scopeId="data-v-3bad8cdc";var P=G,J=a("6ec5"),D=a("d257"),A=Object(n["defineComponent"])({name:"UserProfile",components:{Switch:P},props:{id:{type:String,default:"0"}},setup:function(e){var t=Object(n["toRefs"])(e),a=t.id,c=Object(n["ref"])(!1),r=Object(n["ref"])(null),l=Object(n["ref"])(null),o=Object(n["ref"])([]),i=Object(n["ref"])([]),u=Object(n["ref"])([]),s=function(){var e=Object(T["a"])(regeneratorRuntime.mark((function e(){var t,n,c,s,d,b,m,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(J["a"])(parseInt(a.value,10));case 2:return t=e.sent,n=t.data,e.next=6,Object(J["c"])(parseInt(a.value,10),{category:"assignable"});case 6:return c=e.sent,s=c.data,e.next=10,Object(J["d"])(parseInt(a.value,10),{category:"assignable"});case 10:return d=e.sent,b=d.data,e.next=14,Object(J["b"])(parseInt(a.value,10));case 14:m=e.sent,p=m.data,r.value=JSON.parse(JSON.stringify(n)),l.value=n,s.length?o.value=s.map((function(e){return{label:e.name,value:e.value,checked:!1}})):o.value=[{label:n.role_name,value:n.role,checked:!1}],b.length?i.value=b.map((function(e){return{label:e.name,value:e.id,checked:n.teams.includes(e.id)}})):i.value=n.teams.map((function(e,t){return{label:n.teams_name[t],value:e,checked:!0}})),u.value=p;case 21:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n["watchEffect"])(s);var d=function(e){return function(t){return t.toLowerCase().indexOf(e.toLowerCase())>-1}},b=function(){var e=Object(T["a"])(regeneratorRuntime.mark((function e(t,a){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t?u.value.filter(d(t)):u.value,a(n.map((function(e){return{value:e}})));case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),m=function(){var e=Object(T["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!l.value){e.next=4;break}return e.next=3,Object(J["g"])(l.value,parseInt(a.value,10));case 3:c.value=!0;case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(e){var t=l.value;c.value&&t&&(e||_["b"].confirm("Are you sure you want to close this account ?","Warning",{confirmButtonText:"Close",cancelButtonText:"Cancel"}).then((function(){return t.active=!1})).catch((function(){return t.active=!0})),t.active=!0)},O=function(){var e=Object(T["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=document.createElement("input"),t.type="file",t.accept="image/*",t.multiple=!0,t.addEventListener("change",Object(T["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.files){e.next=7;break}return e.next=3,Object(J["h"])(t.files[0],parseInt(a.value,10));case 3:return Object(_["c"])({title:"Success",type:"success",message:"User avatar has been uploaded."}),c.value=!1,e.next=7,s();case 7:case"end":return e.stop()}}),e)})))),t.click();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(T["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!l.value){e.next=17;break}if(l.value.email&&D["a"].test(l.value.email)){e.next=4;break}return Object(_["c"])({type:"error",title:"Error",message:"Please enter a valid email address"}),e.abrupt("return");case 4:return e.prev=4,e.next=7,Object(J["g"])(l.value,parseInt(a.value,10));case 7:Object(_["c"])({title:"Success",type:"success",message:"User profile changed successfully."}),e.next=14;break;case 10:throw e.prev=10,e.t0=e["catch"](4),l.value=JSON.parse(JSON.stringify(r.value)),e.t0;case 14:return e.prev=14,c.value=!1,e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[4,10,14,17]])})));return function(){return e.apply(this,arguments)}}();return{roleOptions:o,teamOptions:i,detail:l,editable:c,onQuerySearch:b,onEditClick:m,onUpload:O,onActiveClick:p,onDoneClick:v,formatImageUrl:D["d"]}}}),L=A;a("70cd");L.render=S,L.__scopeId="data-v-91d94cfa";t["default"]=L}}]);
//# sourceMappingURL=UserProfile.2572a1c1.js.map