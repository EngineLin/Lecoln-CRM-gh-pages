{"version":3,"sources":["webpack:///./src/views/Account/Switch.vue?59ac","webpack:///./src/apis/member.ts","webpack:///./src/views/Account/UserProfile.vue?4d05","webpack:///./src/views/Account/UserProfile.vue","webpack:///./src/views/Account/Switch.vue","webpack:///./src/views/Account/Switch.vue?a9c7","webpack:///./src/views/Account/Switch.vue?ed15","webpack:///./src/views/Account/UserProfile.vue?2ef2","webpack:///./src/views/Account/UserProfile.vue?d6f1"],"names":["getMembers","data","url","method","params","getMember","id","getMemberRoles","getMemberTeams","getMemberBusinessUnits","postMember","email","nickname","role","teams","phone","active","business_unit","postMemberPassword","postMemberAvatar","file","FormData","append","JSON","stringify","postContactUs","class","detail","style","formatImageUrl","photo","icon","editable","type","onUpload","onEditClick","username","disabled","company","roleOptions","length","item","index","key","value","label","multiple","teamOptions","fetch-suggestions","onQuerySearch","onActiveClick","onDoneClick","checked","for","onClick","Component","name","props","Boolean","default","setup","emit","render","__scopeId","components","Switch","String","_storeDetail","businessUnitOptions","init","parseInt","category","roles","businessUnit","parse","map","it","role_name","includes","teams_name","createFilter","queryString","option","toLowerCase","indexOf","cb","results","filter","text","_detail","confirm","confirmButtonText","cancelButtonText","then","catch","element","document","createElement","accept","addEventListener","files","title","message","click","test"],"mappings":"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","file":"js/UserProfile.a63c5377.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Switch.vue?vue&type=style&index=0&id=3bad8cdc&scoped=true&lang=css\"","import request from \"@/apis/http\";\nimport { AxiosPromise } from \"axios\";\nimport { Member, MemberTeam, ContactUsParams, MemberRole, MembersParams } from \"@/typings/member\";\n\nexport function getMembers(data: MembersParams): AxiosPromise<Member[]> {\n  return request({\n    url: \"/members/\",\n    method: \"GET\",\n    params: data\n  });\n}\n\nexport function getMember(id?: number): AxiosPromise<Member> {\n  if (id) {\n    return request({\n      url: `/member/${id}/`,\n      method: \"GET\"\n    });\n  }\n  return request({\n    url: `/member/`,\n    method: \"GET\"\n  });\n}\n\nexport function getMemberRoles(id?: number, params?: { category?: string }): AxiosPromise<MemberRole[]> {\n  if (id) {\n    return request({\n      url: `/member/${id}/roles/`,\n      method: \"GET\",\n      params\n    });\n  }\n  return request({\n    url: `/member/roles/`,\n    method: \"GET\",\n    params\n  });\n}\n\n// Haven't id means get self teams data by token.\nexport function getMemberTeams(\n  id?: number,\n  params?: { category?: string }\n): AxiosPromise<MemberTeam[]> {\n  if (id) {\n    return request({\n      url: `/member/${id}/teams/`,\n      method: \"GET\",\n      params\n    });\n  }\n  return request({\n    url: \"/member/teams/\",\n    method: \"GET\",\n    params\n  });\n}\n\nexport function getMemberBusinessUnits(id?: number): AxiosPromise<string[]> {\n  if (id) {\n    return request({\n      url: `/member/${id}/business_units/`,\n      method: \"GET\"\n    });\n  }\n  return request({\n    url: \"/member/business_units/\",\n    method: \"GET\"\n  });\n}\n\nexport function postMember(params: Member, id?: number) {\n  const data = {\n    email: params.email,\n    nickname: params.nickname,\n    role: params.role,\n    teams: params.teams,\n    phone: params.phone,\n    active: params.active,\n    business_unit: params.business_unit\n  };\n  if (id) {\n    return request({\n      url: `/member/${id}/`,\n      method: \"PUT\",\n      data\n    });\n  }\n  return request({\n    url: `/member/`,\n    method: \"PUT\",\n    data\n  });\n}\n\nexport function postMemberPassword(data: { password: string }) {\n  return request({\n    url: `/member/`,\n    method: \"PUT\",\n    data\n  });\n}\n\nexport function postMemberAvatar(file: File, id?: number) {\n  const data = new FormData();\n  data.append(\"file\", file);\n  if (id) data.append(\"member\", JSON.stringify(id));\n\n  return request({\n    url: \"/member/medias/\",\n    method: \"POST\",\n    data\n  });\n}\n\nexport function postContactUs(data: ContactUsParams) {\n  return request({\n    url: `/mail/contact_us/`,\n    method: \"POST\",\n    data\n  });\n}\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./UserProfile.vue?vue&type=style&index=0&id=91d94cfa&scoped=true&lang=stylus\"","<template>\n  <div id=\"user-profile-component\">\n    <div class=\"top-container\">\n      <div v-if=\"detail\" class=\"avatar-container\">\n        <div\n          class=\"avatar\"\n          :style=\"{ backgroundImage: `url('${formatImageUrl(detail.photo)}')` }\"\n        >\n          <font-awesome-icon\n            v-if=\"!detail.photo\"\n            class=\"icon\"\n            :icon=\"['fas', 'user']\"\n          ></font-awesome-icon>\n        </div>\n        <el-button v-if=\"editable\" type=\"primary\" @click=\"onUpload\">\n          Upload\n        </el-button>\n      </div>\n      <div v-if=\"!editable\" class=\"button-edit\" @click=\"onEditClick\">\n        <font-awesome-icon\n          v-permission=\"'member_update'\"\n          class=\"icon\"\n          :icon=\"['fas', 'edit']\"\n        ></font-awesome-icon>\n      </div>\n    </div>\n    <div class=\"main-container\" v-if=\"detail\">\n      <div class=\"item\">\n        <p class=\"label\">Username</p>\n        <el-input\n          class=\"value\"\n          type=\"text\"\n          v-model=\"detail.username\"\n          disabled\n        ></el-input>\n      </div>\n      <div class=\"item\">\n        <p class=\"label\">Nickname</p>\n        <el-input\n          class=\"value\"\n          :class=\"{ editable: editable }\"\n          type=\"text\"\n          v-model=\"detail.nickname\"\n          :disabled=\"!editable\"\n        ></el-input>\n      </div>\n      <div class=\"item\">\n        <p class=\"label\">Email</p>\n        <el-input\n          class=\"value\"\n          :class=\"{ editable: editable }\"\n          type=\"text\"\n          v-model=\"detail.email\"\n          :disabled=\"!editable\"\n        ></el-input>\n      </div>\n      <div class=\"item\">\n        <p class=\"label\">Phone</p>\n        <el-input\n          class=\"value\"\n          :class=\"{ editable: editable }\"\n          type=\"text\"\n          v-model=\"detail.phone\"\n          :disabled=\"!editable\"\n        ></el-input>\n      </div>\n      <div class=\"item\">\n        <p class=\"label\">Company</p>\n        <el-input\n          class=\"value\"\n          type=\"text\"\n          v-model=\"detail.company\"\n          disabled\n        ></el-input>\n      </div>\n      <div class=\"item\">\n        <p class=\"label\">Role</p>\n        <div class=\"team-wrapper\" :class=\"{ editable: editable }\">\n          <el-select\n            v-model=\"detail.role\"\n            :disabled=\"!editable || roleOptions.length < 2\"\n          >\n            <el-option\n              v-for=\"(item, index) in roleOptions\"\n              :key=\"index\"\n              :value=\"item.value\"\n              :label=\"item.label\"\n              :disabled=\"!editable\"\n            ></el-option>\n          </el-select>\n        </div>\n      </div>\n      <div class=\"item\">\n        <p class=\"label\">Team</p>\n        <div class=\"team-wrapper\" :class=\"{ editable: editable }\">\n          <el-select\n            v-model=\"detail.teams\"\n            multiple\n            :disabled=\"!editable || !teamOptions.length < 2\"\n          >\n            <el-option\n              v-for=\"item in teamOptions\"\n              :key=\"item.value\"\n              :label=\"item.label\"\n              :value=\"item.value\"\n            >\n            </el-option>\n          </el-select>\n        </div>\n      </div>\n      <div class=\"item\">\n        <p class=\"label\">Business Unit</p>\n        <div class=\"team-wrapper\" :class=\"{ editable: editable }\">\n          <el-autocomplete\n            class=\"input\"\n            v-model=\"detail.business_unit\"\n            :fetch-suggestions=\"onQuerySearch\"\n            :disabled=\"!editable\"\n          ></el-autocomplete>\n        </div>\n      </div>\n      <div class=\"item\">\n        <p class=\"label\">Active</p>\n        <Switch :value=\"detail.active\" @change=\"onActiveClick\"></Switch>\n      </div>\n      <div class=\"item done-wrapper\">\n        <el-button v-if=\"editable\" type=\"success\" @click=\"onDoneClick\">\n          Done\n        </el-button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, toRefs, ref, watchEffect } from \"vue\";\nimport { ElMessageBox } from \"element-plus\";\nimport Switch from \"./Switch.vue\";\nimport {\n  getMember,\n  getMemberBusinessUnits,\n  getMemberRoles,\n  getMemberTeams,\n  postMember,\n  postMemberAvatar\n} from \"@/apis/member\";\nimport { Member, MemberTeam } from \"@/typings/member\";\nimport { OptionItem } from \"@/typings/asideFilter\";\nimport { ElNotification } from \"element-plus\";\nimport { emailRule, formatImageUrl } from \"@/utils\";\n\nconst Component = defineComponent({\n  name: \"UserProfile\",\n  components: { Switch },\n  props: {\n    id: {\n      type: String,\n      default: \"0\"\n    }\n  },\n  setup(props) {\n    const { id } = toRefs(props);\n    const editable = ref(false);\n    const _storeDetail = ref<Member | null>(null);\n    const detail = ref<Member | null>(null);\n    const roleOptions = ref<OptionItem[]>([]);\n    const teamOptions = ref<OptionItem[]>([]);\n    const businessUnitOptions = ref<string[]>([]);\n\n    const init = async () => {\n      const { data } = await getMember(parseInt(id.value, 10));\n      const { data: roles } = await getMemberRoles(parseInt(id.value, 10), {\n        category: \"assignable\"\n      });\n      const { data: teams } = await getMemberTeams(parseInt(id.value, 10), {\n        category: \"assignable\"\n      });\n      const { data: businessUnit } = await getMemberBusinessUnits(\n        parseInt(id.value, 10)\n      );\n\n      _storeDetail.value = JSON.parse(JSON.stringify(data));\n      detail.value = data;\n\n      if (roles.length) {\n        roleOptions.value = roles.map(\n          (it: { name: string; value: number }) => ({\n            label: it.name,\n            value: it.value,\n            checked: false\n          })\n        );\n      } else {\n        roleOptions.value = [\n          {\n            label: data.role_name,\n            value: data.role,\n            checked: false\n          }\n        ];\n      }\n\n      if (teams.length) {\n        teamOptions.value = teams.map((it: MemberTeam) => ({\n          label: it.name,\n          value: it.id,\n          checked: data.teams.includes(it.id)\n        }));\n      } else {\n        teamOptions.value = data.teams.map((id: number, index: number) => ({\n          label: data.teams_name[index],\n          value: id,\n          checked: true\n        }));\n      }\n      businessUnitOptions.value = businessUnit;\n    };\n\n    watchEffect(init);\n\n    const createFilter = (queryString: string) => {\n      return (option: string) => {\n        return option.toLowerCase().indexOf(queryString.toLowerCase()) > -1;\n      };\n    };\n\n    const onQuerySearch = async (queryString: string, cb: Function) => {\n      const results = queryString\n        ? businessUnitOptions.value.filter(createFilter(queryString))\n        : businessUnitOptions.value;\n      cb(results.map((text: string) => ({ value: text })));\n    };\n\n    const onEditClick = async () => {\n      if (detail.value) {\n        await postMember(detail.value, parseInt(id.value, 10));\n        editable.value = true;\n      }\n    };\n\n    const onActiveClick = (value: boolean) => {\n      const _detail = detail.value;\n\n      if (editable.value && _detail) {\n        if (!value) {\n          ElMessageBox.confirm(\n            \"Are you sure you want to close this account ?\",\n            \"Warning\",\n            {\n              confirmButtonText: \"Close\",\n              cancelButtonText: \"Cancel\"\n            }\n          )\n            .then(() => (_detail.active = false))\n            .catch(() => (_detail.active = true));\n        }\n        _detail.active = true;\n      }\n    };\n\n    const onUpload = async () => {\n      const element = document.createElement(\"input\");\n      element.type = \"file\";\n      element.accept = \"image/*\";\n      element.multiple = true;\n      element.addEventListener(\"change\", async () => {\n        if (element.files) {\n          await postMemberAvatar(element.files[0], parseInt(id.value, 10));\n          ElNotification({\n            title: \"Success\",\n            type: \"success\",\n            message: `User avatar has been uploaded.`\n          });\n          editable.value = false;\n          await init();\n        }\n      });\n      element.click();\n    };\n\n    const onDoneClick = async () => {\n      if (detail.value) {\n        if (!detail.value.email || !emailRule.test(detail.value.email)) {\n          ElNotification({\n            type: \"error\",\n            title: \"Error\",\n            message: \"Please enter a valid email address\"\n          });\n          return;\n        }\n        try {\n          await postMember(detail.value, parseInt(id.value, 10));\n          ElNotification({\n            title: \"Success\",\n            type: \"success\",\n            message: `User profile changed successfully.`\n          });\n        } catch (e) {\n          // Reset form\n          detail.value = JSON.parse(JSON.stringify(_storeDetail.value));\n          throw e;\n        } finally {\n          editable.value = false;\n        }\n      }\n    };\n\n    return {\n      roleOptions,\n      teamOptions,\n      detail,\n      editable,\n\n      onQuerySearch,\n\n      onEditClick,\n      onUpload,\n      onActiveClick,\n      onDoneClick,\n\n      formatImageUrl\n    };\n  }\n});\n\nexport default Component;\n</script>\n\n<style scoped lang=\"stylus\">\n#user-profile-component\n  page-container()\n  flex(flex-start)\n  flex-direction column\n  height 100%\n  background-color $color-background\n\n  .top-container\n    flex(space-between, flex-end)\n    box-sizing border-box\n    width 80%\n    padding-left 30px\n    margin-bottom 30px\n\n    .avatar-container\n      display flex\n      align-items end\n\n      .avatar\n        flex()\n        width 100px\n        height 100px\n        border 1px solid $color-black\n        border-radius 50%\n        background $color-gray\n        font-size 40px\n        margin-right 30px\n        background-position center\n        background-repeat no-repeat\n        background-size cover\n\n    .button-edit\n      font-size 30px\n      cursor pointer\n\n  .main-container\n    width 80%\n    flex-wrap wrap\n    flex(flex-start, flex-start)\n\n    .item\n      width calc(50% - 30px)\n      margin 0 15px 15px\n\n      :deep() .el-select\n        width 100%\n\n      .label\n        padding 15px 8px\n        font-size $font-size-lg2x\n        font-weight 700\n\n      .value\n        box-sizing border-box\n        width 100%\n        border-radius 10px\n        background white\n        padding 5px 8px\n        font-size $font-size-lg2x\n        font-weight 400\n\n        &:focus\n          outline unset\n\n      .editable\n        border 1px solid $color-black\n\n      .team-wrapper\n        box-sizing border-box\n        padding 5px 8px\n        width 100%\n        font-size $font-size-lg2x\n        font-weight 400\n        border-radius 10px\n        background white\n\n        :deep() .el-autocomplete\n          width 100%\n\n      :deep() .el-input__inner\n        background-color white !important\n        border-color transparent !important\n        border none !important\n        color $color-black !important\n\n      :deep() .el-tag\n        border 1px solid $color-active\n\n    .done-wrapper\n      flex(flex-start, flex-end)\n      height 100px\n</style>\n","<template>\n  <div>\n    <input type=\"checkbox\" id=\"switch\" :checked=\"value\" />\n    <label for=\"switch\" @click.prevent=\"onClick\">\n      Active\n    </label>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, toRefs } from \"vue\";\n\nconst Component = defineComponent({\n  name: \"Switch\",\n  props: {\n    value: {\n      type: Boolean,\n      default: false\n    }\n  },\n  setup(props, { emit }) {\n    const { value } = toRefs(props);\n\n    const onClick = () => {\n      emit(\"change\", !value.value);\n    };\n\n    return {\n      onClick\n    };\n  }\n});\n\nexport default Component;\n</script>\n\n<style scoped>\ninput[type=\"checkbox\"] {\n  height: 0;\n  width: 0;\n  visibility: hidden;\n}\n\nlabel {\n  cursor: pointer;\n  text-indent: -9999px;\n  width: 60px;\n  height: 30px;\n  background: grey;\n  display: block;\n  border-radius: 30px;\n  position: relative;\n}\n\nlabel:after {\n  content: \"\";\n  position: absolute;\n  top: 1.5px;\n  left: 1.5px;\n  width: 27px;\n  height: 27px;\n  background: #fff;\n  border-radius: 27px;\n  transition: 0.3s;\n}\n\ninput:checked + label {\n  background: #20bfa9;\n}\n\ninput:checked + label:after {\n  left: calc(100% - 1.5px);\n  transform: translateX(-100%);\n}\n\nlabel:active:after {\n  width: 39px;\n}\n</style>\n","\nimport { defineComponent, toRefs } from \"vue\";\n\nconst Component = defineComponent({\n  name: \"Switch\",\n  props: {\n    value: {\n      type: Boolean,\n      default: false\n    }\n  },\n  setup(props, { emit }) {\n    const { value } = toRefs(props);\n\n    const onClick = () => {\n      emit(\"change\", !value.value);\n    };\n\n    return {\n      onClick\n    };\n  }\n});\n\nexport default Component;\n","import { render } from \"./Switch.vue?vue&type=template&id=3bad8cdc&scoped=true\"\nimport script from \"./Switch.vue?vue&type=script&lang=ts\"\nexport * from \"./Switch.vue?vue&type=script&lang=ts\"\n\nimport \"./Switch.vue?vue&type=style&index=0&id=3bad8cdc&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-3bad8cdc\"\n\nexport default script","\nimport { defineComponent, toRefs, ref, watchEffect } from \"vue\";\nimport { ElMessageBox } from \"element-plus\";\nimport Switch from \"./Switch.vue\";\nimport {\n  getMember,\n  getMemberBusinessUnits,\n  getMemberRoles,\n  getMemberTeams,\n  postMember,\n  postMemberAvatar\n} from \"@/apis/member\";\nimport { Member, MemberTeam } from \"@/typings/member\";\nimport { OptionItem } from \"@/typings/asideFilter\";\nimport { ElNotification } from \"element-plus\";\nimport { emailRule, formatImageUrl } from \"@/utils\";\n\nconst Component = defineComponent({\n  name: \"UserProfile\",\n  components: { Switch },\n  props: {\n    id: {\n      type: String,\n      default: \"0\"\n    }\n  },\n  setup(props) {\n    const { id } = toRefs(props);\n    const editable = ref(false);\n    const _storeDetail = ref<Member | null>(null);\n    const detail = ref<Member | null>(null);\n    const roleOptions = ref<OptionItem[]>([]);\n    const teamOptions = ref<OptionItem[]>([]);\n    const businessUnitOptions = ref<string[]>([]);\n\n    const init = async () => {\n      const { data } = await getMember(parseInt(id.value, 10));\n      const { data: roles } = await getMemberRoles(parseInt(id.value, 10), {\n        category: \"assignable\"\n      });\n      const { data: teams } = await getMemberTeams(parseInt(id.value, 10), {\n        category: \"assignable\"\n      });\n      const { data: businessUnit } = await getMemberBusinessUnits(\n        parseInt(id.value, 10)\n      );\n\n      _storeDetail.value = JSON.parse(JSON.stringify(data));\n      detail.value = data;\n\n      if (roles.length) {\n        roleOptions.value = roles.map(\n          (it: { name: string; value: number }) => ({\n            label: it.name,\n            value: it.value,\n            checked: false\n          })\n        );\n      } else {\n        roleOptions.value = [\n          {\n            label: data.role_name,\n            value: data.role,\n            checked: false\n          }\n        ];\n      }\n\n      if (teams.length) {\n        teamOptions.value = teams.map((it: MemberTeam) => ({\n          label: it.name,\n          value: it.id,\n          checked: data.teams.includes(it.id)\n        }));\n      } else {\n        teamOptions.value = data.teams.map((id: number, index: number) => ({\n          label: data.teams_name[index],\n          value: id,\n          checked: true\n        }));\n      }\n      businessUnitOptions.value = businessUnit;\n    };\n\n    watchEffect(init);\n\n    const createFilter = (queryString: string) => {\n      return (option: string) => {\n        return option.toLowerCase().indexOf(queryString.toLowerCase()) > -1;\n      };\n    };\n\n    const onQuerySearch = async (queryString: string, cb: Function) => {\n      const results = queryString\n        ? businessUnitOptions.value.filter(createFilter(queryString))\n        : businessUnitOptions.value;\n      cb(results.map((text: string) => ({ value: text })));\n    };\n\n    const onEditClick = async () => {\n      if (detail.value) {\n        await postMember(detail.value, parseInt(id.value, 10));\n        editable.value = true;\n      }\n    };\n\n    const onActiveClick = (value: boolean) => {\n      const _detail = detail.value;\n\n      if (editable.value && _detail) {\n        if (!value) {\n          ElMessageBox.confirm(\n            \"Are you sure you want to close this account ?\",\n            \"Warning\",\n            {\n              confirmButtonText: \"Close\",\n              cancelButtonText: \"Cancel\"\n            }\n          )\n            .then(() => (_detail.active = false))\n            .catch(() => (_detail.active = true));\n        }\n        _detail.active = true;\n      }\n    };\n\n    const onUpload = async () => {\n      const element = document.createElement(\"input\");\n      element.type = \"file\";\n      element.accept = \"image/*\";\n      element.multiple = true;\n      element.addEventListener(\"change\", async () => {\n        if (element.files) {\n          await postMemberAvatar(element.files[0], parseInt(id.value, 10));\n          ElNotification({\n            title: \"Success\",\n            type: \"success\",\n            message: `User avatar has been uploaded.`\n          });\n          editable.value = false;\n          await init();\n        }\n      });\n      element.click();\n    };\n\n    const onDoneClick = async () => {\n      if (detail.value) {\n        if (!detail.value.email || !emailRule.test(detail.value.email)) {\n          ElNotification({\n            type: \"error\",\n            title: \"Error\",\n            message: \"Please enter a valid email address\"\n          });\n          return;\n        }\n        try {\n          await postMember(detail.value, parseInt(id.value, 10));\n          ElNotification({\n            title: \"Success\",\n            type: \"success\",\n            message: `User profile changed successfully.`\n          });\n        } catch (e) {\n          // Reset form\n          detail.value = JSON.parse(JSON.stringify(_storeDetail.value));\n          throw e;\n        } finally {\n          editable.value = false;\n        }\n      }\n    };\n\n    return {\n      roleOptions,\n      teamOptions,\n      detail,\n      editable,\n\n      onQuerySearch,\n\n      onEditClick,\n      onUpload,\n      onActiveClick,\n      onDoneClick,\n\n      formatImageUrl\n    };\n  }\n});\n\nexport default Component;\n","import { render } from \"./UserProfile.vue?vue&type=template&id=91d94cfa&scoped=true\"\nimport script from \"./UserProfile.vue?vue&type=script&lang=ts\"\nexport * from \"./UserProfile.vue?vue&type=script&lang=ts\"\n\nimport \"./UserProfile.vue?vue&type=style&index=0&id=91d94cfa&scoped=true&lang=stylus\"\nscript.render = render\nscript.__scopeId = \"data-v-91d94cfa\"\n\nexport default script"],"sourceRoot":""}