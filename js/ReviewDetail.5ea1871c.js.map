{"version":3,"sources":["webpack:///./src/components/OverallCard.vue?88e0","webpack:///./node_modules/core-js/internals/get-substitution.js","webpack:///./node_modules/core-js/modules/es.regexp.to-string.js","webpack:///./src/views/Review/ReviewDetail.vue","webpack:///./src/views/Review/ReviewDetail.vue?b57c","webpack:///./src/views/Review/ReviewDetail.vue?37e7","webpack:///./node_modules/core-js/modules/es.string.replace.js","webpack:///./src/views/Review/ReviewDetail.vue?b1c8","webpack:///./src/apis/review.ts","webpack:///./src/apis/project.ts","webpack:///./src/components/OverallCard.vue","webpack:///./src/components/OverallCard.vue?57ec","webpack:///./src/components/OverallCard.vue?d68c"],"names":["toObject","floor","Math","replace","SUBSTITUTION_SYMBOLS","SUBSTITUTION_SYMBOLS_NO_NAMED","module","exports","matched","str","position","captures","namedCaptures","replacement","tailPos","length","m","symbols","undefined","call","match","ch","capture","charAt","slice","n","f","redefine","anObject","fails","flags","TO_STRING","RegExpPrototype","RegExp","prototype","nativeToString","NOT_GENERIC","source","INCORRECT_NAME","name","R","this","p","String","rf","unsafe","id","class","cellspacing","cellpadding","projectData","gutter","span","title","data","timeConsumingData","messages","timeConsumingMessages","stagesData","stagesMessages","commentsData","commentsMessages","src","formatImageUrl","company","buyer","logo","alt","supplier","style","getPercentage","buyerTableData","columns","item","key","rows","index","supplierTableData","Component","components","OverallCard","props","type","Number","default","setup","router","ratioData","ratioTotal","value","reduce","prev","count","colors","init","loadingInstance","project","timeConsuming","ratio","comment","buyerTable","supplierTable","map","it","total_days","itemStyle","color","total","curr","month","days","reverse","close","target","find","round","render","__scopeId","fixRegExpWellKnownSymbolLogic","toLength","toInteger","requireObjectCoercible","advanceStringIndex","getSubstitution","regExpExec","max","min","maybeToString","REPLACE","nativeReplace","maybeCallNative","reason","REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE","REPLACE_KEEPS_$0","UNSAFE_SUBSTITUTE","searchValue","replaceValue","O","replacer","regexp","indexOf","res","done","rx","S","functionalReplace","global","fullUnicode","unicode","lastIndex","results","result","push","matchStr","accumulatedResult","nextSourcePosition","i","j","groups","replacerArgs","concat","apply","getReviewStatusPie","params","url","method","getReviewSourceRatio","getReviewSuccessRate","getReviewTimeConsuming","getReviewStagesRatio","getReviewCommentsRatio","getReviewTimeConsumingTable","side","company_side","getAvaliableOptions","trialType","collectionId","fabricId","collection_id","fabric_id","getProjects","getProject","postCreateProject","payload","postCreateStage","formData","FormData","append","description","price","started_at","files","postUpdateStage","getProjectStage","postCreateDiscussion","message","toString","postDeleteDiscussion","postEditDiscussion","deleteDicussionFile","getProjectAvailableMember","q","getProjectJoinedMembers","postProjectJoinedMemberUpdate","joined_member","postProjectStatusUpdate","success","postStageMediaCreate","stage","file","demo_fabric","getStagenames","companyId","getInform","postInform","subject","text","emails","recipients","putUploadProjectFabric","projectId","form","collection","start_fabric","start_fabric_image","end_fabric","end_fabric_image","postUploadProjectFabric","hasData","icon","_","splitAt","Array","option","tooltip","trigger","formatter","param","dataIndex","marker","series","radius","label","show","chart","echarts","document","getElementById","setOption"],"mappings":"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","file":"js/ReviewDetail.5ea1871c.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./OverallCard.vue?vue&type=style&index=0&id=e29d2ed6&scoped=true&lang=stylus\"","var toObject = require('../internals/to-object');\n\nvar floor = Math.floor;\nvar replace = ''.replace;\nvar SUBSTITUTION_SYMBOLS = /\\$([$&'`]|\\d{1,2}|<[^>]*>)/g;\nvar SUBSTITUTION_SYMBOLS_NO_NAMED = /\\$([$&'`]|\\d{1,2})/g;\n\n// `GetSubstitution` abstract operation\n// https://tc39.es/ecma262/#sec-getsubstitution\nmodule.exports = function (matched, str, position, captures, namedCaptures, replacement) {\n  var tailPos = position + matched.length;\n  var m = captures.length;\n  var symbols = SUBSTITUTION_SYMBOLS_NO_NAMED;\n  if (namedCaptures !== undefined) {\n    namedCaptures = toObject(namedCaptures);\n    symbols = SUBSTITUTION_SYMBOLS;\n  }\n  return replace.call(replacement, symbols, function (match, ch) {\n    var capture;\n    switch (ch.charAt(0)) {\n      case '$': return '$';\n      case '&': return matched;\n      case '`': return str.slice(0, position);\n      case \"'\": return str.slice(tailPos);\n      case '<':\n        capture = namedCaptures[ch.slice(1, -1)];\n        break;\n      default: // \\d\\d?\n        var n = +ch;\n        if (n === 0) return match;\n        if (n > m) {\n          var f = floor(n / 10);\n          if (f === 0) return match;\n          if (f <= m) return captures[f - 1] === undefined ? ch.charAt(1) : captures[f - 1] + ch.charAt(1);\n          return match;\n        }\n        capture = captures[n - 1];\n    }\n    return capture === undefined ? '' : capture;\n  });\n};\n","'use strict';\nvar redefine = require('../internals/redefine');\nvar anObject = require('../internals/an-object');\nvar fails = require('../internals/fails');\nvar flags = require('../internals/regexp-flags');\n\nvar TO_STRING = 'toString';\nvar RegExpPrototype = RegExp.prototype;\nvar nativeToString = RegExpPrototype[TO_STRING];\n\nvar NOT_GENERIC = fails(function () { return nativeToString.call({ source: 'a', flags: 'b' }) != '/a/b'; });\n// FF44- RegExp#toString has a wrong name\nvar INCORRECT_NAME = nativeToString.name != TO_STRING;\n\n// `RegExp.prototype.toString` method\n// https://tc39.es/ecma262/#sec-regexp.prototype.tostring\nif (NOT_GENERIC || INCORRECT_NAME) {\n  redefine(RegExp.prototype, TO_STRING, function toString() {\n    var R = anObject(this);\n    var p = String(R.source);\n    var rf = R.flags;\n    var f = String(rf === undefined && R instanceof RegExp && !('flags' in RegExpPrototype) ? flags.call(R) : rf);\n    return '/' + p + '/' + f;\n  }, { unsafe: true });\n}\n","<template>\n  <div id=\"review-detail-component\">\n    <div class=\"top-container\">\n      <h1 class=\"zoom-title\" v-if=\"projectData\">{{ projectData.name }}</h1>\n      <el-row :gutter=\"30\">\n        <el-col :span=\"8\">\n          <OverallCard\n            title=\"Time Consuming\"\n            :data=\"timeConsumingData\"\n            :messages=\"timeConsumingMessages\"\n          ></OverallCard>\n        </el-col>\n        <el-col :span=\"8\">\n          <OverallCard\n            title=\"Stages\"\n            :data=\"stagesData\"\n            :messages=\"stagesMessages\"\n          ></OverallCard>\n        </el-col>\n        <el-col :span=\"8\">\n          <OverallCard\n            title=\"Comments\"\n            :data=\"commentsData\"\n            :messages=\"commentsMessages\"\n          ></OverallCard>\n        </el-col>\n      </el-row>\n    </div>\n    <div class=\"main-container\">\n      <div class=\"card\" v-if=\"projectData\">\n        <h2 class=\"title\">Stage Statistics</h2>\n        <div class=\"battle-progress-container\">\n          <div class=\"brand-container\">\n            <div class=\"brand\">\n              <img\n                :src=\"formatImageUrl(projectData.company.buyer.logo)\"\n                alt=\"Buyer\"\n              />\n            </div>\n            <div class=\"brand\">\n              <img\n                :src=\"formatImageUrl(projectData.company.supplier.logo)\"\n                alt=\"Supplier\"\n              />\n            </div>\n          </div>\n          <div class=\"progress\">\n            <div\n              class=\"left\"\n              :style=\"{\n                width: getPercentage(projectData.company.buyer.name) + '%'\n              }\"\n            ></div>\n            <div\n              class=\"right\"\n              :style=\"{\n                width: getPercentage(projectData.company.supplier.name) + '%'\n              }\"\n            ></div>\n          </div>\n          <div class=\"percent-container\">\n            <div class=\"left-container\">\n              <h3 class=\"label\">{{ projectData.company.buyer.name }}</h3>\n              <p class=\"percent-text\">\n                {{ getPercentage(projectData.company.buyer.name) }}%\n              </p>\n            </div>\n            <div class=\"right-container\">\n              <p class=\"percent-text\">\n                {{ getPercentage(projectData.company.supplier.name) }}%\n              </p>\n              <h3 class=\"label\">{{ projectData.company.supplier.name }}</h3>\n            </div>\n          </div>\n        </div>\n        <div class=\"list-container\">\n          <table cellspacing=\"0\" cellpadding=\"0\">\n            <thead>\n              <tr>\n                <th\n                  v-for=\"item in buyerTableData.columns\"\n                  :class=\"{ order: item === 'Order' }\"\n                  :key=\"item\"\n                >\n                  {{ item !== \"Order\" ? item : \"#\" }}\n                </th>\n              </tr>\n            </thead>\n            <tr class=\"spacer\"></tr>\n            <tbody>\n              <template\n                v-for=\"(item, index) in buyerTableData.rows\"\n                :key=\"index\"\n              >\n                <tr class=\"item item-left\">\n                  <td v-for=\"key in buyerTableData.columns\" :key=\"key\">\n                    <div class=\"center\">\n                      <div\n                        v-if=\"key === 'User'\"\n                        class=\"user\"\n                        :style=\"{\n                          backgroundImage: `url('${formatImageUrl(item[key])}')`\n                        }\"\n                      ></div>\n                      <p v-else>\n                        {{ item[key] }}\n                      </p>\n                    </div>\n                  </td>\n                </tr>\n                <tr class=\"spacer\"></tr>\n              </template>\n            </tbody>\n          </table>\n          <table class=\"right-table\" cellspacing=\"0\" cellpadding=\"0\">\n            <thead>\n              <tr>\n                <th\n                  v-for=\"item in supplierTableData.columns\"\n                  :class=\"{ order: item === 'Order' }\"\n                  :key=\"item\"\n                >\n                  {{ item !== \"Order\" ? item : \"#\" }}\n                </th>\n              </tr>\n              <tr class=\"spacer\"></tr>\n            </thead>\n            <tbody>\n              <template\n                v-for=\"(item, index) in supplierTableData.rows\"\n                :key=\"index\"\n              >\n                <tr class=\"item item-right\">\n                  <td v-for=\"key in supplierTableData.columns\" :key=\"key\">\n                    <div class=\"center\">\n                      <div\n                        v-if=\"key === 'User'\"\n                        class=\"user\"\n                        :style=\"{\n                          backgroundImage: `url('${formatImageUrl(item[key])}')`\n                        }\"\n                      ></div>\n                      <p v-else>\n                        {{ item[key] }}\n                      </p>\n                    </div>\n                  </td>\n                </tr>\n                <tr class=\"spacer\"></tr>\n              </template>\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, toRefs, ref, onMounted, computed } from \"vue\";\nimport OverallCard from \"@/components/OverallCard.vue\";\nimport { useRouter } from \"vue-router\";\nimport { formatImageUrl, loading } from \"../../utils\";\nimport {\n  getReviewCommentsRatio,\n  getReviewStagesRatio,\n  getReviewTimeConsuming,\n  getReviewTimeConsumingTable\n} from \"@/apis/review\";\nimport { getProject } from \"@/apis/project\";\nimport { Project } from \"@/typings/project\";\n\nconst Component = defineComponent({\n  name: \"ReviewDetail\",\n  components: {\n    OverallCard\n  },\n  props: {\n    id: {\n      type: Number,\n      default: 1\n    }\n  },\n  setup(props) {\n    const router = useRouter();\n    const { id } = toRefs(props);\n    const projectData = ref<Project | null>(null);\n    const buyerTableData = ref({});\n    const supplierTableData = ref({});\n    const ratioData = ref([]);\n\n    const timeConsumingData = ref([]);\n    const stagesData = ref([]);\n    const commentsData = ref([]);\n    const timeConsumingMessages = ref<string[]>([]);\n    const stagesMessages = ref([]);\n    const commentsMessages = ref([]);\n\n    const ratioTotal = computed(() =>\n      ratioData.value.reduce((prev, { count }) => (prev + count) as number, 0)\n    );\n\n    const colors = [\"#20bfa9\", \"#eca947\"];\n\n    const init = async () => {\n      const loadingInstance = loading();\n      try {\n        const { data: project } = await getProject(id.value);\n        const { data: timeConsuming } = await getReviewTimeConsuming(id.value);\n        const { data: ratio } = await getReviewStagesRatio(id.value);\n        const { data: comment } = await getReviewCommentsRatio(id.value);\n        const { data: buyerTable } = await getReviewTimeConsumingTable(\n          id.value,\n          \"buyer\"\n        );\n        const { data: supplierTable } = await getReviewTimeConsumingTable(\n          id.value,\n          \"supplier\"\n        );\n\n        projectData.value = project;\n\n        timeConsumingData.value = timeConsuming.map(\n          (it: { company: string; total_days: string }, index: number) => ({\n            name: it.company,\n            value: it.total_days,\n            itemStyle: { color: colors[index] }\n          })\n        );\n        stagesData.value = ratio.map(\n          (it: { name: string; count: string }, index: number) => ({\n            name: it.name,\n            value: it.count,\n            itemStyle: { color: colors[index] }\n          })\n        );\n        commentsData.value = comment.map(\n          (it: { name: string; count: string }, index: number) => ({\n            name: it.name,\n            value: it.count,\n            itemStyle: { color: colors[index] }\n          })\n        );\n        const total = timeConsuming.reduce(\n          (prev: number, curr: { company: string; total_days: number }) =>\n            prev + curr.total_days,\n          0\n        );\n        const month = Math.floor(total / 30);\n        const days = total % 30;\n\n        timeConsumingMessages.value = [\n          `Total: ${month ? month + \" months\" : \"\"} ${days} days`,\n          ...timeConsuming\n            .reverse()\n            .map((it: { company: string; total_days: number }) => {\n              const month = Math.floor(it.total_days / 30);\n              const days = it.total_days % 30;\n              return `${it.company}: ${\n                month ? month + \" months\" : \"\"\n              } ${days} days`;\n            })\n        ];\n        stagesMessages.value = ratio\n          .reverse()\n          .map(\n            (it: { name: string; count: string }) => `${it.name}: ${it.count}`\n          );\n        commentsMessages.value = comment\n          .reverse()\n          .map(\n            (it: { name: string; count: string }) => `${it.name}: ${it.count}`\n          );\n\n        ratioData.value = ratio;\n        buyerTableData.value = buyerTable;\n        supplierTableData.value = supplierTable;\n      } catch (_) {\n        await router.replace({ name: \"Error\" });\n      } finally {\n        loadingInstance.close();\n      }\n    };\n\n    onMounted(init);\n\n    const getPercentage = (name: string) => {\n      const target = ratioData.value.find(\n        (it: { count: number; name: string }) => it.name === name\n      );\n      if (!target) return 0;\n      return Math.round(\n        ((target as { count: number }).count / ratioTotal.value) * 100\n      );\n    };\n\n    return {\n      projectData,\n      ratioData,\n      buyerTableData,\n      supplierTableData,\n      timeConsumingData,\n      stagesData,\n      commentsData,\n      timeConsumingMessages,\n      stagesMessages,\n      commentsMessages,\n\n      getPercentage,\n      formatImageUrl\n    };\n  }\n});\n\nexport default Component;\n</script>\n\n<style lang=\"stylus\" scoped>\n#review-detail-component\n  page-container()\n  margin-bottom 30px\n  .top-container\n    margin-bottom 30px\n  .main-container\n    background white\n    border-radius 15px\n    padding 30px\n    .title\n      font-size $font-size-lg2x\n      font-weight 400\n    .battle-progress-container\n      margin 30px 0\n      .brand-container\n        flex(space-between)\n        margin-bottom 15px\n        .brand\n          width 100px\n          img\n            width 100%\n            height auto\n      .progress\n        flex()\n        width 100%\n        height 15px\n        margin-bottom 10px\n        .left\n          height 100%\n          background #eca947\n        .right\n          height 100%\n          background #20bfa9\n    .percent-container\n      flex(space-between)\n      .left-container\n        flex(space-between)\n        .label\n          margin-right 15px\n      .right-container\n        flex(space-between)\n        .label\n          margin-left 15px\n      .label\n        font-size $font-size-lg3x\n        font-weight 400\n      .percent-text\n        font-size $font-size-lg3x\n        font-weight 400\n\n  .list-container\n    flex(space-between, flex-start)\n    width 100%\n  table\n    width 45%\n    border none\n    font-weight 400\n    .order\n      width 60px\n    thead\n      font-size $font-size-large\n    tbody\n      .item\n        width 100%\n        height 50px\n        border-radius 15px\n        text-align center\n        font-size $font-size-large\n        .center\n          flex()\n          .user\n            height 30px\n            width 30px\n            border-radius 50%\n            border 1px solid black\n            background-repeat no-repeat\n            background-size cover\n            background-position center\n        td\n          background $color-background\n        td:first-child\n          position relative\n          &::before\n            content ''\n            position absolute\n            left 0\n            top 0\n            width 4px\n            height 50px\n      .item-left\n        td:first-child\n          &::before\n            background #eca947\n      .item-right\n        td:first-child\n          &::before\n            background #20bfa9\n    .spacer\n      width 100%\n      height 20px\n\n  .zoom-title\n    zoom-title()\n    margin-bottom 15px\n</style>\n","\nimport { defineComponent, toRefs, ref, onMounted, computed } from \"vue\";\nimport OverallCard from \"@/components/OverallCard.vue\";\nimport { useRouter } from \"vue-router\";\nimport { formatImageUrl, loading } from \"../../utils\";\nimport {\n  getReviewCommentsRatio,\n  getReviewStagesRatio,\n  getReviewTimeConsuming,\n  getReviewTimeConsumingTable\n} from \"@/apis/review\";\nimport { getProject } from \"@/apis/project\";\nimport { Project } from \"@/typings/project\";\n\nconst Component = defineComponent({\n  name: \"ReviewDetail\",\n  components: {\n    OverallCard\n  },\n  props: {\n    id: {\n      type: Number,\n      default: 1\n    }\n  },\n  setup(props) {\n    const router = useRouter();\n    const { id } = toRefs(props);\n    const projectData = ref<Project | null>(null);\n    const buyerTableData = ref({});\n    const supplierTableData = ref({});\n    const ratioData = ref([]);\n\n    const timeConsumingData = ref([]);\n    const stagesData = ref([]);\n    const commentsData = ref([]);\n    const timeConsumingMessages = ref<string[]>([]);\n    const stagesMessages = ref([]);\n    const commentsMessages = ref([]);\n\n    const ratioTotal = computed(() =>\n      ratioData.value.reduce((prev, { count }) => (prev + count) as number, 0)\n    );\n\n    const colors = [\"#20bfa9\", \"#eca947\"];\n\n    const init = async () => {\n      const loadingInstance = loading();\n      try {\n        const { data: project } = await getProject(id.value);\n        const { data: timeConsuming } = await getReviewTimeConsuming(id.value);\n        const { data: ratio } = await getReviewStagesRatio(id.value);\n        const { data: comment } = await getReviewCommentsRatio(id.value);\n        const { data: buyerTable } = await getReviewTimeConsumingTable(\n          id.value,\n          \"buyer\"\n        );\n        const { data: supplierTable } = await getReviewTimeConsumingTable(\n          id.value,\n          \"supplier\"\n        );\n\n        projectData.value = project;\n\n        timeConsumingData.value = timeConsuming.map(\n          (it: { company: string; total_days: string }, index: number) => ({\n            name: it.company,\n            value: it.total_days,\n            itemStyle: { color: colors[index] }\n          })\n        );\n        stagesData.value = ratio.map(\n          (it: { name: string; count: string }, index: number) => ({\n            name: it.name,\n            value: it.count,\n            itemStyle: { color: colors[index] }\n          })\n        );\n        commentsData.value = comment.map(\n          (it: { name: string; count: string }, index: number) => ({\n            name: it.name,\n            value: it.count,\n            itemStyle: { color: colors[index] }\n          })\n        );\n        const total = timeConsuming.reduce(\n          (prev: number, curr: { company: string; total_days: number }) =>\n            prev + curr.total_days,\n          0\n        );\n        const month = Math.floor(total / 30);\n        const days = total % 30;\n\n        timeConsumingMessages.value = [\n          `Total: ${month ? month + \" months\" : \"\"} ${days} days`,\n          ...timeConsuming\n            .reverse()\n            .map((it: { company: string; total_days: number }) => {\n              const month = Math.floor(it.total_days / 30);\n              const days = it.total_days % 30;\n              return `${it.company}: ${\n                month ? month + \" months\" : \"\"\n              } ${days} days`;\n            })\n        ];\n        stagesMessages.value = ratio\n          .reverse()\n          .map(\n            (it: { name: string; count: string }) => `${it.name}: ${it.count}`\n          );\n        commentsMessages.value = comment\n          .reverse()\n          .map(\n            (it: { name: string; count: string }) => `${it.name}: ${it.count}`\n          );\n\n        ratioData.value = ratio;\n        buyerTableData.value = buyerTable;\n        supplierTableData.value = supplierTable;\n      } catch (_) {\n        await router.replace({ name: \"Error\" });\n      } finally {\n        loadingInstance.close();\n      }\n    };\n\n    onMounted(init);\n\n    const getPercentage = (name: string) => {\n      const target = ratioData.value.find(\n        (it: { count: number; name: string }) => it.name === name\n      );\n      if (!target) return 0;\n      return Math.round(\n        ((target as { count: number }).count / ratioTotal.value) * 100\n      );\n    };\n\n    return {\n      projectData,\n      ratioData,\n      buyerTableData,\n      supplierTableData,\n      timeConsumingData,\n      stagesData,\n      commentsData,\n      timeConsumingMessages,\n      stagesMessages,\n      commentsMessages,\n\n      getPercentage,\n      formatImageUrl\n    };\n  }\n});\n\nexport default Component;\n","import { render } from \"./ReviewDetail.vue?vue&type=template&id=351af32e&scoped=true\"\nimport script from \"./ReviewDetail.vue?vue&type=script&lang=ts\"\nexport * from \"./ReviewDetail.vue?vue&type=script&lang=ts\"\n\nimport \"./ReviewDetail.vue?vue&type=style&index=0&id=351af32e&lang=stylus&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-351af32e\"\n\nexport default script","'use strict';\nvar fixRegExpWellKnownSymbolLogic = require('../internals/fix-regexp-well-known-symbol-logic');\nvar anObject = require('../internals/an-object');\nvar toLength = require('../internals/to-length');\nvar toInteger = require('../internals/to-integer');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar advanceStringIndex = require('../internals/advance-string-index');\nvar getSubstitution = require('../internals/get-substitution');\nvar regExpExec = require('../internals/regexp-exec-abstract');\n\nvar max = Math.max;\nvar min = Math.min;\n\nvar maybeToString = function (it) {\n  return it === undefined ? it : String(it);\n};\n\n// @@replace logic\nfixRegExpWellKnownSymbolLogic('replace', 2, function (REPLACE, nativeReplace, maybeCallNative, reason) {\n  var REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE = reason.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE;\n  var REPLACE_KEEPS_$0 = reason.REPLACE_KEEPS_$0;\n  var UNSAFE_SUBSTITUTE = REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE ? '$' : '$0';\n\n  return [\n    // `String.prototype.replace` method\n    // https://tc39.es/ecma262/#sec-string.prototype.replace\n    function replace(searchValue, replaceValue) {\n      var O = requireObjectCoercible(this);\n      var replacer = searchValue == undefined ? undefined : searchValue[REPLACE];\n      return replacer !== undefined\n        ? replacer.call(searchValue, O, replaceValue)\n        : nativeReplace.call(String(O), searchValue, replaceValue);\n    },\n    // `RegExp.prototype[@@replace]` method\n    // https://tc39.es/ecma262/#sec-regexp.prototype-@@replace\n    function (regexp, replaceValue) {\n      if (\n        (!REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE && REPLACE_KEEPS_$0) ||\n        (typeof replaceValue === 'string' && replaceValue.indexOf(UNSAFE_SUBSTITUTE) === -1)\n      ) {\n        var res = maybeCallNative(nativeReplace, regexp, this, replaceValue);\n        if (res.done) return res.value;\n      }\n\n      var rx = anObject(regexp);\n      var S = String(this);\n\n      var functionalReplace = typeof replaceValue === 'function';\n      if (!functionalReplace) replaceValue = String(replaceValue);\n\n      var global = rx.global;\n      if (global) {\n        var fullUnicode = rx.unicode;\n        rx.lastIndex = 0;\n      }\n      var results = [];\n      while (true) {\n        var result = regExpExec(rx, S);\n        if (result === null) break;\n\n        results.push(result);\n        if (!global) break;\n\n        var matchStr = String(result[0]);\n        if (matchStr === '') rx.lastIndex = advanceStringIndex(S, toLength(rx.lastIndex), fullUnicode);\n      }\n\n      var accumulatedResult = '';\n      var nextSourcePosition = 0;\n      for (var i = 0; i < results.length; i++) {\n        result = results[i];\n\n        var matched = String(result[0]);\n        var position = max(min(toInteger(result.index), S.length), 0);\n        var captures = [];\n        // NOTE: This is equivalent to\n        //   captures = result.slice(1).map(maybeToString)\n        // but for some reason `nativeSlice.call(result, 1, result.length)` (called in\n        // the slice polyfill when slicing native arrays) \"doesn't work\" in safari 9 and\n        // causes a crash (https://pastebin.com/N21QzeQA) when trying to debug it.\n        for (var j = 1; j < result.length; j++) captures.push(maybeToString(result[j]));\n        var namedCaptures = result.groups;\n        if (functionalReplace) {\n          var replacerArgs = [matched].concat(captures, position, S);\n          if (namedCaptures !== undefined) replacerArgs.push(namedCaptures);\n          var replacement = String(replaceValue.apply(undefined, replacerArgs));\n        } else {\n          replacement = getSubstitution(matched, S, position, captures, namedCaptures, replaceValue);\n        }\n        if (position >= nextSourcePosition) {\n          accumulatedResult += S.slice(nextSourcePosition, position) + replacement;\n          nextSourcePosition = position + matched.length;\n        }\n      }\n      return accumulatedResult + S.slice(nextSourcePosition);\n    }\n  ];\n});\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ReviewDetail.vue?vue&type=style&index=0&id=351af32e&lang=stylus&scoped=true\"","import request from \"@/apis/http\";\nimport { ReviewsParams } from \"@/typings/review\";\n\nexport function getReviewStatusPie(params: ReviewsParams) {\n  return request({\n    url: `/projects_review/status_pie/`,\n    method: \"GET\",\n    params\n  });\n}\n\nexport function getReviewSourceRatio(params: ReviewsParams) {\n  return request({\n    url: `/projects_review/source_ratio/`,\n    method: \"GET\",\n    params\n  });\n}\n\nexport function getReviewSuccessRate(params: ReviewsParams) {\n  return request({\n    url: `/projects_review/success_rate/`,\n    method: \"GET\",\n    params\n  });\n}\n\nexport function getReviewTimeConsuming(id: number) {\n  return request({\n    url: `/projects_review/${id}/time_consuming/`,\n    method: \"GET\"\n  });\n}\n\nexport function getReviewStagesRatio(id: number) {\n  return request({\n    url: `/projects_review/${id}/stages_ratio/`,\n    method: \"GET\"\n  });\n}\n\nexport function getReviewCommentsRatio(id: number) {\n  return request({\n    url: `/projects_review/${id}/comments_ratio/`,\n    method: \"GET\"\n  });\n}\n\nexport function getReviewTimeConsumingTable(id: number, side: string) {\n  return request({\n    url: `/projects_review/${id}/time_consuming_table/`,\n    method: \"GET\",\n    params: { company_side: side }\n  });\n}\n","import request from \"@/apis/http\";\nimport {\n  DiscussionInput,\n  Project,\n  Projects,\n  ProjectCreateInputs,\n  StageCreateInputs,\n  ProjectsParams,\n  ProjectUpdateJoinedMemberParams,\n  StageMediaParams,\n  StageUpdate,\n  UploadProjectFabricParams,\n  ProjectFabricResponse\n} from \"@/typings/project\";\nimport { AxiosPromise } from \"axios\";\nimport { OptionParams } from \"@/typings/collection\";\n\nexport function getAvaliableOptions(\n  trialType: string,\n  collectionId?: number | null,\n  fabricId?: number | null\n) {\n  const params: { collection_id?: number; fabric_id?: number } = {};\n  if (collectionId) {\n    params.collection_id = collectionId;\n  }\n  if (fabricId) {\n    params.fabric_id = fabricId;\n  }\n  return request({\n    url: `/get_avaliable_brands/${trialType}`,\n    method: \"GET\",\n    params\n  });\n}\n\nexport function getProjects(params: ProjectsParams): AxiosPromise<Projects> {\n  return request({\n    url: `/projects/`,\n    method: \"GET\",\n    params\n  });\n}\n\nexport function getProject(id: number): AxiosPromise<Project> {\n  return request({\n    url: `/project/${id}/`,\n    method: \"GET\"\n  });\n}\n\nexport function postCreateProject(payload: ProjectCreateInputs) {\n  return request({\n    url: `/projects/`,\n    method: \"POST\",\n    data: payload\n  });\n}\n\nexport function postCreateStage(payload: StageCreateInputs) {\n  const formData = new FormData();\n  formData.append(\"name\", payload.name);\n  formData.append(\"description\", payload.description);\n  formData.append(\"project\", `${payload.project}`);\n  formData.append(\"side\", `${payload.side}`);\n  formData.append(\"price\", `${payload.price}`);\n  formData.append(\"started_at\", payload.started_at);\n  if (payload.files) {\n    for (let i = 0; i < payload.files.length; i++) {\n      formData.append(\"files\", payload.files[i]);\n    }\n  }\n  return request({\n    url: `/stages/`,\n    method: \"POST\",\n    data: formData\n  });\n}\n\nexport function postUpdateStage(payload: StageUpdate) {\n  return request({\n    url: `/stage/${payload.id}`,\n    method: \"PUT\",\n    data: {\n      name: payload.name,\n      price: payload.price,\n      description: payload.description\n    }\n  });\n}\n\nexport function getProjectStage(id: number) {\n  return request({\n    url: `/stage/${id}`,\n    method: \"GET\"\n  });\n}\n\nexport function postCreateDiscussion(payload: DiscussionInput) {\n  const formData = new FormData();\n  if (payload.files) {\n    for (let i = 0; i < payload.files.length; i++) {\n      formData.append(\"files\", payload.files[i]);\n    }\n  }\n  if (payload.message) formData.append(\"message\", payload.message);\n  if (payload.project) formData.append(\"project\", payload.project.toString());\n  return request({\n    url: `/discussions/`,\n    method: \"POST\",\n    data: formData\n  });\n}\n\nexport function postDeleteDiscussion(id: number) {\n  return request({\n    url: `/discussion/${id}`,\n    method: \"DELETE\"\n  });\n}\n\nexport function postEditDiscussion(id: number, message: string) {\n  const data = new FormData();\n  data.append(\"message\", message);\n\n  return request({\n    url: `/discussion/${id}`,\n    method: \"PUT\",\n    data\n  });\n}\n\nexport function deleteDicussionFile(id: number) {\n  return request({\n    url: `/attachment/${id}`,\n    method: \"DELETE\"\n  });\n}\n\nexport function getProjectAvailableMember(data: OptionParams) {\n  const params: { q?: string } = {};\n  if (data.q) params.q = data.q;\n\n  return request({\n    url: `/project/${data.id}/avaliable_memebr`,\n    method: \"GET\",\n    params\n  });\n}\n\nexport function getProjectJoinedMembers(id: number) {\n  return request({\n    url: `/project/${id}/joined_member`,\n    method: \"GET\"\n  });\n}\n\nexport function postProjectJoinedMemberUpdate({\n  id,\n  joined_member\n}: ProjectUpdateJoinedMemberParams) {\n  return request({\n    url: `/project/${id}/joined_member`,\n    method: \"PUT\",\n    data: { joined_member }\n  });\n}\n\nexport function postProjectStatusUpdate({\n  id,\n  success,\n  reason\n}: {\n  id: number;\n  success: boolean;\n  reason: string;\n}) {\n  return request({\n    url: `/project/${id}/status`,\n    method: \"PUT\",\n    data: { success, reason }\n  });\n}\n\nexport function postStageMediaCreate(data: StageMediaParams) {\n  const formData = new FormData();\n  formData.append(\"stage\", `${data.stage}`);\n  if (data.file) formData.append(\"file\", data.file);\n  if (data.demo_fabric) formData.append(\"demo_fabric\", `${data.demo_fabric}`);\n  return request({\n    url: `/stagemedias/`,\n    method: \"POST\",\n    data: formData\n  });\n}\n\nexport function getStagenames(id: number, companyId: number) {\n  return request({\n    url: `/project/${id}/stagename/${companyId}`,\n    method: \"GET\"\n  });\n}\n\nexport function getInform(id: number) {\n  return request({\n    url: `/project/${id}/inform/`,\n    method: \"GET\",\n  });\n}\n\nexport function postInform(id: number, subject: string, text: string, emails: string[]) {\n  const params = {\n    subject,\n    message: text,\n    recipients: emails\n  };\n  return request({\n    url: `/project/${id}/inform/`,\n    method: \"GET\",\n    params\n  });\n}\n\nexport function putUploadProjectFabric(projectId: number, data: UploadProjectFabricParams) {\n  if (!projectId) return;\n  const form = new FormData() ;\n  if (data.collection) form.append('collection', `${data.collection}`);\n  if (data.start_fabric) form.append('start_fabric', `${data.start_fabric}`);\n  if (data.start_fabric_image) form.append('start_fabric_image', `${data.start_fabric_image}`);\n  if (data.end_fabric) form.append('end_fabric', `${data.end_fabric}`);\n  if (data.end_fabric_image) form.append('end_fabric_image', `${data.end_fabric_image}`);\n\n  return request({\n    url: `/project/${projectId}/`,\n    method: 'PUT',\n    data: form\n  })\n}\n\nexport function postUploadProjectFabric(file: File): AxiosPromise<ProjectFabricResponse> {\n  const form = new FormData() ;\n  form.append('file', file);\n  return request({\n    url: `/simple_media/`,\n    method: 'POST',\n    data: form\n  })\n}\n","<template>\n  <div id=\"overall-card-component\">\n    <div v-if=\"hasData\" class=\"left-container\">\n      <div\n        v-if=\"type === 'pie'\"\n        :id=\"'overall-pie-chart-' + title\"\n        class=\"pie-chart\"\n      ></div>\n      <div v-if=\"type === 'growth'\" class=\"growth-chart\">\n        <font-awesome-icon\n          class=\"icon\"\n          :class=\"{ up: value >= 0, down: value < 0 }\"\n          :icon=\"['fas', value >= 0 ? 'level-up-alt' : 'level-down-alt']\"\n        ></font-awesome-icon>\n      </div>\n    </div>\n    <div v-else>\n      <h3>Empty</h3>\n    </div>\n\n    <div class=\"right-container\">\n      <h3 class=\"title\">{{ title }}</h3>\n      <div v-if=\"hasData\" class=\"text-wrapper\">\n        <p v-if=\"type === 'pie'\">{{ max === 100 ? value + \"%\" : value }}</p>\n        <p v-if=\"type === 'growth'\">\n          {{ value >= 0 ? \"+\" : \"-\" }} {{ _.splitAt(5, `${value * 100}`)[0] }}%\n        </p>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport {\n  defineComponent,\n  toRefs,\n  PropType,\n  watchEffect,\n  computed,\n  nextTick\n} from \"vue\";\nimport * as echarts from \"echarts/core\";\nimport * as _ from \"ramda\";\nimport { PieChart, PieSeriesOption } from \"echarts/charts\";\nimport {\n  GridComponent,\n  GridComponentOption,\n  LegendComponentOption,\n  TooltipComponentOption\n} from \"echarts/components\";\nimport { CanvasRenderer } from \"echarts/renderers\";\n\ntype ECOption = echarts.ComposeOption<\n  | PieSeriesOption\n  | GridComponentOption\n  | LegendComponentOption\n  | TooltipComponentOption\n>;\n\necharts.use([PieChart, GridComponent, CanvasRenderer]);\n\nconst Component = defineComponent({\n  name: \"OverallCard\",\n  props: {\n    title: {\n      type: String,\n      default: \"\"\n    },\n    type: {\n      type: String,\n      default: \"pie\"\n    },\n    value: {\n      type: Number,\n      default: 0\n    },\n    max: {\n      type: Number,\n      default: 100\n    },\n    messages: {\n      type: Array as PropType<string[]>,\n      default: () => []\n    }\n  },\n  setup(props) {\n    const { value, title, type, max } = toRefs(props);\n    const hasData = computed(() => {\n      return value.value;\n    });\n\n    let option: ECOption | null = null;\n\n    watchEffect(async () => {\n      if (!hasData.value) return;\n\n      option = {\n        tooltip: {\n          trigger: \"item\",\n          formatter(param: any) {\n            if (param.dataIndex !== 0) return \"\";\n            return `\n              <div style=\"display: flex; justify-content: space-between;\">\n                <span style=\"margin-right: 15px;\">${\n                  param.marker\n                } Ratio</span> ${\n              max.value === 100 ? param.value + \"%\" : param.value\n            } <br />\n              </div>\n            `;\n          }\n        },\n        series: [\n          {\n            type: \"pie\",\n            radius: [\"70%\", \"90%\"],\n            data: [value.value, max.value - value.value],\n            itemStyle: {\n              // @ts-ignore\n              color(params: any) {\n                if (params.dataIndex === 1) {\n                  return \"#eeeeee\";\n                }\n                return params.color;\n              }\n            },\n            label: {\n              show: false,\n              position: \"center\"\n            }\n          }\n        ]\n      };\n\n      await nextTick();\n      if (type.value === \"pie\" && option) {\n        const chart = echarts.init(\n          document.getElementById(\"overall-pie-chart-\" + title.value)!\n        );\n        chart.setOption(option);\n      }\n    });\n\n    return {\n      hasData,\n\n      _\n    };\n  }\n});\n\nexport default Component;\n</script>\n\n<style scoped lang=\"stylus\">\n#overall-card-component\n  display flex\n  justify-content space-between\n  align-items center\n  background-color white\n  width 100%\n  box-sizing border-box\n  height 150px\n  border-radius 8px\n  padding 8px\n  .left-container\n    display flex\n    justify-content center\n    align-items center\n    height 100%\n    width 30%\n    .pie-chart\n      width 100%\n      height 100px\n    .growth-chart\n      .icon\n        width 30px\n        height auto\n      .up\n        color red\n      .down\n        color green\n\n  .right-container\n    display flex\n    flex-direction column\n    justify-content center\n    padding-top 15px\n    height 100%\n    width 80%\n\n    .title\n      font-weight 400\n      font-size $font-size-large\n      text-align center\n      white-space nowrap\n      margin-bottom 15px\n      padding-left 10px\n    .text-wrapper\n      font-size $font-size-title\n      font-weight 400\n      padding-left 10px\n      text-align center\n      p\n        line-height 1.5\n</style>\n","\nimport {\n  defineComponent,\n  toRefs,\n  PropType,\n  watchEffect,\n  computed,\n  nextTick\n} from \"vue\";\nimport * as echarts from \"echarts/core\";\nimport * as _ from \"ramda\";\nimport { PieChart, PieSeriesOption } from \"echarts/charts\";\nimport {\n  GridComponent,\n  GridComponentOption,\n  LegendComponentOption,\n  TooltipComponentOption\n} from \"echarts/components\";\nimport { CanvasRenderer } from \"echarts/renderers\";\n\ntype ECOption = echarts.ComposeOption<\n  | PieSeriesOption\n  | GridComponentOption\n  | LegendComponentOption\n  | TooltipComponentOption\n>;\n\necharts.use([PieChart, GridComponent, CanvasRenderer]);\n\nconst Component = defineComponent({\n  name: \"OverallCard\",\n  props: {\n    title: {\n      type: String,\n      default: \"\"\n    },\n    type: {\n      type: String,\n      default: \"pie\"\n    },\n    value: {\n      type: Number,\n      default: 0\n    },\n    max: {\n      type: Number,\n      default: 100\n    },\n    messages: {\n      type: Array as PropType<string[]>,\n      default: () => []\n    }\n  },\n  setup(props) {\n    const { value, title, type, max } = toRefs(props);\n    const hasData = computed(() => {\n      return value.value;\n    });\n\n    let option: ECOption | null = null;\n\n    watchEffect(async () => {\n      if (!hasData.value) return;\n\n      option = {\n        tooltip: {\n          trigger: \"item\",\n          formatter(param: any) {\n            if (param.dataIndex !== 0) return \"\";\n            return `\n              <div style=\"display: flex; justify-content: space-between;\">\n                <span style=\"margin-right: 15px;\">${\n                  param.marker\n                } Ratio</span> ${\n              max.value === 100 ? param.value + \"%\" : param.value\n            } <br />\n              </div>\n            `;\n          }\n        },\n        series: [\n          {\n            type: \"pie\",\n            radius: [\"70%\", \"90%\"],\n            data: [value.value, max.value - value.value],\n            itemStyle: {\n              // @ts-ignore\n              color(params: any) {\n                if (params.dataIndex === 1) {\n                  return \"#eeeeee\";\n                }\n                return params.color;\n              }\n            },\n            label: {\n              show: false,\n              position: \"center\"\n            }\n          }\n        ]\n      };\n\n      await nextTick();\n      if (type.value === \"pie\" && option) {\n        const chart = echarts.init(\n          document.getElementById(\"overall-pie-chart-\" + title.value)!\n        );\n        chart.setOption(option);\n      }\n    });\n\n    return {\n      hasData,\n\n      _\n    };\n  }\n});\n\nexport default Component;\n","import { render } from \"./OverallCard.vue?vue&type=template&id=e29d2ed6&scoped=true\"\nimport script from \"./OverallCard.vue?vue&type=script&lang=ts\"\nexport * from \"./OverallCard.vue?vue&type=script&lang=ts\"\n\nimport \"./OverallCard.vue?vue&type=style&index=0&id=e29d2ed6&scoped=true&lang=stylus\"\nscript.render = render\nscript.__scopeId = \"data-v-e29d2ed6\"\n\nexport default script"],"sourceRoot":""}