(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ReviewDetail"],{"02e8":function(e,t,a){"use strict";a("a167")},"0cb2":function(e,t,a){var c=a("7b0b"),r=Math.floor,n="".replace,o=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,i=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,a,l,u,s){var d=a+e.length,p=l.length,b=i;return void 0!==u&&(u=c(u),b=o),n.call(s,b,(function(c,n){var o;switch(n.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,a);case"'":return t.slice(d);case"<":o=u[n.slice(1,-1)];break;default:var i=+n;if(0===i)return c;if(i>p){var s=r(i/10);return 0===s?c:s<=p?void 0===l[s-1]?n.charAt(1):l[s-1]+n.charAt(1):c}o=l[i-1]}return void 0===o?"":o}))}},"0dbe":function(e,t,a){},"25f0":function(e,t,a){"use strict";var c=a("6eeb"),r=a("825a"),n=a("d039"),o=a("ad6d"),i="toString",l=RegExp.prototype,u=l[i],s=n((function(){return"/a/b"!=u.call({source:"a",flags:"b"})})),d=u.name!=i;(s||d)&&c(RegExp.prototype,i,(function(){var e=r(this),t=String(e.source),a=e.flags,c=String(void 0===a&&e instanceof RegExp&&!("flags"in l)?o.call(e):a);return"/"+t+"/"+c}),{unsafe:!0})},"3ce2":function(e,t,a){"use strict";a.r(t);a("b0c0");var c=a("7a23"),r=Object(c["withScopeId"])("data-v-351af32e");Object(c["pushScopeId"])("data-v-351af32e");var n={id:"review-detail-component"},o={class:"top-container"},i={key:0,class:"zoom-title"},l={class:"main-container"},u={key:0,class:"card"},s=Object(c["createVNode"])("h2",{class:"title"},"Stage Statistics",-1),d={class:"battle-progress-container"},p={class:"brand-container"},b={class:"brand"},j={class:"brand"},m={class:"progress"},f={class:"percent-container"},O={class:"left-container"},v={class:"label"},g={class:"percent-text"},h={class:"right-container"},y={class:"percent-text"},k={class:"label"},_={class:"list-container"},N={cellspacing:"0",cellpadding:"0"},B=Object(c["createVNode"])("tr",{class:"spacer"},null,-1),D={class:"item item-left"},V={class:"center"},S={key:1},w=Object(c["createVNode"])("tr",{class:"spacer"},null,-1),T={class:"right-table",cellspacing:"0",cellpadding:"0"},E=Object(c["createVNode"])("tr",{class:"spacer"},null,-1),x={class:"item item-right"},C={class:"center"},I={key:1},P=Object(c["createVNode"])("tr",{class:"spacer"},null,-1);Object(c["popScopeId"])();var G=r((function(e,t,a,G,R,U){var F=Object(c["resolveComponent"])("OverallCard"),M=Object(c["resolveComponent"])("el-col"),L=Object(c["resolveComponent"])("el-row");return Object(c["openBlock"])(),Object(c["createBlock"])("div",n,[Object(c["createVNode"])("div",o,[e.projectData?(Object(c["openBlock"])(),Object(c["createBlock"])("h1",i,Object(c["toDisplayString"])(e.projectData.name),1)):Object(c["createCommentVNode"])("",!0),Object(c["createVNode"])(L,{gutter:30},{default:r((function(){return[Object(c["createVNode"])(M,{span:8},{default:r((function(){return[Object(c["createVNode"])(F,{title:"Time Consuming",data:e.timeConsumingData,messages:e.timeConsumingMessages},null,8,["data","messages"])]})),_:1}),Object(c["createVNode"])(M,{span:8},{default:r((function(){return[Object(c["createVNode"])(F,{title:"Stages",data:e.stagesData,messages:e.stagesMessages},null,8,["data","messages"])]})),_:1}),Object(c["createVNode"])(M,{span:8},{default:r((function(){return[Object(c["createVNode"])(F,{title:"Comments",data:e.commentsData,messages:e.commentsMessages},null,8,["data","messages"])]})),_:1})]})),_:1})]),Object(c["createVNode"])("div",l,[e.projectData?(Object(c["openBlock"])(),Object(c["createBlock"])("div",u,[s,Object(c["createVNode"])("div",d,[Object(c["createVNode"])("div",p,[Object(c["createVNode"])("div",b,[Object(c["createVNode"])("img",{src:e.formatImageUrl(e.projectData.company.buyer.logo),alt:"Buyer"},null,8,["src"])]),Object(c["createVNode"])("div",j,[Object(c["createVNode"])("img",{src:e.formatImageUrl(e.projectData.company.supplier.logo),alt:"Supplier"},null,8,["src"])])]),Object(c["createVNode"])("div",m,[Object(c["createVNode"])("div",{class:"left",style:{width:e.getPercentage(e.projectData.company.buyer.name)+"%"}},null,4),Object(c["createVNode"])("div",{class:"right",style:{width:e.getPercentage(e.projectData.company.supplier.name)+"%"}},null,4)]),Object(c["createVNode"])("div",f,[Object(c["createVNode"])("div",O,[Object(c["createVNode"])("h3",v,Object(c["toDisplayString"])(e.projectData.company.buyer.name),1),Object(c["createVNode"])("p",g,Object(c["toDisplayString"])(e.getPercentage(e.projectData.company.buyer.name))+"% ",1)]),Object(c["createVNode"])("div",h,[Object(c["createVNode"])("p",y,Object(c["toDisplayString"])(e.getPercentage(e.projectData.company.supplier.name))+"% ",1),Object(c["createVNode"])("h3",k,Object(c["toDisplayString"])(e.projectData.company.supplier.name),1)])])]),Object(c["createVNode"])("div",_,[Object(c["createVNode"])("table",N,[Object(c["createVNode"])("thead",null,[Object(c["createVNode"])("tr",null,[(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(e.buyerTableData.columns,(function(e){return Object(c["openBlock"])(),Object(c["createBlock"])("th",{class:{order:"Order"===e},key:e},Object(c["toDisplayString"])("Order"!==e?e:"#"),3)})),128))])]),B,Object(c["createVNode"])("tbody",null,[(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(e.buyerTableData.rows,(function(t,a){return Object(c["openBlock"])(),Object(c["createBlock"])(c["Fragment"],{key:a},[Object(c["createVNode"])("tr",D,[(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(e.buyerTableData.columns,(function(a){return Object(c["openBlock"])(),Object(c["createBlock"])("td",{key:a},[Object(c["createVNode"])("div",V,["User"===a?(Object(c["openBlock"])(),Object(c["createBlock"])("div",{key:0,class:"user",style:{backgroundImage:"url('".concat(e.formatImageUrl(t[a]),"')")}},null,4)):(Object(c["openBlock"])(),Object(c["createBlock"])("p",S,Object(c["toDisplayString"])(t[a]),1))])])})),128))]),w],64)})),128))])]),Object(c["createVNode"])("table",T,[Object(c["createVNode"])("thead",null,[Object(c["createVNode"])("tr",null,[(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(e.supplierTableData.columns,(function(e){return Object(c["openBlock"])(),Object(c["createBlock"])("th",{class:{order:"Order"===e},key:e},Object(c["toDisplayString"])("Order"!==e?e:"#"),3)})),128))]),E]),Object(c["createVNode"])("tbody",null,[(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(e.supplierTableData.rows,(function(t,a){return Object(c["openBlock"])(),Object(c["createBlock"])(c["Fragment"],{key:a},[Object(c["createVNode"])("tr",x,[(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(e.supplierTableData.columns,(function(a){return Object(c["openBlock"])(),Object(c["createBlock"])("td",{key:a},[Object(c["createVNode"])("div",C,["User"===a?(Object(c["openBlock"])(),Object(c["createBlock"])("div",{key:0,class:"user",style:{backgroundImage:"url('".concat(e.formatImageUrl(t[a]),"')")}},null,4)):(Object(c["openBlock"])(),Object(c["createBlock"])("p",I,Object(c["toDisplayString"])(t[a]),1))])])})),128))]),P],64)})),128))])])])])):Object(c["createCommentVNode"])("",!0)])])})),R=a("2909"),U=a("1da1"),F=(a("96cf"),a("a9e3"),a("d81d"),a("99af"),a("ac1f"),a("5319"),a("7db0"),a("fedb")),M=a("6c02"),L=a("d257"),$=a("a1be"),A=a("a4ca"),q=Object(c["defineComponent"])({name:"ReviewDetail",components:{OverallCard:F["a"]},props:{id:{type:Number,default:1}},setup:function(e){var t=Object(M["d"])(),a=Object(c["toRefs"])(e),r=a.id,n=Object(c["ref"])(null),o=Object(c["ref"])({}),i=Object(c["ref"])({}),l=Object(c["ref"])([]),u=Object(c["ref"])([]),s=Object(c["ref"])([]),d=Object(c["ref"])([]),p=Object(c["ref"])([]),b=Object(c["ref"])([]),j=Object(c["ref"])([]),m=Object(c["computed"])((function(){return l.value.reduce((function(e,t){var a=t.count;return e+a}),0)})),f=["#20bfa9","#eca947"],O=function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){var a,c,m,O,v,g,h,y,k,_,N,B,D,V,S,w;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=Object(L["f"])(),e.prev=1,e.next=4,Object(A["d"])(r.value);case 4:return c=e.sent,m=c.data,e.next=8,Object($["f"])(r.value);case 8:return O=e.sent,v=O.data,e.next=12,Object($["c"])(r.value);case 12:return g=e.sent,h=g.data,e.next=16,Object($["a"])(r.value);case 16:return y=e.sent,k=y.data,e.next=20,Object($["g"])(r.value,"buyer");case 20:return _=e.sent,N=_.data,e.next=24,Object($["g"])(r.value,"supplier");case 24:B=e.sent,D=B.data,n.value=m,u.value=v.map((function(e,t){return{name:e.company,value:e.total_days,itemStyle:{color:f[t]}}})),s.value=h.map((function(e,t){return{name:e.name,value:e.count,itemStyle:{color:f[t]}}})),d.value=k.map((function(e,t){return{name:e.name,value:e.count,itemStyle:{color:f[t]}}})),V=v.reduce((function(e,t){return e+t.total_days}),0),S=Math.floor(V/30),w=V%30,p.value=["Total: ".concat(S?S+" months":""," ").concat(w," days")].concat(Object(R["a"])(v.reverse().map((function(e){var t=Math.floor(e.total_days/30),a=e.total_days%30;return"".concat(e.company,": ").concat(t?t+" months":""," ").concat(a," days")})))),b.value=h.reverse().map((function(e){return"".concat(e.name,": ").concat(e.count)})),j.value=k.reverse().map((function(e){return"".concat(e.name,": ").concat(e.count)})),l.value=h,o.value=N,i.value=D,e.next=45;break;case 41:return e.prev=41,e.t0=e["catch"](1),e.next=45,t.replace({name:"Error"});case 45:return e.prev=45,a.close(),e.finish(45);case 48:case"end":return e.stop()}}),e,null,[[1,41,45,48]])})));return function(){return e.apply(this,arguments)}}();Object(c["onMounted"])(O);var v=function(e){var t=l.value.find((function(t){return t.name===e}));return t?Math.round(t.count/m.value*100):0};return{projectData:n,ratioData:l,buyerTableData:o,supplierTableData:i,timeConsumingData:u,stagesData:s,commentsData:d,timeConsumingMessages:p,stagesMessages:b,commentsMessages:j,getPercentage:v,formatImageUrl:L["d"]}}}),J=q;a("9d86");J.render=G,J.__scopeId="data-v-351af32e";t["default"]=J},5319:function(e,t,a){"use strict";var c=a("d784"),r=a("825a"),n=a("50c4"),o=a("a691"),i=a("1d80"),l=a("8aa5"),u=a("0cb2"),s=a("14c3"),d=Math.max,p=Math.min,b=function(e){return void 0===e?e:String(e)};c("replace",2,(function(e,t,a,c){var j=c.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,m=c.REPLACE_KEEPS_$0,f=j?"$":"$0";return[function(a,c){var r=i(this),n=void 0==a?void 0:a[e];return void 0!==n?n.call(a,r,c):t.call(String(r),a,c)},function(e,c){if(!j&&m||"string"===typeof c&&-1===c.indexOf(f)){var i=a(t,e,this,c);if(i.done)return i.value}var O=r(e),v=String(this),g="function"===typeof c;g||(c=String(c));var h=O.global;if(h){var y=O.unicode;O.lastIndex=0}var k=[];while(1){var _=s(O,v);if(null===_)break;if(k.push(_),!h)break;var N=String(_[0]);""===N&&(O.lastIndex=l(v,n(O.lastIndex),y))}for(var B="",D=0,V=0;V<k.length;V++){_=k[V];for(var S=String(_[0]),w=d(p(o(_.index),v.length),0),T=[],E=1;E<_.length;E++)T.push(b(_[E]));var x=_.groups;if(g){var C=[S].concat(T,w,v);void 0!==x&&C.push(x);var I=String(c.apply(void 0,C))}else I=u(S,v,w,T,x,c);w>=D&&(B+=v.slice(D,w)+I,D=w+S.length)}return B+v.slice(D)}]}))},"9d86":function(e,t,a){"use strict";a("0dbe")},a167:function(e,t,a){},a1be:function(e,t,a){"use strict";a.d(t,"d",(function(){return r})),a.d(t,"b",(function(){return n})),a.d(t,"e",(function(){return o})),a.d(t,"f",(function(){return i})),a.d(t,"c",(function(){return l})),a.d(t,"a",(function(){return u})),a.d(t,"g",(function(){return s}));var c=a("415e");function r(e){return Object(c["a"])({url:"/projects_review/status_pie/",method:"GET",params:e})}function n(e){return Object(c["a"])({url:"/projects_review/source_ratio/",method:"GET",params:e})}function o(e){return Object(c["a"])({url:"/projects_review/success_rate/",method:"GET",params:e})}function i(e){return Object(c["a"])({url:"/projects_review/".concat(e,"/time_consuming/"),method:"GET"})}function l(e){return Object(c["a"])({url:"/projects_review/".concat(e,"/stages_ratio/"),method:"GET"})}function u(e){return Object(c["a"])({url:"/projects_review/".concat(e,"/comments_ratio/"),method:"GET"})}function s(e,t){return Object(c["a"])({url:"/projects_review/".concat(e,"/time_consuming_table/"),method:"GET",params:{company_side:t}})}},a4ca:function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"h",(function(){return n})),a.d(t,"d",(function(){return o})),a.d(t,"k",(function(){return i})),a.d(t,"l",(function(){return l})),a.d(t,"s",(function(){return u})),a.d(t,"g",(function(){return s})),a.d(t,"j",(function(){return d})),a.d(t,"m",(function(){return p})),a.d(t,"n",(function(){return b})),a.d(t,"a",(function(){return j})),a.d(t,"e",(function(){return m})),a.d(t,"f",(function(){return f})),a.d(t,"p",(function(){return O})),a.d(t,"q",(function(){return v})),a.d(t,"r",(function(){return g})),a.d(t,"i",(function(){return h})),a.d(t,"c",(function(){return y})),a.d(t,"o",(function(){return k})),a.d(t,"u",(function(){return _})),a.d(t,"t",(function(){return N}));a("b0c0"),a("a4d3"),a("e01a"),a("d3b7"),a("25f0"),a("99af");var c=a("415e");function r(e,t,a){var r={};return t&&(r.collection_id=t),a&&(r.fabric_id=a),Object(c["a"])({url:"/get_avaliable_brands/".concat(e),method:"GET",params:r})}function n(e){return Object(c["a"])({url:"/projects/",method:"GET",params:e})}function o(e){return Object(c["a"])({url:"/project/".concat(e,"/"),method:"GET"})}function i(e){return Object(c["a"])({url:"/projects/",method:"POST",data:e})}function l(e){var t=new FormData;if(t.append("name",e.name),t.append("description",e.description),t.append("project","".concat(e.project)),t.append("side","".concat(e.side)),t.append("price","".concat(e.price)),t.append("started_at",e.started_at),e.files)for(var a=0;a<e.files.length;a++)t.append("files",e.files[a]);return Object(c["a"])({url:"/stages/",method:"POST",data:t})}function u(e){return Object(c["a"])({url:"/stage/".concat(e.id),method:"PUT",data:{name:e.name,price:e.price,description:e.description}})}function s(e){return Object(c["a"])({url:"/stage/".concat(e),method:"GET"})}function d(e){var t=new FormData;if(e.files)for(var a=0;a<e.files.length;a++)t.append("files",e.files[a]);return e.message&&t.append("message",e.message),e.project&&t.append("project",e.project.toString()),Object(c["a"])({url:"/discussions/",method:"POST",data:t})}function p(e){return Object(c["a"])({url:"/discussion/".concat(e),method:"DELETE"})}function b(e,t){var a=new FormData;return a.append("message",t),Object(c["a"])({url:"/discussion/".concat(e),method:"PUT",data:a})}function j(e){return Object(c["a"])({url:"/attachment/".concat(e),method:"DELETE"})}function m(e){var t={};return e.q&&(t.q=e.q),Object(c["a"])({url:"/project/".concat(e.id,"/avaliable_memebr"),method:"GET",params:t})}function f(e){return Object(c["a"])({url:"/project/".concat(e,"/joined_member"),method:"GET"})}function O(e){var t=e.id,a=e.joined_member;return Object(c["a"])({url:"/project/".concat(t,"/joined_member"),method:"PUT",data:{joined_member:a}})}function v(e){var t=e.id,a=e.success,r=e.reason;return Object(c["a"])({url:"/project/".concat(t,"/status"),method:"PUT",data:{success:a,reason:r}})}function g(e){var t=new FormData;return t.append("stage","".concat(e.stage)),e.file&&t.append("file",e.file),e.demo_fabric&&t.append("demo_fabric","".concat(e.demo_fabric)),Object(c["a"])({url:"/stagemedias/",method:"POST",data:t})}function h(e,t){return Object(c["a"])({url:"/project/".concat(e,"/stagename/").concat(t),method:"GET"})}function y(e){return Object(c["a"])({url:"/project/".concat(e,"/inform/"),method:"GET"})}function k(e,t,a,r){var n={subject:t,message:a,recipients:r};return Object(c["a"])({url:"/project/".concat(e,"/inform/"),method:"GET",params:n})}function _(e,t){if(e){var a=new FormData;return t.collection&&a.append("collection","".concat(t.collection)),t.start_fabric&&a.append("start_fabric","".concat(t.start_fabric)),t.start_fabric_image&&a.append("start_fabric_image","".concat(t.start_fabric_image)),t.end_fabric&&a.append("end_fabric","".concat(t.end_fabric)),t.end_fabric_image&&a.append("end_fabric_image","".concat(t.end_fabric_image)),Object(c["a"])({url:"/project/".concat(e,"/"),method:"PUT",data:a})}}function N(e){var t=new FormData;return t.append("file",e),Object(c["a"])({url:"/simple_media/",method:"POST",data:t})}},fedb:function(e,t,a){"use strict";var c=a("7a23"),r=Object(c["withScopeId"])("data-v-e29d2ed6");Object(c["pushScopeId"])("data-v-e29d2ed6");var n={id:"overall-card-component"},o={key:0,class:"left-container"},i={key:1,class:"growth-chart"},l={key:1},u=Object(c["createVNode"])("h3",null,"Empty",-1),s={class:"right-container"},d={class:"title"},p={key:0,class:"text-wrapper"},b={key:0},j={key:1};Object(c["popScopeId"])();var m=r((function(e,t,a,r,m,f){var O=Object(c["resolveComponent"])("font-awesome-icon");return Object(c["openBlock"])(),Object(c["createBlock"])("div",n,[e.hasData?(Object(c["openBlock"])(),Object(c["createBlock"])("div",o,["pie"===e.type?(Object(c["openBlock"])(),Object(c["createBlock"])("div",{key:0,id:"overall-pie-chart-"+e.title,class:"pie-chart"},null,8,["id"])):Object(c["createCommentVNode"])("",!0),"growth"===e.type?(Object(c["openBlock"])(),Object(c["createBlock"])("div",i,[Object(c["createVNode"])(O,{class:["icon",{up:e.value>=0,down:e.value<0}],icon:["fas",e.value>=0?"level-up-alt":"level-down-alt"]},null,8,["class","icon"])])):Object(c["createCommentVNode"])("",!0)])):(Object(c["openBlock"])(),Object(c["createBlock"])("div",l,[u])),Object(c["createVNode"])("div",s,[Object(c["createVNode"])("h3",d,Object(c["toDisplayString"])(e.title),1),e.hasData?(Object(c["openBlock"])(),Object(c["createBlock"])("div",p,["pie"===e.type?(Object(c["openBlock"])(),Object(c["createBlock"])("p",b,Object(c["toDisplayString"])(100===e.max?e.value+"%":e.value),1)):Object(c["createCommentVNode"])("",!0),"growth"===e.type?(Object(c["openBlock"])(),Object(c["createBlock"])("p",j,Object(c["toDisplayString"])(e.value>=0?"+":"-")+" "+Object(c["toDisplayString"])(e._.splitAt(5,"".concat(100*e.value))[0])+"% ",1)):Object(c["createCommentVNode"])("",!0)])):Object(c["createCommentVNode"])("",!0)])])})),f=a("1da1"),O=(a("96cf"),a("a9e3"),a("99af"),a("22b4")),v=a("1be7"),g=a("b17e"),h=a("49bb"),y=a("4b2a"),k=a("f95e");O["a"]([h["a"],y["a"],k["a"]]);var _=Object(c["defineComponent"])({name:"OverallCard",props:{title:{type:String,default:""},type:{type:String,default:"pie"},value:{type:Number,default:0},max:{type:Number,default:100},messages:{type:Array,default:function(){return[]}}},setup:function(e){var t=Object(c["toRefs"])(e),a=t.value,r=t.title,n=t.type,o=t.max,i=Object(c["computed"])((function(){return a.value})),l=null;return Object(c["watchEffect"])(Object(f["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i.value){e.next=2;break}return e.abrupt("return");case 2:return l={tooltip:{trigger:"item",formatter:function(e){return 0!==e.dataIndex?"":'\n              <div style="display: flex; justify-content: space-between;">\n                <span style="margin-right: 15px;">'.concat(e.marker," Ratio</span> ").concat(100===o.value?e.value+"%":e.value," <br />\n              </div>\n            ")}},series:[{type:"pie",radius:["70%","90%"],data:[a.value,o.value-a.value],itemStyle:{color:function(e){return 1===e.dataIndex?"#eeeeee":e.color}},label:{show:!1,position:"center"}}]},e.next=5,Object(c["nextTick"])();case 5:"pie"===n.value&&l&&(t=v["b"](document.getElementById("overall-pie-chart-"+r.value)),t.setOption(l));case 6:case"end":return e.stop()}}),e)})))),{hasData:i,_:g}}}),N=_;a("02e8");N.render=m,N.__scopeId="data-v-e29d2ed6";t["a"]=N}}]);
//# sourceMappingURL=ReviewDetail.5ea1871c.js.map