(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["FabricUpload"],{"25f0":function(e,t,a){"use strict";var n=a("6eeb"),r=a("825a"),c=a("d039"),o=a("ad6d"),u="toString",i=RegExp.prototype,l=i[u],s=c((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),d=l.name!=u;(s||d)&&n(RegExp.prototype,u,(function(){var e=r(this),t=String(e.source),a=e.flags,n=String(void 0===a&&e instanceof RegExp&&!("flags"in i)?o.call(e):a);return"/"+t+"/"+n}),{unsafe:!0})},"56da":function(e,t,a){},"64c6":function(e,t,a){"use strict";a("56da")},"6ec5":function(e,t,a){"use strict";a.d(t,"e",(function(){return r})),a.d(t,"a",(function(){return c})),a.d(t,"c",(function(){return o})),a.d(t,"d",(function(){return u})),a.d(t,"b",(function(){return i})),a.d(t,"g",(function(){return l})),a.d(t,"i",(function(){return s})),a.d(t,"h",(function(){return d})),a.d(t,"f",(function(){return p}));var n=a("415e");function r(e){return Object(n["a"])({url:"/members/",method:"GET",params:e})}function c(e){return e?Object(n["a"])({url:"/member/".concat(e,"/"),method:"GET"}):Object(n["a"])({url:"/member/",method:"GET"})}function o(e,t){return e?Object(n["a"])({url:"/member/".concat(e,"/roles/"),method:"GET",params:t}):Object(n["a"])({url:"/member/roles/",method:"GET",params:t})}function u(e,t){return e?Object(n["a"])({url:"/member/".concat(e,"/teams/"),method:"GET",params:t}):Object(n["a"])({url:"/member/teams/",method:"GET",params:t})}function i(e){return e?Object(n["a"])({url:"/member/".concat(e,"/business_units/"),method:"GET"}):Object(n["a"])({url:"/member/business_units/",method:"GET"})}function l(e,t){var a={email:e.email,nickname:e.nickname,role:e.role,teams:e.teams,phone:e.phone,active:e.active,business_unit:e.business_unit};return t?Object(n["a"])({url:"/member/".concat(t,"/"),method:"PUT",data:a}):Object(n["a"])({url:"/member/",method:"PUT",data:a})}function s(e){return Object(n["a"])({url:"/member/",method:"PUT",data:e})}function d(e,t){var a=new FormData;return a.append("file",e),t&&a.append("member",JSON.stringify(t)),Object(n["a"])({url:"/member/medias/",method:"POST",data:a})}function p(e){return Object(n["a"])({url:"/mail/contact_us/",method:"POST",data:e})}},a4ca:function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"h",(function(){return c})),a.d(t,"d",(function(){return o})),a.d(t,"k",(function(){return u})),a.d(t,"l",(function(){return i})),a.d(t,"s",(function(){return l})),a.d(t,"g",(function(){return s})),a.d(t,"j",(function(){return d})),a.d(t,"m",(function(){return p})),a.d(t,"n",(function(){return f})),a.d(t,"a",(function(){return b})),a.d(t,"e",(function(){return m})),a.d(t,"f",(function(){return v})),a.d(t,"p",(function(){return j})),a.d(t,"q",(function(){return O})),a.d(t,"r",(function(){return h})),a.d(t,"i",(function(){return g})),a.d(t,"c",(function(){return _})),a.d(t,"o",(function(){return V})),a.d(t,"u",(function(){return N})),a.d(t,"t",(function(){return w}));a("b0c0"),a("a4d3"),a("e01a"),a("d3b7"),a("25f0"),a("99af");var n=a("415e");function r(e,t,a){var r={};return t&&(r.collection_id=t),a&&(r.fabric_id=a),Object(n["a"])({url:"/get_avaliable_brands/".concat(e),method:"GET",params:r})}function c(e){return Object(n["a"])({url:"/projects/",method:"GET",params:e})}function o(e){return Object(n["a"])({url:"/project/".concat(e,"/"),method:"GET"})}function u(e){return Object(n["a"])({url:"/projects/",method:"POST",data:e})}function i(e){var t=new FormData;if(t.append("name",e.name),t.append("description",e.description),t.append("project","".concat(e.project)),t.append("side","".concat(e.side)),t.append("price","".concat(e.price)),t.append("started_at",e.started_at),e.files)for(var a=0;a<e.files.length;a++)t.append("files",e.files[a]);return Object(n["a"])({url:"/stages/",method:"POST",data:t})}function l(e){return Object(n["a"])({url:"/stage/".concat(e.id),method:"PUT",data:{name:e.name,price:e.price,description:e.description}})}function s(e){return Object(n["a"])({url:"/stage/".concat(e),method:"GET"})}function d(e){var t=new FormData;if(e.files)for(var a=0;a<e.files.length;a++)t.append("files",e.files[a]);return e.message&&t.append("message",e.message),e.project&&t.append("project",e.project.toString()),Object(n["a"])({url:"/discussions/",method:"POST",data:t})}function p(e){return Object(n["a"])({url:"/discussion/".concat(e),method:"DELETE"})}function f(e,t){var a=new FormData;return a.append("message",t),Object(n["a"])({url:"/discussion/".concat(e),method:"PUT",data:a})}function b(e){return Object(n["a"])({url:"/attachment/".concat(e),method:"DELETE"})}function m(e){var t={};return e.q&&(t.q=e.q),Object(n["a"])({url:"/project/".concat(e.id,"/avaliable_memebr"),method:"GET",params:t})}function v(e){return Object(n["a"])({url:"/project/".concat(e,"/joined_member"),method:"GET"})}function j(e){var t=e.id,a=e.joined_member;return Object(n["a"])({url:"/project/".concat(t,"/joined_member"),method:"PUT",data:{joined_member:a}})}function O(e){var t=e.id,a=e.success,r=e.reason;return Object(n["a"])({url:"/project/".concat(t,"/status"),method:"PUT",data:{success:a,reason:r}})}function h(e){var t=new FormData;return t.append("stage","".concat(e.stage)),e.file&&t.append("file",e.file),e.demo_fabric&&t.append("demo_fabric","".concat(e.demo_fabric)),Object(n["a"])({url:"/stagemedias/",method:"POST",data:t})}function g(e,t){return Object(n["a"])({url:"/project/".concat(e,"/stagename/").concat(t),method:"GET"})}function _(e){return Object(n["a"])({url:"/project/".concat(e,"/inform/"),method:"GET"})}function V(e,t,a,r){var c={subject:t,message:a,recipients:r};return Object(n["a"])({url:"/project/".concat(e,"/inform/"),method:"GET",params:c})}function N(e,t){if(e){var a=new FormData;return t.collection&&a.append("collection","".concat(t.collection)),t.start_fabric&&a.append("start_fabric","".concat(t.start_fabric)),t.start_fabric_image&&a.append("start_fabric_image","".concat(t.start_fabric_image)),t.end_fabric&&a.append("end_fabric","".concat(t.end_fabric)),t.end_fabric_image&&a.append("end_fabric_image","".concat(t.end_fabric_image)),Object(n["a"])({url:"/project/".concat(e,"/"),method:"PUT",data:a})}}function w(e){var t=new FormData;return t.append("file",e),Object(n["a"])({url:"/simple_media/",method:"POST",data:t})}},d277:function(e,t,a){"use strict";a.r(t);a("b0c0"),a("99af");var n=a("7a23"),r=Object(n["withScopeId"])("data-v-4b3f6934");Object(n["pushScopeId"])("data-v-4b3f6934");var c={id:"fabrics-upload-component"},o={class:"card"},u={class:"item"},i=Object(n["createStaticVNode"])('<p class="label" data-v-4b3f6934>Photos<span class="red-point" data-v-4b3f6934>*</span></p><div class="main-photo-container" data-v-4b3f6934><div class="note-container" data-v-4b3f6934><div class="note" data-v-4b3f6934><p data-v-4b3f6934>File Name: cloth number + _ + name</p><p data-v-4b3f6934>Photo within 1MB</p><p data-v-4b3f6934>1) Fabric picture: 10x10cm / 300dpi</p><p data-v-4b3f6934>2) Large image: 2000pixel / 300dpi</p></div></div></div>',2),l={class:"photo-container"},s={class:"photos"},d={class:"item"},p=Object(n["createVNode"])("p",{class:"label"},"TG3D Fabric ID",-1),f=Object(n["createVNode"])("p",{class:"label"},"Video Url",-1),b={class:"or-container"},m={class:"item"},v=Object(n["createVNode"])("p",{class:"label"},"New Art No in SAP (擇一)",-1),j=Object(n["createVNode"])("p",{class:"or"},"Or",-1),O={class:"item"},h=Object(n["createVNode"])("p",{class:"label"},"Art No (擇一)",-1),g=Object(n["createVNode"])("div",{class:"line"},null,-1),_={class:"item"},V=Object(n["createVNode"])("p",{class:"label"},[Object(n["createTextVNode"])("Name"),Object(n["createVNode"])("span",{class:"red-point"},"*")],-1),N={class:"item"},w=Object(n["createVNode"])("p",{class:"label"},[Object(n["createTextVNode"])("Real Composition"),Object(n["createVNode"])("span",{class:"red-point"},"*")],-1),k={class:"item"},y=Object(n["createVNode"])("p",{class:"label"},[Object(n["createTextVNode"])("Usable Width"),Object(n["createVNode"])("span",{class:"red-point"},"*")],-1),T={class:"inch-item"},x=Object(n["createVNode"])("p",null,"Inch",-1),U={class:"item"},S=Object(n["createVNode"])("p",{class:"label"},[Object(n["createTextVNode"])("Weight in g/m²"),Object(n["createVNode"])("span",{class:"red-point"},"*")],-1),C={class:"item"},R=Object(n["createVNode"])("p",{class:"label"},[Object(n["createTextVNode"])("Status"),Object(n["createVNode"])("span",{class:"red-point"},"*")],-1),E={class:"item"},F=Object(n["createVNode"])("p",{class:"label"},"Limited Brand Name",-1),P={class:"item"},B=Object(n["createVNode"])("p",{class:"label"},' Family Fabrics (art_no) (use "," to separate) ',-1),D={class:"item"},G=Object(n["createVNode"])("p",{class:"label"},' Fabric Works - SKU number (use "," to separate) ',-1),I=Object(n["createVNode"])("div",{class:"line"},null,-1),L={class:"item"},A=Object(n["createVNode"])("p",{class:"label"},"Tags Selector",-1),q={class:"tag-wrapper"},Q={class:"item"},J=Object(n["createVNode"])("p",{class:"label"},"Tags",-1),K={class:"tag-wrapper"},M={class:"footer-container"},W=Object(n["createTextVNode"])("Cancel"),z=Object(n["createTextVNode"])("Save"),H=Object(n["createTextVNode"])("Upload");Object(n["popScopeId"])();var X=r((function(e,t,a,X,Y,Z){var $=Object(n["resolveComponent"])("el-tooltip"),ee=Object(n["resolveComponent"])("font-awesome-icon"),te=Object(n["resolveComponent"])("el-input"),ae=Object(n["resolveComponent"])("el-autocomplete"),ne=Object(n["resolveComponent"])("el-option"),re=Object(n["resolveComponent"])("el-select"),ce=Object(n["resolveComponent"])("el-cascader"),oe=Object(n["resolveComponent"])("el-tag"),ue=Object(n["resolveComponent"])("el-button");return Object(n["openBlock"])(),Object(n["createBlock"])("div",c,[Object(n["createVNode"])("div",o,[Object(n["createVNode"])("div",u,[i,Object(n["createVNode"])("div",l,[Object(n["createVNode"])("div",{class:"icon-upload",onClick:t[1]||(t[1]=function(){return e.onPhotosUpload&&e.onPhotosUpload.apply(e,arguments)})},[Object(n["createVNode"])("img",{src:e.iconUploadUrl,alt:"upload"},null,8,["src"])]),Object(n["createVNode"])("div",s,[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.photosBase64,(function(t,a){return Object(n["openBlock"])(),Object(n["createBlock"])("div",{key:a,class:"photo"},[Object(n["createVNode"])($,{content:t.name,placement:"top",effect:"light"},{default:r((function(){return[Object(n["createVNode"])("img",{src:t.src,alt:t.name},null,8,["src","alt"])]})),_:2},1032,["content"]),Object(n["createVNode"])(ee,{class:"icon",icon:["fas","times-circle"],onClick:function(t){return e.onPhotoRemove(a)}},null,8,["onClick"])])})),128))])])]),Object(n["createVNode"])("div",d,[p,Object(n["createVNode"])(te,{class:"value",type:"text",modelValue:e.form.tg3d_fabric_id,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.form.tg3d_fabric_id=t})},null,8,["modelValue"]),f,(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.form.video_urls,(function(t,a){return Object(n["openBlock"])(),Object(n["createBlock"])(te,{key:a,class:"value",style:{marginBottom:"8px"},type:"text","model-value":t,onInput:function(t){return e.onVideoUrlChange(a,t)}},null,8,["model-value","onInput"])})),128)),Object(n["createVNode"])("div",{class:"icon-add",onClick:t[3]||(t[3]=function(){return e.onVideoUrlAdd&&e.onVideoUrlAdd.apply(e,arguments)})},[Object(n["createVNode"])(ee,{class:"icon",icon:["fas","plus-circle"]})])]),Object(n["createVNode"])("div",b,[Object(n["createVNode"])("div",m,[v,Object(n["createVNode"])(te,{class:["value",{success:1===e.sapArtNoInputStatus,error:2===e.sapArtNoInputStatus}],type:"text",modelValue:e.form.sap_art_no,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.form.sap_art_no=t})},null,8,["class","modelValue"])]),j,Object(n["createVNode"])("div",O,[h,Object(n["createVNode"])(te,{class:["value",{success:1===e.artNoInputStatus,error:2===e.artNoInputStatus}],type:"text",modelValue:e.form.art_no,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.form.art_no=t})},null,8,["class","modelValue"])])]),g,Object(n["createVNode"])("div",_,[V,Object(n["createVNode"])(ae,{class:"value","model-value":e.form.name,"fetch-suggestions":e.onQuerySearch,onInput:t[6]||(t[6]=function(t){return e.form.name=e.toNameUpperCase(t)})},null,8,["model-value","fetch-suggestions"])]),Object(n["createVNode"])("div",N,[w,Object(n["createVNode"])(ae,{class:"value","model-value":e.form.real_composition,"fetch-suggestions":e.onQuerySearchComposition,onInput:t[7]||(t[7]=function(t){return e.form.real_composition=e.toNameUpperCase(t)})},null,8,["model-value","fetch-suggestions"])]),Object(n["createVNode"])("div",k,[y,Object(n["createVNode"])("div",T,[Object(n["createVNode"])(te,{class:"value",type:"number",modelValue:e.form.width,"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.form.width=t})},null,8,["modelValue"]),x])]),Object(n["createVNode"])("div",U,[S,Object(n["createVNode"])(te,{class:"value",type:"number",modelValue:e.form.weight,"onUpdate:modelValue":t[9]||(t[9]=function(t){return e.form.weight=t})},null,8,["modelValue"])]),Object(n["createVNode"])("div",C,[R,Object(n["createVNode"])(re,{class:"value",modelValue:e.form.status,"onUpdate:modelValue":t[10]||(t[10]=function(t){return e.form.status=t})},{default:r((function(){return[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.statusOptions,(function(e,t){return Object(n["openBlock"])(),Object(n["createBlock"])(ne,{key:t,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]),Object(n["createVNode"])("div",E,[F,Object(n["createVNode"])(re,{disabled:"exclusive"!==e.form.status,class:"value",modelValue:e.form.exclusive_for,"onUpdate:modelValue":t[11]||(t[11]=function(t){return e.form.exclusive_for=t})},{default:r((function(){return[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.brandOptions,(function(e,t){return Object(n["openBlock"])(),Object(n["createBlock"])(ne,{key:t,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:1},8,["disabled","modelValue"])]),Object(n["createVNode"])("div",P,[B,Object(n["createVNode"])(te,{class:"value",type:"text",modelValue:e.form.family_fabric_art_no,"onUpdate:modelValue":t[12]||(t[12]=function(t){return e.form.family_fabric_art_no=t})},null,8,["modelValue"])]),Object(n["createVNode"])("div",D,[G,Object(n["createVNode"])(te,{class:"value",type:"text",modelValue:e.form.fabric_works_skus,"onUpdate:modelValue":t[13]||(t[13]=function(t){return e.form.fabric_works_skus=t})},null,8,["modelValue"])]),I,Object(n["createVNode"])("div",L,[A,Object(n["createVNode"])("div",q,[Object(n["createVNode"])(ce,{class:"input",modelValue:e.tagType,"onUpdate:modelValue":t[14]||(t[14]=function(t){return e.tagType=t}),options:e.tagTypeOptions,placeholder:"Tag Type..."},null,8,["modelValue","options"])]),Object(n["createVNode"])(ae,{class:"input",modelValue:e.fabricTypeValue,"onUpdate:modelValue":t[15]||(t[15]=function(t){return e.fabricTypeValue=t}),"fetch-suggestions":e.onQuerySearchFabricType,disabled:!e.tagType.length,onKeydown:t[16]||(t[16]=Object(n["withKeys"])((function(t){return e.onSelectFabricType({value:e.fabricTypeValue})}),["enter"])),onSelect:e.onSelectFabricType},null,8,["modelValue","fetch-suggestions","disabled","onSelect"])]),Object(n["createVNode"])("div",Q,[J,Object(n["createVNode"])("div",K,[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.form.tags,(function(t,a){return Object(n["openBlock"])(),Object(n["createBlock"])(oe,{key:a,class:"tag",closable:"",type:e.getTagType(t.parent_name),onClose:function(a){return e.onTagClose(t)}},{default:r((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])("".concat(t.parent_name,"-").concat(t.tag_name)),1)]})),_:2},1032,["type","onClose"])})),128))])]),Object(n["createVNode"])("div",M,[Object(n["createVNode"])(ue,{type:"info",onClick:e.onCancel},{default:r((function(){return[W]})),_:1},8,["onClick"]),Object(n["createVNode"])(ue,{type:"success",onClick:e.onSave},{default:r((function(){return[z]})),_:1},8,["onClick"]),Object(n["createVNode"])(ue,{type:"success",onClick:e.onUpload},{default:r((function(){return[H]})),_:1},8,["onClick"])])])])})),Y=a("2909"),Z=a("1da1"),$=(a("d81d"),a("159b"),a("4de4"),a("96cf"),a("d257")),ee=a("6c02"),te=a("f1ed"),ae=a.n(te),ne=a("2fdf"),re=a("6ec5"),ce=a("3fd4"),oe=a("e6d3"),ue=a("a4ca"),ie=[{label:"Public",value:"public",checked:!1},{label:"Private",value:"private",checked:!1},{label:"Exclusive - Brand",value:"exclusive",checked:!1}],le=Object(n["defineComponent"])({name:"FabricUpload",setup:function(){var e=Object(ee["c"])(),t=Object(ee["d"])(),a=Object(n["reactive"])({main_photo:null,photos:[],photos_with_id:[],video_urls:[],tg3d_fabric_id:"",sap_art_no:"",art_no:"",name:"",real_composition:"",width:0,weight:0,status:"public",exclusive_for:null,family_fabric_art_no:"",fabric_works_skus:"",tags:[]}),r=Object(n["ref"])(null),c=Object(n["ref"])([]),o=Object(n["ref"])([]),u=Object(n["ref"])([]),i=Object(n["ref"])(""),l=Object(n["ref"])([]),s=Object(n["ref"])(""),d=Object(n["ref"])([]),p=Object(n["ref"])([]),f=Object(n["ref"])([]),b=Object(n["ref"])([]),m=Object(n["ref"])([]),v=Object(n["ref"])(void 0),j=Object(n["ref"])(0),O=Object(n["ref"])(0);Object(n["watch"])((function(){return a.sap_art_no}),(function(){v.value&&clearTimeout(v.value),v.value=setTimeout(Object(Z["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a.sap_art_no){e.next=3;break}return j.value=0,e.abrupt("return");case 3:return e.next=5,Object(ne["a"])({sap_art_no:a.sap_art_no});case 5:t=e.sent,n=t.data,j.value=n.valid?1:2;case 8:case"end":return e.stop()}}),e)}))),500)})),Object(n["watch"])((function(){return a.art_no}),(function(){v.value&&clearTimeout(v.value),v.value=setTimeout(Object(Z["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a.art_no){e.next=3;break}return O.value=0,e.abrupt("return");case 3:return e.next=5,Object(ne["a"])({art_no:a.art_no});case 5:t=e.sent,n=t.data,O.value=n.valid?1:2;case 8:case"end":return e.stop()}}),e)}))),500)})),Object(n["watch"])([r],(function(){if(a.main_photo=r.value,r.value){var e=new FileReader;e.onload=function(e){s.value=e.target.result},e.readAsDataURL(r.value)}})),Object(n["watch"])([c],(function(){if(a.photos=c.value,c.value.length)for(var e=function(e){var t=new FileReader;t.onload=function(t){d.value=d.value.concat({type:"photo",name:c.value[e].name,src:t.target.result})},t.readAsDataURL(c.value[e])},t=0;t<c.value.length;t++)e(t)})),Object(n["watch"])([o],(function(){if(a.photos_with_id=o.value,o.value.length)for(var e=0;e<o.value.length;e++)d.value=d.value.concat({type:"photo_with_id",name:o.value[e].name,src:o.value[e].file})})),Object(n["watch"])([u],Object(Z["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!u.value.length){e.next=6;break}return e.next=3,Object(ne["m"])(u.value[u.value.length-1]);case 3:t=e.sent,a=t.data,l.value=a.map((function(e){return e.name}));case 6:case"end":return e.stop()}}),e)}))));var h=function(){var e=Object(Z["a"])(regeneratorRuntime.mark((function e(){var t,n,r,c,u,i,l,s,d,v;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(ne["l"])();case 2:return t=e.sent,n=t.data,e.next=6,Object(ne["h"])();case 6:return r=e.sent,c=r.data,e.next=10,Object(ne["f"])();case 10:return u=e.sent,i=u.data,e.next=14,Object(re["d"])();case 14:return l=e.sent,s=l.data,e.next=18,Object(ne["n"])();case 18:d=e.sent,v=d.data,o.value=n.media,a.video_urls=n.video_urls,a.sap_art_no=n.sap_art_no,a.art_no=n.art_no,a.name=n.name,a.real_composition=n.real_composition,a.width=n.width,a.weight=n.weight,a.status=n.status,a.exclusive_for=n.exclusive_for,a.family_fabric_art_no=n.family_fabric_art_no,a.fabric_works_skus=n.fabric_works_skus,a.tg3d_fabric_id=n.tg3d_fabric_id,a.tags=n.tags.map((function(e){return{tag_parent:e.parent,tag_name:e.name,parent_name:e.parent_name}})),p.value=c.names.map((function(e){return e[0]})),f.value=i.real_composition.map((function(e){return e[0]})),b.value=s.map((function(e){return{label:e.name,value:e.id,checked:!1}})),m.value=v.reduce(oe["b"],[]);case 38:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n["onMounted"])(h);var g=function(e){return function(t){return t.toLowerCase().indexOf(e.toLowerCase())>-1}},_=function(e){var t=["primary","success","info","warning","danger"],a={};return m.value.forEach((function(e,n){a[e.label]=t[n%5]})),a[e]},V=function(){var e=Object(Z["a"])(regeneratorRuntime.mark((function e(t,a){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t?p.value.filter(g(t)):p.value,a(n.map((function(e){return{value:e}})));case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),N=function(){var e=Object(Z["a"])(regeneratorRuntime.mark((function e(t,a){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t?f.value.filter(g(t)):f.value,a(n.map((function(e){return{value:e}})));case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),w=function(){var e=Object(Z["a"])(regeneratorRuntime.mark((function e(t,a){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t?l.value.filter(g(t)):l.value,a(n.map((function(e){return{value:e}})));case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),k=function(){var e=document.createElement("input");e.type="file",e.accept="image/*",e.addEventListener("change",Object(Z["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.files&&(r.value=e.files[0]);case 1:case"end":return t.stop()}}),t)})))),e.click()},y=function(e){if(e.value){var t=Object(oe["a"])(u.value,m.value);t&&(a.tags&&a.tags.some((function(a){return a.tag_name===e.value&&a.tag_parent===t.value}))||(a.tags=[].concat(Object(Y["a"])(a.tags),[{parent_name:t.label,tag_name:e.value,tag_parent:t.value}])),i.value="")}},T=function(e){a.tags=a.tags.filter((function(t){return t.tag_name!==e.tag_name||t.tag_parent!==e.tag_parent}))},x=function(){var e=document.createElement("input");e.type="file",e.accept="image/*",e.multiple=!0,e.addEventListener("change",Object(Z["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.files){for(a=[],n=0;n<e.files.length;n++)a=[].concat(Object(Y["a"])(a),[e.files[n]]);c.value=a}case 1:case"end":return t.stop()}}),t)})))),e.click()},U=function(e){var t=d.value[e];if(d.value=[],"photo"===t.type){if(c.value=c.value.filter((function(e){return e.name!==t.name})),!o.value.length)return;for(var a=0;a<o.value.length;a++)d.value=d.value.concat({type:"photo_with_id",name:o.value[a].name,src:o.value[a].file})}if("photo_with_id"===t.type){if(o.value=o.value.filter((function(e){return e.name!==t.name})),!c.value.length)return;for(var n=function(e){var t=new FileReader;t.onload=function(t){d.value=d.value.concat({type:"photo",name:c.value[e].name,src:t.target.result})},t.readAsDataURL(c.value[e])},r=0;r<c.value.length;r++)n(r)}},S=function(){a.video_urls&&(a.video_urls=[].concat(Object(Y["a"])(a.video_urls),[""]))},C=function(e,t){a.video_urls[e]=t},R=function(){var a=Object(Z["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(n=e.query.id,!n){a.next=6;break}return a.next=4,t.push({name:"ProjectDetail",params:{id:n}});case 4:a.next=8;break;case 6:return a.next=8,t.back();case 8:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}(),E=function(){var n=Object(Z["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(ne["s"])(a);case 2:if(Object(ce["c"])({type:"success",title:"Save",message:"Save Fabric successfully"}),r=e.query.id,!r){n.next=7;break}return n.next=7,t.push({name:"ProjectDetail",params:{id:r}});case 7:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),F=function(){var n=Object(Z["a"])(regeneratorRuntime.mark((function n(){var r,c,o,u,i,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=Object($["f"])(),n.prev=1,n.next=4,Object(ne["v"])(a);case 4:if(c=n.sent,o=c.data,u=e.query.id,!u){n.next=22;break}return n.prev=8,n.next=11,Object(ue["u"])(parseInt(u,10),{end_fabric:o.id});case 11:return n.next=13,Object(ue["q"])({id:parseInt(u,10),success:!0,reason:""});case 13:i=n.sent,l=i.data,Object(ce["c"])({title:"Success",type:"success",message:"Change status to ".concat(l.status,".")});case 16:return n.prev=16,n.next=19,t.push({name:"ProjectDetail",params:{id:u}});case 19:return n.finish(16);case 20:n.next=24;break;case 22:return n.next=24,t.push({name:"FabricDetail",params:{id:o.id}});case 24:return n.prev=24,r.close(),n.finish(24);case 27:case"end":return n.stop()}}),n,null,[[1,,24,27],[8,,16,20]])})));return function(){return n.apply(this,arguments)}}();return{form:a,mainPhotoBase64:s,photosBase64:d,tagType:u,fabricTypeValue:i,statusOptions:ie,brandOptions:b,tagTypeOptions:m,sapArtNoInputStatus:j,artNoInputStatus:O,onQuerySearch:V,onQuerySearchComposition:N,onQuerySearchFabricType:w,onSelectFabricType:y,onTagClose:T,onMainPhotoUpload:k,onPhotosUpload:x,onPhotoRemove:U,onVideoUrlAdd:S,onVideoUrlChange:C,onCancel:R,onSave:E,onUpload:F,getTagType:_,getLastViewTimeString:$["e"],toNameUpperCase:oe["c"],iconUploadUrl:ae.a}}}),se=le;a("64c6");se.render=X,se.__scopeId="data-v-4b3f6934";t["default"]=se},e6d3:function(e,t,a){"use strict";a.d(t,"c",(function(){return r})),a.d(t,"b",(function(){return c})),a.d(t,"a",(function(){return o}));var n=a("2909");a("ac1f"),a("1276"),a("caad"),a("a15b"),a("d81d"),a("99af"),a("7db0");function r(e){var t=[" ","/","+","%"],a=e.split("").reduce((function(e,a,n){return 0===n?(e.push(a),e):(t.includes(a)?e.push(a):e[e.length-1]="".concat(e[e.length-1]+a),e)}),[]);return a.map((function(e,t){return e.split("").map((function(e,a){return a===(0===t?0:1)?e.toUpperCase():e.toLowerCase()})).join("")})).join("")}var c=function e(t,a){return a.children&&a.children.length?t.push({label:a.label,value:a.value,children:a.children.reduce(e,[])}):t.push({label:a.label,value:a.value}),t},o=function(e,t){var a=e[e.length-1],r=function e(t,a){return a.children&&a.children.length?t=[].concat(Object(n["a"])(t),[a],Object(n["a"])(a.children.reduce(e,[]))):t.push(a),t},c=t.reduce(r,[]);return c.find((function(e){return e.value===a}))}},f1ed:function(e,t,a){e.exports=a.p+"img/upload.42ffdf67.png"}}]);
//# sourceMappingURL=FabricUpload.64b7b966.js.map