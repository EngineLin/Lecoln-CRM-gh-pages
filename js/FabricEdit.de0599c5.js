(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["FabricEdit"],{5848:function(e,t,a){"use strict";a.r(t);a("b0c0");var n=a("7a23"),c=Object(n["withScopeId"])("data-v-cb0606e8");Object(n["pushScopeId"])("data-v-cb0606e8");var r={id:"fabrics-upload-component"},o={class:"card"},l={class:"item"},u=Object(n["createStaticVNode"])('<p class="label" data-v-cb0606e8>Photos<span class="red-point" data-v-cb0606e8>*</span></p><div class="main-photo-container" data-v-cb0606e8><div class="note-container" data-v-cb0606e8><div class="note" data-v-cb0606e8><p data-v-cb0606e8>File Name: cloth number + _ + name</p><p data-v-cb0606e8>Photo within 1MB</p><p data-v-cb0606e8>1) Fabric picture: 10x10cm / 300dpi</p><p data-v-cb0606e8>2) Large image: 2000pixel / 300dpi</p></div></div></div>',2),i={class:"photo-container"},s={class:"photos"},d={class:"item"},p=Object(n["createVNode"])("p",{class:"label"},"Video Url",-1),b={class:"or-container"},m={class:"item"},f=Object(n["createVNode"])("p",{class:"label"},"New Art No in SAP (擇一)",-1),v=Object(n["createVNode"])("p",{class:"or"},"Or",-1),O={class:"item"},j=Object(n["createVNode"])("p",{class:"label"},"Art No (擇一)",-1),h=Object(n["createVNode"])("div",{class:"line"},null,-1),g={class:"item"},V=Object(n["createVNode"])("p",{class:"label"},[Object(n["createTextVNode"])("Name"),Object(n["createVNode"])("span",{class:"red-point"},"*")],-1),_={class:"item"},N=Object(n["createVNode"])("p",{class:"label"},[Object(n["createTextVNode"])("Real Composition"),Object(n["createVNode"])("span",{class:"red-point"},"*")],-1),y={class:"item"},k=Object(n["createVNode"])("p",{class:"label"},[Object(n["createTextVNode"])("Usable Width"),Object(n["createVNode"])("span",{class:"red-point"},"*")],-1),w={class:"inch-item"},T=Object(n["createVNode"])("p",null,"Inch",-1),x={class:"item"},C=Object(n["createVNode"])("p",{class:"label"},[Object(n["createTextVNode"])("Weight in g/m²"),Object(n["createVNode"])("span",{class:"red-point"},"*")],-1),U={class:"item"},B=Object(n["createVNode"])("p",{class:"label"},[Object(n["createTextVNode"])("Status"),Object(n["createVNode"])("span",{class:"red-point"},"*")],-1),R={class:"item"},S=Object(n["createVNode"])("p",{class:"label"},"Limited Brand Name",-1),F={class:"item"},L=Object(n["createVNode"])("p",{class:"label"},' Family Fabrics (art_no) (use "," to separate) ',-1),P={class:"item"},E=Object(n["createVNode"])("p",{class:"label"},' Fabric Works - SKU number (use "," to separate) ',-1),A=Object(n["createVNode"])("div",{class:"line"},null,-1),G={class:"item"},I=Object(n["createVNode"])("p",{class:"label"},"Tags Selector",-1),D={class:"tag-wrapper"},Q={class:"item"},J=Object(n["createVNode"])("p",{class:"label"},"Tags",-1),K={class:"tag-wrapper"},M={class:"footer-container"},W=Object(n["createTextVNode"])("Cancel"),q=Object(n["createTextVNode"])("Update");Object(n["popScopeId"])();var z=c((function(e,t,a,z,H,X){var Y=Object(n["resolveComponent"])("el-tooltip"),Z=Object(n["resolveComponent"])("font-awesome-icon"),$=Object(n["resolveComponent"])("el-input"),ee=Object(n["resolveComponent"])("el-autocomplete"),te=Object(n["resolveComponent"])("el-option"),ae=Object(n["resolveComponent"])("el-select"),ne=Object(n["resolveComponent"])("el-tag"),ce=Object(n["resolveComponent"])("el-button");return Object(n["openBlock"])(),Object(n["createBlock"])("div",r,[Object(n["createVNode"])("div",o,[Object(n["createVNode"])("div",l,[u,Object(n["createVNode"])("div",i,[Object(n["createVNode"])("div",{class:"icon-upload",onClick:t[1]||(t[1]=function(){return e.onPhotosUpload&&e.onPhotosUpload.apply(e,arguments)})},[Object(n["createVNode"])("img",{src:e.iconUploadUrl,alt:"upload"},null,8,["src"])]),Object(n["createVNode"])("div",s,[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.photosBase64,(function(t,a){return Object(n["openBlock"])(),Object(n["createBlock"])("div",{key:a,class:"photo"},[Object(n["createVNode"])(Y,{content:t.name,placement:"top",effect:"light"},{default:c((function(){return[Object(n["createVNode"])("img",{src:t.src,alt:t.name},null,8,["src","alt"])]})),_:2},1032,["content"]),Object(n["createVNode"])(Z,{class:"icon",icon:["far","times-circle"],onClick:function(t){return e.onPhotoRemove(a)}},null,8,["onClick"])])})),128))])])]),Object(n["createVNode"])("div",d,[p,(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.form.video_urls,(function(t,a){return Object(n["openBlock"])(),Object(n["createBlock"])($,{key:a,class:"value",style:{marginBottom:"8px"},type:"text","model-value":t,onInput:function(t){return e.onVideoUrlChange(a,t)}},null,8,["model-value","onInput"])})),128)),Object(n["createVNode"])("div",{class:"icon-add",onClick:t[2]||(t[2]=function(){return e.onVideoUrlAdd&&e.onVideoUrlAdd.apply(e,arguments)})},[Object(n["createVNode"])(Z,{class:"icon",icon:["fas","plus-circle"]})])]),Object(n["createVNode"])("div",b,[Object(n["createVNode"])("div",m,[f,Object(n["createVNode"])($,{class:"value",type:"text",modelValue:e.form.sap_art_no,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.form.sap_art_no=t}),disabled:""},null,8,["modelValue"])]),v,Object(n["createVNode"])("div",O,[j,Object(n["createVNode"])($,{class:"value",type:"text",modelValue:e.form.art_no,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.form.art_no=t}),disabled:""},null,8,["modelValue"])])]),h,Object(n["createVNode"])("div",g,[V,Object(n["createVNode"])(ee,{class:"value","model-value":e.form.name,"fetch-suggestions":e.onQuerySearch,onInput:t[5]||(t[5]=function(t){return e.form.name=e.toNameUpperCase(t)})},null,8,["model-value","fetch-suggestions"])]),Object(n["createVNode"])("div",_,[N,Object(n["createVNode"])(ee,{class:"value","model-value":e.form.real_composition,"fetch-suggestions":e.onQuerySearchComposition,onInput:t[6]||(t[6]=function(t){return e.form.real_composition=e.toNameUpperCase(t)})},null,8,["model-value","fetch-suggestions"])]),Object(n["createVNode"])("div",y,[k,Object(n["createVNode"])("div",w,[Object(n["createVNode"])($,{class:"value",type:"number",modelValue:e.form.width,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.form.width=t})},null,8,["modelValue"]),T])]),Object(n["createVNode"])("div",x,[C,Object(n["createVNode"])($,{class:"value",type:"number",modelValue:e.form.weight,"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.form.weight=t})},null,8,["modelValue"])]),Object(n["createVNode"])("div",U,[B,Object(n["createVNode"])(ae,{class:"value",modelValue:e.form.status,"onUpdate:modelValue":t[9]||(t[9]=function(t){return e.form.status=t})},{default:c((function(){return[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.statusOptions,(function(e,t){return Object(n["openBlock"])(),Object(n["createBlock"])(te,{key:t,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]),Object(n["createVNode"])("div",R,[S,Object(n["createVNode"])(ae,{disabled:"exclusive"!==e.form.status,class:"value",modelValue:e.form.exclusive_for,"onUpdate:modelValue":t[10]||(t[10]=function(t){return e.form.exclusive_for=t})},{default:c((function(){return[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.brandOptions,(function(e,t){return Object(n["openBlock"])(),Object(n["createBlock"])(te,{key:t,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:1},8,["disabled","modelValue"])]),Object(n["createVNode"])("div",F,[L,Object(n["createVNode"])($,{class:"value",type:"text",modelValue:e.form.family_fabric_art_no,"onUpdate:modelValue":t[11]||(t[11]=function(t){return e.form.family_fabric_art_no=t})},null,8,["modelValue"])]),Object(n["createVNode"])("div",P,[E,Object(n["createVNode"])($,{class:"value",type:"text",modelValue:e.form.fabric_works_skus,"onUpdate:modelValue":t[12]||(t[12]=function(t){return e.form.fabric_works_skus=t})},null,8,["modelValue"])]),A,Object(n["createVNode"])("div",G,[I,Object(n["createVNode"])("div",D,[Object(n["createVNode"])(ae,{modelValue:e.tagType,"onUpdate:modelValue":t[13]||(t[13]=function(t){return e.tagType=t}),placeholder:"Tag Type..."},{default:c((function(){return[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.tagTypeOptions,(function(e){return Object(n["openBlock"])(),Object(n["createBlock"])(te,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]),Object(n["createVNode"])(ee,{class:"input",modelValue:e.fabricTypeValue,"onUpdate:modelValue":t[14]||(t[14]=function(t){return e.fabricTypeValue=t}),"fetch-suggestions":e.onQuerySearchFabricType,disabled:!e.tagType,onKeydown:t[15]||(t[15]=Object(n["withKeys"])((function(t){return e.onSelectFabricType({value:e.fabricTypeValue})}),["enter"])),onSelect:e.onSelectFabricType},null,8,["modelValue","fetch-suggestions","disabled","onSelect"])]),Object(n["createVNode"])("div",Q,[J,Object(n["createVNode"])("div",K,[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.form.tags,(function(t,a){return Object(n["openBlock"])(),Object(n["createBlock"])(ne,{key:a,class:"tag",closable:"",type:e.getTagType(t.tag_type),onClose:function(a){return e.onTagClose(t)}},{default:c((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(t.tag_name),1)]})),_:2},1032,["type","onClose"])})),128))])]),Object(n["createVNode"])("div",M,[Object(n["createVNode"])(ce,{type:"info",onClick:e.onCancel},{default:c((function(){return[W]})),_:1},8,["onClick"]),Object(n["createVNode"])(ce,{type:"success",onClick:e.onSave},{default:c((function(){return[q]})),_:1},8,["onClick"])])])])})),H=a("2909"),X=a("1da1"),Y=(a("96cf"),a("a9e3"),a("99af"),a("d81d"),a("4de4"),a("d257")),Z=a("6c02"),$=a("f1ed"),ee=a.n($),te=a("2fdf"),ae=a("6ec5"),ne=a("e6d3"),ce=[{label:"Public",value:"public",checked:!1},{label:"Private",value:"private",checked:!1},{label:"Exclusive - Brand",value:"exclusive",checked:!1}],re=[{label:"Sport",value:"sport",checked:!1},{label:"Style",value:"style",checked:!1},{label:"Clothes",value:"clothes",checked:!1},{label:"Category",value:"category",checked:!1}],oe=function(e){switch(e){case"sport":return"";case"style":return"success";case"clothes":return"info";case"category":return"warning";default:return"danger"}},le=Object(n["defineComponent"])({name:"FabricEdit",props:{id:{type:Number,default:0}},setup:function(e){var t=Object(Z["d"])(),a=Object(n["toRefs"])(e),c=a.id,r=Object(n["reactive"])({main_photo:null,photos:[],photos_with_id:[],video_urls:[],sap_art_no:"",art_no:"",name:"",real_composition:"",width:0,weight:0,status:"public",exclusive_for:null,family_fabric_art_no:"",fabric_works_skus:"",tags:[]}),o=Object(n["ref"])(null),l=Object(n["ref"])([]),u=Object(n["ref"])([]),i=Object(n["ref"])(null),s=Object(n["ref"])(""),d=Object(n["ref"])([]),p=Object(n["ref"])(""),b=Object(n["ref"])([]),m=Object(n["ref"])([]),f=Object(n["ref"])([]),v=Object(n["ref"])([]);Object(n["watch"])([o],(function(){if(!o.value)return{};var e=new FileReader;e.onload=function(e){p.value=e.target.result},e.readAsDataURL(o.value),r.main_photo=o.value})),Object(n["watch"])([l],(function(){if(r.photos=l.value,l.value.length)for(var e=function(e){var t=new FileReader;t.onload=function(t){b.value=b.value.concat({type:"photo",name:l.value[e].name,src:t.target.result})},t.readAsDataURL(l.value[e])},t=0;t<l.value.length;t++)e(t)})),Object(n["watch"])([u],(function(){if(r.photos_with_id=u.value,u.value.length)for(var e=0;e<u.value.length;e++)b.value=b.value.concat({type:"photo_with_id",name:u.value[e].name,src:u.value[e].file})})),Object(n["watch"])([i],Object(X["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!i.value){e.next=6;break}return e.next=3,Object(te["m"])(i.value);case 3:t=e.sent,a=t.data,d.value=a.map((function(e){return e.name}));case 6:case"end":return e.stop()}}),e)}))));var O=function(){var e=Object(X["a"])(regeneratorRuntime.mark((function e(){var t,a,n,o,l,i,s,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(te["b"])(c.value);case 2:return t=e.sent,a=t.data,e.next=6,Object(te["h"])();case 6:return n=e.sent,o=n.data,e.next=10,Object(te["f"])();case 10:return l=e.sent,i=l.data,e.next=14,Object(ae["d"])();case 14:s=e.sent,d=s.data,u.value=a.media,r.video_urls=a.video_urls,r.sap_art_no=a.sap_art_no,r.art_no=a.art_no,r.name=a.name,r.real_composition=a.real_composition,r.width=a.width,r.weight=a.weight,r.status=a.status,r.exclusive_for=a.exclusive_for,r.family_fabric_art_no=a.family_fabric_art_no,r.fabric_works_skus=a.fabric_works_skus,r.tags=a.tags.map((function(e){return{tag_type:e.tag_type,tag_name:e.name}})),m.value=o.names.map((function(e){return e[0]})),f.value=i.real_composition.map((function(e){return e[0]})),v.value=d.map((function(e){return{label:e.name,value:e.id,checked:!1}}));case 32:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n["onMounted"])(O);var j=function(e){return function(t){return t.toLowerCase().indexOf(e.toLowerCase())>-1}},h=function(){var e=Object(X["a"])(regeneratorRuntime.mark((function e(t,a){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t?m.value.filter(j(t)):m.value,a(n.map((function(e){return{value:e}})));case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),g=function(){var e=Object(X["a"])(regeneratorRuntime.mark((function e(t,a){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t?f.value.filter(j(t)):f.value,a(n.map((function(e){return{value:e}})));case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),V=function(){var e=Object(X["a"])(regeneratorRuntime.mark((function e(t,a){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t?d.value.filter(j(t)):d.value,a(n.map((function(e){return{value:e}})));case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),_=function(){var e=document.createElement("input");e.type="file",e.accept="image/*",e.addEventListener("change",Object(X["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.files&&(o.value=e.files[0]);case 1:case"end":return t.stop()}}),t)})))),e.click()},N=function(e){s.value&&(r.tags&&r.tags.some((function(t){return t.tag_name===e.value&&t.tag_type===i.value}))||(r.tags=[].concat(Object(H["a"])(r.tags),[{tag_name:e.value,tag_type:i.value}])),s.value="")},y=function(e){console.log(e),r.tags=r.tags.filter((function(t){return t.tag_name!==e.tag_name&&t.tag_type!==e.tag_type}))},k=function(){var e=document.createElement("input");e.type="file",e.accept="image/*",e.multiple=!0,e.addEventListener("change",Object(X["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.files){for(a=[],n=0;n<e.files.length;n++)a=[].concat(Object(H["a"])(a),[e.files[n]]);l.value=a}case 1:case"end":return t.stop()}}),t)})))),e.click()},w=function(e){var t=b.value[e];if(b.value=[],"photo"===t.type){if(l.value=l.value.filter((function(e){return e.name!==t.name})),!u.value.length)return;for(var a=0;a<u.value.length;a++)b.value=b.value.concat({type:"photo_with_id",name:u.value[a].name,src:u.value[a].file})}if("photo_with_id"===t.type){if(u.value=u.value.filter((function(e){return e.name!==t.name})),!l.value.length)return;for(var n=function(e){var t=new FileReader;t.onload=function(t){b.value=b.value.concat({type:"photo",name:l.value[e].name,src:t.target.result})},t.readAsDataURL(l.value[e])},c=0;c<l.value.length;c++)n(c)}},T=function(){r.video_urls&&(r.video_urls=[].concat(Object(H["a"])(r.video_urls),[""]))},x=function(e,t){r.video_urls[e]=t},C=function(){var e=Object(X["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.back();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=Object(X["a"])(regeneratorRuntime.mark((function e(){var a,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=Object(Y["f"])(),e.prev=1,e.next=4,Object(te["r"])(c.value,r);case 4:return n=e.sent,o=n.data,e.next=8,t.push({name:"FabricDetail",params:{id:o.id}});case 8:return e.prev=8,a.close(),e.finish(8);case 11:case"end":return e.stop()}}),e,null,[[1,,8,11]])})));return function(){return e.apply(this,arguments)}}();return{form:r,mainPhotoBase64:p,photosBase64:b,tagType:i,fabricTypeValue:s,statusOptions:ce,brandOptions:v,tagTypeOptions:re,onQuerySearch:h,onQuerySearchComposition:g,onQuerySearchFabricType:V,onSelectFabricType:N,onTagClose:y,onMainPhotoUpload:_,onPhotosUpload:k,onPhotoRemove:w,onVideoUrlAdd:T,onVideoUrlChange:x,onCancel:C,onSave:U,toNameUpperCase:ne["a"],getTagType:oe,getLastViewTimeString:Y["e"],iconUploadUrl:ee.a}}}),ue=le;a("ff73");ue.render=z,ue.__scopeId="data-v-cb0606e8";t["default"]=ue},"6ec5":function(e,t,a){"use strict";a.d(t,"e",(function(){return c})),a.d(t,"a",(function(){return r})),a.d(t,"c",(function(){return o})),a.d(t,"d",(function(){return l})),a.d(t,"b",(function(){return u})),a.d(t,"g",(function(){return i})),a.d(t,"i",(function(){return s})),a.d(t,"h",(function(){return d})),a.d(t,"f",(function(){return p}));var n=a("415e");function c(e,t){var a={};return e&&(a.category=e),t&&(a.q=t),Object(n["a"])({url:"/members/",method:"GET",params:a})}function r(e){return e?Object(n["a"])({url:"/member/".concat(e,"/"),method:"GET"}):Object(n["a"])({url:"/member/",method:"GET"})}function o(e,t){return e?Object(n["a"])({url:"/member/".concat(e,"/roles/"),method:"GET",params:t}):Object(n["a"])({url:"/member/roles/",method:"GET",params:t})}function l(e,t){return e?Object(n["a"])({url:"/member/".concat(e,"/teams/"),method:"GET",params:t}):Object(n["a"])({url:"/member/teams/",method:"GET",params:t})}function u(e){return e?Object(n["a"])({url:"/member/".concat(e,"/business_units/"),method:"GET"}):Object(n["a"])({url:"/member/business_units/",method:"GET"})}function i(e,t){var a={email:e.email,nickname:e.nickname,role:e.role,teams:e.teams,phone:e.phone,active:e.active,business_unit:e.business_unit};return t?Object(n["a"])({url:"/member/".concat(t,"/"),method:"PUT",data:a}):Object(n["a"])({url:"/member/",method:"PUT",data:a})}function s(e){return Object(n["a"])({url:"/member/",method:"PUT",data:e})}function d(e,t){var a=new FormData;return a.append("file",e),t&&a.append("member",JSON.stringify(t)),Object(n["a"])({url:"/member/medias/",method:"POST",data:a})}function p(e){return Object(n["a"])({url:"/mail/contact_us/",method:"POST",data:e})}},ce5c:function(e,t,a){},e6d3:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));a("ac1f"),a("1276"),a("caad"),a("a15b"),a("d81d");function n(e){var t=[" ","/","+","%"],a=e.split("").reduce((function(e,a,n){return 0===n?(e.push(a),e):(t.includes(a)?e.push(a):e[e.length-1]="".concat(e[e.length-1]+a),e)}),[]);return a.map((function(e,t){return e.split("").map((function(e,a){return a===(0===t?0:1)?e.toUpperCase():e.toLowerCase()})).join("")})).join("")}},f1ed:function(e,t,a){e.exports=a.p+"img/upload.42ffdf67.png"},ff73:function(e,t,a){"use strict";a("ce5c")}}]);
//# sourceMappingURL=FabricEdit.de0599c5.js.map