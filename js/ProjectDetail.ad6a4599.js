(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ProjectDetail"],{"0165":function(e,t,c){},"0374":function(e,t,c){"use strict";c("bb81")},"0658":function(e,t,c){"use strict";c("c747")},1427:function(e,t,c){"use strict";c("865b")},"3a0d":function(e,t,c){"use strict";c("0165")},"3c48":function(e,t,c){"use strict";c("49fa")},"3f83":function(e,t,c){},"414f":function(e,t,c){},4500:function(e,t,c){"use strict";c("a5a3")},"468f":function(e,t,c){"use strict";c("414f")},"49fa":function(e,t,c){},"4a3b":function(e,t,c){"use strict";c("6ea4")},"4fba":function(e,t,c){"use strict";c("b0c0");var n=c("7a23"),a=Object(n["withScopeId"])("data-v-3f79852e");Object(n["pushScopeId"])("data-v-3f79852e");var r={id:"fabric-card-selectable-component"},o={class:"content-container"},i={class:"content-wrapper",style:{width:"auto"}},l={class:"title"},u={class:"hover-information-wrapper"},s={key:0,class:"description"},d={key:1,class:"description"},p={key:2,class:"description"};Object(n["popScopeId"])();var b=a((function(e,t,c,a,b,j){var f=Object(n["resolveComponent"])("font-awesome-icon");return Object(n["openBlock"])(),Object(n["createBlock"])("div",r,[Object(n["createVNode"])("div",{class:"cover-image",style:{backgroundImage:"url('".concat(e.formatImageUrl(e.data.image_url+"@250-250"),"')")},onClick:t[1]||(t[1]=function(){return e.onImageClick&&e.onImageClick.apply(e,arguments)})},[e.selected?(Object(n["openBlock"])(),Object(n["createBlock"])(f,{key:0,class:"icon",icon:["fas","check-square"]})):(Object(n["openBlock"])(),Object(n["createBlock"])(f,{key:1,class:"icon",icon:["fas","square"]}))],4),Object(n["createVNode"])("div",o,[Object(n["createVNode"])("div",i,[Object(n["createVNode"])("h3",l,Object(n["toDisplayString"])(e.data.name),1)]),Object(n["createVNode"])("div",u,[e.data.art_no?(Object(n["openBlock"])(),Object(n["createBlock"])("p",s,Object(n["toDisplayString"])(e.data.art_no),1)):Object(n["createCommentVNode"])("",!0),e.data.sap_art_no?(Object(n["openBlock"])(),Object(n["createBlock"])("p",d,Object(n["toDisplayString"])(e.data.sap_art_no),1)):Object(n["createCommentVNode"])("",!0),e.data.real_composition?(Object(n["openBlock"])(),Object(n["createBlock"])("p",p,Object(n["toDisplayString"])(e.data.real_composition),1)):Object(n["createCommentVNode"])("",!0)])])])})),j=c("1da1"),f=(c("96cf"),c("bf37")),O=Object(n["defineComponent"])({name:"FabricCard",props:{data:{type:Object,default:function(){return{}}},selected:{type:Boolean,default:!1}},setup:function(e,t){var c=t.emit,a=Object(n["toRefs"])(e),r=a.data,o=a.selected,i=function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t={id:r.value.id,selected:o.value,data:r.value},c("select",t);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{onImageClick:i,formatImageUrl:f["a"]}}}),m=O;c("0658");m.render=b,m.__scopeId="data-v-3f79852e";t["a"]=m},"57e3":function(e,t,c){"use strict";c("5a10")},"5a10":function(e,t,c){},"5a6e":function(e,t,c){},"5af3":function(e,t,c){"use strict";c("5a6e")},"5d6e":function(e,t,c){"use strict";c("9784")},"68f9":function(e,t,c){"use strict";c("8dda")},"6ea4":function(e,t,c){},"707a":function(e,t,c){"use strict";c("f0a4")},"71f6":function(e,t,c){"use strict";c("8836")},"73b7":function(e,t,c){"use strict";c("3f83")},"865b":function(e,t,c){},8836:function(e,t,c){},"89e0":function(e,t,c){"use strict";c("8fc8")},"8dda":function(e,t,c){},"8fc8":function(e,t,c){},9784:function(e,t,c){},"9bf6":function(e,t,c){"use strict";c("b0c0");var n=c("7a23"),a=Object(n["withScopeId"])("data-v-61644ad4");Object(n["pushScopeId"])("data-v-61644ad4");var r={id:"collection-card-selectable-component"},o={class:"cover-images-wrapper"},i={class:"content-container"},l={class:"content-wrapper",style:{width:"auto"}},u={class:"title"};Object(n["popScopeId"])();var s=a((function(e,t,c,a,s,d){var p=Object(n["resolveComponent"])("font-awesome-icon");return Object(n["openBlock"])(),Object(n["createBlock"])("div",r,[Object(n["createVNode"])("div",{class:"cover-images-container",onClick:t[1]||(t[1]=function(){return e.onImageClick&&e.onImageClick.apply(e,arguments)})},[Object(n["createVNode"])("div",o,[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.images,(function(t,c){return Object(n["openBlock"])(),Object(n["createBlock"])("div",{class:"col",key:c},[Object(n["createVNode"])("div",{class:"cover-image",style:{backgroundImage:"url('".concat(t?e.formatImageUrl(t+"@150-150"):e.defaultImage,"')")}},null,4)])})),128)),e.selected?(Object(n["openBlock"])(),Object(n["createBlock"])(p,{key:0,class:"icon",icon:["fas","check-square"]})):(Object(n["openBlock"])(),Object(n["createBlock"])(p,{key:1,class:"icon",icon:["fas","square"]}))])]),Object(n["createVNode"])("div",i,[Object(n["createVNode"])("div",l,[Object(n["createVNode"])("h3",u,Object(n["toDisplayString"])(e.data.name),1)])])])})),d=c("1da1"),p=c("2909"),b=(c("96cf"),c("99af"),c("d852")),j=c("bf37"),f=Object(n["defineComponent"])({name:"FabricCard",props:{data:{type:Object,default:function(){return{}}},selected:{type:Boolean,default:!1}},setup:function(e,t){var c=t.emit,a=Object(n["toRefs"])(e),r=a.data,o=a.selected,i=Object(n["computed"])((function(){var e=b["a"](4,r.value.fabric_images)[0];return 4===e.length?e:b["a"](4,[].concat(Object(p["a"])(e),[null,null,null,null]))[0]})),l=function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t={id:r.value.id,selected:o.value,data:r.value},c("select",t);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{images:i,onImageClick:l,formatImageUrl:j["a"]}}}),O=f;c("0374");O.render=s,O.__scopeId="data-v-61644ad4";t["a"]=O},a5a3:function(e,t,c){},bb81:function(e,t,c){},c15e:function(e,t,c){},c64d:function(e,t,c){"use strict";c.r(t);c("b0c0"),c("a15b"),c("a4d3"),c("e01a"),c("ac1f"),c("1276");var n=c("7a23"),a=Object(n["withScopeId"])("data-v-0eb96195");Object(n["pushScopeId"])("data-v-0eb96195");var r={id:"project-detail-component"},o={class:"top-container"},i={key:0,class:"title-wrapper"},l={key:0},u={key:1},s={class:"right-container"},d=Object(n["createTextVNode"])(" Users "),p=Object(n["createTextVNode"])(" Add Stage "),b=Object(n["createTextVNode"])(" Edit Stage "),j=Object(n["createTextVNode"])("Inform"),f=Object(n["createTextVNode"])(" End "),O={key:0,class:"main-container"},m={class:"card"},v=Object(n["createVNode"])("h3",{class:"title"},"Stage",-1),g={class:"content"},k={class:"card"},V=Object(n["createVNode"])("h3",{class:"title"},"Price",-1),C={class:"content"},h={class:"card"},w=Object(n["createVNode"])("h3",{class:"title"},"Start Date",-1),y={class:"content"},N={class:"card"},B=Object(n["createVNode"])("h3",{class:"title"},"Description",-1),x={class:"content"},D={class:"report-container"},S={class:"card"},_={class:"card"},I=Object(n["createVNode"])("h3",{class:"title"},"Discussion",-1),R={class:"input-discussion"},F={class:"upload-wrapper"},U={key:0,class:"count"},T={class:"avatar-container"},L={class:"name-container"},E={class:"name-wrapper"},M={class:"name"},Y={key:0,class:"console-wrapper"},P={key:0,class:"edit-content"},A={class:"files-wrapper"},G={key:1,class:"content"},q={class:"files-wrapper"};Object(n["popScopeId"])();var K=a((function(e,t,c,K,W,J){var Q=Object(n["resolveComponent"])("el-tag"),z=Object(n["resolveComponent"])("el-button"),Z=Object(n["resolveComponent"])("Timeline"),$=Object(n["resolveComponent"])("el-col"),H=Object(n["resolveComponent"])("font-awesome-icon"),X=Object(n["resolveComponent"])("StageFabrics"),ee=Object(n["resolveComponent"])("el-input"),te=Object(n["resolveComponent"])("el-row"),ce=Object(n["resolveComponent"])("UsersDialog"),ne=Object(n["resolveComponent"])("CreateStageDialog"),ae=Object(n["resolveComponent"])("StageEditDialog"),re=Object(n["resolveComponent"])("InformDialog"),oe=Object(n["resolveComponent"])("EndDialog"),ie=Object(n["resolveDirective"])("permission");return Object(n["openBlock"])(),Object(n["createBlock"])("div",r,[Object(n["createVNode"])("div",o,[e.projectData?(Object(n["openBlock"])(),Object(n["createBlock"])("div",i,[Object(n["createVNode"])("h1",null,Object(n["toDisplayString"])(e.projectData.name),1),Object(n["createVNode"])(Q,{effect:"dark",color:e.getTagColor(e.projectData.status)},{default:a((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.projectData.status),1)]})),_:1},8,["color"]),Object(n["createVNode"])("p",null," Expected Finish Time: "+Object(n["toDisplayString"])(e.dayjs(e.projectData.expected_end_at).format("YYYY-MM-DD")),1),Object(n["createVNode"])("p",null,"Brand: "+Object(n["toDisplayString"])(e.projectData.company.buyer.name),1),e.projectData.season.length?(Object(n["openBlock"])(),Object(n["createBlock"])("p",l," Season: "+Object(n["toDisplayString"])(e.projectData.season.join(", ")),1)):Object(n["createCommentVNode"])("",!0),e.projectData.garment_factory?(Object(n["openBlock"])(),Object(n["createBlock"])("p",u," Garment Factory: "+Object(n["toDisplayString"])(e.getGarmentFactoryName(e.projectData.garment_factory)),1)):Object(n["createCommentVNode"])("",!0)])):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])("div",s,[e.projectData&&e.projectData.can_view_joined_members?(Object(n["openBlock"])(),Object(n["createBlock"])(z,{key:0,type:"info",onClick:e.onUsersClick},{default:a((function(){return[d]})),_:1},8,["onClick"])):Object(n["createCommentVNode"])("",!0),e.hasButtons?Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createBlock"])(z,{key:1,type:"success",onClick:e.onAddStageClick},{default:a((function(){return[p]})),_:1},8,["onClick"])),[[ie,"project_status_update"]]):Object(n["createCommentVNode"])("",!0),e.projectStage&&e.projectStage.id===e.newestId&&e.hasButtons?Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createBlock"])(z,{key:2,type:"success",onClick:e.onEditStageClick},{default:a((function(){return[b]})),_:1},8,["onClick"])),[[ie,"project_stage_update"]]):Object(n["createCommentVNode"])("",!0),e.hasButtons?(Object(n["openBlock"])(),Object(n["createBlock"])(z,{key:3,type:"success",onClick:e.onInformClick},{default:a((function(){return[j]})),_:1},8,["onClick"])):Object(n["createCommentVNode"])("",!0),e.projectData&&e.hasButtons?Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createBlock"])(z,{key:4,type:"success",onClick:e.onEndClick},{default:a((function(){return[f]})),_:1},8,["onClick"])),[[ie,"project_status_update"]]):Object(n["createCommentVNode"])("",!0)])]),e.projectData?(Object(n["openBlock"])(),Object(n["createBlock"])("div",O,[Object(n["createVNode"])(te,{gutter:40,style:{margin:"0"}},{default:a((function(){return[Object(n["createVNode"])($,{class:"left-container",span:8,style:{"padding-left":"0"}},{default:a((function(){return[Object(n["createVNode"])(Z,{project:e.projectData,stage:e.stageData,onClickStage:e.onStageClick,onReload:e.onLoad},null,8,["project","stage","onClickStage","onReload"])]})),_:1}),Object(n["createVNode"])($,{class:"right-container",span:16,style:{"padding-right":"0"},ref:"rightContainer"},{default:a((function(){return[e.stageData?(Object(n["openBlock"])(),Object(n["createBlock"])(n["Fragment"],{key:0},[Object(n["createVNode"])("div",m,[v,Object(n["createVNode"])("p",g,Object(n["toDisplayString"])(e.stageData.name),1)]),Object(n["createVNode"])("div",k,[V,Object(n["createVNode"])("p",C,Object(n["toDisplayString"])(e.stageData.price),1)]),Object(n["createVNode"])("div",h,[w,Object(n["createVNode"])("p",y,Object(n["toDisplayString"])(e.dayjs(e.stageData.created_at).format("YYYY.MM.DD")),1)]),Object(n["createVNode"])("div",N,[B,Object(n["createVNode"])("p",x,Object(n["toDisplayString"])(e.stageData.description||"Empty..."),1),Object(n["createVNode"])("div",D,[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.stageData.stageattachements,(function(t){return Object(n["openBlock"])(),Object(n["createBlock"])("div",{key:t.id,class:"report-item",onClick:function(c){return e.onAttachmentDownload(t)}},[Object(n["createVNode"])(H,{class:"icon",icon:["far","file"]}),Object(n["createVNode"])("p",null,Object(n["toDisplayString"])(t.name),1)],8,["onClick"])})),128))])]),Object(n["createVNode"])("div",S,[Object(n["createVNode"])(X,{"stage-data":e.stageData,"project-id":parseInt(e.id,10),onLoad:e.onStageFabricsLoad},null,8,["stage-data","project-id","onLoad"])]),Object(n["createVNode"])("div",_,[I,Object(n["createVNode"])("div",R,[Object(n["createVNode"])(H,{class:"user",icon:["far","user-circle"]}),Object(n["createVNode"])("div",{disabled:!e.isOpenInputDiscussion,class:"textarea-container"},[Object(n["withDirectives"])(Object(n["createVNode"])("textarea",{"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.discussionValue=t}),name:"text",rows:"1",placeholder:"Write a comment...",onKeydown:[t[2]||(t[2]=Object(n["withKeys"])(Object(n["withModifiers"])((function(){}),["exact","prevent"]),["enter"])),t[3]||(t[3]=Object(n["withKeys"])(Object(n["withModifiers"])((function(){}),["shift","prevent"]),["enter"])),t[4]||(t[4]=Object(n["withKeys"])(Object(n["withModifiers"])((function(){}),["alt","prevent"]),["enter"])),t[6]||(t[6]=Object(n["withKeys"])(Object(n["withModifiers"])((function(){return e.onNewline&&e.onNewline.apply(e,arguments)}),["shift","exact"]),["enter"])),t[7]||(t[7]=Object(n["withKeys"])(Object(n["withModifiers"])((function(){return e.onNewline&&e.onNewline.apply(e,arguments)}),["alt","exact"]),["enter"]))],onKeyup:t[5]||(t[5]=Object(n["withKeys"])(Object(n["withModifiers"])((function(){return e.onDiscuss&&e.onDiscuss.apply(e,arguments)}),["exact"]),["enter"]))},null,544),[[n["vModelText"],e.discussionValue]]),Object(n["createVNode"])(z,{icon:"el-icon-position",onClick:e.onDiscuss},null,8,["onClick"])],8,["disabled"]),Object(n["createVNode"])("div",F,[Object(n["createVNode"])(H,{class:"paperclip",icon:["fas","paperclip"],onClick:e.onUploadClick},null,8,["onClick"]),e.filesStore?(Object(n["openBlock"])(),Object(n["createBlock"])("div",U,Object(n["toDisplayString"])(e.filesStore.length),1)):Object(n["createCommentVNode"])("",!0)])]),(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.projectData.discussions,(function(c){return Object(n["openBlock"])(),Object(n["createBlock"])("div",{key:c,class:"chat-item"},[Object(n["createVNode"])("div",T,[Object(n["createVNode"])(H,{class:"icon",icon:["far","user-circle"]}),Object(n["createVNode"])("div",L,[Object(n["createVNode"])("div",E,[Object(n["createVNode"])("div",M,Object(n["toDisplayString"])(c.nickname||c.username),1),Object(n["createVNode"])("time",null,Object(n["toDisplayString"])(e.dayjs(c.created_at).format("YYYY-MM-DD hh:mm:ss")),1)]),c.is_me?(Object(n["openBlock"])(),Object(n["createBlock"])("div",Y,[e.editDiscussionId!==c.id?(Object(n["openBlock"])(),Object(n["createBlock"])(H,{key:0,class:"icon",icon:["fas","edit"],onClick:function(t){return e.editDiscussionId=c.id}},null,8,["onClick"])):Object(n["createCommentVNode"])("",!0),e.editDiscussionId!==c.id?(Object(n["openBlock"])(),Object(n["createBlock"])(H,{key:1,class:"icon",icon:["far","trash-alt"],onClick:function(t){return e.onDiscussionDeleteClick(c.id)}},null,8,["onClick"])):Object(n["createCommentVNode"])("",!0),e.editDiscussionId===c.id?(Object(n["openBlock"])(),Object(n["createBlock"])(H,{key:2,class:"icon icon-check",icon:["fas","check"],onClick:function(t){return e.onDiscussionEditClick(c.id,c.message)}},null,8,["onClick"])):Object(n["createCommentVNode"])("",!0),e.editDiscussionId===c.id?(Object(n["openBlock"])(),Object(n["createBlock"])(H,{key:3,class:"icon icon-close",icon:["fas","times"],onClick:t[8]||(t[8]=function(t){return e.editDiscussionId=-1})})):Object(n["createCommentVNode"])("",!0)])):Object(n["createCommentVNode"])("",!0)])]),e.editDiscussionId===c.id?(Object(n["openBlock"])(),Object(n["createBlock"])("div",P,[Object(n["createVNode"])(ee,{type:"textarea",modelValue:c.message,"onUpdate:modelValue":function(e){return c.message=e},rows:3,clearable:""},null,8,["modelValue","onUpdate:modelValue"]),Object(n["createVNode"])("div",A,[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(c.attachements,(function(t){return Object(n["openBlock"])(),Object(n["createBlock"])("div",{key:t.id,class:"file-item"},[Object(n["createVNode"])(H,{class:"cancel-icon",icon:["fas","times-circle"],onClick:function(c){return e.onDiscussionFileDeleteClick(t.id)}},null,8,["onClick"]),Object(n["createVNode"])(H,{class:"icon",icon:["far","file"]}),Object(n["createVNode"])("p",null,Object(n["toDisplayString"])(t.name),1)])})),128))])])):(Object(n["openBlock"])(),Object(n["createBlock"])("div",G,[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(c.message.split("\n"),(function(e,t){return Object(n["openBlock"])(),Object(n["createBlock"])("p",{class:"message",key:t},Object(n["toDisplayString"])(e),1)})),128)),Object(n["createVNode"])("div",q,[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(c.attachements,(function(t){return Object(n["openBlock"])(),Object(n["createBlock"])("div",{key:t.id,class:"file-item",onClick:function(c){return e.onAttachmentDownload(t)}},[Object(n["createVNode"])(H,{class:"icon",icon:["far","file"]}),Object(n["createVNode"])("p",null,Object(n["toDisplayString"])(t.name),1)],8,["onClick"])})),128))])]))])})),128))])],64)):Object(n["createCommentVNode"])("",!0)]})),_:1},512)]})),_:1})])):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(ce,{ref:"usersDialog"},null,512),Object(n["createVNode"])(ne,{ref:"createStageDialog",onLoad:e.onLoad},null,8,["onLoad"]),Object(n["createVNode"])(ae,{ref:"editStageDialog",onLoad:e.onLoad},null,8,["onLoad"]),Object(n["createVNode"])(re,{ref:"informDialog"},null,512),Object(n["createVNode"])(oe,{ref:"endDialog",onLoad:e.onLoad},null,8,["onLoad"])])})),W=c("1da1"),J=(c("96cf"),c("7db0"),c("5319"),c("6c02")),Q=c("5a0c"),z=c.n(Q),Z=(c("caad"),c("2532"),Object(n["withScopeId"])("data-v-e3ccca7c"));Object(n["pushScopeId"])("data-v-e3ccca7c");var $={key:0,id:"timeline-component"},H={key:0,class:"fabric-wrapper"},X={class:"icon-wrapper"},ee=Object(n["createVNode"])("div",{class:"content-wrapper"}," Add ",-1),te={class:"top-container"},ce={class:"brand"},ne={class:"brand"},ae={class:"main-container"},re={class:"content primary-container"},oe={class:"time"},ie={class:"name"},le={key:1,class:"fabric-wrapper"},ue={key:0,class:"edit-button"},se={class:"icon-wrapper"},de=Object(n["createVNode"])("div",{class:"content-wrapper"}," Add ",-1);Object(n["popScopeId"])();var pe=Z((function(e,t,c,a,r,o){var i=Object(n["resolveComponent"])("font-awesome-icon"),l=Object(n["resolveComponent"])("AddProjectFabricDialog");return e.project?(Object(n["openBlock"])(),Object(n["createBlock"])("div",$,[e.project&&e.project.status.includes("Completed")?(Object(n["openBlock"])(),Object(n["createBlock"])(n["Fragment"],{key:0},[e.endFile?(Object(n["openBlock"])(),Object(n["createBlock"])("div",H,[Object(n["createVNode"])("div",{class:"image",style:{backgroundImage:"url('".concat(e.formatImageUrl(e.endFile.file||e.endFile.image_url)+"@150-150","')")},onClick:t[1]||(t[1]=function(t){return e.onImageClick(e.endFile.id)})},null,4)])):(Object(n["openBlock"])(),Object(n["createBlock"])("div",{key:1,class:"upload-image-wrapper",onClick:t[2]||(t[2]=function(t){return e.onUploadClick("end")})},[Object(n["createVNode"])("div",X,[Object(n["createVNode"])(i,{class:"icon",icon:["fas","plus"]})]),ee]))],64)):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])("div",te,[Object(n["createVNode"])("div",ce,[Object(n["createVNode"])("img",{src:e.formatImageUrl(e.project.company.buyer.logo),alt:e.project.company.buyer.name},null,8,["src","alt"])]),Object(n["createVNode"])("div",ne,[Object(n["createVNode"])("img",{src:e.formatImageUrl(e.project.company.supplier.logo),alt:""},null,8,["src"])])]),Object(n["createVNode"])("div",ae,[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.projectStages,(function(t){return Object(n["openBlock"])(),Object(n["createBlock"])("div",{key:t.id,class:{active:t.id===e.activeStageId}},[Object(n["createVNode"])("div",{class:["dot-solid",{right:t.side===e.project.company.supplier.id,left:t.side===e.project.company.buyer.id}],onClick:Object(n["withModifiers"])((function(c){return e.onDotClick(t)}),["stop"])},[Object(n["createVNode"])("div",re,[Object(n["createVNode"])("p",oe,Object(n["toDisplayString"])(e.dayjs(t.started_at).format("YYYY.MM.DD")),1),Object(n["createVNode"])("p",ie,Object(n["toDisplayString"])(t.name),1)])],10,["onClick"])],2)})),128))]),e.startFile?(Object(n["openBlock"])(),Object(n["createBlock"])("div",le,[Object(n["createVNode"])("div",{class:"image",style:{backgroundImage:"url('".concat(e.formatImageUrl(e.startFile.file||e.startFile.image_url)+"@150-150","')")},onClick:t[4]||(t[4]=function(t){return e.onImageClick(e.startFile.id)})},[e.project.status.includes("Completed")?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createBlock"])("div",ue,[Object(n["createVNode"])(i,{class:"icon",icon:["fas","pen"],onClick:t[3]||(t[3]=Object(n["withModifiers"])((function(t){return e.onUploadClick("start")}),["stop"]))})]))],4)])):(Object(n["openBlock"])(),Object(n["createBlock"])("div",{key:2,class:"upload-image-wrapper",onClick:t[5]||(t[5]=function(t){return e.onUploadClick("start")})},[Object(n["createVNode"])("div",se,[Object(n["createVNode"])(i,{class:"icon",icon:["fas","plus"]})]),de])),Object(n["createVNode"])(l,{ref:"addProjectFabricDialog",onReload:e.onReload},null,8,["onReload"])])):Object(n["createCommentVNode"])("",!0)})),be=(c("99af"),c("d257")),je=Object(n["withScopeId"])("data-v-63381dc4");Object(n["pushScopeId"])("data-v-63381dc4");var fe={id:"add-project-fabric-dialog-component"},Oe={key:0,class:"step-1-container"},me=Object(n["createVNode"])("h2",null,"Where to add fabric?",-1),ve={class:"buttons-wrapper"},ge=Object(n["createTextVNode"])(" Choose from Fabrics "),ke=Object(n["createVNode"])("div",{class:"line"},null,-1),Ve=Object(n["createTextVNode"])(" Choose from Collections "),Ce=Object(n["createVNode"])("div",{class:"line"},null,-1),he=Object(n["createTextVNode"])(" Upload Photo "),we={key:1,class:"step-2-container"},ye={key:2,class:"step-3-container"},Ne={key:3,class:"step-4-container"},Be={class:"search-bar-wrapper"},xe={class:"pagination-wrapper"},De={class:"dialog-footer"},Se=Object(n["createTextVNode"])(" Back "),_e=Object(n["createTextVNode"])(" Next "),Ie=Object(n["createTextVNode"])(" Done ");Object(n["popScopeId"])();var Re=je((function(e,t,c,a,r,o){var i=Object(n["resolveComponent"])("el-button"),l=Object(n["resolveComponent"])("CollectionCardSelectable"),u=Object(n["resolveComponent"])("el-col"),s=Object(n["resolveComponent"])("el-row"),d=Object(n["resolveComponent"])("FabricCardSelectable"),p=Object(n["resolveComponent"])("font-awesome-icon"),b=Object(n["resolveComponent"])("el-input"),j=Object(n["resolveComponent"])("el-pagination"),f=Object(n["resolveComponent"])("el-dialog");return Object(n["openBlock"])(),Object(n["createBlock"])("div",fe,[Object(n["createVNode"])(f,{title:e.getTitle(e.step),modelValue:e.visible,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.visible=t}),width:e.getDialogWidth(e.step),onClosed:e.onDialogClosed,top:"45px"},{footer:je((function(){return[Object(n["createVNode"])("span",De,[2===e.step||3===e.step||4===e.step?(Object(n["openBlock"])(),Object(n["createBlock"])(i,{key:0,type:"info",onClick:e.onBack},{default:je((function(){return[Se]})),_:1},8,["onClick"])):Object(n["createCommentVNode"])("",!0),2===e.step?(Object(n["openBlock"])(),Object(n["createBlock"])(i,{key:1,type:"success",onClick:e.onGoCollectionFabrics},{default:je((function(){return[_e]})),_:1},8,["onClick"])):Object(n["createCommentVNode"])("",!0),3===e.step||4===e.step?(Object(n["openBlock"])(),Object(n["createBlock"])(i,{key:2,type:"success",onClick:e.onConfirm},{default:je((function(){return[Ie]})),_:1},8,["onClick"])):Object(n["createCommentVNode"])("",!0)])]})),default:je((function(){return[1===e.step?(Object(n["openBlock"])(),Object(n["createBlock"])("div",Oe,[me,Object(n["createVNode"])("div",ve,[Object(n["createVNode"])(i,{class:"button",type:"success",onClick:e.onGoFabrics},{default:je((function(){return[ge]})),_:1},8,["onClick"]),ke,Object(n["createVNode"])(i,{class:"button",type:"success",onClick:e.onGoCollections},{default:je((function(){return[Ve]})),_:1},8,["onClick"]),"start"===e.fabricType?(Object(n["openBlock"])(),Object(n["createBlock"])(n["Fragment"],{key:0},[Ce,Object(n["createVNode"])(i,{class:"button",type:"success",onClick:e.onUploadPhoto},{default:je((function(){return[he]})),_:1},8,["onClick"])],64)):Object(n["createCommentVNode"])("",!0)])])):Object(n["createCommentVNode"])("",!0),2===e.step?(Object(n["openBlock"])(),Object(n["createBlock"])("div",we,[Object(n["createVNode"])(s,{gutter:60},{default:je((function(){return[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.collectionOptions,(function(t){return Object(n["openBlock"])(),Object(n["createBlock"])(u,{key:t.id,span:8},{default:je((function(){return[Object(n["createVNode"])(l,{data:t,selected:e.form.collection===t.id,onSelect:e.onCollectionSelect},null,8,["data","selected","onSelect"])]})),_:2},1024)})),128))]})),_:1})])):Object(n["createCommentVNode"])("",!0),3===e.step?(Object(n["openBlock"])(),Object(n["createBlock"])("div",ye,[Object(n["createVNode"])(s,{gutter:60},{default:je((function(){return[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.fabricOptions,(function(t){return Object(n["openBlock"])(),Object(n["createBlock"])(u,{key:t.id,span:6},{default:je((function(){return[Object(n["createVNode"])(d,{data:t,selected:e.form.fabric===t.id,onSelect:e.onFabricSelect},null,8,["data","selected","onSelect"])]})),_:2},1024)})),128))]})),_:1})])):Object(n["createCommentVNode"])("",!0),4===e.step?(Object(n["openBlock"])(),Object(n["createBlock"])("div",Ne,[Object(n["createVNode"])("div",Be,[Object(n["createVNode"])(b,{placeholder:"Search Fabric...",modelValue:e.searchFabricValue,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.searchFabricValue=t}),clearable:""},{prefix:je((function(){return[Object(n["createVNode"])(p,{style:{color:"#444444","font-size":"18px"},icon:["fas","search"]})]})),_:1},8,["modelValue"])]),Object(n["createVNode"])(s,{gutter:60},{default:je((function(){return[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.fabricOptions,(function(t){return Object(n["openBlock"])(),Object(n["createBlock"])(u,{key:t.id,span:6},{default:je((function(){return[Object(n["createVNode"])(d,{data:t,selected:e.form.fabric===t.id,onSelect:e.onFabricSelect},null,8,["data","selected","onSelect"])]})),_:2},1024)})),128))]})),_:1}),Object(n["createVNode"])("div",xe,[e.pageCount?(Object(n["openBlock"])(),Object(n["createBlock"])(j,{key:0,background:"",layout:"prev, pager, next","current-page":e.page,"page-count":e.pageCount,onCurrentChange:e.onPaginationChange},null,8,["current-page","page-count","onCurrentChange"])):Object(n["createCommentVNode"])("",!0)])])):Object(n["createCommentVNode"])("",!0)]})),_:1},8,["title","modelValue","width","onClosed"])])})),Fe=(c("d81d"),c("9bf6")),Ue=c("4fba"),Te=c("a4ca"),Le=c("8eed"),Ee=c("2fdf"),Me=c("3fd4"),Ye=c("982a"),Pe=function(e){return["","30%","80%","80%","80%"][e]},Ae=function(e){return["","","Choose Collection","Choose Collection's fabric","Choose Fabric"][e]},Ge=Object(n["defineComponent"])({name:"CreateDialog",components:{CollectionCardSelectable:Fe["a"],FabricCardSelectable:Ue["a"]},setup:function(e,t){var c=t.emit,a=Object(n["ref"])(!1),r=Object(n["ref"])("start"),o=Object(n["ref"])(-1),i=Object(n["ref"])(1),l=Object(n["ref"])(1),u=Object(n["ref"])(0),s=function(e){return z()(e).isBefore(z()())},d=Object(n["ref"])([]),p=Object(n["ref"])([]),b=Object(n["ref"])(""),j=Object(n["reactive"])({fabric:void 0,collection:void 0});Object(n["watch"])([b],Object(W["a"])(regeneratorRuntime.mark((function e(){var t,c,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={q:b.value},e.next=3,Object(Ee["o"])(t);case 3:c=e.sent,n=c.data,p.value=n.results,l.value=1,u.value=n.total_pages;case 8:case"end":return e.stop()}}),e)}))));var f=function(){var e=Object(W["a"])(regeneratorRuntime.mark((function e(t){var c,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:c=t.type,n=t.id,r.value=c,o.value=n,i.value=1,a.value=!0;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(W["a"])(regeneratorRuntime.mark((function e(){var t,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i.value=2,e.next=3,Object(Le["i"])({initiate_project:!0});case 3:t=e.sent,c=t.data,d.value=c;case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(W["a"])(regeneratorRuntime.mark((function e(){var t,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(j.collection){e.next=2;break}return e.abrupt("return",Object(Me["c"])({type:"warning",title:"Warning",message:"You should choose a collection to continue."}));case 2:return b.value="",i.value=3,e.next=6,Object(Le["d"])("".concat(j.collection));case 6:t=e.sent,c=t.data,p.value=c.collection_fabrics.map((function(e){return e.fabric}));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(W["a"])(regeneratorRuntime.mark((function e(){var t,c,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i.value=4,t={},e.next=4,Object(Ee["o"])(t);case 4:c=e.sent,n=c.data,p.value=n.results,l.value=1,u.value=n.total_pages;case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(e){e.selected||(j.collection=e.id)},k=function(e){e.selected||(j.fabric=e.id)},V=function(){var e=Object(W["a"])(regeneratorRuntime.mark((function e(t){var c,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return c={page:t},e.next=3,Object(Ee["o"])(c);case 3:n=e.sent,a=n.data,p.value=a.results,l.value=t,u.value=a.total_pages;case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(W["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={},j.collection&&(t.collection=j.collection),"start"===r.value&&(t.start_fabric=j.fabric),"end"===r.value&&(t.end_fabric=j.fabric),e.next=6,Object(Te["u"])(o.value,t);case 6:c("reload"),a.value=!1;case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(W["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:j.fabric=void 0,j.collection=void 0,i.value=1;case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){i.value=1,l.value=1,u.value=0,d.value=[],p.value=[],j.fabric=void 0,j.collection=void 0},y=function(){var e=document.createElement("input");e.type="file",e.accept="image/*",e.multiple=!0,e.addEventListener("change",Object(W["a"])(regeneratorRuntime.mark((function t(){var n,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.files){t.next=10;break}return t.next=3,Object(Te["t"])(e.files[0]);case 3:return n=t.sent,r=n.data,i={start_fabric_image:r.id},t.next=8,Object(Te["u"])(o.value,i);case 8:c("reload"),a.value=!1;case 10:case"end":return t.stop()}}),t)})))),e.click()};return{fabricType:r,visible:a,step:i,page:l,pageCount:u,form:j,searchFabricValue:b,collectionOptions:d,fabricOptions:p,seasonOptions:Ye["a"],open:f,onGoCollections:O,onGoCollectionFabrics:m,onGoFabrics:v,onCollectionSelect:g,onFabricSelect:k,onPaginationChange:V,onConfirm:C,onBack:h,onDialogClosed:w,onUploadPhoto:y,dayjs:z.a,datePickerDisabled:s,getDialogWidth:Pe,getTitle:Ae}}}),qe=Ge;c("468f");qe.render=Re,qe.__scopeId="data-v-63381dc4";var Ke=qe,We=Object(n["defineComponent"])({name:"Timeline",components:{AddProjectFabricDialog:Ke},props:{project:{type:Object,default:null},stage:{type:Object,default:null}},setup:function(e,t){var c=t.emit,a=Object(n["toRefs"])(e),r=a.project,o=a.stage,i=Object(n["ref"])(null),l=Object(n["computed"])((function(){return JSON.parse(JSON.stringify(r.value.stages)).reverse()})),u=Object(n["computed"])((function(){return r.value.start_fabric||r.value.start_fabric_image})),s=Object(n["computed"])((function(){return r.value.end_fabric||r.value.end_fabric_image})),d=Object(n["computed"])((function(){return o.value?o.value.id:-1})),p=function(e){c("click-stage",e)},b=function(e){var t="".concat("https://weaverbird.dev.bilabasia.com","/web/fabric/").concat(e);window.open(t,"blank")},j=function(){var e=Object(W["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i.value){e.next=2;break}return e.abrupt("return");case 2:i.value.open({type:t,id:r.value.id});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(W["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:c("reload");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{projectStages:l,addProjectFabricDialog:i,startFile:u,endFile:s,activeStageId:d,onDotClick:p,onImageClick:b,onUploadClick:j,onReload:f,dayjs:z.a,formatImageUrl:be["d"]}}}),Je=We;c("4500");Je.render=pe,Je.__scopeId="data-v-e3ccca7c";var Qe=Je,ze=Object(n["withScopeId"])("data-v-3f5c9d03");Object(n["pushScopeId"])("data-v-3f5c9d03");var Ze={id:"stage-fabrics-component"},$e={class:"top-wrapper"},He=Object(n["createVNode"])("h3",{class:"title"},"Fabrics",-1),Xe={class:"console-wrapper"},et={key:1,class:"empty"},tt=Object(n["createVNode"])("p",null,"No Data",-1);Object(n["popScopeId"])();var ct=ze((function(e,t,c,a,r,o){var i=Object(n["resolveComponent"])("font-awesome-icon"),l=Object(n["resolveComponent"])("el-col"),u=Object(n["resolveComponent"])("el-row"),s=Object(n["resolveComponent"])("StageFabricsDuplicateDialog"),d=Object(n["resolveComponent"])("StageFabricsDialog");return Object(n["openBlock"])(),Object(n["createBlock"])("div",Ze,[Object(n["createVNode"])("div",$e,[He,Object(n["createVNode"])("div",Xe,[Object(n["createVNode"])(i,{class:"icon",icon:["far","clone"],onClick:e.onReference},null,8,["onClick"]),Object(n["createVNode"])(i,{class:"icon",icon:["fas","upload"],onClick:e.onUpload},null,8,["onClick"]),Object(n["createVNode"])(i,{class:"icon",icon:["fas","expand-alt"],onClick:e.onExpand},null,8,["onClick"])])]),e.stageData.stagemedias.length?(Object(n["openBlock"])(),Object(n["createBlock"])(u,{key:0,gutter:30},{default:ze((function(){return[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e._.splitAt(3,e.stageData.stagemedias)[0],(function(t){return Object(n["openBlock"])(),Object(n["createBlock"])(l,{key:t.id,span:8},{default:ze((function(){return[Object(n["createVNode"])("img",{class:"fabric-image",src:e.formatImageUrl(t.image_url),alt:"fabric-image-"+t.id},null,8,["src","alt"])]})),_:2},1024)})),128))]})),_:1})):(Object(n["openBlock"])(),Object(n["createBlock"])("div",et,[tt])),Object(n["createVNode"])(s,{ref:"uploadDialog",onLoad:e.onLoad},null,8,["onLoad"]),Object(n["createVNode"])(d,{ref:"fabricDialog"},null,512)])})),nt=(c("a9e3"),c("b17e")),at=Object(n["withScopeId"])("data-v-2dd2201c");Object(n["pushScopeId"])("data-v-2dd2201c");var rt={id:"project-stage-fabrics-duplicate-dialog-component"},ot={key:0},it={class:"pagination-wrapper"},lt={class:"dialog-footer"},ut=Object(n["createTextVNode"])(" Cancel "),st=Object(n["createTextVNode"])(" Done ");Object(n["popScopeId"])();var dt=at((function(e,t,c,a,r,o){var i=Object(n["resolveComponent"])("FabricCardSelectable"),l=Object(n["resolveComponent"])("el-col"),u=Object(n["resolveComponent"])("el-row"),s=Object(n["resolveComponent"])("el-pagination"),d=Object(n["resolveComponent"])("el-button"),p=Object(n["resolveComponent"])("el-dialog");return Object(n["openBlock"])(),Object(n["createBlock"])("div",rt,[Object(n["createVNode"])(p,{title:"Choose Fabric",modelValue:e.visible,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.visible=t}),width:"80%",top:"45px"},{footer:at((function(){return[Object(n["createVNode"])("span",lt,[Object(n["createVNode"])(d,{type:"info",onClick:t[1]||(t[1]=function(t){return e.visible=!1})},{default:at((function(){return[ut]})),_:1}),Object(n["createVNode"])(d,{type:"success",onClick:e.onConfirm},{default:at((function(){return[st]})),_:1},8,["onClick"])])]})),default:at((function(){return[e.fabricOptions?(Object(n["openBlock"])(),Object(n["createBlock"])("div",ot,[Object(n["createVNode"])(u,{gutter:60},{default:at((function(){return[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.fabricOptions.results,(function(t){return Object(n["openBlock"])(),Object(n["createBlock"])(l,{key:t.id,span:6},{default:at((function(){return[Object(n["createVNode"])(i,{data:t,selected:e.selectValue.includes(t.id),onSelect:e.onFabricSelect},null,8,["data","selected","onSelect"])]})),_:2},1024)})),128))]})),_:1}),Object(n["createVNode"])("div",it,[e.pageCount?(Object(n["openBlock"])(),Object(n["createBlock"])(s,{key:0,background:"",layout:"prev, pager, next","current-page":e.page,"page-count":e.pageCount,onCurrentChange:e.onPaginationChange},null,8,["current-page","page-count","onCurrentChange"])):Object(n["createCommentVNode"])("",!0)])])):Object(n["createCommentVNode"])("",!0)]})),_:1},8,["modelValue"])])})),pt=(c("4de4"),c("159b"),Object(n["defineComponent"])({name:"CreateDialog",components:{FabricCardSelectable:Ue["a"]},setup:function(e,t){var c=t.emit,a=Object(n["ref"])(!1),r=Object(n["ref"])(0),o=Object(n["ref"])(0),i=Object(n["ref"])([]),l=Object(n["ref"])(0),u=Object(n["ref"])(1),s=Object(n["ref"])(null),d=function(){var e=Object(W["a"])(regeneratorRuntime.mark((function e(){var t,c,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={to_project:r.value,page:u.value},e.next=3,Object(Ee["o"])(t);case 3:c=e.sent,n=c.data,s.value=n,l.value=n.total_pages;case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Object(W["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r.value=t.projectId,o.value=t.stageId,a.value=!0,e.next=5,d();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(e){e.selected?i.value=i.value.filter((function(t){return t!==e.id})):i.value=i.value.concat(e.id)},j=function(){var e=Object(W["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s.value){e.next=2;break}return e.abrupt("return");case 2:i.value.forEach(function(){var e=Object(W["a"])(regeneratorRuntime.mark((function e(t){var c,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(c=s.value.results.find((function(e){return e.id===t})),c){e.next=3;break}return e.abrupt("return");case 3:return n={stage:o.value,demo_fabric:c.id},e.next=6,Object(Te["r"])(n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c("load"),a.value=!1;case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=Object(W["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return u.value=t,e.next=3,d();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{visible:a,selectValue:i,fabricOptions:s,page:u,pageCount:l,open:p,onConfirm:j,onFabricSelect:b,onPaginationChange:f}}})),bt=pt;c("1427");bt.render=dt,bt.__scopeId="data-v-2dd2201c";var jt=bt,ft=Object(n["withScopeId"])("data-v-4c875014");Object(n["pushScopeId"])("data-v-4c875014");var Ot={id:"project-stage-fabrics-duplicate-dialog-component"},mt={class:"fabric-images-container"},vt={class:"main-image-container"},gt={class:"main-image"},kt={class:"carouse-item"};Object(n["popScopeId"])();var Vt=ft((function(e,t,c,a,r,o){var i=Object(n["resolveComponent"])("FabricImageWith3DMode"),l=Object(n["resolveComponent"])("el-carousel-item"),u=Object(n["resolveComponent"])("el-carousel"),s=Object(n["resolveComponent"])("el-dialog");return Object(n["openBlock"])(),Object(n["createBlock"])("div",Ot,[Object(n["createVNode"])(s,{title:"Fabric",modelValue:e.visible,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.visible=t}),width:"500px",top:"45px"},{default:ft((function(){return[Object(n["createVNode"])("div",mt,[Object(n["createVNode"])("div",vt,[Object(n["createVNode"])("div",gt,[Object(n["createVNode"])(i,{image:e.formatImageUrl(e.mainFile)},null,8,["image"])])]),Object(n["createVNode"])(u,{height:"150px",autoplay:!1,arrow:"always","indicator-position":"none"},{default:ft((function(){return[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e._.splitEvery(3,e.list),(function(t,c){return Object(n["openBlock"])(),Object(n["createBlock"])(l,{key:c},{default:ft((function(){return[Object(n["createVNode"])("div",kt,[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(t,(function(t,c){return Object(n["openBlock"])(),Object(n["createBlock"])("img",{key:c,class:["secondary-image",{active:t.id===e.selectedId}],src:e.formatImageUrl(t.image_url)+"@250-250",alt:t.name,onClick:function(c){return e.onCarouseItemClick(t.id)}},null,10,["src","alt","onClick"])})),128))])]})),_:2},1024)})),128))]})),_:1})])]})),_:1},8,["modelValue"])])})),Ct=c("755d"),ht=Object(n["defineComponent"])({name:"StageFabricsDialog",components:{FabricImageWith3DMode:Ct["a"]},setup:function(){var e=Object(n["ref"])(!1),t=Object(n["ref"])(0),c=Object(n["ref"])(""),a=Object(n["ref"])([]),r=function(){var n=Object(W["a"])(regeneratorRuntime.mark((function n(r){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:a.value=r.stagemedias,a.value.length&&(t.value=a.value[0].id,c.value=a.value[0].image_url),e.value=!0;case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),o=function(e){t.value=e;var n=a.value.find((function(t){return t.id===e}));c.value=n?n.image_url:""};return{list:a,visible:e,mainFile:c,selectedId:t,open:r,onCarouseItemClick:o,formatImageUrl:be["d"],_:nt}}}),wt=ht;c("c8c3");wt.render=Vt,wt.__scopeId="data-v-4c875014";var yt=wt,Nt=Object(n["defineComponent"])({name:"StageFabrics",components:{StageFabricsDuplicateDialog:jt,StageFabricsDialog:yt},props:{projectId:{type:Number,default:0},stageData:{type:Object,default:null}},setup:function(e,t){var c=t.emit,a=Object(n["ref"])(null),r=Object(n["ref"])(null),o=Object(n["toRefs"])(e),i=o.stageData,l=o.projectId,u=Object(n["ref"])([]),s=function(){a.value&&a.value.open({stageId:i.value.id,projectId:l.value})},d=function(){var e=document.createElement("input");e.type="file",e.accept="image/*",e.multiple=!0,e.addEventListener("change",Object(W["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.files||!i.value){t.next=10;break}n=0;case 2:if(!(n<e.files.length)){t.next=9;break}return a={stage:i.value.id,file:e.files[n]},t.next=6,Object(Te["r"])(a);case 6:n++,t.next=2;break;case 9:c("load");case 10:case"end":return t.stop()}}),t)})))),e.click()},p=function(){r.value&&r.value.open(i.value)},b=function(){c("load")};return{uploadDialog:a,fabricDialog:r,list:u,onReference:s,onUpload:d,onExpand:p,onLoad:b,_:nt,formatImageUrl:be["d"]}}}),Bt=Nt;c("3a0d");Bt.render=ct,Bt.__scopeId="data-v-3f5c9d03";var xt=Bt,Dt=Object(n["withScopeId"])("data-v-ac59c5ee");Object(n["pushScopeId"])("data-v-ac59c5ee");var St={id:"project-users-dialog-component"},_t={class:"inputs-container"},It={class:"select-item flex"},Rt={key:0,class:"select-item"},Ft=Object(n["createVNode"])("p",null,"Add Users:",-1),Ut={key:1,class:"tag-container"},Tt=Object(n["createVNode"])("p",null,"Users:",-1);Object(n["popScopeId"])();var Lt=Dt((function(e,t,c,a,r,o){var i=Object(n["resolveComponent"])("el-option"),l=Object(n["resolveComponent"])("el-select"),u=Object(n["resolveComponent"])("FilterTag"),s=Object(n["resolveComponent"])("el-dialog");return Object(n["openBlock"])(),Object(n["createBlock"])("div",St,[Object(n["createVNode"])(s,{title:"Manage Users",modelValue:e.visible,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.visible=t}),width:"40%",top:"45px"},{default:Dt((function(){return[Object(n["createVNode"])("div",_t,[Object(n["createVNode"])("div",It,[Object(n["createVNode"])("p",null,"Owner: "+Object(n["toDisplayString"])(e.owner),1)]),e.canChange?(Object(n["openBlock"])(),Object(n["createBlock"])("div",Rt,[Ft,Object(n["createVNode"])(l,{modelValue:e.selectValue,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.selectValue=t}),filterable:"",placeholder:"Select"},{default:Dt((function(){return[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.options,(function(e){return Object(n["openBlock"])(),Object(n["createBlock"])(i,{key:e.value,label:e.label,value:e.value,disabled:e.checked},null,8,["label","value","disabled"])})),128))]})),_:1},8,["modelValue"])])):Object(n["createCommentVNode"])("",!0),e.tags.length?(Object(n["openBlock"])(),Object(n["createBlock"])("div",Ut,[Tt,(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.tags,(function(t){return Object(n["openBlock"])(),Object(n["createBlock"])(u,{key:t.value,data:t.label,closable:e.canChange,onClose:function(c){return e.onTagCloseClick(t.value)}},null,8,["data","closable","onClose"])})),128))])):Object(n["createCommentVNode"])("",!0)])]})),_:1},8,["modelValue"])])})),Et=c("2909"),Mt=c("ca83"),Yt=Object(n["defineComponent"])({name:"UsersDialog",components:{FilterTag:Mt["a"]},setup:function(){var e=Object(n["ref"])(!1),t=Object(n["ref"])(0),c=Object(n["ref"])(""),a=Object(n["ref"])(!1),r=Object(n["ref"])([]),o=Object(n["ref"])([]),i=Object(n["ref"])(""),l=Object(n["ref"])(!1),u=Object(n["computed"])((function(){return r.value.reduce((function(e,t){var c=t.users.reduce((function(e,c){var n={label:t.company_name+"-"+c.username,value:"".concat(c.id)};return[].concat(Object(Et["a"])(e),[n])}),[]);return[].concat(Object(Et["a"])(e),Object(Et["a"])(c))}),[])})),s=Object(n["computed"])((function(){return o.value.map((function(e){return{label:e.username,value:e.member_id,checked:!1}}))})),d=function(){var e=Object(W["a"])(regeneratorRuntime.mark((function e(){var c,n,i,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a.value){e.next=6;break}return e.next=3,Object(Te["e"])({id:t.value,q:""});case 3:c=e.sent,n=c.data,o.value=n;case 6:return e.next=8,Object(Te["f"])(t.value);case 8:i=e.sent,l=i.data,r.value=l;case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n["watch"])(i,function(){var e=Object(W["a"])(regeneratorRuntime.mark((function e(c){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(c&&"number"===typeof c){e.next=2;break}return e.abrupt("return");case 2:return n={id:t.value,joined_member:c},e.next=5,Object(Te["p"])(n);case 5:return i.value="",e.next=8,d();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var p=function(){var n=Object(W["a"])(regeneratorRuntime.mark((function n(r){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.value=r.id,c.value=r.owner__nickname,a.value=r.can_change_joined_members,e.value=!0,n.next=6,d();case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),b=function(){var e=Object(W["a"])(regeneratorRuntime.mark((function e(c){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!l.value){e.next=2;break}return e.abrupt("return");case 2:return l.value=!0,e.prev=3,n={id:t.value,joined_member:c},e.next=7,Object(Te["p"])(n);case 7:return e.next=9,d();case 9:return e.prev=9,l.value=!1,e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[3,,9,12]])})));return function(t){return e.apply(this,arguments)}}();return{tags:u,options:s,visible:e,canChange:a,selectValue:i,owner:c,open:p,onTagCloseClick:b}}}),Pt=Yt;c("71f6");Pt.render=Lt,Pt.__scopeId="data-v-ac59c5ee";var At=Pt,Gt=Object(n["withScopeId"])("data-v-2ba33000");Object(n["pushScopeId"])("data-v-2ba33000");var qt={id:"create-stage-dialog-component"},Kt={class:"input-name-wrapper"},Wt={class:"price-wrapper"},Jt=Object(n["createVNode"])("label",null," Started At: ",-1),Qt={class:"price-wrapper"},zt=Object(n["createVNode"])("label",null," Price: ",-1),Zt={class:"textarea-wrapper"},$t={class:"upload-wrapper"},Ht={key:0,class:"count"},Xt={class:"bottom-wrapper"},ec=Object(n["createVNode"])("p",{class:"alert-text"},"Cannot edit after adding stage",-1),tc=Object(n["createTextVNode"])("Add Stage");Object(n["popScopeId"])();var cc=Gt((function(e,t,c,a,r,o){var i=Object(n["resolveComponent"])("el-option"),l=Object(n["resolveComponent"])("el-select"),u=Object(n["resolveComponent"])("el-autocomplete"),s=Object(n["resolveComponent"])("el-date-picker"),d=Object(n["resolveComponent"])("el-input"),p=Object(n["resolveComponent"])("font-awesome-icon"),b=Object(n["resolveComponent"])("el-button"),j=Object(n["resolveComponent"])("el-dialog");return Object(n["openBlock"])(),Object(n["createBlock"])("div",qt,[Object(n["createVNode"])(j,{title:"Add Stage",modelValue:e.visible,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.visible=t}),width:"50%",top:"45px"},{default:Gt((function(){return[Object(n["createVNode"])("div",Kt,[Object(n["createVNode"])(l,{class:"select","popper-class":"select-popper",modelValue:e.form.side,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.form.side=t})},{default:Gt((function(){return[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.sideOptions,(function(e){return Object(n["openBlock"])(),Object(n["createBlock"])(i,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"]),Object(n["createVNode"])(u,{class:"input",modelValue:e.form.name,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.form.name=t}),"fetch-suggestions":e.onQuerySearch,placeholder:"Stage name..."},null,8,["modelValue","fetch-suggestions"])]),Object(n["createVNode"])("div",Wt,[Jt,Object(n["createVNode"])(s,{modelValue:e.form.started_at,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.form.started_at=t}),style:{width:"100%"},"value-format":"YYYY-MM-DDThh:mm:ss",placeholder:"Select Date"},null,8,["modelValue"])]),Object(n["createVNode"])("div",Qt,[zt,Object(n["createVNode"])(d,{class:"input",modelValue:e.form.price,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.form.price=t}),placeholder:"Stage price...",type:"number"},null,8,["modelValue"])]),Object(n["createVNode"])("div",Zt,[Object(n["createVNode"])(d,{type:"textarea",placeholder:"Stage description...",modelValue:e.form.description,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.form.description=t}),rows:10},null,8,["modelValue"]),Object(n["createVNode"])("div",$t,[Object(n["createVNode"])(p,{class:"paperclip",icon:["fas","paperclip"],onClick:e.onUploadClick},null,8,["onClick"]),e.filesStore?(Object(n["openBlock"])(),Object(n["createBlock"])("div",Ht,Object(n["toDisplayString"])(e.filesStore.length),1)):Object(n["createCommentVNode"])("",!0)])]),Object(n["createVNode"])("div",Xt,[Object(n["createVNode"])(p,{class:"alert-icon",icon:["fas","info-circle"]}),ec,Object(n["createVNode"])(b,{type:"info",onClick:e.onDoneClick},{default:Gt((function(){return[tc]})),_:1},8,["onClick"])])]})),_:1},8,["modelValue"])])})),nc=Object(n["defineComponent"])({name:"CreateStageDialog",setup:function(e,t){var c=t.emit,a=Object(n["ref"])(!1),r=Object(n["ref"])([]),o=Object(n["ref"])(null),i=Object(n["ref"])([]),l=Object(n["reactive"])({name:"",description:"",project:-1,side:-1,price:0,started_at:""}),u=function(){var e=Object(W["a"])(regeneratorRuntime.mark((function e(){var t,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(Te["i"])(l.project,l.side);case 2:t=e.sent,c=t.data,i.value=c;case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s=function(){var e=Object(W["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:l.name="",l.description="",l.project=t.id,l.side=t.company.supplier.id,l.price=0,l.started_at="",o.value=null,r.value=[{label:t.company.supplier.name,value:t.company.supplier.id,checked:!1},{label:t.company.buyer.name,value:t.company.buyer.id,checked:!1}],a.value=!0;case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(e){return function(t){return 0===t.toLowerCase().indexOf(e.toLowerCase())}};Object(n["watch"])((function(){return l.side}),u);var p=function(){var e=Object(W["a"])(regeneratorRuntime.mark((function e(t,c){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t?i.value.filter(d(t)):i.value,c(n.map((function(e){return{value:e}})));case 2:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),b=function(){var e=document.createElement("input");e.type="file",e.accept="image/*",e.multiple=!0,e.addEventListener("change",Object(W["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.files&&(o.value=e.files);case 1:case"end":return t.stop()}}),t)})))),e.click()},j=function(){var e=Object(W["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o.value&&(l.files=o.value),a.value=!1,e.next=4,Object(Te["l"])(l);case 4:c("load");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{visible:a,form:l,sideOptions:r,filesStore:o,open:s,onQuerySearch:p,onUploadClick:b,onDoneClick:j}}}),ac=nc;c("57e3"),c("5af3");ac.render=cc,ac.__scopeId="data-v-2ba33000";var rc=ac,oc=Object(n["withScopeId"])("data-v-cbff4862");Object(n["pushScopeId"])("data-v-cbff4862");var ic={id:"fabric-create-project-dialog-component"},lc={class:"inputs-container"},uc=Object(n["createVNode"])("p",{class:"label"},"Name",-1),sc=Object(n["createVNode"])("p",{class:"label"},"Price",-1),dc=Object(n["createVNode"])("p",{class:"label"},"Description",-1),pc={class:"dialog-footer"},bc=Object(n["createTextVNode"])("Cancel"),jc=Object(n["createTextVNode"])(" Done ");Object(n["popScopeId"])();var fc=oc((function(e,t,c,a,r,o){var i=Object(n["resolveComponent"])("el-autocomplete"),l=Object(n["resolveComponent"])("el-col"),u=Object(n["resolveComponent"])("el-input"),s=Object(n["resolveComponent"])("el-row"),d=Object(n["resolveComponent"])("el-button"),p=Object(n["resolveComponent"])("el-dialog");return Object(n["openBlock"])(),Object(n["createBlock"])("div",ic,[Object(n["createVNode"])(p,{title:"Edit Stage",modelValue:e.visible,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.visible=t}),width:"40%",top:"45px"},{footer:oc((function(){return[Object(n["createVNode"])("span",pc,[Object(n["createVNode"])(d,{type:"info",onClick:t[4]||(t[4]=function(t){return e.visible=!1})},{default:oc((function(){return[bc]})),_:1}),Object(n["createVNode"])(d,{type:"success",onClick:e.onConfirm},{default:oc((function(){return[jc]})),_:1},8,["onClick"])])]})),default:oc((function(){return[Object(n["createVNode"])("div",lc,[Object(n["createVNode"])(s,{gutter:30},{default:oc((function(){return[Object(n["createVNode"])(l,{span:24},{default:oc((function(){return[uc,Object(n["createVNode"])(i,{class:"input",modelValue:e.form.name,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.form.name=t}),"fetch-suggestions":e.onQuerySearch,placeholder:"Stage name..."},null,8,["modelValue","fetch-suggestions"])]})),_:1}),Object(n["createVNode"])(l,{span:24},{default:oc((function(){return[sc,Object(n["createVNode"])(u,{modelValue:e.form.price,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.form.price=t}),type:"number",clearable:""},null,8,["modelValue"])]})),_:1}),Object(n["createVNode"])(l,{span:24},{default:oc((function(){return[dc,Object(n["createVNode"])(u,{type:"textarea",placeholder:"Stage description...",modelValue:e.form.description,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.form.description=t}),rows:10},null,8,["modelValue"])]})),_:1})]})),_:1})])]})),_:1},8,["modelValue"])])})),Oc=Object(n["defineComponent"])({name:"StageEditDialog",setup:function(e,t){var c=t.emit,a=Object(n["ref"])(!1),r=Object(n["ref"])([]),o=Object(n["reactive"])({id:-1,name:"",price:0,description:""}),i=function(){var e=Object(W["a"])(regeneratorRuntime.mark((function e(t){var c,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(Te["i"])(t.id,t.company.supplier.id);case 2:c=e.sent,n=c.data,r.value=n;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=Object(W["a"])(regeneratorRuntime.mark((function e(t){var c,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return c=t.project,n=t.stage,a.value=!0,o.id=n.id,o.name=n.name,o.price=n.price,o.description=n.description,e.next=8,i(c);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(e){return function(t){return 0===t.toLowerCase().indexOf(e.toLowerCase())}},s=function(){var e=Object(W["a"])(regeneratorRuntime.mark((function e(t,c){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t?r.value.filter(u(t)):r.value,c(n.map((function(e){return{value:e}})));case 2:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),d=function(){var e=Object(W["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(Te["s"])(o);case 2:a.value=!1,c("load");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{form:o,visible:a,stagenameOptions:r,open:l,onQuerySearch:s,onConfirm:d}}}),mc=Oc;c("3c48");mc.render=fc,mc.__scopeId="data-v-cbff4862";var vc=mc,gc=Object(n["withScopeId"])("data-v-0270001b");Object(n["pushScopeId"])("data-v-0270001b");var kc={key:0,class:"buttons-wrapper"},Vc=Object(n["createTextVNode"])(" Confirm "),Cc=Object(n["createTextVNode"])(" Cancel "),hc={class:"item-container"},wc=Object(n["createVNode"])("label",null,"Brand:",-1),yc={class:"item-container"},Nc=Object(n["createVNode"])("label",null,"Email:",-1),Bc={class:"email-tags-wrapper"},xc={class:"item-container"},Dc=Object(n["createVNode"])("label",null,"Email Subject:",-1),Sc={class:"textarea-container"},_c=Object(n["createVNode"])("label",null,"Text:",-1),Ic={class:"buttons-wrapper"},Rc=Object(n["createTextVNode"])(" Send "),Fc=Object(n["createTextVNode"])(" Cancel ");Object(n["popScopeId"])();var Uc=gc((function(e,t,c,a,r,o){var i=Object(n["resolveComponent"])("el-button"),l=Object(n["resolveComponent"])("FilterTag"),u=Object(n["resolveComponent"])("el-input"),s=Object(n["resolveComponent"])("el-dialog");return Object(n["openBlock"])(),Object(n["createBlock"])(s,{"custom-class":"inform-dialog-component",modelValue:e.visible,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.visible=t}),width:1===e.step?"400px":"900px",top:"45px"},{default:gc((function(){return[Object(n["createVNode"])("h2",null,Object(n["toDisplayString"])(e.title),1),1===e.step?(Object(n["openBlock"])(),Object(n["createBlock"])("div",kc,[Object(n["createVNode"])(i,{class:"button",type:"success",onClick:e.onConfirm},{default:gc((function(){return[Vc]})),_:1},8,["onClick"]),Object(n["createVNode"])(i,{class:"button",type:"info",onClick:t[1]||(t[1]=function(t){return e.visible=!1})},{default:gc((function(){return[Cc]})),_:1})])):Object(n["createCommentVNode"])("",!0),2===e.step?(Object(n["openBlock"])(),Object(n["createBlock"])(n["Fragment"],{key:1},[Object(n["createVNode"])("div",hc,[wc,Object(n["createVNode"])("p",null,Object(n["toDisplayString"])(e.project.company.buyer.name),1)]),Object(n["createVNode"])("div",yc,[Nc,Object(n["createVNode"])("div",Bc,[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.members,(function(t,c){return Object(n["openBlock"])(),Object(n["createBlock"])(l,{key:c,data:"".concat(t.username," <").concat(t.email,">"),closable:!0,onClose:function(c){return e.onTagCloseClick(t.email)}},null,8,["data","onClose"])})),128))])]),Object(n["createVNode"])("div",xc,[Dc,Object(n["createVNode"])(u,{modelValue:e.subjectValue,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.subjectValue=t}),clearable:""},null,8,["modelValue"])]),Object(n["createVNode"])("div",Sc,[_c,Object(n["createVNode"])(u,{type:"textarea",rows:"5",modelValue:e.textValue,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.textValue=t}),placeholder:"Text..."},null,8,["modelValue"])]),Object(n["createVNode"])("div",Ic,[Object(n["createVNode"])(i,{class:"button",type:"success",onClick:e.onSend},{default:gc((function(){return[Rc]})),_:1},8,["onClick"]),Object(n["createVNode"])(i,{class:"button",type:"info",onClick:t[4]||(t[4]=function(t){return e.visible=!1})},{default:gc((function(){return[Fc]})),_:1})])],64)):Object(n["createCommentVNode"])("",!0)]})),_:1},8,["modelValue","width"])})),Tc=Object(n["defineComponent"])({name:"InformDialog",components:{FilterTag:Mt["a"]},setup:function(e){var t=Object(n["ref"])(!1),c=Object(n["ref"])(1),a=Object(n["ref"])(null),r=Object(n["ref"])(0),o=Object(n["ref"])(""),i=Object(n["ref"])([]),l=Object(n["ref"])(""),u=Object(n["ref"])("");function s(e){var t=e.side,c=e.company,n=c.buyer,a=c.supplier;return n.id===t?a.name:a.id===t?n.name:"unknown"}var d=function(){var e=Object(W["a"])(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:c.value=1,i.value=[],a.value=n,r.value=n.id,o.value="Inform ".concat(s(n)," ?"),t.value=!0;case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(e){i.value=i.value.filter((function(t){return t.email!==e}))},b=function(){var e=Object(W["a"])(regeneratorRuntime.mark((function e(){var n,s,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(Te["c"])(r.value);case 3:n=e.sent,s=n.data,i.value=s.members,o.value="Inform Email",d=a.value?a.value.name:"unknown",l.value="Informed of a new established status of ".concat(d,"."),u.value="".concat(s.sender.username," has informed you of a new established status of project ").concat(d,".\nTo check the project, visit https://weaverbird.bilabasia.com/web, and take necessary action."),c.value=2,e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](0),t.value=!1;case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(W["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(Te["o"])(r.value,l.value,u.value,i.value.map((function(e){return e.email})).filter((function(e){return!!e})));case 3:Object(Me["c"])({title:"Success",type:"success",message:"Informed successfully"});case 4:return e.prev=4,t.value=!1,e.finish(4);case 7:case"end":return e.stop()}}),e,null,[[0,,4,7]])})));return function(){return e.apply(this,arguments)}}();return{visible:t,step:c,project:a,title:o,members:i,subjectValue:l,textValue:u,open:d,onTagCloseClick:p,onConfirm:b,onSend:j}}}),Lc=Tc;c("707a");Lc.render=Uc,Lc.__scopeId="data-v-0270001b";var Ec=Lc,Mc=Object(n["withScopeId"])("data-v-8123c9e8");Object(n["pushScopeId"])("data-v-8123c9e8");var Yc=Object(n["createVNode"])("h2",null,"End Project",-1),Pc={class:"buttons-wrapper"},Ac={class:"button-container"},Gc=Object(n["createTextVNode"])(" Drop "),qc=Object(n["createVNode"])("p",{class:"text info"},"Drop the project and",-1),Kc=Object(n["createVNode"])("p",{class:"text info"},"input the reason of dropping.",-1),Wc={class:"button-container"},Jc=Object(n["createTextVNode"])(" Complete "),Qc=Object(n["createVNode"])("p",{class:"text success"},"Project completed successfully.",-1),zc=Object(n["createVNode"])("p",{class:"text success"},"Upload the outcome fabric.",-1),Zc=Object(n["createVNode"])("h2",null,"Why did the project fail?",-1),$c={class:"buttons-wrapper"},Hc=Object(n["createTextVNode"])(" Done ");Object(n["popScopeId"])();var Xc=Mc((function(e,t,c,a,r,o){var i=Object(n["resolveComponent"])("el-button"),l=Object(n["resolveComponent"])("el-input"),u=Object(n["resolveComponent"])("el-dialog");return Object(n["openBlock"])(),Object(n["createBlock"])(u,{"custom-class":"end-dialog-component",modelValue:e.visible,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.visible=t}),width:"600px",top:"45px",onClosed:t[6]||(t[6]=function(t){return e.step=1})},{default:Mc((function(){return[1===e.step?(Object(n["openBlock"])(),Object(n["createBlock"])(n["Fragment"],{key:0},[Yc,Object(n["createVNode"])("div",Pc,[Object(n["createVNode"])("div",Ac,[Object(n["createVNode"])(i,{class:"button",type:"info",onClick:t[1]||(t[1]=function(t){return e.step=2})},{default:Mc((function(){return[Gc]})),_:1}),qc,Kc]),Object(n["createVNode"])("div",Wc,[Object(n["createVNode"])(i,{class:"button",type:"success",onClick:t[2]||(t[2]=function(t){return e.onConfirm(!0)})},{default:Mc((function(){return[Jc]})),_:1}),Qc,zc])])],64)):Object(n["createCommentVNode"])("",!0),2===e.step?(Object(n["openBlock"])(),Object(n["createBlock"])(n["Fragment"],{key:1},[Zc,Object(n["createVNode"])(l,{class:"textarea",type:"textarea",rows:"6",modelValue:e.textValue,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.textValue=t})},null,8,["modelValue"]),Object(n["createVNode"])("div",$c,[Object(n["createVNode"])(i,{class:"button",type:"info",onClick:t[4]||(t[4]=function(t){return e.onConfirm(!1)})},{default:Mc((function(){return[Hc]})),_:1})])],64)):Object(n["createCommentVNode"])("",!0)]})),_:1},8,["modelValue"])})),en=Object(n["defineComponent"])({name:"EndDialog",setup:function(e,t){var c=t.emit,a=Object(J["d"])(),r=Object(n["ref"])(!1),o=Object(n["ref"])(""),i=Object(n["ref"])(0),l=Object(n["ref"])(1),u=function(){var e=Object(W["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:i.value=t.id,r.value=!0;case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=Object(W["a"])(regeneratorRuntime.mark((function e(t){var n,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}return e.next=3,a.push({name:"FabricUpload",query:{id:i.value}});case 3:e.next=12;break;case 5:return e.next=7,Object(Te["q"])({id:i.value,success:!1,reason:o.value});case 7:n=e.sent,l=n.data,Object(Me["c"])({title:"Success",type:"success",message:"Change status to ".concat(l.status,".")}),c("load"),r.value=!1;case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{visible:r,textValue:o,step:l,open:u,onConfirm:s}}}),tn=en;c("73b7"),c("5d6e");tn.render=Xc,tn.__scopeId="data-v-8123c9e8";var cn=tn,nn=c("5502"),an=c("52b1"),rn=["#5470c6","#91cc76","#f8c858","#e66"],on=function(e){var t={"In Progress":rn[0],Completed:rn[1],"Completed but delayed":rn[1],Dropped:rn[3],Delayed:rn[2],default:""};return t[e]||t.default},ln=function(e){if(!e)return!1;var t={"In Progress":!0,Completed:!0,"Completed but delayed":!1,Dropped:!1,Delayed:!0,default:!1};return t[e.status]||t.default},un=Object(n["defineComponent"])({name:"ProjectDetail",components:{Timeline:Qe,StageFabrics:xt,UsersDialog:At,CreateStageDialog:rc,StageEditDialog:vc,InformDialog:Ec,EndDialog:cn},props:{id:{type:String,default:""}},setup:function(e){var t=Object(nn["b"])(),c=Object(J["d"])(),a=Object(n["toRefs"])(e),r=a.id,o=Object(n["ref"])(null),i=Object(n["ref"])(null),l=Object(n["ref"])(null),u=Object(n["ref"])(null),s=Object(n["ref"])(null),d=Object(n["ref"])(null),p=Object(n["ref"])(null),b=Object(n["ref"])(null),j=Object(n["ref"])(null),f=Object(n["ref"])(null),O=Object(n["ref"])(""),m=Object(n["ref"])(-1),v=Object(n["ref"])(!0),g=Object(n["ref"])(null),k=Object(n["ref"])(-1),V=Object(n["computed"])((function(){return ln(p.value)})),C=function(e){if(!f.value)return"";var t=f.value.find((function(t){return t.id===e}));return t?t.name:""},h=function(){var e=Object(W["a"])(regeneratorRuntime.mark((function e(t){var c,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return b.value=t,e.next=3,Object(Te["g"])(t.id);case 3:c=e.sent,n=c.data,j.value=n,o.value&&(o.value.$el.scrollTop=0);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(W["a"])(regeneratorRuntime.mark((function e(){var n,a,o,i,l,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=Object(be["f"])(),e.prev=1,e.next=4,Object(Te["b"])("garment_factory");case 4:return a=e.sent,o=a.data,f.value=o.brands,e.next=9,Object(Te["d"])(parseInt(r.value,10));case 9:if(i=e.sent,l=i.data,p.value=l,!l.stages.length){e.next=17;break}return u=l.stages[l.stages.length-1],k.value=u.id,e.next=17,h(u);case 17:return e.next=19,t.dispatch(an["Z"],parseInt(r.value,10));case 19:e.next=25;break;case 21:return e.prev=21,e.t0=e["catch"](1),e.next=25,c.replace({name:"Error"});case 25:return e.prev=25,n.close(),e.finish(25);case 28:case"end":return e.stop()}}),e,null,[[1,21,25,28]])})));return function(){return e.apply(this,arguments)}}();Object(n["onMounted"])(w),Object(n["watch"])([r],w);var y=function(){i.value&&p.value&&i.value.open(p.value)},N=function(){if(l.value&&p.value)return p.value.can_add_stage?void l.value.open(p.value):Object(Me["c"])({type:"warning",title:"No permission",message:"You have no permission to do this."})},B=function(){u.value&&b.value&&u.value.open({project:p.value,stage:b.value})},x=function(){s.value&&p.value&&s.value.open(p.value)},D=function(){d.value&&p.value&&d.value.open(p.value)},S=function(){var e=Object(W["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,h(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){O.value="".concat(O.value,"\n")},I=function(){var e=Object(W["a"])(regeneratorRuntime.mark((function e(){var t,c,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(O.value||g.value){e.next=2;break}return e.abrupt("return");case 2:return v.value=!1,e.prev=3,t={project:parseInt(r.value,10),message:O.value},g.value&&(t.files=g.value),O.value="",g.value=null,e.next=10,Object(Te["j"])(t);case 10:return e.next=12,Object(Te["d"])(parseInt(r.value,10));case 12:c=e.sent,n=c.data,p.value=n;case 15:return e.prev=15,v.value=!0,e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[3,,15,18]])})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(W["a"])(regeneratorRuntime.mark((function e(t,c){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(Te["n"])(t,c);case 2:return e.next=4,Object(Te["d"])(parseInt(r.value,10));case 4:n=e.sent,a=n.data,p.value=a,m.value=-1;case 8:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),F=function(){var e=Object(W["a"])(regeneratorRuntime.mark((function e(t){var c,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(Te["m"])(t);case 2:return Object(Me["c"])({type:"success",title:"Delete Discussion",message:"Success delete discussion."}),e.next=5,Object(Te["d"])(parseInt(r.value,10));case 5:c=e.sent,n=c.data,p.value=n;case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(W["a"])(regeneratorRuntime.mark((function e(t){var c,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(Te["a"])(t);case 2:return Object(Me["c"])({type:"success",title:"Delete File",message:"Success delete file."}),e.next=5,Object(Te["d"])(parseInt(r.value,10));case 5:c=e.sent,n=c.data,p.value=n;case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){if(b.value){var e=document.createElement("input");e.type="file",e.accept="image/*",e.multiple=!0,e.addEventListener("change",Object(W["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(b.value){t.next=2;break}return t.abrupt("return");case 2:e.files&&(g.value=e.files);case 3:case"end":return t.stop()}}),t)})))),e.click()}},L=function(e){window.open(Object(be["d"])(e.file))},E=function(){var e=Object(W["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,w();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Object(W["a"])(regeneratorRuntime.mark((function e(){var t,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(b.value){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Object(Te["g"])(b.value.id);case 4:t=e.sent,c=t.data,j.value=c;case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{rightContainer:o,usersDialog:i,createStageDialog:l,editStageDialog:u,informDialog:s,endDialog:d,projectData:p,stageData:j,garmentFactories:f,discussionValue:O,isOpenInputDiscussion:v,filesStore:g,projectStage:b,newestId:k,editDiscussionId:m,hasButtons:V,onUsersClick:y,onAddStageClick:N,onEditStageClick:B,onInformClick:x,onEndClick:D,onStageClick:S,onNewline:_,onDiscuss:I,onDiscussionEditClick:R,onDiscussionDeleteClick:F,onDiscussionFileDeleteClick:U,onUploadClick:T,onAttachmentDownload:L,onLoad:E,onStageFabricsLoad:M,getTagColor:on,getGarmentFactoryName:C,dayjs:z.a}}}),sn=un;c("89e0"),c("4a3b");sn.render=K,sn.__scopeId="data-v-0eb96195";t["default"]=sn},c747:function(e,t,c){},c8c3:function(e,t,c){"use strict";c("c15e")},ca83:function(e,t,c){"use strict";var n=c("7a23"),a=Object(n["withScopeId"])("data-v-b8791da2"),r=a((function(e,t,c,r,o,i){var l=Object(n["resolveComponent"])("el-tag");return Object(n["openBlock"])(),Object(n["createBlock"])(l,{id:"filter-tag-component",type:"success",size:"medium",closable:e.closable,"disable-transitions":!1,onClose:e.onCloseTag},{default:a((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.data),1)]})),_:1},8,["closable","onClose"])})),o=Object(n["defineComponent"])({name:"FilterTag",props:{data:{type:String,default:""},closable:{type:Boolean,default:!1}},setup:function(e,t){var c=Object(n["toRefs"])(e),a=c.data,r=function(){t.emit("close",a.value)};return{onCloseTag:r}}}),i=o;c("68f9");i.render=r,i.__scopeId="data-v-b8791da2";t["a"]=i},f0a4:function(e,t,c){}}]);
//# sourceMappingURL=ProjectDetail.ad6a4599.js.map