(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["EDM"],{"04d1":function(e,t,n){var c=n("342f"),r=c.match(/firefox\/(\d+)/i);e.exports=!!r&&+r[1]},"37f5":function(e,t,n){},"410f":function(e,t,n){"use strict";n.r(t);n("4e82");var c=n("7a23"),r=Object(c["withScopeId"])("data-v-cca0db8c");Object(c["pushScopeId"])("data-v-cca0db8c");var a={id:"edm-component"},o={class:"top-container"},i=Object(c["createTextVNode"])("Create EDM"),u={class:"select-item"},s=Object(c["createVNode"])("label",{class:"label"},"Team",-1),l=Object(c["createTextVNode"])("Nike"),d=Object(c["createTextVNode"])("Brand Name"),p={class:"name"};Object(c["popScopeId"])();var b=r((function(e,t,n,b,f,v){var m=Object(c["resolveComponent"])("el-button"),O=Object(c["resolveComponent"])("el-option"),j=Object(c["resolveComponent"])("el-select"),h=Object(c["resolveComponent"])("EDMTemplateCard"),C=Object(c["resolveComponent"])("el-col"),k=Object(c["resolveComponent"])("el-row");return Object(c["openBlock"])(),Object(c["createBlock"])("div",a,[Object(c["createVNode"])("div",o,[Object(c["createVNode"])(m,{type:"success"},{default:r((function(){return[i]})),_:1}),Object(c["createVNode"])("div",u,[s,Object(c["createVNode"])(j,{modelValue:e.teamValue,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.teamValue=t}),placeholder:"Select"},{default:r((function(){return[Object(c["createVNode"])(O,{value:"Nike"},{default:r((function(){return[l]})),_:1}),Object(c["createVNode"])(O,{value:"Brand Name"},{default:r((function(){return[d]})),_:1})]})),_:1},8,["modelValue"])])]),Object(c["createVNode"])(k,{gutter:30},{default:r((function(){return[(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(e.filteredList.sort((function(e,t){return t.id-e.id})),(function(t){return Object(c["openBlock"])(),Object(c["createBlock"])(C,{key:t.id,span:8},{default:r((function(){return[Object(c["createVNode"])(h,{editable:"",onClick:function(n){return e.onCardClick(t.id)},onDuplicate:function(n){return e.onDuplicateClick(t)}},{default:r((function(){return[Object(c["createVNode"])("img",{class:"edm-cover-image",src:e.getCover(t.chosen_template),alt:"cover"},null,8,["src"])]})),_:2},1032,["onClick","onDuplicate"]),Object(c["createVNode"])("p",p,Object(c["toDisplayString"])(t.subject),1)]})),_:2},1024)})),128))]})),_:1})])})),f=n("1da1"),v=(n("96cf"),n("4de4"),n("5502")),m=n("6c02"),O=Object(c["withScopeId"])("data-v-713a3668");Object(c["pushScopeId"])("data-v-713a3668");var j={id:"edm-template-card-component"},h={class:"wrapper"},C={class:"content"},k={class:"edit-icon"};Object(c["popScopeId"])();var g=O((function(e,t,n,r,a,o){var i=Object(c["resolveComponent"])("font-awesome-icon"),u=Object(c["resolveComponent"])("el-popover");return Object(c["openBlock"])(),Object(c["createBlock"])("div",j,[Object(c["createVNode"])("div",h,[Object(c["renderSlot"])(e.$slots,"default",{},void 0,!0),e.editable?(Object(c["openBlock"])(),Object(c["createBlock"])(u,{key:0,visible:e.visible,"onUpdate:visible":t[3]||(t[3]=function(t){return e.visible=t}),placement:"bottom",offset:2,width:80,trigger:"click","show-arrow":!1},{reference:O((function(){return[Object(c["createVNode"])("div",k,[Object(c["createVNode"])(i,{class:"icon",icon:["fas","ellipsis-h"]})])]})),default:O((function(){return[Object(c["createVNode"])("div",C,[Object(c["createVNode"])("p",{onClick:t[1]||(t[1]=function(){return e.onDuplicateClick&&e.onDuplicateClick.apply(e,arguments)})},"Duplicate"),Object(c["createVNode"])("p",{onClick:t[2]||(t[2]=function(){return e.onDeleteClick&&e.onDeleteClick.apply(e,arguments)})},"Delete")])]})),_:1},8,["visible"])):Object(c["createCommentVNode"])("",!0)])])})),w=Object(c["defineComponent"])({name:"EDMTemplateCard",props:{editable:{type:Boolean,default:!1}},setup:function(e,t){var n=t.emit,r=Object(c["ref"])(!1),a=function(){r.value=!1,n("duplicate")},o=function(){r.value=!1,n("delete")};return{visible:r,onDuplicateClick:a,onDeleteClick:o}}}),V=w;n("4ee7");V.render=g,V.__scopeId="data-v-713a3668";var N=V,D=n("64b4"),_=n("52b1"),x=n("3fd4"),E=n("d257"),R=Object(c["defineComponent"])({name:"EDM",components:{EDMTemplateCard:N},setup:function(){var e=Object(m["d"])(),t=Object(v["b"])(),n=Object(c["ref"])(""),r=Object(c["computed"])((function(){return t.state.edm.list})),a=Object(c["computed"])((function(){return n.value?r.value.filter((function(e){return e.recipient_brand===n.value})):r.value})),o=function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=Object(E["e"])(),e.next=3,t.dispatch(_["l"]);case 3:n.close();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c["onMounted"])(Object(f["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))));var i=function(){var n=Object(f["a"])(regeneratorRuntime.mark((function n(c){var r,a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=c,!(r<0)){n.next=8;break}return a={subject:"New EDM",recipient_brand:"Brand Name",message:"Message",message_body:"Text",html_message:"<div></div>",creator:1,chosen_collection:null,chosen_template:Math.abs(r)},n.next=5,t.dispatch(_["C"],a);case 5:o=n.sent,r=o.id,Object(x["b"])({title:"Success",type:"success",message:"Create new EDM successful."});case 8:return n.next=10,e.push({name:"EDMDisplay",params:{id:r}});case 10:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),u=function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.dispatch(_["D"],n.id);case 3:return Object(x["b"])({title:"Success",type:"success",message:"EDM ".concat(n.subject," duplicated successful.")}),e.next=6,o();case 6:e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),Object(x["b"])({title:"Error",type:"error",message:e.t0});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return{teamValue:n,filteredList:a,onCardClick:i,onDuplicateClick:u,getCover:D["b"],COVER_URL:D["a"]}}}),y=R;n("fbb6");y.render=b,y.__scopeId="data-v-cca0db8c";t["default"]=y},"4e82":function(e,t,n){"use strict";var c=n("23e7"),r=n("1c0b"),a=n("7b0b"),o=n("50c4"),i=n("d039"),u=n("addb"),s=n("a640"),l=n("04d1"),d=n("d998"),p=n("2d00"),b=n("512c"),f=[],v=f.sort,m=i((function(){f.sort(void 0)})),O=i((function(){f.sort(null)})),j=s("sort"),h=!i((function(){if(p)return p<70;if(!(l&&l>3)){if(d)return!0;if(b)return b<603;var e,t,n,c,r="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(c=0;c<47;c++)f.push({k:t+c,v:n})}for(f.sort((function(e,t){return t.v-e.v})),c=0;c<f.length;c++)t=f[c].k.charAt(0),r.charAt(r.length-1)!==t&&(r+=t);return"DGBEFHACIJK"!==r}})),C=m||!O||!j||!h,k=function(e){return function(t,n){return void 0===n?-1:void 0===t?1:void 0!==e?+e(t,n)||0:String(t)>String(n)?1:-1}};c({target:"Array",proto:!0,forced:C},{sort:function(e){void 0!==e&&r(e);var t=a(this);if(h)return void 0===e?v.call(t):v.call(t,e);var n,c,i=[],s=o(t.length);for(c=0;c<s;c++)c in t&&i.push(t[c]);i=u(i,k(e)),n=i.length,c=0;while(c<n)t[c]=i[c++];while(c<s)delete t[c++];return t}})},"4ee7":function(e,t,n){"use strict";n("37f5")},"512c":function(e,t,n){var c=n("342f"),r=c.match(/AppleWebKit\/(\d+)\./);e.exports=!!r&&+r[1]},"64b4":function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return r}));var c={COVER1:"https://weaverbird.bilabasia.com/static/mail/covers/cover_1.png",COVER2:"https://weaverbird.bilabasia.com/static/mail/covers/cover_2.png",COVER3:"https://weaverbird.bilabasia.com/static/mail/covers/cover_3.png"},r=function(e){return 1===e?c.COVER1:2===e?c.COVER2:3===e?c.COVER3:c.COVER1}},addb:function(e,t){var n=Math.floor,c=function(e,t){var o=e.length,i=n(o/2);return o<8?r(e,t):a(c(e.slice(0,i),t),c(e.slice(i),t),t)},r=function(e,t){var n,c,r=e.length,a=1;while(a<r){c=a,n=e[a];while(c&&t(e[c-1],n)>0)e[c]=e[--c];c!==a++&&(e[c]=n)}return e},a=function(e,t,n){var c=e.length,r=t.length,a=0,o=0,i=[];while(a<c||o<r)a<c&&o<r?i.push(n(e[a],t[o])<=0?e[a++]:t[o++]):i.push(a<c?e[a++]:t[o++]);return i};e.exports=c},d998:function(e,t,n){var c=n("342f");e.exports=/MSIE|Trident/.test(c)},e46c:function(e,t,n){},fbb6:function(e,t,n){"use strict";n("e46c")}}]);
//# sourceMappingURL=EDM.b881a8bc.js.map