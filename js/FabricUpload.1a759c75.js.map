{"version":3,"sources":["webpack:///./src/apis/member.ts","webpack:///./src/views/Fabric/FabricUpload.vue?13d6","webpack:///./src/views/Fabric/FabricUpload.vue","webpack:///./src/views/Fabric/FabricUpload.vue?2fc2","webpack:///./src/views/Fabric/FabricUpload.vue?da11","webpack:///./src/utils/fabric.ts","webpack:///./src/assets/images/icons/png/upload.png"],"names":["getMembers","category","q","params","url","method","getMember","id","getMemberRoles","getMemberTeams","getMemberBusinessUnits","postMember","data","email","nickname","role","teams","phone","active","business_unit","postMemberPassword","postMemberAvatar","file","FormData","append","JSON","stringify","postContactUs","class","onPhotosUpload","src","iconUploadUrl","alt","photosBase64","base64","index","key","content","name","placement","effect","icon","onPhotoRemove","form","video_urls","style","type","model-value","value","onVideoUrlChange","onVideoUrlAdd","sap_art_no","art_no","fetch-suggestions","onQuerySearch","toNameUpperCase","real_composition","onQuerySearchComposition","width","weight","status","statusOptions","item","label","disabled","exclusive_for","brandOptions","family_fabric_art_no","fabric_works_skus","tagType","placeholder","tagTypeOptions","fabricTypeValue","onQuerySearchFabricType","onSelectFabricType","tags","tag","closable","getTagType","tag_type","onTagClose","tag_name","onCancel","onSave","onUpload","checked","Component","setup","router","main_photo","photos","photos_with_id","storeMainPhoto","storePhotos","storePhotosWithId","fabricTypes","mainPhotoBase64","nameList","compositionList","timeId","undefined","sapArtNoInputStatus","artNoInputStatus","clearTimeout","setTimeout","valid","reader","FileReader","onload","e","target","result","readAsDataURL","length","i","concat","map","it","init","shadow","names","compositions","media","createFilter","queryString","option","toLowerCase","indexOf","cb","results","filter","text","onMainPhotoUpload","element","document","createElement","accept","addEventListener","files","click","some","multiple","ary","back","title","message","loadingInstance","push","close","getLastViewTimeString","render","__scopeId","splitRules","splitAry","split","reduce","letter","includes","_index","toUpperCase","join","module","exports"],"mappings":"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","file":"js/FabricUpload.1a759c75.js","sourcesContent":["import request from \"@/apis/http\";\nimport { AxiosPromise } from \"axios\";\nimport { Member, MemberTeam, ContactUsParams, MemberRole } from \"@/typings/member\";\n\nexport function getMembers(\n  category?: string,\n  q?: string\n): AxiosPromise<Member[]> {\n  const params: { category?: string; q?: string } = {};\n\n  if (category) params.category = category;\n  if (q) params.q = q;\n  return request({\n    url: \"/members/\",\n    method: \"GET\",\n    params\n  });\n}\n\nexport function getMember(id?: number): AxiosPromise<Member> {\n  if (id) {\n    return request({\n      url: `/member/${id}/`,\n      method: \"GET\"\n    });\n  }\n  return request({\n    url: `/member/`,\n    method: \"GET\"\n  });\n}\n\nexport function getMemberRoles(id?: number, params?: { category?: string }): AxiosPromise<MemberRole[]> {\n  if (id) {\n    return request({\n      url: `/member/${id}/roles/`,\n      method: \"GET\",\n      params\n    });\n  }\n  return request({\n    url: `/member/roles/`,\n    method: \"GET\",\n    params\n  });\n}\n\n// Haven't id means get self teams data by token.\nexport function getMemberTeams(\n  id?: number,\n  params?: { category?: string }\n): AxiosPromise<MemberTeam[]> {\n  if (id) {\n    return request({\n      url: `/member/${id}/teams/`,\n      method: \"GET\",\n      params\n    });\n  }\n  return request({\n    url: \"/member/teams/\",\n    method: \"GET\",\n    params\n  });\n}\n\nexport function getMemberBusinessUnits(id?: number): AxiosPromise<string[]> {\n  if (id) {\n    return request({\n      url: `/member/${id}/business_units/`,\n      method: \"GET\"\n    });\n  }\n  return request({\n    url: \"/member/business_units/\",\n    method: \"GET\"\n  });\n}\n\nexport function postMember(params: Member, id?: number) {\n  const data = {\n    email: params.email,\n    nickname: params.nickname,\n    role: params.role,\n    teams: params.teams,\n    phone: params.phone,\n    active: params.active,\n    business_unit: params.business_unit\n  };\n  if (id) {\n    return request({\n      url: `/member/${id}/`,\n      method: \"PUT\",\n      data\n    });\n  }\n  return request({\n    url: `/member/`,\n    method: \"PUT\",\n    data\n  });\n}\n\nexport function postMemberPassword(data: { password: string }) {\n  return request({\n    url: `/member/`,\n    method: \"PUT\",\n    data\n  });\n}\n\nexport function postMemberAvatar(file: File, id?: number) {\n  const data = new FormData();\n  data.append(\"file\", file);\n  if (id) data.append(\"member\", JSON.stringify(id));\n\n  return request({\n    url: \"/member/medias/\",\n    method: \"POST\",\n    data\n  });\n}\n\nexport function postContactUs(data: ContactUsParams) {\n  return request({\n    url: `/mail/contact_us/`,\n    method: \"POST\",\n    data\n  });\n}\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./FabricUpload.vue?vue&type=style&index=0&id=3d3e8650&scoped=true&lang=stylus\"","<template>\n  <div id=\"fabrics-upload-component\">\n    <div class=\"card\">\n      <div class=\"item\">\n        <p class=\"label\">Photos<span class=\"red-point\">*</span></p>\n        <div class=\"main-photo-container\">\n          <!--<div class=\"main-photo\" @click=\"onMainPhotoUpload\">-->\n          <!--<img-->\n          <!--class=\"photo\"-->\n          <!--v-if=\"mainPhotoBase64\"-->\n          <!--:src=\"mainPhotoBase64\"-->\n          <!--alt=\"\"-->\n          <!--/>-->\n          <!--<img class=\"icon\" v-else :src=\"iconUploadUrl\" alt=\"upload\" />-->\n          <!--</div>-->\n          <div class=\"note-container\">\n            <div class=\"note\">\n              <p>File Name: cloth number + _ + name</p>\n              <p>Photo within 1MB</p>\n              <p>1) Fabric picture: 10x10cm / 300dpi</p>\n              <p>2) Large image: 2000pixel / 300dpi</p>\n            </div>\n          </div>\n        </div>\n        <div class=\"photo-container\">\n          <div class=\"icon-upload\" @click=\"onPhotosUpload\">\n            <img :src=\"iconUploadUrl\" alt=\"upload\" />\n          </div>\n          <div class=\"photos\">\n            <div\n              v-for=\"(base64, index) in photosBase64\"\n              :key=\"index\"\n              class=\"photo\"\n            >\n              <el-tooltip :content=\"base64.name\" placement=\"top\" effect=\"light\">\n                <img :src=\"base64.src\" :alt=\"base64.name\" />\n              </el-tooltip>\n              <font-awesome-icon\n                class=\"icon\"\n                :icon=\"['fas', 'times-circle']\"\n                @click=\"onPhotoRemove(index)\"\n              ></font-awesome-icon>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class=\"item\">\n        <p class=\"label\">Video Url</p>\n        <el-input\n          v-for=\"(url, index) in form.video_urls\"\n          :key=\"index\"\n          class=\"value\"\n          :style=\"{ marginBottom: '8px' }\"\n          type=\"text\"\n          :model-value=\"url\"\n          @input=\"value => onVideoUrlChange(index, value)\"\n        ></el-input>\n\n        <div class=\"icon-add\" @click=\"onVideoUrlAdd\">\n          <font-awesome-icon\n            class=\"icon\"\n            :icon=\"['fas', 'plus-circle']\"\n          ></font-awesome-icon>\n        </div>\n      </div>\n      <div class=\"or-container\">\n        <div class=\"item\">\n          <p class=\"label\">New Art No in SAP (擇一)</p>\n          <el-input\n            class=\"value\"\n            :class=\"{\n              success: sapArtNoInputStatus === 1,\n              error: sapArtNoInputStatus === 2\n            }\"\n            type=\"text\"\n            v-model=\"form.sap_art_no\"\n          ></el-input>\n        </div>\n        <p class=\"or\">Or</p>\n        <div class=\"item\">\n          <p class=\"label\">Art No (擇一)</p>\n          <el-input\n            class=\"value\"\n            :class=\"{\n              success: artNoInputStatus === 1,\n              error: artNoInputStatus === 2\n            }\"\n            type=\"text\"\n            v-model=\"form.art_no\"\n          ></el-input>\n        </div>\n      </div>\n      <div class=\"line\"></div>\n      <div class=\"item\">\n        <p class=\"label\">Name<span class=\"red-point\">*</span></p>\n        <el-autocomplete\n          class=\"value\"\n          :model-value=\"form.name\"\n          :fetch-suggestions=\"onQuerySearch\"\n          @input=\"value => (form.name = toNameUpperCase(value))\"\n        ></el-autocomplete>\n      </div>\n      <div class=\"item\">\n        <p class=\"label\">Real Composition<span class=\"red-point\">*</span></p>\n        <el-autocomplete\n          class=\"value\"\n          :model-value=\"form.real_composition\"\n          :fetch-suggestions=\"onQuerySearchComposition\"\n          @input=\"value => (form.real_composition = toNameUpperCase(value))\"\n        ></el-autocomplete>\n      </div>\n      <div class=\"item\">\n        <p class=\"label\">Usable Width<span class=\"red-point\">*</span></p>\n        <div class=\"inch-item\">\n          <el-input class=\"value\" type=\"number\" v-model=\"form.width\"></el-input>\n          <p>Inch</p>\n        </div>\n      </div>\n      <div class=\"item\">\n        <p class=\"label\">Weight in g/m²<span class=\"red-point\">*</span></p>\n        <el-input class=\"value\" type=\"number\" v-model=\"form.weight\"></el-input>\n      </div>\n      <div class=\"item\">\n        <p class=\"label\">Status<span class=\"red-point\">*</span></p>\n        <el-select class=\"value\" v-model=\"form.status\">\n          <el-option\n            v-for=\"(item, index) in statusOptions\"\n            :key=\"index\"\n            :label=\"item.label\"\n            :value=\"item.value\"\n          ></el-option>\n        </el-select>\n      </div>\n      <div class=\"item\">\n        <p class=\"label\">Limited Brand Name</p>\n        <el-select\n          :disabled=\"form.status !== 'exclusive'\"\n          class=\"value\"\n          v-model=\"form.exclusive_for\"\n        >\n          <el-option\n            v-for=\"(item, index) in brandOptions\"\n            :key=\"index\"\n            :label=\"item.label\"\n            :value=\"item.value\"\n          ></el-option>\n        </el-select>\n      </div>\n      <div class=\"item\">\n        <p class=\"label\">\n          Family Fabrics (art_no) (use \",\" to separate)\n        </p>\n        <el-input\n          class=\"value\"\n          type=\"text\"\n          v-model=\"form.family_fabric_art_no\"\n        ></el-input>\n      </div>\n      <div class=\"item\">\n        <p class=\"label\">\n          Fabric Works - SKU number (use \",\" to separate)\n        </p>\n        <el-input\n          class=\"value\"\n          type=\"text\"\n          v-model=\"form.fabric_works_skus\"\n        ></el-input>\n      </div>\n      <div class=\"line\"></div>\n      <div class=\"item\">\n        <p class=\"label\">Tags Selector</p>\n        <div class=\"tag-wrapper\">\n          <el-select v-model=\"tagType\" placeholder=\"Tag Type...\">\n            <el-option\n              v-for=\"item in tagTypeOptions\"\n              :key=\"item.value\"\n              :label=\"item.label\"\n              :value=\"item.value\"\n            >\n            </el-option>\n          </el-select>\n        </div>\n        <el-autocomplete\n          class=\"input\"\n          v-model=\"fabricTypeValue\"\n          :fetch-suggestions=\"onQuerySearchFabricType\"\n          :disabled=\"!tagType\"\n          @keydown.enter=\"onSelectFabricType({ value: fabricTypeValue })\"\n          @select=\"onSelectFabricType\"\n        ></el-autocomplete>\n      </div>\n      <div class=\"item\">\n        <p class=\"label\">Tags</p>\n        <div class=\"tag-wrapper\">\n          <el-tag\n            v-for=\"(tag, index) in form.tags\"\n            :key=\"index\"\n            class=\"tag\"\n            closable\n            :type=\"getTagType(tag.tag_type)\"\n            @close=\"onTagClose(tag)\"\n          >\n            {{ tag.tag_name }}\n          </el-tag>\n        </div>\n      </div>\n\n      <div class=\"footer-container\">\n        <el-button type=\"info\" @click=\"onCancel\">Cancel</el-button>\n        <el-button type=\"success\" @click=\"onSave\">Save</el-button>\n        <el-button type=\"success\" @click=\"onUpload\">Upload</el-button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, ref, reactive, onMounted, watch } from \"vue\";\nimport { getLastViewTimeString, loading } from \"@/utils\";\nimport { useRouter } from \"vue-router\";\nimport iconUploadUrl from \"@/assets/images/icons/png/upload.png\";\nimport {\n  checkArtNo,\n  getFabricCompositionList,\n  getFabricNameList,\n  getFabricShadow,\n  postFabricShadow,\n  postUploadFabric\n} from \"@/apis/fabric\";\nimport { OptionItem } from \"@/typings/asideFilter\";\nimport { getMemberTeams } from \"@/apis/member\";\nimport { getFabricTags } from \"@/apis/fabric\";\nimport { MemberTeam } from \"@/typings/member\";\nimport {\n  FabricFileResponse,\n  FabricTag,\n  FabricTagResponse,\n  FabricType,\n  PostUploadFabricParams\n} from \"@/typings/fabric\";\nimport { ElNotification } from \"element-plus\";\nimport { toNameUpperCase } from \"@/utils/fabric\";\n\nconst statusOptions: OptionItem[] = [\n  { label: \"Public\", value: \"public\", checked: false },\n  { label: \"Private\", value: \"private\", checked: false },\n  { label: \"Exclusive - Brand\", value: \"exclusive\", checked: false }\n];\nconst tagTypeOptions: OptionItem[] = [\n  { label: \"Sport\", value: \"sport\", checked: false },\n  { label: \"Style\", value: \"style\", checked: false },\n  { label: \"Clothes\", value: \"clothes\", checked: false },\n  { label: \"Category\", value: \"category\", checked: false }\n];\n\nconst getTagType = (type: string) => {\n  switch (type) {\n    case \"sport\":\n      return \"\";\n    case \"style\":\n      return \"success\";\n    case \"clothes\":\n      return \"info\";\n    case \"category\":\n      return \"warning\";\n    default:\n      return \"danger\";\n  }\n};\n\ninterface Base64 {\n  type: string;\n  name: string;\n  src: string;\n}\n\nconst Component = defineComponent({\n  name: \"FabricUpload\",\n  setup() {\n    const router = useRouter();\n    const form = reactive<PostUploadFabricParams>({\n      main_photo: null,\n      photos: [],\n      photos_with_id: [],\n      video_urls: [],\n      sap_art_no: \"\",\n      art_no: \"\",\n      name: \"\",\n      real_composition: \"\",\n      width: 0,\n      weight: 0,\n      status: \"public\",\n      exclusive_for: null,\n      family_fabric_art_no: \"\",\n      fabric_works_skus: \"\",\n      tags: []\n    });\n    const storeMainPhoto = ref<File | null>(null);\n    const storePhotos = ref<File[]>([]);\n    const storePhotosWithId = ref<FabricFileResponse[]>([]);\n    const tagType = ref<string | null>(null);\n    const fabricTypeValue = ref(\"\");\n    const fabricTypes = ref<string[]>([]);\n\n    const mainPhotoBase64 = ref(\"\");\n    const photosBase64 = ref<Base64[]>([]);\n    const nameList = ref<string[]>([]);\n    const compositionList = ref<string[]>([]);\n    const brandOptions = ref<OptionItem[]>([]);\n    const timeId = ref<ReturnType<typeof setTimeout> | undefined>(undefined);\n    const sapArtNoInputStatus = ref(0);\n    const artNoInputStatus = ref(0);\n\n    watch(\n      () => form.sap_art_no,\n      () => {\n        if (!form.sap_art_no) {\n          sapArtNoInputStatus.value = 0;\n          return;\n        }\n        timeId.value && clearTimeout(timeId.value);\n        timeId.value = setTimeout(async () => {\n          const { data } = await checkArtNo({ sap_art_no: form.sap_art_no });\n          sapArtNoInputStatus.value = data.valid ? 1 : 2;\n        }, 500);\n      }\n    );\n\n    watch(\n      () => form.art_no,\n      () => {\n        if (!form.art_no) {\n          artNoInputStatus.value = 0;\n          return;\n        }\n        timeId.value && clearTimeout(timeId.value);\n        timeId.value = setTimeout(async () => {\n          const { data } = await checkArtNo({ art_no: form.art_no });\n          artNoInputStatus.value = data.valid ? 1 : 2;\n        }, 500);\n      }\n    );\n\n    watch([storeMainPhoto], () => {\n      form.main_photo = storeMainPhoto.value;\n      if (!storeMainPhoto.value) return;\n      const reader = new FileReader();\n      reader.onload = function(e: any) {\n        mainPhotoBase64.value = e.target.result;\n      };\n      reader.readAsDataURL(storeMainPhoto.value);\n    });\n\n    watch([storePhotos], () => {\n      form.photos = storePhotos.value;\n      if (!storePhotos.value.length) return;\n      for (let i = 0; i < storePhotos.value.length; i++) {\n        const reader = new FileReader();\n        reader.onload = function(e: any) {\n          photosBase64.value = photosBase64.value.concat({\n            type: \"photo\",\n            name: storePhotos.value[i].name,\n            src: e.target.result\n          });\n        };\n        reader.readAsDataURL(storePhotos.value[i]);\n      }\n    });\n\n    watch([storePhotosWithId], () => {\n      form.photos_with_id = storePhotosWithId.value;\n      if (!storePhotosWithId.value.length) return;\n      for (let i = 0; i < storePhotosWithId.value.length; i++) {\n        photosBase64.value = photosBase64.value.concat({\n          type: \"photo_with_id\",\n          name: storePhotosWithId.value[i].name,\n          src: storePhotosWithId.value[i].file\n        });\n      }\n    });\n\n    watch([tagType], async () => {\n      if (tagType.value) {\n        const { data } = await getFabricTags(tagType.value);\n        fabricTypes.value = data.map((it: FabricType) => it.name);\n      }\n    });\n\n    const init = async () => {\n      const { data: shadow } = await getFabricShadow();\n      const { data: names } = await getFabricNameList();\n      const { data: compositions } = await getFabricCompositionList();\n      const { data: teams } = await getMemberTeams();\n      storePhotosWithId.value = shadow.media;\n      form.video_urls = shadow.video_urls;\n      form.sap_art_no = shadow.sap_art_no;\n      form.art_no = shadow.art_no;\n      form.name = shadow.name;\n      form.real_composition = shadow.real_composition;\n      form.width = shadow.width;\n      form.weight = shadow.weight;\n      form.status = shadow.status;\n      form.exclusive_for = shadow.exclusive_for;\n      form.family_fabric_art_no = shadow.family_fabric_art_no;\n      form.fabric_works_skus = shadow.fabric_works_skus;\n      form.tags = shadow.tags.map((it: FabricTagResponse) => ({\n        tag_type: it.tag_type,\n        tag_name: it.name\n      }));\n      nameList.value = names.names.map((it: string[]) => it[0]);\n      compositionList.value = compositions.real_composition.map(\n        (it: string[]) => it[0]\n      );\n      brandOptions.value = teams.map((it: MemberTeam) => ({\n        label: it.name,\n        value: it.id,\n        checked: false\n      }));\n    };\n\n    onMounted(init);\n\n    const createFilter = (queryString: string) => {\n      return (option: string) => {\n        return option.toLowerCase().indexOf(queryString.toLowerCase()) > -1;\n      };\n    };\n\n    const onQuerySearch = async (queryString: string, cb: Function) => {\n      const results = queryString\n        ? nameList.value.filter(createFilter(queryString))\n        : nameList.value;\n      cb(results.map((text: string) => ({ value: text })));\n    };\n\n    const onQuerySearchComposition = async (\n      queryString: string,\n      cb: Function\n    ) => {\n      const results = queryString\n        ? compositionList.value.filter(createFilter(queryString))\n        : compositionList.value;\n      cb(results.map((text: string) => ({ value: text })));\n    };\n\n    const onQuerySearchFabricType = async (\n      queryString: string,\n      cb: Function\n    ) => {\n      const results = queryString\n        ? fabricTypes.value.filter(createFilter(queryString))\n        : fabricTypes.value;\n      cb(results.map((text: string) => ({ value: text })));\n    };\n\n    const onMainPhotoUpload = () => {\n      const element = document.createElement(\"input\");\n      element.type = \"file\";\n      element.accept = \"image/*\";\n      element.addEventListener(\"change\", async () => {\n        if (element.files) {\n          storeMainPhoto.value = element.files[0];\n        }\n      });\n      element.click();\n    };\n\n    const onSelectFabricType = (data: { value: string }) => {\n      if (!fabricTypeValue.value) return;\n      if (\n        form.tags &&\n        form.tags.some(\n          (it: FabricTag) =>\n            it.tag_name === data.value && it.tag_type === tagType.value\n        )\n      ) {\n        fabricTypeValue.value = \"\";\n        return;\n      }\n      form.tags = [\n        ...form.tags!,\n        { tag_name: data.value, tag_type: tagType.value! }\n      ];\n      fabricTypeValue.value = \"\";\n    };\n\n    const onTagClose = (data: FabricTag) => {\n      form.tags = form.tags.filter(\n        (it: FabricTag) =>\n          it.tag_name !== data.tag_name && it.tag_type !== data.tag_type\n      );\n    };\n\n    const onPhotosUpload = () => {\n      const element = document.createElement(\"input\");\n      element.type = \"file\";\n      element.accept = \"image/*\";\n      element.multiple = true;\n      element.addEventListener(\"change\", async () => {\n        if (element.files) {\n          let ary: File[] = [];\n          for (let i = 0; i < element.files.length; i++) {\n            ary = [...ary, element.files[i]];\n          }\n          // @ts-ignore\n          storePhotos.value = ary;\n        }\n      });\n      element.click();\n    };\n\n    const onPhotoRemove = (index: number) => {\n      const target: Base64 = photosBase64.value[index];\n      photosBase64.value = [];\n\n      if (target.type === \"photo\") {\n        storePhotos.value = storePhotos.value.filter(\n          (it: File) => it.name !== target.name\n        );\n        if (!storePhotosWithId.value.length) return;\n        for (let i = 0; i < storePhotosWithId.value.length; i++) {\n          photosBase64.value = photosBase64.value.concat({\n            type: \"photo_with_id\",\n            name: storePhotosWithId.value[i].name,\n            src: storePhotosWithId.value[i].file\n          });\n        }\n      }\n      if (target.type === \"photo_with_id\") {\n        storePhotosWithId.value = storePhotosWithId.value.filter(\n          (it: FabricFileResponse) => it.name !== target.name\n        );\n        if (!storePhotos.value.length) return;\n        for (let i = 0; i < storePhotos.value.length; i++) {\n          const reader = new FileReader();\n          reader.onload = function(e: any) {\n            photosBase64.value = photosBase64.value.concat({\n              type: \"photo\",\n              name: storePhotos.value[i].name,\n              src: e.target.result\n            });\n          };\n          reader.readAsDataURL(storePhotos.value[i]);\n        }\n      }\n    };\n\n    const onVideoUrlAdd = () => {\n      if (!form.video_urls) return;\n      form.video_urls = [...form.video_urls, \"\"];\n    };\n\n    const onVideoUrlChange = (index: number, value: string) => {\n      // @ts-ignore\n      form.video_urls[index] = value;\n    };\n\n    const onCancel = async () => {\n      await router.back();\n    };\n\n    const onSave = async () => {\n      await postFabricShadow(form);\n      ElNotification({\n        type: \"success\",\n        title: \"Save\",\n        message: \"Save Fabric successfully\"\n      });\n    };\n\n    const onUpload = async () => {\n      const loadingInstance = loading();\n      try {\n        const { data } = await postUploadFabric(form);\n        await router.push({ name: \"FabricDetail\", params: { id: data.id } });\n      } finally {\n        loadingInstance.close();\n      }\n    };\n\n    return {\n      form,\n      mainPhotoBase64,\n      photosBase64,\n      tagType,\n      fabricTypeValue,\n      statusOptions,\n      brandOptions,\n      tagTypeOptions,\n      sapArtNoInputStatus,\n      artNoInputStatus,\n\n      onQuerySearch,\n      onQuerySearchComposition,\n      onQuerySearchFabricType,\n      onSelectFabricType,\n      onTagClose,\n      onMainPhotoUpload,\n      onPhotosUpload,\n      onPhotoRemove,\n      onVideoUrlAdd,\n      onVideoUrlChange,\n      onCancel,\n      onSave,\n      onUpload,\n\n      getTagType,\n      getLastViewTimeString,\n      toNameUpperCase,\n      iconUploadUrl\n    };\n  }\n});\n\nexport default Component;\n</script>\n\n<style scoped lang=\"stylus\">\n#fabrics-upload-component\n  page-container()\n  .card\n    border-radius 15px\n    background white\n    padding 30px\n    flex-wrap wrap\n    flex(flex-start, flex-start)\n\n    .red-point\n      color red\n      margin 0 8px\n\n    .line\n      width 100%\n      height 2px\n      margin 15px 20px\n      background $color-secondary\n\n    .or-container\n      width 100%\n      flex()\n      .item\n        width calc(50% - 15px)\n      .or\n        padding-top 30px\n    .item\n      width calc(50% - 30px)\n      margin 0 15px 15px\n\n      :deep() .el-select\n        width 100%\n      :deep() .el-autocomplete\n        width calc(100% - 16px)\n        padding 0 8px\n\n      .label\n        padding 15px 8px 8px\n        font-size $font-size-large\n\n      .value\n        box-sizing border-box\n        width 100%\n        border-radius 4px\n        background white\n        padding 0 8px\n        font-size $font-size-lg2x\n        font-weight 400\n\n        &:focus\n          outline unset\n\n      .success\n        :deep() .el-input__inner\n          border 2px solid $color-active\n\n      .error\n        position relative\n        :deep() .el-input__inner\n          border 2px solid red\n        &:before\n          color red\n          font-size $font-size-small\n          content 'This Art No already exist.'\n          position absolute\n          bottom -80%\n          left 2%\n\n      .inch-item\n        flex()\n        margin 0 15px 0 0\n\n    .main-photo-container\n      flex(flex-start, flex-start)\n      .note-container\n        flex()\n        width calc(100% - 152px)\n        .note\n          font-size $font-size-normal\n          line-height 1.5\n    .photo-container\n      flex(flex-start)\n      margin 30px 0 0\n      .icon-upload\n        flex()\n        width 50px\n        height 50px\n        cursor pointer\n        margin 0 15px 0 0\n        img\n          width 30px\n          height 30px\n      .photos\n        flex(flex-start)\n        flex-wrap wrap\n        .photo\n          position relative\n          width 48px\n          height 48px\n          margin 0 8px 8px 0\n          border 1px solid black\n          background-repeat no-repeat\n          background-position center\n          background-size cover\n          img\n            width 100%\n            height 100%\n          .icon\n            position absolute\n            right -9px\n            top -9px\n            width 18px\n            height 18px\n            background white\n            cursor pointer\n    .icon-add\n      flex()\n      width 50px\n      height 50px\n      cursor pointer\n      .icon\n        width 30px\n        height 30px\n\n    .tag-wrapper\n      box-sizing border-box\n      padding 5px 8px\n      width 100%\n      font-size $font-size-lg2x\n      font-weight 400\n      border-radius 10px\n      background white\n\n      :deep() .el-autocomplete\n        width 100%\n      .tag\n        margin 0 8px 8px 0\n  .footer-container\n    width 100%\n    margin 30px 0 0\n    flex(flex-end)\n</style>\n","\nimport { defineComponent, ref, reactive, onMounted, watch } from \"vue\";\nimport { getLastViewTimeString, loading } from \"@/utils\";\nimport { useRouter } from \"vue-router\";\nimport iconUploadUrl from \"@/assets/images/icons/png/upload.png\";\nimport {\n  checkArtNo,\n  getFabricCompositionList,\n  getFabricNameList,\n  getFabricShadow,\n  postFabricShadow,\n  postUploadFabric\n} from \"@/apis/fabric\";\nimport { OptionItem } from \"@/typings/asideFilter\";\nimport { getMemberTeams } from \"@/apis/member\";\nimport { getFabricTags } from \"@/apis/fabric\";\nimport { MemberTeam } from \"@/typings/member\";\nimport {\n  FabricFileResponse,\n  FabricTag,\n  FabricTagResponse,\n  FabricType,\n  PostUploadFabricParams\n} from \"@/typings/fabric\";\nimport { ElNotification } from \"element-plus\";\nimport { toNameUpperCase } from \"@/utils/fabric\";\n\nconst statusOptions: OptionItem[] = [\n  { label: \"Public\", value: \"public\", checked: false },\n  { label: \"Private\", value: \"private\", checked: false },\n  { label: \"Exclusive - Brand\", value: \"exclusive\", checked: false }\n];\nconst tagTypeOptions: OptionItem[] = [\n  { label: \"Sport\", value: \"sport\", checked: false },\n  { label: \"Style\", value: \"style\", checked: false },\n  { label: \"Clothes\", value: \"clothes\", checked: false },\n  { label: \"Category\", value: \"category\", checked: false }\n];\n\nconst getTagType = (type: string) => {\n  switch (type) {\n    case \"sport\":\n      return \"\";\n    case \"style\":\n      return \"success\";\n    case \"clothes\":\n      return \"info\";\n    case \"category\":\n      return \"warning\";\n    default:\n      return \"danger\";\n  }\n};\n\ninterface Base64 {\n  type: string;\n  name: string;\n  src: string;\n}\n\nconst Component = defineComponent({\n  name: \"FabricUpload\",\n  setup() {\n    const router = useRouter();\n    const form = reactive<PostUploadFabricParams>({\n      main_photo: null,\n      photos: [],\n      photos_with_id: [],\n      video_urls: [],\n      sap_art_no: \"\",\n      art_no: \"\",\n      name: \"\",\n      real_composition: \"\",\n      width: 0,\n      weight: 0,\n      status: \"public\",\n      exclusive_for: null,\n      family_fabric_art_no: \"\",\n      fabric_works_skus: \"\",\n      tags: []\n    });\n    const storeMainPhoto = ref<File | null>(null);\n    const storePhotos = ref<File[]>([]);\n    const storePhotosWithId = ref<FabricFileResponse[]>([]);\n    const tagType = ref<string | null>(null);\n    const fabricTypeValue = ref(\"\");\n    const fabricTypes = ref<string[]>([]);\n\n    const mainPhotoBase64 = ref(\"\");\n    const photosBase64 = ref<Base64[]>([]);\n    const nameList = ref<string[]>([]);\n    const compositionList = ref<string[]>([]);\n    const brandOptions = ref<OptionItem[]>([]);\n    const timeId = ref<ReturnType<typeof setTimeout> | undefined>(undefined);\n    const sapArtNoInputStatus = ref(0);\n    const artNoInputStatus = ref(0);\n\n    watch(\n      () => form.sap_art_no,\n      () => {\n        if (!form.sap_art_no) {\n          sapArtNoInputStatus.value = 0;\n          return;\n        }\n        timeId.value && clearTimeout(timeId.value);\n        timeId.value = setTimeout(async () => {\n          const { data } = await checkArtNo({ sap_art_no: form.sap_art_no });\n          sapArtNoInputStatus.value = data.valid ? 1 : 2;\n        }, 500);\n      }\n    );\n\n    watch(\n      () => form.art_no,\n      () => {\n        if (!form.art_no) {\n          artNoInputStatus.value = 0;\n          return;\n        }\n        timeId.value && clearTimeout(timeId.value);\n        timeId.value = setTimeout(async () => {\n          const { data } = await checkArtNo({ art_no: form.art_no });\n          artNoInputStatus.value = data.valid ? 1 : 2;\n        }, 500);\n      }\n    );\n\n    watch([storeMainPhoto], () => {\n      form.main_photo = storeMainPhoto.value;\n      if (!storeMainPhoto.value) return;\n      const reader = new FileReader();\n      reader.onload = function(e: any) {\n        mainPhotoBase64.value = e.target.result;\n      };\n      reader.readAsDataURL(storeMainPhoto.value);\n    });\n\n    watch([storePhotos], () => {\n      form.photos = storePhotos.value;\n      if (!storePhotos.value.length) return;\n      for (let i = 0; i < storePhotos.value.length; i++) {\n        const reader = new FileReader();\n        reader.onload = function(e: any) {\n          photosBase64.value = photosBase64.value.concat({\n            type: \"photo\",\n            name: storePhotos.value[i].name,\n            src: e.target.result\n          });\n        };\n        reader.readAsDataURL(storePhotos.value[i]);\n      }\n    });\n\n    watch([storePhotosWithId], () => {\n      form.photos_with_id = storePhotosWithId.value;\n      if (!storePhotosWithId.value.length) return;\n      for (let i = 0; i < storePhotosWithId.value.length; i++) {\n        photosBase64.value = photosBase64.value.concat({\n          type: \"photo_with_id\",\n          name: storePhotosWithId.value[i].name,\n          src: storePhotosWithId.value[i].file\n        });\n      }\n    });\n\n    watch([tagType], async () => {\n      if (tagType.value) {\n        const { data } = await getFabricTags(tagType.value);\n        fabricTypes.value = data.map((it: FabricType) => it.name);\n      }\n    });\n\n    const init = async () => {\n      const { data: shadow } = await getFabricShadow();\n      const { data: names } = await getFabricNameList();\n      const { data: compositions } = await getFabricCompositionList();\n      const { data: teams } = await getMemberTeams();\n      storePhotosWithId.value = shadow.media;\n      form.video_urls = shadow.video_urls;\n      form.sap_art_no = shadow.sap_art_no;\n      form.art_no = shadow.art_no;\n      form.name = shadow.name;\n      form.real_composition = shadow.real_composition;\n      form.width = shadow.width;\n      form.weight = shadow.weight;\n      form.status = shadow.status;\n      form.exclusive_for = shadow.exclusive_for;\n      form.family_fabric_art_no = shadow.family_fabric_art_no;\n      form.fabric_works_skus = shadow.fabric_works_skus;\n      form.tags = shadow.tags.map((it: FabricTagResponse) => ({\n        tag_type: it.tag_type,\n        tag_name: it.name\n      }));\n      nameList.value = names.names.map((it: string[]) => it[0]);\n      compositionList.value = compositions.real_composition.map(\n        (it: string[]) => it[0]\n      );\n      brandOptions.value = teams.map((it: MemberTeam) => ({\n        label: it.name,\n        value: it.id,\n        checked: false\n      }));\n    };\n\n    onMounted(init);\n\n    const createFilter = (queryString: string) => {\n      return (option: string) => {\n        return option.toLowerCase().indexOf(queryString.toLowerCase()) > -1;\n      };\n    };\n\n    const onQuerySearch = async (queryString: string, cb: Function) => {\n      const results = queryString\n        ? nameList.value.filter(createFilter(queryString))\n        : nameList.value;\n      cb(results.map((text: string) => ({ value: text })));\n    };\n\n    const onQuerySearchComposition = async (\n      queryString: string,\n      cb: Function\n    ) => {\n      const results = queryString\n        ? compositionList.value.filter(createFilter(queryString))\n        : compositionList.value;\n      cb(results.map((text: string) => ({ value: text })));\n    };\n\n    const onQuerySearchFabricType = async (\n      queryString: string,\n      cb: Function\n    ) => {\n      const results = queryString\n        ? fabricTypes.value.filter(createFilter(queryString))\n        : fabricTypes.value;\n      cb(results.map((text: string) => ({ value: text })));\n    };\n\n    const onMainPhotoUpload = () => {\n      const element = document.createElement(\"input\");\n      element.type = \"file\";\n      element.accept = \"image/*\";\n      element.addEventListener(\"change\", async () => {\n        if (element.files) {\n          storeMainPhoto.value = element.files[0];\n        }\n      });\n      element.click();\n    };\n\n    const onSelectFabricType = (data: { value: string }) => {\n      if (!fabricTypeValue.value) return;\n      if (\n        form.tags &&\n        form.tags.some(\n          (it: FabricTag) =>\n            it.tag_name === data.value && it.tag_type === tagType.value\n        )\n      ) {\n        fabricTypeValue.value = \"\";\n        return;\n      }\n      form.tags = [\n        ...form.tags!,\n        { tag_name: data.value, tag_type: tagType.value! }\n      ];\n      fabricTypeValue.value = \"\";\n    };\n\n    const onTagClose = (data: FabricTag) => {\n      form.tags = form.tags.filter(\n        (it: FabricTag) =>\n          it.tag_name !== data.tag_name && it.tag_type !== data.tag_type\n      );\n    };\n\n    const onPhotosUpload = () => {\n      const element = document.createElement(\"input\");\n      element.type = \"file\";\n      element.accept = \"image/*\";\n      element.multiple = true;\n      element.addEventListener(\"change\", async () => {\n        if (element.files) {\n          let ary: File[] = [];\n          for (let i = 0; i < element.files.length; i++) {\n            ary = [...ary, element.files[i]];\n          }\n          // @ts-ignore\n          storePhotos.value = ary;\n        }\n      });\n      element.click();\n    };\n\n    const onPhotoRemove = (index: number) => {\n      const target: Base64 = photosBase64.value[index];\n      photosBase64.value = [];\n\n      if (target.type === \"photo\") {\n        storePhotos.value = storePhotos.value.filter(\n          (it: File) => it.name !== target.name\n        );\n        if (!storePhotosWithId.value.length) return;\n        for (let i = 0; i < storePhotosWithId.value.length; i++) {\n          photosBase64.value = photosBase64.value.concat({\n            type: \"photo_with_id\",\n            name: storePhotosWithId.value[i].name,\n            src: storePhotosWithId.value[i].file\n          });\n        }\n      }\n      if (target.type === \"photo_with_id\") {\n        storePhotosWithId.value = storePhotosWithId.value.filter(\n          (it: FabricFileResponse) => it.name !== target.name\n        );\n        if (!storePhotos.value.length) return;\n        for (let i = 0; i < storePhotos.value.length; i++) {\n          const reader = new FileReader();\n          reader.onload = function(e: any) {\n            photosBase64.value = photosBase64.value.concat({\n              type: \"photo\",\n              name: storePhotos.value[i].name,\n              src: e.target.result\n            });\n          };\n          reader.readAsDataURL(storePhotos.value[i]);\n        }\n      }\n    };\n\n    const onVideoUrlAdd = () => {\n      if (!form.video_urls) return;\n      form.video_urls = [...form.video_urls, \"\"];\n    };\n\n    const onVideoUrlChange = (index: number, value: string) => {\n      // @ts-ignore\n      form.video_urls[index] = value;\n    };\n\n    const onCancel = async () => {\n      await router.back();\n    };\n\n    const onSave = async () => {\n      await postFabricShadow(form);\n      ElNotification({\n        type: \"success\",\n        title: \"Save\",\n        message: \"Save Fabric successfully\"\n      });\n    };\n\n    const onUpload = async () => {\n      const loadingInstance = loading();\n      try {\n        const { data } = await postUploadFabric(form);\n        await router.push({ name: \"FabricDetail\", params: { id: data.id } });\n      } finally {\n        loadingInstance.close();\n      }\n    };\n\n    return {\n      form,\n      mainPhotoBase64,\n      photosBase64,\n      tagType,\n      fabricTypeValue,\n      statusOptions,\n      brandOptions,\n      tagTypeOptions,\n      sapArtNoInputStatus,\n      artNoInputStatus,\n\n      onQuerySearch,\n      onQuerySearchComposition,\n      onQuerySearchFabricType,\n      onSelectFabricType,\n      onTagClose,\n      onMainPhotoUpload,\n      onPhotosUpload,\n      onPhotoRemove,\n      onVideoUrlAdd,\n      onVideoUrlChange,\n      onCancel,\n      onSave,\n      onUpload,\n\n      getTagType,\n      getLastViewTimeString,\n      toNameUpperCase,\n      iconUploadUrl\n    };\n  }\n});\n\nexport default Component;\n","import { render } from \"./FabricUpload.vue?vue&type=template&id=3d3e8650&scoped=true\"\nimport script from \"./FabricUpload.vue?vue&type=script&lang=ts\"\nexport * from \"./FabricUpload.vue?vue&type=script&lang=ts\"\n\nimport \"./FabricUpload.vue?vue&type=style&index=0&id=3d3e8650&scoped=true&lang=stylus\"\nscript.render = render\nscript.__scopeId = \"data-v-3d3e8650\"\n\nexport default script","export function toNameUpperCase(name: string) {\n  const splitRules = [\" \", \"/\", \"+\", \"%\"];\n  const splitAry: string[] = name\n    .split(\"\")\n    .reduce((ary: string[], letter: string, index: number) => {\n      if (index === 0) {\n        ary.push(letter);\n        return ary;\n      }\n      if (splitRules.includes(letter)) {\n        ary.push(letter);\n      } else {\n        ary[ary.length - 1] = `${ary[ary.length - 1] + letter}`;\n      }\n      return ary;\n    }, []);\n\n  return splitAry\n    .map((it: string, index: number) => {\n      return it\n        .split(\"\")\n        .map((letter: string, _index: number) => {\n          return _index === (index === 0 ? 0 : 1)\n            ? letter.toUpperCase()\n            : letter.toLowerCase();\n        })\n        .join(\"\");\n    })\n    .join(\"\");\n}\n","module.exports = __webpack_public_path__ + \"img/upload.42ffdf67.png\";"],"sourceRoot":""}