{"version":3,"sources":["webpack:///./node_modules/core-js/internals/engine-ff-version.js","webpack:///./src/components/FabricCardSelectable.vue?9f3d","webpack:///./src/views/Project/StageFabricsDuplicateDialog.vue?2531","webpack:///./src/views/Project/CreateStageDialog.vue?9b64","webpack:///./src/views/Project/StageEditDialog.vue?e124","webpack:///./node_modules/core-js/modules/es.array.sort.js","webpack:///./src/components/FabricCardSelectable.vue","webpack:///./src/components/FabricCardSelectable.vue?c2ab","webpack:///./src/components/FabricCardSelectable.vue?871f","webpack:///./node_modules/core-js/internals/engine-webkit-version.js","webpack:///./src/components/FilterTag.vue?b809","webpack:///./src/views/Project/InformDialog.vue?32ea","webpack:///./src/views/Project/EndDialog.vue?e32a","webpack:///./src/views/Project/UsersDialog.vue?64b3","webpack:///./src/views/Project/CreateStageDialog.vue?d772","webpack:///./src/views/Project/Timeline.vue?f366","webpack:///./src/views/Project/ProjectDetail.vue?144c","webpack:///./src/views/Project/ProjectDetail.vue?182c","webpack:///./node_modules/core-js/internals/array-sort.js","webpack:///./src/views/Project/ProjectDetail.vue","webpack:///./src/views/Project/Timeline.vue","webpack:///./src/views/Project/Timeline.vue?3136","webpack:///./src/views/Project/Timeline.vue?32c0","webpack:///./src/views/Project/StageFabrics.vue","webpack:///./src/views/Project/StageFabricsDuplicateDialog.vue","webpack:///./src/views/Project/StageFabricsDuplicateDialog.vue?2fc0","webpack:///./src/views/Project/StageFabricsDuplicateDialog.vue?f937","webpack:///./src/views/Project/StageFabricsDialog.vue","webpack:///./src/views/Project/StageFabricsDialog.vue?0b3d","webpack:///./src/views/Project/StageFabricsDialog.vue?2572","webpack:///./src/views/Project/StageFabrics.vue?f7d3","webpack:///./src/views/Project/StageFabrics.vue?1488","webpack:///./src/views/Project/UsersDialog.vue","webpack:///./src/views/Project/UsersDialog.vue?3699","webpack:///./src/views/Project/UsersDialog.vue?7cd0","webpack:///./src/views/Project/CreateStageDialog.vue","webpack:///./src/views/Project/CreateStageDialog.vue?7199","webpack:///./src/views/Project/CreateStageDialog.vue?124a","webpack:///./src/views/Project/StageEditDialog.vue","webpack:///./src/views/Project/StageEditDialog.vue?d4f4","webpack:///./src/views/Project/StageEditDialog.vue?0a67","webpack:///./src/views/Project/InformDialog.vue","webpack:///./src/views/Project/InformDialog.vue?9271","webpack:///./src/views/Project/InformDialog.vue?ef7d","webpack:///./src/views/Project/EndDialog.vue","webpack:///./src/views/Project/EndDialog.vue?fa62","webpack:///./src/views/Project/EndDialog.vue?e8d1","webpack:///./src/views/Project/ProjectDetail.vue?aea1","webpack:///./src/views/Project/ProjectDetail.vue?05f3","webpack:///./src/views/Project/StageFabricsDialog.vue?396e","webpack:///./src/components/FilterTag.vue","webpack:///./src/components/FilterTag.vue?49d3","webpack:///./src/components/FilterTag.vue?eeb2","webpack:///./node_modules/core-js/internals/engine-is-ie-or-edge.js","webpack:///./src/views/Project/StageFabrics.vue?0d49","webpack:///./src/views/Project/EndDialog.vue?6bdf"],"names":["userAgent","firefox","match","module","exports","$","aFunction","toObject","toLength","fails","internalSort","arrayMethodIsStrict","FF","IE_OR_EDGE","V8","WEBKIT","test","nativeSort","sort","FAILS_ON_UNDEFINED","undefined","FAILS_ON_NULL","STRICT_METHOD","STABLE_SORT","code","chr","value","index","result","String","fromCharCode","push","k","v","a","b","length","charAt","FORCED","getSortCompare","comparefn","x","y","target","proto","forced","array","this","call","itemsLength","items","arrayLength","id","class","style","onImageClick","selected","icon","data","name","art_no","sap_art_no","real_composition","Component","props","type","Object","default","Boolean","setup","emit","params","formatImageUrl","render","__scopeId","webkit","floor","Math","mergeSort","middle","insertionSort","merge","slice","element","j","i","left","right","llength","rlength","lindex","rindex","projectData","effect","color","getTagColor","status","dayjs","expected_end_at","format","company","buyer","season","join","garment_factory","getGarmentFactoryName","can_view_joined_members","onUsersClick","hasButtons","onAddStageClick","projectStage","newestId","onEditStageClick","onInformClick","onEndClick","gutter","span","stages","stage","stageData","fabric","fabricData","onStageClick","ref","price","created_at","description","stageattachements","file","key","onAttachmentDownload","stage-data","fabric-id","project-id","parseInt","onStageFabricsLoad","disabled","isOpenInputDiscussion","discussionValue","rows","placeholder","onNewline","onDiscuss","onUploadClick","filesStore","discussions","item","nickname","username","is_me","editDiscussionId","onDiscussionDeleteClick","onDiscussionEditClick","message","clearable","attachements","onDiscussionFileDeleteClick","split","msg","onLoad","src","logo","alt","supplier","formatStages","activeStageId","onDotClick","mainFile","initCompany","Array","isBefore","media","find","it","main","url","window","open","console","log","onReference","onUpload","onExpand","stagemedias","_","splitAt","image_url","title","visible","width","top","footer","onConfirm","fabricOptions","results","selectValue","includes","onFabricSelect","pageCount","background","layout","current-page","page","page-count","onPaginationChange","components","FabricCardSelectable","projectId","stageId","init","to_project","total_pages","filter","selectedId","concat","forEach","demo_fabric","_page","image","height","autoplay","arrow","indicator-position","splitEvery","list","_item","_index","onCarouseItemClick","FabricImageWith3DMode","StageFabricsDuplicateDialog","StageFabricsDialog","Number","fabricId","uploadDialog","fabricDialog","document","createElement","accept","multiple","addEventListener","files","click","owner","canChange","filterable","options","label","checked","tags","tag","closable","onTagCloseClick","FilterTag","joinedMembers","availableMembers","lock","reduce","userList","users","_list","user","company_name","map","member_id","q","availableResponse","joinedResponse","joined_member","owner__nickname","can_change_joined_members","popper-class","form","side","sideOptions","fetch-suggestions","onQuerySearch","onDoneClick","project","fetchOptions","createFilter","queryString","option","toLowerCase","indexOf","cb","text","stagenameOptions","custom-class","step","members","member","email","subjectValue","textValue","onSend","getTarget","projectName","sender","router","success","reason","colors","adapter","Completed","Dropped","Delayed","getHasButtons","Timeline","StageFabrics","UsersDialog","CreateStageDialog","StageEditDialog","InformDialog","EndDialog","store","rightContainer","usersDialog","createStageDialog","editStageDialog","informDialog","endDialog","garmentFactories","fetchStageDetail","$el","scrollTop","loadingInstance","factories","brands","start_fabric","fabricResponse","dispatch","replace","close","can_add_stage","_id","size","disable-transitions","onCloseTag","context","UA"],"mappings":"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","file":"js/ProjectDetail.ed43253f.js","sourcesContent":["var userAgent = require('../internals/engine-user-agent');\n\nvar firefox = userAgent.match(/firefox\\/(\\d+)/i);\n\nmodule.exports = !!firefox && +firefox[1];\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./FabricCardSelectable.vue?vue&type=style&index=0&id=3f79852e&scoped=true&lang=stylus\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./StageFabricsDuplicateDialog.vue?vue&type=style&index=0&id=2dd2201c&scoped=true&lang=stylus\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./CreateStageDialog.vue?vue&type=style&index=0&id=3173ea18&scoped=true&lang=stylus\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./StageEditDialog.vue?vue&type=style&index=0&id=cbff4862&scoped=true&lang=stylus\"","'use strict';\nvar $ = require('../internals/export');\nvar aFunction = require('../internals/a-function');\nvar toObject = require('../internals/to-object');\nvar toLength = require('../internals/to-length');\nvar fails = require('../internals/fails');\nvar internalSort = require('../internals/array-sort');\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar FF = require('../internals/engine-ff-version');\nvar IE_OR_EDGE = require('../internals/engine-is-ie-or-edge');\nvar V8 = require('../internals/engine-v8-version');\nvar WEBKIT = require('../internals/engine-webkit-version');\n\nvar test = [];\nvar nativeSort = test.sort;\n\n// IE8-\nvar FAILS_ON_UNDEFINED = fails(function () {\n  test.sort(undefined);\n});\n// V8 bug\nvar FAILS_ON_NULL = fails(function () {\n  test.sort(null);\n});\n// Old WebKit\nvar STRICT_METHOD = arrayMethodIsStrict('sort');\n\nvar STABLE_SORT = !fails(function () {\n  // feature detection can be too slow, so check engines versions\n  if (V8) return V8 < 70;\n  if (FF && FF > 3) return;\n  if (IE_OR_EDGE) return true;\n  if (WEBKIT) return WEBKIT < 603;\n\n  var result = '';\n  var code, chr, value, index;\n\n  // generate an array with more 512 elements (Chakra and old V8 fails only in this case)\n  for (code = 65; code < 76; code++) {\n    chr = String.fromCharCode(code);\n\n    switch (code) {\n      case 66: case 69: case 70: case 72: value = 3; break;\n      case 68: case 71: value = 4; break;\n      default: value = 2;\n    }\n\n    for (index = 0; index < 47; index++) {\n      test.push({ k: chr + index, v: value });\n    }\n  }\n\n  test.sort(function (a, b) { return b.v - a.v; });\n\n  for (index = 0; index < test.length; index++) {\n    chr = test[index].k.charAt(0);\n    if (result.charAt(result.length - 1) !== chr) result += chr;\n  }\n\n  return result !== 'DGBEFHACIJK';\n});\n\nvar FORCED = FAILS_ON_UNDEFINED || !FAILS_ON_NULL || !STRICT_METHOD || !STABLE_SORT;\n\nvar getSortCompare = function (comparefn) {\n  return function (x, y) {\n    if (y === undefined) return -1;\n    if (x === undefined) return 1;\n    if (comparefn !== undefined) return +comparefn(x, y) || 0;\n    return String(x) > String(y) ? 1 : -1;\n  };\n};\n\n// `Array.prototype.sort` method\n// https://tc39.es/ecma262/#sec-array.prototype.sort\n$({ target: 'Array', proto: true, forced: FORCED }, {\n  sort: function sort(comparefn) {\n    if (comparefn !== undefined) aFunction(comparefn);\n\n    var array = toObject(this);\n\n    if (STABLE_SORT) return comparefn === undefined ? nativeSort.call(array) : nativeSort.call(array, comparefn);\n\n    var items = [];\n    var arrayLength = toLength(array.length);\n    var itemsLength, index;\n\n    for (index = 0; index < arrayLength; index++) {\n      if (index in array) items.push(array[index]);\n    }\n\n    items = internalSort(items, getSortCompare(comparefn));\n    itemsLength = items.length;\n    index = 0;\n\n    while (index < itemsLength) array[index] = items[index++];\n    while (index < arrayLength) delete array[index++];\n\n    return array;\n  }\n});\n","<template>\n  <div id=\"fabric-card-selectable-component\">\n    <div\n      class=\"cover-image\"\n      :style=\"{\n        backgroundImage: `url('${formatImageUrl(data.image_url + '@250-250')}')`\n      }\"\n      @click=\"onImageClick\"\n    >\n      <font-awesome-icon\n        v-if=\"selected\"\n        class=\"icon\"\n        :icon=\"['fas', 'check-square']\"\n      ></font-awesome-icon>\n      <font-awesome-icon\n        v-else\n        class=\"icon\"\n        :icon=\"['fas', 'square']\"\n      ></font-awesome-icon>\n    </div>\n    <div class=\"content-container\">\n      <div class=\"content-wrapper\" :style=\"{ width: 'auto' }\">\n        <h3 class=\"title\">{{ data.name }}</h3>\n      </div>\n      <div class=\"hover-information-wrapper\">\n        <p v-if=\"data.art_no\" class=\"description\">{{ data.art_no }}</p>\n        <p v-if=\"data.sap_art_no\" class=\"description\">{{ data.sap_art_no }}</p>\n        <p v-if=\"data.real_composition\" class=\"description\">\n          {{ data.real_composition }}\n        </p>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, toRefs, PropType } from \"vue\";\nimport { formatImageUrl } from \"@/utils/image\";\nimport { FabricCardSelectableEmit, FabricResult } from \"@/typings/fabric\";\n\nconst Component = defineComponent({\n  name: \"FabricCard\",\n  props: {\n    data: {\n      type: Object as PropType<FabricResult>,\n      default: () => ({})\n    },\n    selected: {\n      type: Boolean,\n      default: false\n    }\n  },\n  setup(props, { emit }) {\n    const { data, selected } = toRefs(props);\n\n    const onImageClick = async () => {\n      const params: FabricCardSelectableEmit = {\n        id: data.value.id,\n        selected: selected.value,\n        data: data.value\n      };\n      emit(\"select\", params);\n    };\n\n    return {\n      onImageClick,\n      formatImageUrl\n    };\n  }\n});\n\nexport default Component;\n</script>\n\n<style scoped lang=\"stylus\">\n#fabric-card-selectable-component\n  width 100%\n  border solid 1px $color-secondary\n  &:hover\n    .hover-information-wrapper\n      display block !important\n\n  .cover-image\n    position relative\n    width 100%\n    height 0\n    padding-bottom 100%\n    background-repeat no-repeat\n    background-position center\n    background-size cover\n    cursor pointer\n\n    .icon\n      position absolute\n      top -15px\n      right -15px\n      width 30px\n      height 30px\n      color $color-secondary\n      background white\n\n  .content-container\n    position relative\n    flex(flex-start, center)\n    height 45px\n    padding 15px\n\n    .content-wrapper\n      .title\n        text-align left\n        font-size $font-size-large\n        margin-bottom 5px\n\n    .hover-information-wrapper\n      display none\n      border-right solid 1px $color-secondary\n      border-bottom solid 1px $color-secondary\n      border-left solid 1px $color-secondary\n      position absolute\n      z-index 99\n      bottom 0\n      left -1px\n      right -1px\n      transform translateY(100%)\n      background white\n      padding 15px\n      &::before\n        position absolute\n        content ''\n        width 90%\n        height 1px\n        background $color-secondary\n        top 0\n        left 5%\n      .description\n        text-align left\n        font-size $font-size-small\n        font-weight 400\n        padding 8px 0\n</style>\n","\nimport { defineComponent, toRefs, PropType } from \"vue\";\nimport { formatImageUrl } from \"@/utils/image\";\nimport { FabricCardSelectableEmit, FabricResult } from \"@/typings/fabric\";\n\nconst Component = defineComponent({\n  name: \"FabricCard\",\n  props: {\n    data: {\n      type: Object as PropType<FabricResult>,\n      default: () => ({})\n    },\n    selected: {\n      type: Boolean,\n      default: false\n    }\n  },\n  setup(props, { emit }) {\n    const { data, selected } = toRefs(props);\n\n    const onImageClick = async () => {\n      const params: FabricCardSelectableEmit = {\n        id: data.value.id,\n        selected: selected.value,\n        data: data.value\n      };\n      emit(\"select\", params);\n    };\n\n    return {\n      onImageClick,\n      formatImageUrl\n    };\n  }\n});\n\nexport default Component;\n","import { render } from \"./FabricCardSelectable.vue?vue&type=template&id=3f79852e&scoped=true\"\nimport script from \"./FabricCardSelectable.vue?vue&type=script&lang=ts\"\nexport * from \"./FabricCardSelectable.vue?vue&type=script&lang=ts\"\n\nimport \"./FabricCardSelectable.vue?vue&type=style&index=0&id=3f79852e&scoped=true&lang=stylus\"\nscript.render = render\nscript.__scopeId = \"data-v-3f79852e\"\n\nexport default script","var userAgent = require('../internals/engine-user-agent');\n\nvar webkit = userAgent.match(/AppleWebKit\\/(\\d+)\\./);\n\nmodule.exports = !!webkit && +webkit[1];\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./FilterTag.vue?vue&type=style&index=0&id=b8791da2&scoped=true&lang=stylus\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./InformDialog.vue?vue&type=style&index=0&id=0270001b&scoped=true&lang=stylus\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./EndDialog.vue?vue&type=style&index=0&id=49821e12&scoped=true&lang=stylus\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./UsersDialog.vue?vue&type=style&index=0&id=ac59c5ee&scoped=true&lang=stylus\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./CreateStageDialog.vue?vue&type=style&index=1&id=3173ea18&lang=stylus\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Timeline.vue?vue&type=style&index=0&id=5f6883bf&scoped=true&lang=stylus\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ProjectDetail.vue?vue&type=style&index=1&id=43f62cba&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ProjectDetail.vue?vue&type=style&index=0&id=43f62cba&scoped=true&lang=stylus\"","// TODO: use something more complex like timsort?\nvar floor = Math.floor;\n\nvar mergeSort = function (array, comparefn) {\n  var length = array.length;\n  var middle = floor(length / 2);\n  return length < 8 ? insertionSort(array, comparefn) : merge(\n    mergeSort(array.slice(0, middle), comparefn),\n    mergeSort(array.slice(middle), comparefn),\n    comparefn\n  );\n};\n\nvar insertionSort = function (array, comparefn) {\n  var length = array.length;\n  var i = 1;\n  var element, j;\n\n  while (i < length) {\n    j = i;\n    element = array[i];\n    while (j && comparefn(array[j - 1], element) > 0) {\n      array[j] = array[--j];\n    }\n    if (j !== i++) array[j] = element;\n  } return array;\n};\n\nvar merge = function (left, right, comparefn) {\n  var llength = left.length;\n  var rlength = right.length;\n  var lindex = 0;\n  var rindex = 0;\n  var result = [];\n\n  while (lindex < llength || rindex < rlength) {\n    if (lindex < llength && rindex < rlength) {\n      result.push(comparefn(left[lindex], right[rindex]) <= 0 ? left[lindex++] : right[rindex++]);\n    } else {\n      result.push(lindex < llength ? left[lindex++] : right[rindex++]);\n    }\n  } return result;\n};\n\nmodule.exports = mergeSort;\n","<template>\n  <div id=\"project-detail-component\">\n    <div class=\"top-container\">\n      <div class=\"title-wrapper\" v-if=\"projectData\">\n        <h1>{{ projectData.name }}</h1>\n        <el-tag effect=\"dark\" :color=\"getTagColor(projectData.status)\">\n          {{ projectData.status }}\n        </el-tag>\n        <p>\n          Expected Finish Time:\n          {{ dayjs(projectData.expected_end_at).format(\"YYYY-MM-DD\") }}\n        </p>\n        <p>Brand: {{ projectData.company.buyer.name }}</p>\n        <p v-if=\"projectData.season.length\">\n          Season: {{ projectData.season.join(\", \") }}\n        </p>\n        <p v-if=\"projectData.garment_factory\">\n          Garment Factory:\n          {{ getGarmentFactoryName(projectData.garment_factory) }}\n        </p>\n      </div>\n\n      <div class=\"right-container\">\n        <el-button\n          v-if=\"projectData && projectData.can_view_joined_members\"\n          type=\"info\"\n          @click=\"onUsersClick\"\n        >\n          Users\n        </el-button>\n        <el-button\n          v-if=\"hasButtons\"\n          v-permission=\"'project_status_update'\"\n          type=\"success\"\n          @click=\"onAddStageClick\"\n        >\n          Add Stage\n        </el-button>\n        <el-button\n          v-if=\"projectStage && projectStage.id === newestId && hasButtons\"\n          v-permission=\"'project_stage_update'\"\n          type=\"success\"\n          @click=\"onEditStageClick\"\n        >\n          Edit Stage\n        </el-button>\n        <el-button v-if=\"hasButtons\" type=\"success\" @click=\"onInformClick\"\n          >Inform</el-button\n        >\n        <el-button\n          v-if=\"projectData && hasButtons\"\n          v-permission=\"'project_status_update'\"\n          type=\"success\"\n          @click=\"onEndClick\"\n        >\n          End\n        </el-button>\n      </div>\n    </div>\n\n    <div class=\"main-container\" v-if=\"projectData\">\n      <el-row :gutter=\"40\" style=\"margin: 0;\">\n        <el-col class=\"left-container\" :span=\"8\" style=\"padding-left: 0;\">\n          <Timeline\n            :company=\"projectData.company\"\n            :stages=\"projectData.stages\"\n            :stage=\"stageData\"\n            :fabric=\"fabricData\"\n            @click-stage=\"onStageClick\"\n          ></Timeline>\n        </el-col>\n\n        <el-col\n          class=\"right-container\"\n          :span=\"16\"\n          style=\"padding-right: 0;\"\n          ref=\"rightContainer\"\n        >\n          <template v-if=\"stageData\">\n            <div class=\"card\">\n              <h3 class=\"title\">Stage</h3>\n              <p class=\"content\">{{ stageData.name }}</p>\n            </div>\n\n            <div class=\"card\">\n              <h3 class=\"title\">Price</h3>\n              <p class=\"content\">{{ stageData.price }}</p>\n            </div>\n\n            <div class=\"card\">\n              <h3 class=\"title\">Created Date</h3>\n              <p class=\"content\">\n                {{ dayjs(stageData.created_at).format(\"YYYY.MM.DD\") }}\n              </p>\n            </div>\n\n            <div class=\"card\">\n              <h3 class=\"title\">Description</h3>\n              <p class=\"content\">{{ stageData.description || \"Empty...\" }}</p>\n              <div class=\"report-container\">\n                <div\n                  v-for=\"file in stageData.stageattachements\"\n                  :key=\"file.id\"\n                  class=\"report-item\"\n                  @click=\"onAttachmentDownload(file)\"\n                >\n                  <font-awesome-icon\n                    class=\"icon\"\n                    :icon=\"['far', 'file']\"\n                  ></font-awesome-icon>\n                  <p>{{ file.name }}</p>\n                </div>\n              </div>\n            </div>\n\n            <div class=\"card\">\n              <StageFabrics\n                :stage-data=\"stageData\"\n                :fabric-id=\"fabricData ? fabricData.id : null\"\n                :project-id=\"parseInt(id, 10)\"\n                @load=\"onStageFabricsLoad\"\n              ></StageFabrics>\n            </div>\n            <div class=\"card\">\n              <h3 class=\"title\">Discussion</h3>\n              <div class=\"input-discussion\">\n                <font-awesome-icon\n                  class=\"user\"\n                  :icon=\"['far', 'user-circle']\"\n                ></font-awesome-icon>\n                <div\n                  :disabled=\"!isOpenInputDiscussion\"\n                  class=\"textarea-container\"\n                >\n                  <textarea\n                    v-model=\"discussionValue\"\n                    name=\"text\"\n                    rows=\"1\"\n                    placeholder=\"Write a comment...\"\n                    @keydown.enter.exact.prevent\n                    @keydown.enter.shift.prevent\n                    @keydown.enter.alt.prevent\n                    @keyup.enter.exact=\"onDiscuss\"\n                    @keydown.enter.shift.exact=\"onNewline\"\n                    @keydown.enter.alt.exact=\"onNewline\"\n                  ></textarea>\n                  <el-button\n                    icon=\"el-icon-position\"\n                    @click=\"onDiscuss\"\n                  ></el-button>\n                </div>\n                <div class=\"upload-wrapper\">\n                  <font-awesome-icon\n                    class=\"paperclip\"\n                    :icon=\"['fas', 'paperclip']\"\n                    @click=\"onUploadClick\"\n                  ></font-awesome-icon>\n                  <div v-if=\"filesStore\" class=\"count\">\n                    {{ filesStore.length }}\n                  </div>\n                </div>\n              </div>\n              <div\n                v-for=\"item in projectData.discussions\"\n                :key=\"item\"\n                class=\"chat-item\"\n              >\n                <div class=\"avatar-container\">\n                  <font-awesome-icon\n                    class=\"icon\"\n                    :icon=\"['far', 'user-circle']\"\n                  ></font-awesome-icon>\n                  <div class=\"name-container\">\n                    <div class=\"name-wrapper\">\n                      <div class=\"name\">\n                        {{ item.nickname || item.username }}\n                      </div>\n                      <time>{{\n                        dayjs(item.created_at).format(\"YYYY-MM-DD hh:mm:ss\")\n                      }}</time>\n                    </div>\n                    <div v-if=\"item.is_me\" class=\"console-wrapper\">\n                      <font-awesome-icon\n                        v-if=\"editDiscussionId !== item.id\"\n                        class=\"icon\"\n                        :icon=\"['fas', 'edit']\"\n                        @click=\"editDiscussionId = item.id\"\n                      ></font-awesome-icon>\n                      <font-awesome-icon\n                        v-if=\"editDiscussionId !== item.id\"\n                        class=\"icon\"\n                        :icon=\"['far', 'trash-alt']\"\n                        @click=\"onDiscussionDeleteClick(item.id)\"\n                      ></font-awesome-icon>\n                      <font-awesome-icon\n                        v-if=\"editDiscussionId === item.id\"\n                        class=\"icon icon-check\"\n                        :icon=\"['fas', 'check']\"\n                        @click=\"onDiscussionEditClick(item.id, item.message)\"\n                      ></font-awesome-icon>\n                      <font-awesome-icon\n                        v-if=\"editDiscussionId === item.id\"\n                        class=\"icon icon-close\"\n                        :icon=\"['fas', 'times']\"\n                        @click=\"editDiscussionId = -1\"\n                      ></font-awesome-icon>\n                    </div>\n                  </div>\n                </div>\n                <div v-if=\"editDiscussionId === item.id\" class=\"edit-content\">\n                  <el-input\n                    type=\"textarea\"\n                    v-model=\"item.message\"\n                    :rows=\"3\"\n                    clearable\n                  >\n                  </el-input>\n                  <div class=\"files-wrapper\">\n                    <div\n                      v-for=\"file in item.attachements\"\n                      :key=\"file.id\"\n                      class=\"file-item\"\n                    >\n                      <font-awesome-icon\n                        class=\"cancel-icon\"\n                        :icon=\"['fas', 'times-circle']\"\n                        @click=\"onDiscussionFileDeleteClick(file.id)\"\n                      ></font-awesome-icon>\n                      <font-awesome-icon\n                        class=\"icon\"\n                        :icon=\"['far', 'file']\"\n                      ></font-awesome-icon>\n                      <p>{{ file.name }}</p>\n                    </div>\n                  </div>\n                </div>\n                <div v-else class=\"content\">\n                  <p\n                    class=\"message\"\n                    v-for=\"(msg, index) in item.message.split('\\n')\"\n                    :key=\"index\"\n                  >\n                    {{ msg }}\n                  </p>\n                  <div class=\"files-wrapper\">\n                    <div\n                      v-for=\"file in item.attachements\"\n                      :key=\"file.id\"\n                      class=\"file-item\"\n                      @click=\"onAttachmentDownload(file)\"\n                    >\n                      <font-awesome-icon\n                        class=\"icon\"\n                        :icon=\"['far', 'file']\"\n                      ></font-awesome-icon>\n                      <p>{{ file.name }}</p>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </template>\n        </el-col>\n      </el-row>\n    </div>\n\n    <UsersDialog ref=\"usersDialog\"></UsersDialog>\n    <CreateStageDialog\n      ref=\"createStageDialog\"\n      @load=\"onLoad\"\n    ></CreateStageDialog>\n    <StageEditDialog ref=\"editStageDialog\" @load=\"onLoad\"></StageEditDialog>\n    <InformDialog ref=\"informDialog\"></InformDialog>\n    <EndDialog ref=\"endDialog\" @load=\"onLoad\"></EndDialog>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, ref, onMounted, watch, toRefs, computed } from \"vue\";\nimport { useRouter } from \"vue-router\";\nimport dayjs from \"dayjs\";\n\nimport Timeline from \"./Timeline.vue\";\nimport StageFabrics from \"./StageFabrics.vue\";\nimport UsersDialog from \"./UsersDialog.vue\";\nimport CreateStageDialog from \"./CreateStageDialog.vue\";\nimport StageEditDialog from \"./StageEditDialog.vue\";\nimport InformDialog from \"./InformDialog.vue\";\nimport EndDialog from \"./EndDialog.vue\";\n\nimport { formatImageUrl, loading } from \"@/utils\";\nimport {\n  deleteDicussionFile,\n  getAvaliableOptions,\n  getProject,\n  getProjectStage,\n  postCreateDiscussion,\n  postDeleteDiscussion,\n  postEditDiscussion\n} from \"@/apis/project\";\nimport {\n  Attachment,\n  DiscussionInput,\n  Project,\n  ProjectStage,\n  Stage\n} from \"@/typings/project\";\nimport { FabricDetailResponse } from \"@/typings/fabric\";\nimport { getFabric } from \"@/apis/fabric\";\nimport { iCreateDialog } from \"@/typings/component\";\nimport { ElNotification } from \"element-plus\";\nimport { useStore } from \"vuex\";\nimport { PostNotificationReadByProject } from \"@/typings/store\";\n\nconst colors = [\"#5470c6\", \"#91cc76\", \"#f8c858\", \"#e66\"];\n\nconst getTagColor = (tag: string): string => {\n  const adapter: Adapter<string> = {\n    \"In Progress\": colors[0],\n    Completed: colors[1],\n    \"Completed but delayed\": colors[1],\n    Dropped: colors[3],\n    Delayed: colors[2],\n    default: \"\"\n  };\n  return adapter[tag] || adapter.default;\n};\n\nconst getHasButtons = (project: Project | null): boolean => {\n  if (!project) return false;\n  const adapter: Adapter<boolean> = {\n    \"In Progress\": true,\n    Completed: true,\n    \"Completed but delayed\": false,\n    Dropped: false,\n    Delayed: true,\n    default: false\n  };\n  return adapter[project.status] || adapter.default;\n};\n\nconst Component = defineComponent({\n  name: \"ProjectDetail\",\n  components: {\n    Timeline,\n    StageFabrics,\n    UsersDialog,\n    CreateStageDialog,\n    StageEditDialog,\n    InformDialog,\n    EndDialog\n  },\n  props: {\n    id: {\n      type: String,\n      default: \"\"\n    }\n  },\n  setup(props) {\n    const store = useStore();\n    const router = useRouter();\n    const { id } = toRefs(props);\n    const rightContainer = ref<iCreateDialog | null>(null)\n    const usersDialog = ref<iCreateDialog | null>(null);\n    const createStageDialog = ref<iCreateDialog | null>(null);\n    const editStageDialog = ref<iCreateDialog | null>(null);\n    const informDialog = ref<iCreateDialog | null>(null);\n    const endDialog = ref<iCreateDialog | null>(null);\n\n    const projectData = ref<Project | null>(null);\n    const projectStage = ref<ProjectStage | null>(null);\n    const fabricData = ref<FabricDetailResponse | null>(null);\n    const stageData = ref<Stage | null>(null);\n    const garmentFactories = ref<{ id: number; name: string }[] | null>(null);\n    const discussionValue = ref(\"\");\n    const editDiscussionId = ref(-1);\n    const isOpenInputDiscussion = ref(true);\n    const filesStore = ref<FileList | null>(null);\n    const newestId = ref(-1);\n\n    const hasButtons = computed(() => getHasButtons(projectData.value));\n\n    const getGarmentFactoryName = (id: number): string => {\n      if (!garmentFactories.value) return \"\";\n      const target = garmentFactories.value!.find(\n        (it: { id: number; name: string }) => it.id === id\n      );\n      return target ? target.name : \"\";\n    };\n\n    const fetchStageDetail = async (stage: ProjectStage) => {\n      projectStage.value = stage;\n      const { data } = await getProjectStage(stage.id);\n      stageData.value = data;\n      // @ts-ignore\n      rightContainer.value && (rightContainer.value.$el.scrollTop = 0)\n    };\n\n    const init = async () => {\n      const loadingInstance = loading();\n      try {\n        const { data: factories } = await getAvaliableOptions(\n          \"garment_factory\"\n        );\n        garmentFactories.value = factories.brands;\n        const { data } = await getProject(parseInt(id.value, 10));\n        projectData.value = data;\n        if (data.stages.length) {\n          const target = data.stages.sort((a, b) => b.id - a.id)[0];\n          newestId.value = target.id;\n          await fetchStageDetail(target);\n        }\n        if (data.start_fabric) {\n          const { data: fabricResponse } = await getFabric(data.start_fabric);\n          fabricData.value = fabricResponse;\n        }\n\n        // Set all notifications read.\n        await store.dispatch(\n          PostNotificationReadByProject,\n          parseInt(id.value, 10)\n        );\n      } catch (_) {\n        await router.replace({ name: \"Error\" });\n      } finally {\n        loadingInstance.close();\n      }\n    };\n\n    onMounted(init);\n    watch([id], init);\n\n    const onUsersClick = () => {\n      if (!usersDialog.value || !projectData.value) return;\n      usersDialog.value.open(projectData.value);\n    };\n\n    const onAddStageClick = () => {\n      if (!createStageDialog.value || !projectData.value) return;\n      if (!projectData.value.can_add_stage) {\n        return ElNotification({\n          type: \"warning\",\n          title: \"No permission\",\n          message: \"You have no permission to do this.\"\n        });\n      }\n      createStageDialog.value.open(projectData.value);\n    };\n    const onEditStageClick = () => {\n      if (!editStageDialog.value || !projectStage.value) return;\n      editStageDialog.value.open({\n        project: projectData.value,\n        stage: projectStage.value\n      });\n    };\n    const onInformClick = () => {\n      if (!informDialog.value || !projectData.value) return;\n      informDialog.value.open(projectData.value);\n    };\n    const onEndClick = () => {\n      if (!endDialog.value || !projectData.value) return;\n      endDialog.value.open(projectData.value);\n    };\n    const onStageClick = async (data: ProjectStage) => {\n      await fetchStageDetail(data);\n    };\n    const onNewline = () => {\n      discussionValue.value = `${discussionValue.value}\\n`;\n    };\n    const onDiscuss = async () => {\n      if (!discussionValue.value && !filesStore.value) return;\n\n      isOpenInputDiscussion.value = false;\n      try {\n        const params: DiscussionInput = {\n          project: parseInt(id.value, 10),\n          message: discussionValue.value\n        };\n        if (filesStore.value) params.files = filesStore.value;\n\n        // Reset\n        discussionValue.value = \"\";\n        filesStore.value = null;\n\n        await postCreateDiscussion(params);\n\n        // re-fetch\n        const { data } = await getProject(parseInt(id.value, 10));\n        projectData.value = data;\n      } finally {\n        isOpenInputDiscussion.value = true;\n      }\n    };\n    const onDiscussionEditClick = async (_id: number, message: string) => {\n      await postEditDiscussion(_id, message);\n      const { data } = await getProject(parseInt(id.value, 10));\n      projectData.value = data;\n      editDiscussionId.value = -1;\n    };\n    const onDiscussionDeleteClick = async (_id: number) => {\n      await postDeleteDiscussion(_id);\n      ElNotification({\n        type: \"success\",\n        title: \"Delete Discussion\",\n        message: \"Success delete discussion.\"\n      });\n      const { data } = await getProject(parseInt(id.value, 10));\n      projectData.value = data;\n    };\n    const onDiscussionFileDeleteClick = async (_id: number) => {\n      await deleteDicussionFile(_id);\n      ElNotification({\n        type: \"success\",\n        title: \"Delete File\",\n        message: \"Success delete file.\"\n      });\n      const { data } = await getProject(parseInt(id.value, 10));\n      projectData.value = data;\n    };\n    const onUploadClick = () => {\n      if (!projectStage.value) return;\n\n      const element = document.createElement(\"input\");\n      element.type = \"file\";\n      element.accept = \"image/*\";\n      element.multiple = true;\n      element.addEventListener(\"change\", async () => {\n        if (!projectStage.value) return;\n\n        if (element.files) {\n          filesStore.value = element.files;\n        }\n      });\n      element.click();\n    };\n\n    const onAttachmentDownload = (data: Attachment) => {\n      window.open(formatImageUrl(data.file));\n    };\n\n    const onLoad = async () => {\n      await init();\n    };\n\n    const onStageFabricsLoad = async () => {\n      if (!projectStage.value) return;\n      const { data } = await getProjectStage(projectStage.value.id);\n      stageData.value = data;\n    };\n\n    return {\n      rightContainer,\n      usersDialog,\n      createStageDialog,\n      editStageDialog,\n      informDialog,\n      endDialog,\n      projectData,\n      fabricData,\n      stageData,\n      garmentFactories,\n      discussionValue,\n      isOpenInputDiscussion,\n      filesStore,\n      projectStage,\n      newestId,\n      editDiscussionId,\n      hasButtons,\n\n      onUsersClick,\n      onAddStageClick,\n      onEditStageClick,\n      onInformClick,\n      onEndClick,\n      onStageClick,\n      onNewline,\n      onDiscuss,\n      onDiscussionEditClick,\n      onDiscussionDeleteClick,\n      onDiscussionFileDeleteClick,\n      onUploadClick,\n      onAttachmentDownload,\n      onLoad,\n      onStageFabricsLoad,\n\n      getTagColor,\n      getGarmentFactoryName,\n      dayjs\n    };\n  }\n});\n\nexport default Component;\n</script>\n\n<style scoped lang=\"stylus\">\n#project-detail-component\n  background-color $color-background\n  padding 30px 0 0\n  .top-container\n    flex(space-between, flex-start)\n    margin-bottom 20px\n    height 180px\n    .title-wrapper\n      h1\n        margin-top 15px\n        font-size $font-size-zoom-title\n      :deep() .el-tag\n        margin-top 10px\n        border-color transparent\n      p\n        margin-top 10px\n        font-size $font-size-lg2x\n    .right-container\n       margin-top 15px\n       flex()\n       :deep() .el-button\n         margin-right 15px\n\n  .main-container\n    padding 30px 0\n    .left-container\n      height calc(100vh - 340px)\n      overflow-y scroll\n\n    .right-container\n      height calc(100vh - 340px)\n      overflow-y scroll\n\n    .card\n      background white\n      border-radius 15px\n      box-sizing border-box\n      padding 15px 30px\n      margin-bottom 30px\n      width 100%\n      .input-discussion\n        flex()\n        padding-bottom 15px\n        margin 15px 0\n        border-bottom 1px solid $color-gray\n        width 100%\n        :deep() .el-input\n          width calc(100% - 84px)\n        :deep() .el-icon-position\n          font-weight 600\n          font-size 16px\n        .user\n          width 30px\n          height 30px\n          margin-right 15px\n        .upload-wrapper\n          position relative\n          .paperclip\n            width 24px\n            height 24px\n            margin-left 15px\n            cursor pointer\n          .count\n            position absolute\n            right -10px\n            top -10px\n            border-radius 50%\n            flex()\n            width 18px\n            height 18px\n            font-size $font-size-normal\n            background $color-active\n            color white\n\n      .title\n        font-size $font-size-large\n        font-weight 600\n        border-bottom 1px solid $color-black\n        padding-bottom 10px\n        width 200px\n      .content\n        font-size $font-size-large\n        font-weight 400\n        line-height 30px\n        margin 10px 0\n        .message\n          min-height 30px\n        .files-wrapper\n          flex(flex-end)\n          flex-wrap wrap\n          .file-item\n            display inline-block\n            flex(flex-end)\n            cursor pointer\n            padding-top 10px\n            font-size $font-size-lg2x\n            margin-right 10px\n            .icon\n              margin-right 10px\n\n    .report-container\n      flex(flex-end)\n      padding 15px 0\n      .report-item\n        flex(flex-end)\n        width 200px\n        cursor pointer\n        .icon\n          width 30px\n          height 30px\n          margin-right 15px\n        p\n          font-size $font-size-lg3x\n          font-weight bold\n\n    .chat-item\n      &:hover\n        .name-container\n          .console-wrapper\n            .icon\n              display block !important\n      .avatar-container\n        flex(flex-start)\n        margin 15px 0\n        .icon\n          width 30px\n          height 30px\n          margin-right 15px\n        .name-container\n          width 100%\n          flex(space-between, flex-end)\n          .name-wrapper\n            flex()\n            .name\n              font-size $font-size-large\n              font-weight 500\n              margin-right 10px\n            time\n              font-size $font-size-small\n          .console-wrapper\n            flex()\n            .icon\n              display none\n              width 15px\n              height 15px\n              margin 0 5px\n              cursor pointer\n            .icon-check\n              display block\n              color $color-active\n            .icon-close\n              display block\n\n      .edit-content\n        position relative\n        margin-left 45px\n        :deep() .el-textarea__inner\n          line-height 30px\n          font-size $font-size-large\n          padding 15px\n          border 2px solid $color-active\n\n        .files-wrapper\n          position absolute\n          bottom 15px\n          right 15px\n          flex(flex-end)\n          flex-wrap wrap\n          .file-item\n            position relative\n            display inline-block\n            flex(flex-end)\n            padding-top 10px\n            font-size $font-size-lg2x\n            margin-right 10px\n            .cancel-icon\n              width 10px\n              height 10px\n              position absolute\n              left -5px\n              top 5px\n              cursor pointer\n            .icon\n              margin-right 10px\n      .content\n        background $color-gray\n        border-radius 10px\n        padding 15px\n        margin-left 45px\n    .bottom-container\n      flex(flex-end)\n</style>\n\n<style>\n.textarea-container {\n  display: flex;\n  align-items: center;\n  flex: 1;\n}\n.textarea-container textarea {\n  width: 100%;\n  padding: 11.5px;\n}\n</style>\n","<template>\n  <div id=\"timeline-component\">\n    <div class=\"top-container\">\n      <div class=\"brand\">\n        <img\n          :src=\"formatImageUrl(company.buyer.logo)\"\n          :alt=\"company.buyer.name\"\n        />\n      </div>\n      <div class=\"brand\">\n        <img :src=\"formatImageUrl(company.supplier.logo)\" alt=\"\" />\n      </div>\n    </div>\n\n    <div class=\"main-container\">\n      <div\n        v-for=\"stage in formatStages\"\n        :key=\"stage.id\"\n        :class=\"{ active: stage.id === activeStageId }\"\n      >\n        <div\n          class=\"dot-solid\"\n          :class=\"{\n            right: stage.side === company.supplier.id,\n            left: stage.side === company.buyer.id\n          }\"\n          @click.stop=\"onDotClick(stage)\"\n        >\n          <div class=\"content primary-container\">\n            <p class=\"time\">\n              {{ dayjs(stage.created_at).format(\"YYYY.MM.DD\") }}\n            </p>\n            <p class=\"name\">{{ stage.name }}</p>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div v-if=\"fabric\" class=\"fabric-wrapper\">\n      <img\n        v-if=\"mainFile\"\n        :src=\"formatImageUrl(mainFile) + '@150-150'\"\n        :alt=\"fabric.name\"\n        @click=\"onImageClick\"\n      />\n    </div>\n    <div v-else class=\"upload-image-wrapper\" @click=\"onUploadClick\">\n      <div class=\"icon-wrapper\">\n        <font-awesome-icon\n          class=\"icon\"\n          :icon=\"['fas', 'plus']\"\n        ></font-awesome-icon>\n      </div>\n      <div class=\"content-wrapper\">\n        Add\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, PropType, toRefs, computed } from \"vue\";\nimport dayjs from \"dayjs\";\nimport { ProjectCompany, ProjectStage, Stage } from \"@/typings/project\";\nimport { formatImageUrl } from \"@/utils\";\nimport { FabricDetailResponse } from \"@/typings/fabric\";\n\nconst initCompany = () => ({\n  supplier: { id: -1, name: \"\", logo: \"\" },\n  buyer: { id: -1, name: \"\", logo: \"\" }\n});\n\nconst Component = defineComponent({\n  name: \"Timeline\",\n  props: {\n    company: {\n      type: Object as PropType<{\n        supplier: ProjectCompany;\n        buyer: ProjectCompany;\n      }>,\n      default: initCompany()\n    },\n    stages: {\n      type: Array as PropType<ProjectStage[]>,\n      default: () => []\n    },\n    stage: {\n      type: Object as PropType<Stage>,\n      default: null\n    },\n    fabric: {\n      type: Object as PropType<FabricDetailResponse>,\n      default: null\n    }\n  },\n  setup(props, { emit }) {\n    const { fabric, stages, stage } = toRefs(props);\n\n    const activeStageId = computed(() => {\n      return stage.value ? stage.value.id : -1;\n    });\n\n    const formatStages = computed(() =>\n      [...stages.value].sort((a, b) =>\n        +dayjs(a.created_at).isBefore(dayjs(b.created_at)) ? 1 : -1\n      )\n    );\n    const mainFile = computed(() => {\n      const target = fabric.value.media.find(it => it.main);\n      return target ? target.file : null;\n    });\n\n    const onDotClick = (data: ProjectStage) => {\n      emit(\"click-stage\", data);\n    };\n\n    const onImageClick = (): void => {\n      const url = `${process.env.VUE_APP_DOMAIN}/web/fabric/${fabric.value.id}`;\n      window.open(url, \"blank\");\n    };\n\n    const onUploadClick = async () => {\n      console.log(\"work\");\n    };\n\n    return {\n      formatStages,\n      mainFile,\n      activeStageId,\n\n      onDotClick,\n      onImageClick,\n      onUploadClick,\n\n      dayjs,\n      formatImageUrl\n    };\n  }\n});\n\nexport default Component;\n</script>\n\n<style scoped lang=\"stylus\">\n#timeline-component\n  width 100%\n  .top-container\n    flex(space-between)\n    padding 15px 0\n    .brand\n      background white\n      flex()\n      box-sizing border-box\n      border-radius 50%\n      border 1px solid $color-border-gray\n      overflow hidden\n      width 60px\n      height 60px\n      img\n        width 100%\n        height auto\n\n  .main-container\n    position relative\n    &:before\n      position absolute\n      content ''\n      width 2px\n      height calc(100% - 100px)\n      background $color-black\n      top 50%\n      left 50%\n      transform translate(-50%, -50%)\n      z-index 1\n\n    .dot\n      position relative\n      height 100px\n      &:before\n        box-sizing border-box\n        border 2px solid $color-black\n        background white\n        position absolute\n        content ''\n        top 50%\n        left 50%\n        transform translate(-50%, -50%)\n        width 20px\n        height 20px\n        border-radius 50%\n        z-index 2\n\n    .dot-solid\n      cursor pointer\n      position relative\n      height 100px\n      &:before\n        position absolute\n        background $color-black\n        content ''\n        top 50%\n        left 50%\n        z-index 2\n        transform translate(-50%, -50%)\n        width 12px\n        height 12px\n        border-radius 50%\n\n    .right\n      position relative\n      &:after\n        content ''\n        position absolute\n        top 50%\n        left 50%\n        transform translate(6px, -50%)\n        height 2px\n        width 50px\n        background $color-black\n      .content\n        position absolute\n        top 0\n        left calc(50% + 70px)\n        text-align left\n\n    .left\n      flex(flex-start)\n      &:after\n        content ''\n        position absolute\n        top 50%\n        right 48%\n        transform translate(-10px, -50%)\n        height 2px\n        width 54px\n        background $color-black\n      .content\n        position absolute\n        top 0\n        right calc(50% + 74px)\n        text-align right\n\n    .primary-container\n      flex(center, flex-start)\n      flex-direction column\n      height 100%\n      .time\n        font-size $font-size-small\n        font-weight 400\n      .name\n        font-size $font-size-large\n        font-weight 500\n\n    .secondary-container\n      flex(center, flex-start)\n      flex-direction column\n      height 100%\n      .name\n        font-size $font-size-lg2x\n        font-weight 500\n\n  .active\n    color $color-active\n    .dot-solid\n      &:before\n        background $color-active\n    .right\n      &:after\n        background $color-active\n    .left\n      &:after\n        background $color-active\n\n  .fabric-wrapper\n    flex()\n    img\n      cursor pointer\n      width 150px\n      height 150px\n  .upload-image-wrapper\n    margin 0 auto\n    width 150px\n    height 150px\n    border 1px solid $color-secondary\n    cursor pointer\n    background white\n    .icon-wrapper\n      flex()\n      border-bottom 1px solid $color-secondary\n      .icon\n        width 80px\n        height 80px\n        padding 20px\n    .content-wrapper\n      flex()\n      height 29px\n      font-weight bold\n      color $color-black\n      font-size $font-size-lg3x\n</style>\n","\nimport { defineComponent, PropType, toRefs, computed } from \"vue\";\nimport dayjs from \"dayjs\";\nimport { ProjectCompany, ProjectStage, Stage } from \"@/typings/project\";\nimport { formatImageUrl } from \"@/utils\";\nimport { FabricDetailResponse } from \"@/typings/fabric\";\n\nconst initCompany = () => ({\n  supplier: { id: -1, name: \"\", logo: \"\" },\n  buyer: { id: -1, name: \"\", logo: \"\" }\n});\n\nconst Component = defineComponent({\n  name: \"Timeline\",\n  props: {\n    company: {\n      type: Object as PropType<{\n        supplier: ProjectCompany;\n        buyer: ProjectCompany;\n      }>,\n      default: initCompany()\n    },\n    stages: {\n      type: Array as PropType<ProjectStage[]>,\n      default: () => []\n    },\n    stage: {\n      type: Object as PropType<Stage>,\n      default: null\n    },\n    fabric: {\n      type: Object as PropType<FabricDetailResponse>,\n      default: null\n    }\n  },\n  setup(props, { emit }) {\n    const { fabric, stages, stage } = toRefs(props);\n\n    const activeStageId = computed(() => {\n      return stage.value ? stage.value.id : -1;\n    });\n\n    const formatStages = computed(() =>\n      [...stages.value].sort((a, b) =>\n        +dayjs(a.created_at).isBefore(dayjs(b.created_at)) ? 1 : -1\n      )\n    );\n    const mainFile = computed(() => {\n      const target = fabric.value.media.find(it => it.main);\n      return target ? target.file : null;\n    });\n\n    const onDotClick = (data: ProjectStage) => {\n      emit(\"click-stage\", data);\n    };\n\n    const onImageClick = (): void => {\n      const url = `${process.env.VUE_APP_DOMAIN}/web/fabric/${fabric.value.id}`;\n      window.open(url, \"blank\");\n    };\n\n    const onUploadClick = async () => {\n      console.log(\"work\");\n    };\n\n    return {\n      formatStages,\n      mainFile,\n      activeStageId,\n\n      onDotClick,\n      onImageClick,\n      onUploadClick,\n\n      dayjs,\n      formatImageUrl\n    };\n  }\n});\n\nexport default Component;\n","import { render } from \"./Timeline.vue?vue&type=template&id=5f6883bf&scoped=true\"\nimport script from \"./Timeline.vue?vue&type=script&lang=ts\"\nexport * from \"./Timeline.vue?vue&type=script&lang=ts\"\n\nimport \"./Timeline.vue?vue&type=style&index=0&id=5f6883bf&scoped=true&lang=stylus\"\nscript.render = render\nscript.__scopeId = \"data-v-5f6883bf\"\n\nexport default script","<template>\n  <div id=\"stage-fabrics-component\">\n    <div class=\"top-wrapper\">\n      <h3 class=\"title\">Fabrics</h3>\n      <div class=\"console-wrapper\">\n        <font-awesome-icon\n          class=\"icon\"\n          :icon=\"['far', 'clone']\"\n          @click=\"onReference\"\n        ></font-awesome-icon>\n        <font-awesome-icon\n          class=\"icon\"\n          :icon=\"['fas', 'upload']\"\n          @click=\"onUpload\"\n        ></font-awesome-icon>\n        <font-awesome-icon\n          class=\"icon\"\n          :icon=\"['fas', 'expand-alt']\"\n          @click=\"onExpand\"\n        ></font-awesome-icon>\n      </div>\n    </div>\n    <el-row v-if=\"stageData.stagemedias.length\" :gutter=\"30\">\n      <el-col\n        v-for=\"item in _.splitAt(3, stageData.stagemedias)[0]\"\n        :key=\"item.id\"\n        :span=\"8\"\n      >\n        <img\n          class=\"fabric-image\"\n          :src=\"formatImageUrl(item.image_url)\"\n          :alt=\"'fabric-image-' + item.id\"\n        />\n      </el-col>\n    </el-row>\n    <div class=\"empty\" v-else>\n      <p>No Data</p>\n    </div>\n    <StageFabricsDuplicateDialog\n      ref=\"uploadDialog\"\n      @load=\"onLoad\"\n    ></StageFabricsDuplicateDialog>\n    <StageFabricsDialog ref=\"fabricDialog\"> </StageFabricsDialog>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, ref, PropType, toRefs } from \"vue\";\nimport * as _ from \"ramda\";\n\nimport StageFabricsDuplicateDialog from \"./StageFabricsDuplicateDialog.vue\";\nimport StageFabricsDialog from \"./StageFabricsDialog.vue\";\nimport { Stage, StageMediaParams } from \"@/typings/project\";\nimport { postStageMediaCreate } from \"@/apis/project\";\nimport { formatImageUrl } from \"@/utils\";\nimport { iCreateDialog } from \"@/typings/component\";\n\nconst Component = defineComponent({\n  name: \"StageFabrics\",\n  components: { StageFabricsDuplicateDialog, StageFabricsDialog },\n  props: {\n    projectId: {\n      type: Number,\n      default: 0\n    },\n    stageData: {\n      type: Object as PropType<Stage>,\n      default: null\n    },\n    fabricId: {\n      type: Number,\n      default: 0\n    }\n  },\n  setup(props, { emit }) {\n    const uploadDialog = ref<iCreateDialog | null>(null);\n    const fabricDialog = ref<iCreateDialog | null>(null);\n    const { stageData, projectId } = toRefs(props);\n    const list = ref([]);\n\n    const onReference = () => {\n      if (!uploadDialog.value) return;\n      uploadDialog.value.open({\n        stageId: stageData.value.id,\n        projectId: projectId.value\n      });\n    };\n\n    const onUpload = () => {\n      const element = document.createElement(\"input\");\n      element.type = \"file\";\n      element.accept = \"image/*\";\n      element.multiple = true;\n      element.addEventListener(\"change\", async () => {\n        if (element.files && stageData.value) {\n          for (let i = 0; i < element.files.length; i++) {\n            const params: StageMediaParams = {\n              stage: stageData.value.id,\n              file: element.files[i]\n            };\n            await postStageMediaCreate(params);\n          }\n          emit(\"load\");\n        }\n      });\n      element.click();\n    };\n\n    const onExpand = () => {\n      if (!fabricDialog.value) return;\n      fabricDialog.value.open(stageData.value);\n    };\n\n    const onLoad = () => {\n      emit(\"load\");\n    };\n\n    return {\n      uploadDialog,\n      fabricDialog,\n      list,\n\n      onReference,\n      onUpload,\n      onExpand,\n      onLoad,\n\n      _,\n      formatImageUrl\n    };\n  }\n});\n\nexport default Component;\n</script>\n\n<style scoped lang=\"stylus\">\n#stage-fabrics-component\n  .top-wrapper\n    flex(space-between)\n    padding-bottom 30px\n    .title\n      font-size $font-size-large\n      font-weight 600\n      border-bottom 1px solid $color-black\n      padding-bottom 10px\n      width 200px\n    .console-wrapper\n      flex(space-between)\n      width 100px\n      .icon\n        width 20px\n        height 20px\n        cursor pointer\n  .fabric-image\n    width 100%\n  .empty\n    padding 30px 0\n    text-align center\n    color $color-secondary\n    font-size $font-size-lg3x\n    font-weight 400\n</style>\n","<template>\n  <div id=\"project-stage-fabrics-duplicate-dialog-component\">\n    <el-dialog title=\"Choose Fabric\" v-model=\"visible\" width=\"80%\" top=\"45px\">\n      <div v-if=\"fabricOptions\">\n        <el-row :gutter=\"60\">\n          <el-col\n            v-for=\"item in fabricOptions.results\"\n            :key=\"item.id\"\n            :span=\"6\"\n          >\n            <FabricCardSelectable\n              :data=\"item\"\n              :selected=\"selectValue.includes(item.id)\"\n              @select=\"onFabricSelect\"\n            ></FabricCardSelectable>\n          </el-col>\n        </el-row>\n        <div class=\"pagination-wrapper\">\n          <el-pagination\n            v-if=\"pageCount\"\n            background\n            layout=\"prev, pager, next\"\n            :current-page=\"page\"\n            :page-count=\"pageCount\"\n            @current-change=\"onPaginationChange\"\n          >\n          </el-pagination>\n        </div>\n      </div>\n      <template #footer>\n        <span class=\"dialog-footer\">\n          <el-button type=\"info\" @click=\"visible = false\">\n            Cancel\n          </el-button>\n          <el-button type=\"success\" @click=\"onConfirm\">\n            Done\n          </el-button>\n        </span>\n      </template>\n    </el-dialog>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, ref } from \"vue\";\nimport FabricCardSelectable from \"@/components/FabricCardSelectable.vue\";\nimport {\n  FabricCardSelectableEmit,\n  FabricResult,\n  FabricsParams,\n  FabricsResponse\n} from \"@/typings/fabric\";\nimport { getFabrics } from \"@/apis/fabric\";\nimport { postStageMediaCreate } from \"@/apis/project\";\nimport { StageMediaParams } from \"@/typings/project\";\n\nconst Component = defineComponent({\n  name: \"CreateDialog\",\n  components: {\n    FabricCardSelectable\n  },\n  setup(_, { emit }) {\n    const visible = ref(false);\n    const projectId = ref(0);\n    const stageId = ref(0);\n    const selectValue = ref<number[]>([]);\n    const pageCount = ref(0);\n    const page = ref(1);\n\n    const fabricOptions = ref<FabricsResponse | null>(null);\n\n    const init = async () => {\n      const params: FabricsParams = {\n        to_project: projectId.value,\n        page: page.value\n      };\n      const { data } = await getFabrics(params);\n      fabricOptions.value = data;\n      pageCount.value = data.total_pages;\n    };\n\n    const open = async (data: { stageId: number; projectId: number }) => {\n      projectId.value = data.projectId;\n      stageId.value = data.stageId;\n      visible.value = true;\n      await init();\n    };\n\n    const onFabricSelect = (data: FabricCardSelectableEmit) => {\n      if (data.selected) {\n        selectValue.value = selectValue.value.filter(\n          (selectedId: number) => selectedId !== data.id\n        );\n      } else {\n        selectValue.value = selectValue.value.concat(data.id);\n      }\n    };\n\n    const onConfirm = async () => {\n      if (!fabricOptions.value) return;\n\n      selectValue.value.forEach(async (selectedId: number) => {\n        const target = fabricOptions.value!.results.find(\n          (it: FabricResult) => it.id === selectedId\n        );\n        if (!target) return;\n        const params: StageMediaParams = {\n          stage: stageId.value,\n          demo_fabric: target.id\n        };\n        await postStageMediaCreate(params);\n      });\n\n      emit(\"load\");\n      visible.value = false;\n    };\n\n    const onPaginationChange = async (_page: number) => {\n      page.value = _page;\n      await init();\n    };\n\n    return {\n      visible,\n      selectValue,\n      fabricOptions,\n      page,\n      pageCount,\n\n      open,\n      onConfirm,\n      onFabricSelect,\n      onPaginationChange\n    };\n  }\n});\n\nexport default Component;\n</script>\n\n<style scoped lang=\"stylus\">\n#project-stage-fabrics-duplicate-dialog-component\n  :deep() .el-col\n    margin-bottom 30px\n\n  .pagination-wrapper\n    flex()\n    width 100%\n    padding 30px 0 0\n</style>\n","\nimport { defineComponent, ref } from \"vue\";\nimport FabricCardSelectable from \"@/components/FabricCardSelectable.vue\";\nimport {\n  FabricCardSelectableEmit,\n  FabricResult,\n  FabricsParams,\n  FabricsResponse\n} from \"@/typings/fabric\";\nimport { getFabrics } from \"@/apis/fabric\";\nimport { postStageMediaCreate } from \"@/apis/project\";\nimport { StageMediaParams } from \"@/typings/project\";\n\nconst Component = defineComponent({\n  name: \"CreateDialog\",\n  components: {\n    FabricCardSelectable\n  },\n  setup(_, { emit }) {\n    const visible = ref(false);\n    const projectId = ref(0);\n    const stageId = ref(0);\n    const selectValue = ref<number[]>([]);\n    const pageCount = ref(0);\n    const page = ref(1);\n\n    const fabricOptions = ref<FabricsResponse | null>(null);\n\n    const init = async () => {\n      const params: FabricsParams = {\n        to_project: projectId.value,\n        page: page.value\n      };\n      const { data } = await getFabrics(params);\n      fabricOptions.value = data;\n      pageCount.value = data.total_pages;\n    };\n\n    const open = async (data: { stageId: number; projectId: number }) => {\n      projectId.value = data.projectId;\n      stageId.value = data.stageId;\n      visible.value = true;\n      await init();\n    };\n\n    const onFabricSelect = (data: FabricCardSelectableEmit) => {\n      if (data.selected) {\n        selectValue.value = selectValue.value.filter(\n          (selectedId: number) => selectedId !== data.id\n        );\n      } else {\n        selectValue.value = selectValue.value.concat(data.id);\n      }\n    };\n\n    const onConfirm = async () => {\n      if (!fabricOptions.value) return;\n\n      selectValue.value.forEach(async (selectedId: number) => {\n        const target = fabricOptions.value!.results.find(\n          (it: FabricResult) => it.id === selectedId\n        );\n        if (!target) return;\n        const params: StageMediaParams = {\n          stage: stageId.value,\n          demo_fabric: target.id\n        };\n        await postStageMediaCreate(params);\n      });\n\n      emit(\"load\");\n      visible.value = false;\n    };\n\n    const onPaginationChange = async (_page: number) => {\n      page.value = _page;\n      await init();\n    };\n\n    return {\n      visible,\n      selectValue,\n      fabricOptions,\n      page,\n      pageCount,\n\n      open,\n      onConfirm,\n      onFabricSelect,\n      onPaginationChange\n    };\n  }\n});\n\nexport default Component;\n","import { render } from \"./StageFabricsDuplicateDialog.vue?vue&type=template&id=2dd2201c&scoped=true\"\nimport script from \"./StageFabricsDuplicateDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./StageFabricsDuplicateDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./StageFabricsDuplicateDialog.vue?vue&type=style&index=0&id=2dd2201c&scoped=true&lang=stylus\"\nscript.render = render\nscript.__scopeId = \"data-v-2dd2201c\"\n\nexport default script","<template>\n  <div id=\"project-stage-fabrics-duplicate-dialog-component\">\n    <el-dialog title=\"Fabric\" v-model=\"visible\" width=\"500px\" top=\"45px\">\n      <div class=\"fabric-images-container\">\n        <div class=\"main-image-container\">\n          <div class=\"main-image\">\n            <FabricImageWith3DMode\n              :image=\"formatImageUrl(mainFile)\"\n            ></FabricImageWith3DMode>\n          </div>\n        </div>\n        <el-carousel\n          height=\"150px\"\n          :autoplay=\"false\"\n          arrow=\"always\"\n          indicator-position=\"none\"\n        >\n          <el-carousel-item\n            v-for=\"(item, index) in _.splitEvery(3, list)\"\n            :key=\"index\"\n          >\n            <div class=\"carouse-item\">\n              <img\n                v-for=\"(_item, _index) in item\"\n                :key=\"_index\"\n                class=\"secondary-image\"\n                :class=\"{ active: _item.id === selectedId }\"\n                :src=\"formatImageUrl(_item.image_url) + '@250-250'\"\n                :alt=\"_item.name\"\n                @click=\"onCarouseItemClick(_item.id)\"\n              />\n            </div>\n          </el-carousel-item>\n        </el-carousel>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, ref, computed } from \"vue\";\nimport * as _ from \"ramda\";\n\nimport FabricImageWith3DMode from \"@/components/FabricImageWith3DMode.vue\";\nimport { Attachment, Stage } from \"@/typings/project\";\nimport { formatImageUrl } from \"@/utils\";\n\nconst Component = defineComponent({\n  name: \"StageFabricsDialog\",\n  components: {\n    FabricImageWith3DMode\n  },\n  setup() {\n    const visible = ref(false);\n    const selectedId = ref(0);\n    const mainFile = ref(\"\");\n    const list = ref<Attachment[]>([]);\n\n    const open = async (data: Stage) => {\n      list.value = data.stagemedias;\n      if (list.value.length) {\n        selectedId.value = list.value[0].id;\n        mainFile.value = list.value[0].image_url;\n      }\n      visible.value = true;\n    };\n\n    const onCarouseItemClick = (id: number) => {\n      selectedId.value = id;\n      const target = list.value.find((it: Attachment) => it.id === id);\n      if (target) {\n        mainFile.value = target.image_url;\n      } else {\n        mainFile.value = \"\";\n      }\n    };\n\n    return {\n      list,\n      visible,\n      mainFile,\n      selectedId,\n\n      open,\n      onCarouseItemClick,\n\n      formatImageUrl,\n      _\n    };\n  }\n});\n\nexport default Component;\n</script>\n\n<style scoped lang=\"stylus\">\n#project-stage-fabrics-duplicate-dialog-component\n  .fabric-images-container\n    .main-image-container\n      position relative\n      width 100%\n      padding-bottom 100%\n      margin-bottom 20px\n      .main-image\n        position absolute\n        top 0\n        right 0\n        bottom 0\n        left 0\n    .carouse-item\n      margin 0\n      height 150px\n      flex(flex-start)\n      img\n        cursor pointer\n\n    .secondary-image\n      width 30%\n      height 120px\n      margin 0 1.5%\n    .active\n      border 2px solid $color-active\n\n  :deep() .el-carousel\n    padding 0 25px\n\n  :deep() .carouse-item\n    margin 0 40px\n\n  :deep() .el-carousel__arrow\n    background transparent\n    color black\n    font-size $font-size-title\n    font-weight 900\n\n  :deep() .el-carousel__arrow--right\n    right -30px\n\n  :deep() .el-carousel__arrow--left\n    left -30px\n\n  :deep() .el-dialog__header\n    .title\n      font-size $font-size-title\n      padding-bottom 10px\n    .description\n      font-size $font-size-lg3x\n</style>\n","\nimport { defineComponent, ref, computed } from \"vue\";\nimport * as _ from \"ramda\";\n\nimport FabricImageWith3DMode from \"@/components/FabricImageWith3DMode.vue\";\nimport { Attachment, Stage } from \"@/typings/project\";\nimport { formatImageUrl } from \"@/utils\";\n\nconst Component = defineComponent({\n  name: \"StageFabricsDialog\",\n  components: {\n    FabricImageWith3DMode\n  },\n  setup() {\n    const visible = ref(false);\n    const selectedId = ref(0);\n    const mainFile = ref(\"\");\n    const list = ref<Attachment[]>([]);\n\n    const open = async (data: Stage) => {\n      list.value = data.stagemedias;\n      if (list.value.length) {\n        selectedId.value = list.value[0].id;\n        mainFile.value = list.value[0].image_url;\n      }\n      visible.value = true;\n    };\n\n    const onCarouseItemClick = (id: number) => {\n      selectedId.value = id;\n      const target = list.value.find((it: Attachment) => it.id === id);\n      if (target) {\n        mainFile.value = target.image_url;\n      } else {\n        mainFile.value = \"\";\n      }\n    };\n\n    return {\n      list,\n      visible,\n      mainFile,\n      selectedId,\n\n      open,\n      onCarouseItemClick,\n\n      formatImageUrl,\n      _\n    };\n  }\n});\n\nexport default Component;\n","import { render } from \"./StageFabricsDialog.vue?vue&type=template&id=4c875014&scoped=true\"\nimport script from \"./StageFabricsDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./StageFabricsDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./StageFabricsDialog.vue?vue&type=style&index=0&id=4c875014&scoped=true&lang=stylus\"\nscript.render = render\nscript.__scopeId = \"data-v-4c875014\"\n\nexport default script","\nimport { defineComponent, ref, PropType, toRefs } from \"vue\";\nimport * as _ from \"ramda\";\n\nimport StageFabricsDuplicateDialog from \"./StageFabricsDuplicateDialog.vue\";\nimport StageFabricsDialog from \"./StageFabricsDialog.vue\";\nimport { Stage, StageMediaParams } from \"@/typings/project\";\nimport { postStageMediaCreate } from \"@/apis/project\";\nimport { formatImageUrl } from \"@/utils\";\nimport { iCreateDialog } from \"@/typings/component\";\n\nconst Component = defineComponent({\n  name: \"StageFabrics\",\n  components: { StageFabricsDuplicateDialog, StageFabricsDialog },\n  props: {\n    projectId: {\n      type: Number,\n      default: 0\n    },\n    stageData: {\n      type: Object as PropType<Stage>,\n      default: null\n    },\n    fabricId: {\n      type: Number,\n      default: 0\n    }\n  },\n  setup(props, { emit }) {\n    const uploadDialog = ref<iCreateDialog | null>(null);\n    const fabricDialog = ref<iCreateDialog | null>(null);\n    const { stageData, projectId } = toRefs(props);\n    const list = ref([]);\n\n    const onReference = () => {\n      if (!uploadDialog.value) return;\n      uploadDialog.value.open({\n        stageId: stageData.value.id,\n        projectId: projectId.value\n      });\n    };\n\n    const onUpload = () => {\n      const element = document.createElement(\"input\");\n      element.type = \"file\";\n      element.accept = \"image/*\";\n      element.multiple = true;\n      element.addEventListener(\"change\", async () => {\n        if (element.files && stageData.value) {\n          for (let i = 0; i < element.files.length; i++) {\n            const params: StageMediaParams = {\n              stage: stageData.value.id,\n              file: element.files[i]\n            };\n            await postStageMediaCreate(params);\n          }\n          emit(\"load\");\n        }\n      });\n      element.click();\n    };\n\n    const onExpand = () => {\n      if (!fabricDialog.value) return;\n      fabricDialog.value.open(stageData.value);\n    };\n\n    const onLoad = () => {\n      emit(\"load\");\n    };\n\n    return {\n      uploadDialog,\n      fabricDialog,\n      list,\n\n      onReference,\n      onUpload,\n      onExpand,\n      onLoad,\n\n      _,\n      formatImageUrl\n    };\n  }\n});\n\nexport default Component;\n","import { render } from \"./StageFabrics.vue?vue&type=template&id=64eb0c4e&scoped=true\"\nimport script from \"./StageFabrics.vue?vue&type=script&lang=ts\"\nexport * from \"./StageFabrics.vue?vue&type=script&lang=ts\"\n\nimport \"./StageFabrics.vue?vue&type=style&index=0&id=64eb0c4e&scoped=true&lang=stylus\"\nscript.render = render\nscript.__scopeId = \"data-v-64eb0c4e\"\n\nexport default script","<template>\n  <div id=\"project-users-dialog-component\">\n    <el-dialog title=\"Manage Users\" v-model=\"visible\" width=\"40%\" top=\"45px\">\n      <div class=\"inputs-container\">\n        <div class=\"select-item flex\">\n          <p>Owner: {{ owner }}</p>\n        </div>\n        <div v-if=\"canChange\" class=\"select-item\">\n          <p>Add Users:</p>\n          <el-select v-model=\"selectValue\" filterable placeholder=\"Select\">\n            <el-option\n              v-for=\"item in options\"\n              :key=\"item.value\"\n              :label=\"item.label\"\n              :value=\"item.value\"\n              :disabled=\"item.checked\"\n            >\n            </el-option>\n          </el-select>\n        </div>\n        <div class=\"tag-container\" v-if=\"tags.length\">\n          <p>Users:</p>\n          <FilterTag\n            v-for=\"tag in tags\"\n            :key=\"tag.value\"\n            :data=\"tag.label\"\n            :closable=\"canChange\"\n            @close=\"onTagCloseClick(tag.value)\"\n          ></FilterTag>\n        </div>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, ref, computed, watch } from \"vue\";\n\nimport FilterTag from \"@/components/FilterTag.vue\";\nimport { OptionItem, OptionItemResponse } from \"@/typings/asideFilter\";\nimport { AvailableMember, JoinedMember, User } from \"@/typings/collection\";\nimport {\n  getProjectAvailableMember,\n  getProjectJoinedMembers,\n  postProjectJoinedMemberUpdate\n} from \"@/apis/project\";\nimport { Project, ProjectUpdateJoinedMemberParams } from \"@/typings/project\";\n\nconst Component = defineComponent({\n  name: \"UsersDialog\",\n  components: {\n    FilterTag\n  },\n  setup() {\n    const visible = ref(false);\n    const projectId = ref(0);\n    const owner = ref(\"\");\n    const canChange = ref(false);\n    const joinedMembers = ref<JoinedMember[]>([]);\n    const availableMembers = ref<AvailableMember[]>([]);\n    const selectValue = ref(\"\");\n    const lock = ref(false);\n\n    const tags = computed<OptionItemResponse[]>(() => {\n      return joinedMembers.value.reduce(\n        (list: OptionItemResponse[], company: JoinedMember) => {\n          const userList = company.users.reduce(\n            (_list: OptionItemResponse[], user: User) => {\n              const item: OptionItemResponse = {\n                label: company.company_name + \"-\" + user.username,\n                value: `${user.id}`\n              };\n              return [..._list, item];\n            },\n            []\n          );\n          return [...list, ...userList];\n        },\n        []\n      );\n    });\n\n    const options = computed<OptionItem[]>(() => {\n      return availableMembers.value.map((item: AvailableMember) => ({\n        label: item.username,\n        value: item.member_id,\n        checked: false\n      }));\n    });\n\n    const init = async () => {\n      if (canChange.value) {\n        const { data: availableResponse } = await getProjectAvailableMember({\n          id: projectId.value,\n          q: \"\"\n        });\n        availableMembers.value = availableResponse;\n      }\n\n      const { data: joinedResponse } = await getProjectJoinedMembers(\n        projectId.value\n      );\n      joinedMembers.value = joinedResponse;\n    };\n\n    watch(selectValue, async id => {\n      if (!id || typeof id !== \"number\") return;\n      const params: ProjectUpdateJoinedMemberParams = {\n        id: projectId.value,\n        joined_member: id\n      };\n      await postProjectJoinedMemberUpdate(params);\n      selectValue.value = \"\";\n      await init();\n    });\n\n    const open = async (data: Project) => {\n      projectId.value = data.id;\n      owner.value = data.owner__nickname;\n      canChange.value = data.can_change_joined_members;\n      visible.value = true;\n      await init();\n    };\n\n    const onTagCloseClick = async (id: number) => {\n      if (lock.value) return;\n\n      lock.value = true;\n      try {\n        const params: ProjectUpdateJoinedMemberParams = {\n          id: projectId.value,\n          joined_member: id\n        };\n        await postProjectJoinedMemberUpdate(params);\n        await init();\n      } finally {\n        lock.value = false;\n      }\n    };\n\n    return {\n      tags,\n      options,\n      visible,\n      canChange,\n      selectValue,\n      owner,\n\n      open,\n      onTagCloseClick\n    };\n  }\n});\n\nexport default Component;\n</script>\n\n<style scoped lang=\"stylus\">\n#project-users-dialog-component\n  .select-item\n    margin-bottom 30px\n    p\n      margin 10px 0\n      font-size 16px\n      font-weight 600\n\n    :deep() .el-select\n      width 100%\n  .flex\n    padding-right 30px\n    flex(space-between)\n    .copy\n      cursor pointer\n      border-bottom 1px solid $color-secondary\n  .tag-container\n    margin-top 20px\n    p\n      margin 10px 0\n      font-size 16px\n      font-weight 600\n</style>\n","\nimport { defineComponent, ref, computed, watch } from \"vue\";\n\nimport FilterTag from \"@/components/FilterTag.vue\";\nimport { OptionItem, OptionItemResponse } from \"@/typings/asideFilter\";\nimport { AvailableMember, JoinedMember, User } from \"@/typings/collection\";\nimport {\n  getProjectAvailableMember,\n  getProjectJoinedMembers,\n  postProjectJoinedMemberUpdate\n} from \"@/apis/project\";\nimport { Project, ProjectUpdateJoinedMemberParams } from \"@/typings/project\";\n\nconst Component = defineComponent({\n  name: \"UsersDialog\",\n  components: {\n    FilterTag\n  },\n  setup() {\n    const visible = ref(false);\n    const projectId = ref(0);\n    const owner = ref(\"\");\n    const canChange = ref(false);\n    const joinedMembers = ref<JoinedMember[]>([]);\n    const availableMembers = ref<AvailableMember[]>([]);\n    const selectValue = ref(\"\");\n    const lock = ref(false);\n\n    const tags = computed<OptionItemResponse[]>(() => {\n      return joinedMembers.value.reduce(\n        (list: OptionItemResponse[], company: JoinedMember) => {\n          const userList = company.users.reduce(\n            (_list: OptionItemResponse[], user: User) => {\n              const item: OptionItemResponse = {\n                label: company.company_name + \"-\" + user.username,\n                value: `${user.id}`\n              };\n              return [..._list, item];\n            },\n            []\n          );\n          return [...list, ...userList];\n        },\n        []\n      );\n    });\n\n    const options = computed<OptionItem[]>(() => {\n      return availableMembers.value.map((item: AvailableMember) => ({\n        label: item.username,\n        value: item.member_id,\n        checked: false\n      }));\n    });\n\n    const init = async () => {\n      if (canChange.value) {\n        const { data: availableResponse } = await getProjectAvailableMember({\n          id: projectId.value,\n          q: \"\"\n        });\n        availableMembers.value = availableResponse;\n      }\n\n      const { data: joinedResponse } = await getProjectJoinedMembers(\n        projectId.value\n      );\n      joinedMembers.value = joinedResponse;\n    };\n\n    watch(selectValue, async id => {\n      if (!id || typeof id !== \"number\") return;\n      const params: ProjectUpdateJoinedMemberParams = {\n        id: projectId.value,\n        joined_member: id\n      };\n      await postProjectJoinedMemberUpdate(params);\n      selectValue.value = \"\";\n      await init();\n    });\n\n    const open = async (data: Project) => {\n      projectId.value = data.id;\n      owner.value = data.owner__nickname;\n      canChange.value = data.can_change_joined_members;\n      visible.value = true;\n      await init();\n    };\n\n    const onTagCloseClick = async (id: number) => {\n      if (lock.value) return;\n\n      lock.value = true;\n      try {\n        const params: ProjectUpdateJoinedMemberParams = {\n          id: projectId.value,\n          joined_member: id\n        };\n        await postProjectJoinedMemberUpdate(params);\n        await init();\n      } finally {\n        lock.value = false;\n      }\n    };\n\n    return {\n      tags,\n      options,\n      visible,\n      canChange,\n      selectValue,\n      owner,\n\n      open,\n      onTagCloseClick\n    };\n  }\n});\n\nexport default Component;\n","import { render } from \"./UsersDialog.vue?vue&type=template&id=ac59c5ee&scoped=true\"\nimport script from \"./UsersDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./UsersDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./UsersDialog.vue?vue&type=style&index=0&id=ac59c5ee&scoped=true&lang=stylus\"\nscript.render = render\nscript.__scopeId = \"data-v-ac59c5ee\"\n\nexport default script","<template>\n  <div id=\"create-stage-dialog-component\">\n    <el-dialog title=\"Add Stage\" v-model=\"visible\" width=\"50%\" top=\"45px\">\n      <div class=\"input-name-wrapper\">\n        <el-select\n          class=\"select\"\n          popper-class=\"select-popper\"\n          v-model=\"form.side\"\n        >\n          <el-option\n            v-for=\"item in sideOptions\"\n            :key=\"item.value\"\n            :label=\"item.label\"\n            :value=\"item.value\"\n          ></el-option>\n        </el-select>\n        <el-autocomplete\n          class=\"input\"\n          v-model=\"form.name\"\n          :fetch-suggestions=\"onQuerySearch\"\n          placeholder=\"Stage name...\"\n        ></el-autocomplete>\n      </div>\n\n      <div class=\"price-wrapper\">\n        <label>\n          Price:\n        </label>\n        <el-input\n          class=\"input\"\n          v-model=\"form.price\"\n          placeholder=\"Stage price...\"\n          type=\"number\"\n        ></el-input>\n      </div>\n\n      <div class=\"textarea-wrapper\">\n        <el-input\n          type=\"textarea\"\n          placeholder=\"Stage description...\"\n          v-model=\"form.description\"\n          :rows=\"10\"\n        ></el-input>\n        <div class=\"upload-wrapper\">\n          <font-awesome-icon\n            class=\"paperclip\"\n            :icon=\"['fas', 'paperclip']\"\n            @click=\"onUploadClick\"\n          ></font-awesome-icon>\n          <div v-if=\"filesStore\" class=\"count\">\n            {{ filesStore.length }}\n          </div>\n        </div>\n      </div>\n\n      <div class=\"bottom-wrapper\">\n        <font-awesome-icon\n          class=\"alert-icon\"\n          :icon=\"['fas', 'info-circle']\"\n        ></font-awesome-icon>\n        <p class=\"alert-text\">Cannot edit after adding stage</p>\n        <el-button type=\"info\" @click=\"onDoneClick\">Add Stage</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, ref, reactive, watch } from \"vue\";\nimport { Project, StageCreateInputs } from \"@/typings/project\";\nimport { OptionItem } from \"@/typings/asideFilter\";\nimport { getStagenames, postCreateStage } from \"@/apis/project\";\n\nconst Component = defineComponent({\n  name: \"CreateStageDialog\",\n  setup(_, { emit }) {\n    const visible = ref(false);\n    const sideOptions = ref<OptionItem[]>([]);\n    const filesStore = ref<FileList | null>(null);\n    const options = ref<string[]>([]);\n    const form = reactive<StageCreateInputs>({\n      name: \"\",\n      description: \"\",\n      project: -1,\n      side: -1,\n      price: 0\n    });\n\n    const fetchOptions = async () => {\n      const { data } = await getStagenames(form.project, form.side);\n      options.value = data;\n    };\n\n    const open = async (data: Project) => {\n      form.name = \"\";\n      form.description = \"\";\n      form.project = data.id;\n      form.side = data.company.supplier.id;\n      form.price = 0;\n      filesStore.value = null;\n\n      sideOptions.value = [\n        {\n          label: data.company.supplier.name,\n          value: data.company.supplier.id,\n          checked: false\n        },\n        {\n          label: data.company.buyer.name,\n          value: data.company.buyer.id,\n          checked: false\n        }\n      ];\n\n      visible.value = true;\n    };\n\n    const createFilter = (queryString: string) => {\n      return (option: string) => {\n        return option.toLowerCase().indexOf(queryString.toLowerCase()) === 0;\n      };\n    };\n\n    watch(() => form.side, fetchOptions);\n\n    const onQuerySearch = async (queryString: string, cb: Function) => {\n      const results = queryString\n        ? options.value.filter(createFilter(queryString))\n        : options.value;\n      cb(results.map((text: string) => ({ value: text })));\n    };\n\n    const onUploadClick = () => {\n      const element = document.createElement(\"input\");\n      element.type = \"file\";\n      element.accept = \"image/*\";\n      element.multiple = true;\n      element.addEventListener(\"change\", async () => {\n        if (element.files) {\n          filesStore.value = element.files;\n        }\n      });\n      element.click();\n    };\n\n    const onDoneClick = async () => {\n      if (filesStore.value) {\n        form.files = filesStore.value;\n      }\n      visible.value = false;\n      await postCreateStage(form);\n      emit(\"load\");\n    };\n\n    return {\n      visible,\n      form,\n      sideOptions,\n      filesStore,\n\n      open,\n      onQuerySearch,\n      onUploadClick,\n      onDoneClick\n    };\n  }\n});\n\nexport default Component;\n</script>\n\n<style scoped lang=\"stylus\">\n#create-stage-dialog-component\n  .input-name-wrapper\n    margin-left -10px\n    flex()\n    .select\n      width 30%\n      transform translateX(10px)\n      z-index 9\n      :deep() .el-input__inner\n        background $color-button-gray\n        border $color-button-gray\n        color white\n        height 50px\n      :deep() .el-select__caret\n        height 50px\n  .price-wrapper\n    flex()\n    margin-top 15px\n    label\n      padding-left 15px\n      width calc(30% - 20px)\n      font-size $font-size-lg3x\n      white-space nowrap\n\n  :deep() .el-autocomplete\n    border 3px solid $color-button-gray\n    border-radius 8px\n    width 100%\n    height 42px\n    .el-input__inner\n      height 42px\n      &:focus\n        border none\n\n  .textarea-wrapper\n    position relative\n    margin 20px 0\n\n    :deep() .el-textarea__inner\n      border 3px solid $color-button-gray\n      border-radius 8px\n      padding 15px\n\n    .upload-wrapper\n      position absolute\n      right 15px\n      bottom 15px\n      .paperclip\n        width 30px\n        height 30px\n        margin-left 15px\n        cursor pointer\n      .count\n        flex()\n        position absolute\n        right -10px\n        top -10px\n        border-radius 50%\n        width 18px\n        height 18px\n        font-size $font-size-normal\n        background $color-active\n        color white\n  .bottom-wrapper\n    flex(flex-end)\n    .alert-icon\n      font-size 15px\n      margin-right 10px\n    .alert-text\n      font-size $font-size-normal\n      line-height 15px\n      margin-right 15px\n</style>\n\n<style lang=\"stylus\">\n.select-popper\n  background $color-button-gray\n  border $color-button-gray !important\n  .el-popper__arrow::before\n    background $color-button-gray !important\n  .el-select-dropdown__item\n    background $color-button-gray\n    color white\n  .selected\n    color $color-active\n</style>\n","\nimport { defineComponent, ref, reactive, watch } from \"vue\";\nimport { Project, StageCreateInputs } from \"@/typings/project\";\nimport { OptionItem } from \"@/typings/asideFilter\";\nimport { getStagenames, postCreateStage } from \"@/apis/project\";\n\nconst Component = defineComponent({\n  name: \"CreateStageDialog\",\n  setup(_, { emit }) {\n    const visible = ref(false);\n    const sideOptions = ref<OptionItem[]>([]);\n    const filesStore = ref<FileList | null>(null);\n    const options = ref<string[]>([]);\n    const form = reactive<StageCreateInputs>({\n      name: \"\",\n      description: \"\",\n      project: -1,\n      side: -1,\n      price: 0\n    });\n\n    const fetchOptions = async () => {\n      const { data } = await getStagenames(form.project, form.side);\n      options.value = data;\n    };\n\n    const open = async (data: Project) => {\n      form.name = \"\";\n      form.description = \"\";\n      form.project = data.id;\n      form.side = data.company.supplier.id;\n      form.price = 0;\n      filesStore.value = null;\n\n      sideOptions.value = [\n        {\n          label: data.company.supplier.name,\n          value: data.company.supplier.id,\n          checked: false\n        },\n        {\n          label: data.company.buyer.name,\n          value: data.company.buyer.id,\n          checked: false\n        }\n      ];\n\n      visible.value = true;\n    };\n\n    const createFilter = (queryString: string) => {\n      return (option: string) => {\n        return option.toLowerCase().indexOf(queryString.toLowerCase()) === 0;\n      };\n    };\n\n    watch(() => form.side, fetchOptions);\n\n    const onQuerySearch = async (queryString: string, cb: Function) => {\n      const results = queryString\n        ? options.value.filter(createFilter(queryString))\n        : options.value;\n      cb(results.map((text: string) => ({ value: text })));\n    };\n\n    const onUploadClick = () => {\n      const element = document.createElement(\"input\");\n      element.type = \"file\";\n      element.accept = \"image/*\";\n      element.multiple = true;\n      element.addEventListener(\"change\", async () => {\n        if (element.files) {\n          filesStore.value = element.files;\n        }\n      });\n      element.click();\n    };\n\n    const onDoneClick = async () => {\n      if (filesStore.value) {\n        form.files = filesStore.value;\n      }\n      visible.value = false;\n      await postCreateStage(form);\n      emit(\"load\");\n    };\n\n    return {\n      visible,\n      form,\n      sideOptions,\n      filesStore,\n\n      open,\n      onQuerySearch,\n      onUploadClick,\n      onDoneClick\n    };\n  }\n});\n\nexport default Component;\n","import { render } from \"./CreateStageDialog.vue?vue&type=template&id=3173ea18&scoped=true\"\nimport script from \"./CreateStageDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./CreateStageDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./CreateStageDialog.vue?vue&type=style&index=0&id=3173ea18&scoped=true&lang=stylus\"\nimport \"./CreateStageDialog.vue?vue&type=style&index=1&id=3173ea18&lang=stylus\"\nscript.render = render\nscript.__scopeId = \"data-v-3173ea18\"\n\nexport default script","<template>\n  <div id=\"fabric-create-project-dialog-component\">\n    <el-dialog title=\"Edit Stage\" v-model=\"visible\" width=\"40%\" top=\"45px\">\n      <div class=\"inputs-container\">\n        <el-row :gutter=\"30\">\n          <el-col :span=\"24\">\n            <p class=\"label\">Name</p>\n            <el-autocomplete\n              class=\"input\"\n              v-model=\"form.name\"\n              :fetch-suggestions=\"onQuerySearch\"\n              placeholder=\"Stage name...\"\n            ></el-autocomplete>\n          </el-col>\n          <el-col :span=\"24\">\n            <p class=\"label\">Price</p>\n            <el-input v-model=\"form.price\" type=\"number\" clearable></el-input>\n          </el-col>\n          <el-col :span=\"24\">\n            <p class=\"label\">Description</p>\n            <el-input\n              type=\"textarea\"\n              placeholder=\"Stage description...\"\n              v-model=\"form.description\"\n              :rows=\"10\"\n            ></el-input>\n          </el-col>\n        </el-row>\n      </div>\n      <template #footer>\n        <span class=\"dialog-footer\">\n          <el-button type=\"info\" @click=\"visible = false\">Cancel</el-button>\n          <el-button type=\"success\" @click=\"onConfirm\">\n            Done\n          </el-button>\n        </span>\n      </template>\n    </el-dialog>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, ref, reactive } from \"vue\";\nimport { getStagenames, postUpdateStage } from \"@/apis/project\";\nimport { ProjectStage, StageUpdate, Project } from \"@/typings/project\";\n\nconst Component = defineComponent({\n  name: \"StageEditDialog\",\n  setup(_, { emit }) {\n    const visible = ref(false);\n    const stagenameOptions = ref<string[]>([]);\n\n    const form = reactive<StageUpdate>({\n      id: -1,\n      name: \"\",\n      price: 0,\n      description: \"\"\n    });\n\n    const fetchOptions = async (project: Project) => {\n      const { data } = await getStagenames(\n        project.id,\n        project.company.supplier.id\n      );\n      stagenameOptions.value = data;\n    };\n\n    const open = async ({\n      project,\n      stage\n    }: {\n      project: Project;\n      stage: ProjectStage;\n    }) => {\n      visible.value = true;\n      form.id = stage.id;\n      form.name = stage.name;\n      form.price = stage.price;\n      form.description = stage.description;\n\n      await fetchOptions(project);\n    };\n\n    const createFilter = (queryString: string) => {\n      return (option: string) => {\n        return option.toLowerCase().indexOf(queryString.toLowerCase()) === 0;\n      };\n    };\n\n    const onQuerySearch = async (queryString: string, cb: Function) => {\n      const results = queryString\n        ? stagenameOptions.value.filter(createFilter(queryString))\n        : stagenameOptions.value;\n      cb(results.map((text: string) => ({ value: text })));\n    };\n\n    const onConfirm = async () => {\n      await postUpdateStage(form);\n      visible.value = false;\n      emit(\"load\");\n    };\n\n    return {\n      form,\n      visible,\n      stagenameOptions,\n\n      open,\n      onQuerySearch,\n      onConfirm\n    };\n  }\n});\n\nexport default Component;\n</script>\n\n<style scoped lang=\"stylus\">\n#fabric-create-project-dialog-component\n  .inputs-container\n    padding 0 10%\n    .label\n      text-align start\n      font-size $font-size-large\n      font-weight 500\n      padding 0 8px\n      margin-bottom 15px\n\n    :deep() .el-col\n      margin-bottom 30px\n\n    :deep() .el-input\n      width 100%\n\n    :deep() .el-select\n      width 100%\n</style>\n","\nimport { defineComponent, ref, reactive } from \"vue\";\nimport { getStagenames, postUpdateStage } from \"@/apis/project\";\nimport { ProjectStage, StageUpdate, Project } from \"@/typings/project\";\n\nconst Component = defineComponent({\n  name: \"StageEditDialog\",\n  setup(_, { emit }) {\n    const visible = ref(false);\n    const stagenameOptions = ref<string[]>([]);\n\n    const form = reactive<StageUpdate>({\n      id: -1,\n      name: \"\",\n      price: 0,\n      description: \"\"\n    });\n\n    const fetchOptions = async (project: Project) => {\n      const { data } = await getStagenames(\n        project.id,\n        project.company.supplier.id\n      );\n      stagenameOptions.value = data;\n    };\n\n    const open = async ({\n      project,\n      stage\n    }: {\n      project: Project;\n      stage: ProjectStage;\n    }) => {\n      visible.value = true;\n      form.id = stage.id;\n      form.name = stage.name;\n      form.price = stage.price;\n      form.description = stage.description;\n\n      await fetchOptions(project);\n    };\n\n    const createFilter = (queryString: string) => {\n      return (option: string) => {\n        return option.toLowerCase().indexOf(queryString.toLowerCase()) === 0;\n      };\n    };\n\n    const onQuerySearch = async (queryString: string, cb: Function) => {\n      const results = queryString\n        ? stagenameOptions.value.filter(createFilter(queryString))\n        : stagenameOptions.value;\n      cb(results.map((text: string) => ({ value: text })));\n    };\n\n    const onConfirm = async () => {\n      await postUpdateStage(form);\n      visible.value = false;\n      emit(\"load\");\n    };\n\n    return {\n      form,\n      visible,\n      stagenameOptions,\n\n      open,\n      onQuerySearch,\n      onConfirm\n    };\n  }\n});\n\nexport default Component;\n","import { render } from \"./StageEditDialog.vue?vue&type=template&id=cbff4862&scoped=true\"\nimport script from \"./StageEditDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./StageEditDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./StageEditDialog.vue?vue&type=style&index=0&id=cbff4862&scoped=true&lang=stylus\"\nscript.render = render\nscript.__scopeId = \"data-v-cbff4862\"\n\nexport default script","<template>\n  <el-dialog\n    custom-class=\"inform-dialog-component\"\n    v-model=\"visible\"\n    :width=\"step === 1 ? '400px' : '900px'\"\n    top=\"45px\"\n  >\n    <h2>{{ title }}</h2>\n    <template v-if=\"step === 1\">\n      <div class=\"buttons-wrapper\">\n        <el-button class=\"button\" type=\"success\" @click=\"onConfirm\">\n          Confirm\n        </el-button>\n        <el-button class=\"button\" type=\"info\" @click=\"visible = false\">\n          Cancel\n        </el-button>\n      </div>\n    </template>\n    <template v-if=\"step === 2\">\n      <div class=\"item-container\">\n        <label>Brand:</label>\n        <p>{{ project.company.buyer.name }}</p>\n      </div>\n      <div class=\"item-container\">\n        <label>Email:</label>\n        <div class=\"email-tags-wrapper\">\n          <FilterTag\n            v-for=\"(member, index) in members\"\n            :key=\"index\"\n            :data=\"`${member.username} <${member.email}>`\"\n            :closable=\"true\"\n            @close=\"onTagCloseClick(member.email)\"\n          ></FilterTag>\n        </div>\n      </div>\n      <div class=\"item-container\">\n        <label>Email Subject:</label>\n        <el-input v-model=\"subjectValue\" clearable> </el-input>\n      </div>\n      <div class=\"textarea-container\">\n        <label>Text:</label>\n        <el-input\n          type=\"textarea\"\n          rows=\"5\"\n          v-model=\"textValue\"\n          placeholder=\"Text...\"\n        >\n        </el-input>\n      </div>\n      <div class=\"buttons-wrapper\">\n        <el-button class=\"button\" type=\"success\" @click=\"onSend\">\n          Send\n        </el-button>\n        <el-button class=\"button\" type=\"info\" @click=\"visible = false\">\n          Cancel\n        </el-button>\n      </div>\n    </template>\n  </el-dialog>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, ref } from \"vue\";\nimport { Project } from \"@/typings/project\";\nimport FilterTag from \"@/components/FilterTag.vue\";\nimport { postInform, getInform } from \"@/apis/project\";\nimport { ElNotification } from \"element-plus\";\n\nconst Component = defineComponent({\n  name: \"InformDialog\",\n  components: {\n    FilterTag\n  },\n  setup(_) {\n    const visible = ref(false);\n    const step = ref(1);\n    const project = ref<Project | null>(null);\n    const projectId = ref(0);\n    const title = ref(\"\");\n    const members = ref<{ username: string; email: string }[]>([]);\n    const subjectValue = ref(\"\");\n    const textValue = ref(\"\");\n\n    function getTarget(data: Project): string {\n      const { side, company } = data;\n      const { buyer, supplier } = company;\n      if (buyer.id === side) return supplier.name;\n      if (supplier.id === side) return buyer.name;\n      return \"unknown\";\n    }\n\n    const open = async (data: Project) => {\n      step.value = 1;\n      members.value = [];\n      project.value = data;\n      projectId.value = data.id;\n      title.value = `Inform ${getTarget(data)} ?`;\n      visible.value = true;\n    };\n\n    const onTagCloseClick = (email: string) => {\n      members.value = members.value.filter(\n        (member: { username: string; email: string }) => member.email !== email\n      );\n    };\n\n    const onConfirm = async () => {\n      try {\n        const { data } = await getInform(projectId.value);\n        members.value = data.members;\n        title.value = `Inform Email`;\n        const projectName = project.value ? project.value.name : \"unknown\";\n        subjectValue.value = `Informed of a new established status of ${projectName}.`;\n        textValue.value = `${data.sender.username} has informed you of a new established status of project ${projectName}.\\nTo check the project, visit https://weaverbird.bilabasia.com/web, and take necessary action.`;\n        step.value = 2;\n      } catch (e) {\n        visible.value = false;\n      }\n    };\n\n    const onSend = async () => {\n      try {\n        await postInform(\n          projectId.value,\n          subjectValue.value,\n          textValue.value,\n          members.value\n            .map((member: { username: string; email: string }) => member.email)\n            .filter((email: string | null) => !!email)\n        );\n        ElNotification({\n          title: \"Success\",\n          type: \"success\",\n          message: `Informed successfully`\n        });\n      } finally {\n        visible.value = false;\n      }\n    };\n\n    return {\n      visible,\n      step,\n      project,\n      title,\n      members,\n      subjectValue,\n      textValue,\n\n      open,\n      onTagCloseClick,\n      onConfirm,\n      onSend\n    };\n  }\n});\n\nexport default Component;\n</script>\n\n<style scoped lang=\"stylus\">\n.inform-dialog-component\n  h2\n    text-align center\n    font-weight 500\n\n  .checkbox-container\n    margin-top 30px\n    display flex\n    justify-content center\n    align-items center\n\n  .buttons-wrapper\n    padding 30px 0 0\n    flex()\n\n  .button\n    margin 0 15px\n    width 30%\n    height 40px\n\n  .item-container\n    flex(flex-start)\n    margin-top 15px\n    label\n      min-width 200px\n      font-size $font-size-lg2x\n      font-weight bold\n      margin-right 15px\n    p\n      font-size $font-size-lg2x\n      font-weight 500\n  .textarea-container\n    flex(flex-start, flex-start, column)\n    margin-top 15px\n    label\n      font-size $font-size-lg2x\n      font-weight bold\n      margin-bottom 15px\n    p\n      font-size $font-size-lg2x\n      font-weight 500\n</style>\n","\nimport { defineComponent, ref } from \"vue\";\nimport { Project } from \"@/typings/project\";\nimport FilterTag from \"@/components/FilterTag.vue\";\nimport { postInform, getInform } from \"@/apis/project\";\nimport { ElNotification } from \"element-plus\";\n\nconst Component = defineComponent({\n  name: \"InformDialog\",\n  components: {\n    FilterTag\n  },\n  setup(_) {\n    const visible = ref(false);\n    const step = ref(1);\n    const project = ref<Project | null>(null);\n    const projectId = ref(0);\n    const title = ref(\"\");\n    const members = ref<{ username: string; email: string }[]>([]);\n    const subjectValue = ref(\"\");\n    const textValue = ref(\"\");\n\n    function getTarget(data: Project): string {\n      const { side, company } = data;\n      const { buyer, supplier } = company;\n      if (buyer.id === side) return supplier.name;\n      if (supplier.id === side) return buyer.name;\n      return \"unknown\";\n    }\n\n    const open = async (data: Project) => {\n      step.value = 1;\n      members.value = [];\n      project.value = data;\n      projectId.value = data.id;\n      title.value = `Inform ${getTarget(data)} ?`;\n      visible.value = true;\n    };\n\n    const onTagCloseClick = (email: string) => {\n      members.value = members.value.filter(\n        (member: { username: string; email: string }) => member.email !== email\n      );\n    };\n\n    const onConfirm = async () => {\n      try {\n        const { data } = await getInform(projectId.value);\n        members.value = data.members;\n        title.value = `Inform Email`;\n        const projectName = project.value ? project.value.name : \"unknown\";\n        subjectValue.value = `Informed of a new established status of ${projectName}.`;\n        textValue.value = `${data.sender.username} has informed you of a new established status of project ${projectName}.\\nTo check the project, visit https://weaverbird.bilabasia.com/web, and take necessary action.`;\n        step.value = 2;\n      } catch (e) {\n        visible.value = false;\n      }\n    };\n\n    const onSend = async () => {\n      try {\n        await postInform(\n          projectId.value,\n          subjectValue.value,\n          textValue.value,\n          members.value\n            .map((member: { username: string; email: string }) => member.email)\n            .filter((email: string | null) => !!email)\n        );\n        ElNotification({\n          title: \"Success\",\n          type: \"success\",\n          message: `Informed successfully`\n        });\n      } finally {\n        visible.value = false;\n      }\n    };\n\n    return {\n      visible,\n      step,\n      project,\n      title,\n      members,\n      subjectValue,\n      textValue,\n\n      open,\n      onTagCloseClick,\n      onConfirm,\n      onSend\n    };\n  }\n});\n\nexport default Component;\n","import { render } from \"./InformDialog.vue?vue&type=template&id=0270001b&scoped=true\"\nimport script from \"./InformDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./InformDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./InformDialog.vue?vue&type=style&index=0&id=0270001b&scoped=true&lang=stylus\"\nscript.render = render\nscript.__scopeId = \"data-v-0270001b\"\n\nexport default script","<template>\n  <el-dialog\n    custom-class=\"end-dialog-component\"\n    v-model=\"visible\"\n    width=\"450px\"\n    top=\"45px\"\n    @closed=\"step = 1\"\n  >\n    <template v-if=\"step === 1\">\n      <h2>Is this project successfully?</h2>\n      <div class=\"buttons-wrapper\">\n        <el-button class=\"button\" type=\"info\" @click=\"step = 2\">\n          No\n        </el-button>\n        <el-button class=\"button\" type=\"info\" @click=\"onConfirm(true)\">\n          Yes\n        </el-button>\n      </div>\n    </template>\n    <template v-if=\"step === 2\">\n      <h2>Why did the project fail?</h2>\n      <el-input class=\"textarea\" type=\"textarea\" rows=\"6\" v-model=\"textValue\">\n      </el-input>\n      <div class=\"buttons-wrapper\">\n        <el-button class=\"button\" type=\"info\" @click=\"onConfirm(false)\">\n          Done\n        </el-button>\n      </div>\n    </template>\n  </el-dialog>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, ref } from \"vue\";\nimport { postProjectStatusUpdate } from \"@/apis/project\";\nimport { Project } from \"@/typings/project\";\nimport { ElNotification } from \"element-plus\";\nimport { useRouter } from \"vue-router\";\n\nconst Component = defineComponent({\n  name: \"EndDialog\",\n  setup(_, { emit }) {\n    const router = useRouter();\n    const visible = ref(false);\n    const textValue = ref(\"\");\n    const projectId = ref(0);\n    const step = ref(1);\n\n    const open = async (data: Project) => {\n      projectId.value = data.id;\n      visible.value = true;\n    };\n\n    const onConfirm = async (success: boolean) => {\n      const { data } = await postProjectStatusUpdate({\n        id: projectId.value,\n        success,\n        reason: success ? \"\" : textValue.value\n      });\n      ElNotification({\n        title: \"Success\",\n        type: \"success\",\n        message: `Change status to ${data.status}.`\n      });\n      emit(\"load\");\n      visible.value = false;\n      if (success) {\n        await router.push({ name: \"FabricUpload\" });\n      }\n    };\n\n    return {\n      visible,\n      textValue,\n      step,\n\n      open,\n      onConfirm\n    };\n  }\n});\n\nexport default Component;\n</script>\n\n<style scoped lang=\"stylus\">\n.end-dialog-component\n  h2\n    text-align center\n    font-weight 500\n\n  .textarea\n    width 340px\n    margin-top 30px\n\n  .buttons-wrapper\n    margin 0 auto\n    width 340px\n    padding 30px 0 0\n    flex(space-between)\n    flex-direction row-reverse\n\n  .button\n    width 30%\n    height 40px\n</style>\n\n<style lang=\"stylus\">\n.end-dialog-component\n  .el-dialog__body\n    flex(flex-start)\n    flex-direction column\n</style>\n","\nimport { defineComponent, ref } from \"vue\";\nimport { postProjectStatusUpdate } from \"@/apis/project\";\nimport { Project } from \"@/typings/project\";\nimport { ElNotification } from \"element-plus\";\nimport { useRouter } from \"vue-router\";\n\nconst Component = defineComponent({\n  name: \"EndDialog\",\n  setup(_, { emit }) {\n    const router = useRouter();\n    const visible = ref(false);\n    const textValue = ref(\"\");\n    const projectId = ref(0);\n    const step = ref(1);\n\n    const open = async (data: Project) => {\n      projectId.value = data.id;\n      visible.value = true;\n    };\n\n    const onConfirm = async (success: boolean) => {\n      const { data } = await postProjectStatusUpdate({\n        id: projectId.value,\n        success,\n        reason: success ? \"\" : textValue.value\n      });\n      ElNotification({\n        title: \"Success\",\n        type: \"success\",\n        message: `Change status to ${data.status}.`\n      });\n      emit(\"load\");\n      visible.value = false;\n      if (success) {\n        await router.push({ name: \"FabricUpload\" });\n      }\n    };\n\n    return {\n      visible,\n      textValue,\n      step,\n\n      open,\n      onConfirm\n    };\n  }\n});\n\nexport default Component;\n","import { render } from \"./EndDialog.vue?vue&type=template&id=49821e12&scoped=true\"\nimport script from \"./EndDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./EndDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./EndDialog.vue?vue&type=style&index=0&id=49821e12&scoped=true&lang=stylus\"\nimport \"./EndDialog.vue?vue&type=style&index=1&id=49821e12&lang=stylus\"\nscript.render = render\nscript.__scopeId = \"data-v-49821e12\"\n\nexport default script","\nimport { defineComponent, ref, onMounted, watch, toRefs, computed } from \"vue\";\nimport { useRouter } from \"vue-router\";\nimport dayjs from \"dayjs\";\n\nimport Timeline from \"./Timeline.vue\";\nimport StageFabrics from \"./StageFabrics.vue\";\nimport UsersDialog from \"./UsersDialog.vue\";\nimport CreateStageDialog from \"./CreateStageDialog.vue\";\nimport StageEditDialog from \"./StageEditDialog.vue\";\nimport InformDialog from \"./InformDialog.vue\";\nimport EndDialog from \"./EndDialog.vue\";\n\nimport { formatImageUrl, loading } from \"@/utils\";\nimport {\n  deleteDicussionFile,\n  getAvaliableOptions,\n  getProject,\n  getProjectStage,\n  postCreateDiscussion,\n  postDeleteDiscussion,\n  postEditDiscussion\n} from \"@/apis/project\";\nimport {\n  Attachment,\n  DiscussionInput,\n  Project,\n  ProjectStage,\n  Stage\n} from \"@/typings/project\";\nimport { FabricDetailResponse } from \"@/typings/fabric\";\nimport { getFabric } from \"@/apis/fabric\";\nimport { iCreateDialog } from \"@/typings/component\";\nimport { ElNotification } from \"element-plus\";\nimport { useStore } from \"vuex\";\nimport { PostNotificationReadByProject } from \"@/typings/store\";\n\nconst colors = [\"#5470c6\", \"#91cc76\", \"#f8c858\", \"#e66\"];\n\nconst getTagColor = (tag: string): string => {\n  const adapter: Adapter<string> = {\n    \"In Progress\": colors[0],\n    Completed: colors[1],\n    \"Completed but delayed\": colors[1],\n    Dropped: colors[3],\n    Delayed: colors[2],\n    default: \"\"\n  };\n  return adapter[tag] || adapter.default;\n};\n\nconst getHasButtons = (project: Project | null): boolean => {\n  if (!project) return false;\n  const adapter: Adapter<boolean> = {\n    \"In Progress\": true,\n    Completed: true,\n    \"Completed but delayed\": false,\n    Dropped: false,\n    Delayed: true,\n    default: false\n  };\n  return adapter[project.status] || adapter.default;\n};\n\nconst Component = defineComponent({\n  name: \"ProjectDetail\",\n  components: {\n    Timeline,\n    StageFabrics,\n    UsersDialog,\n    CreateStageDialog,\n    StageEditDialog,\n    InformDialog,\n    EndDialog\n  },\n  props: {\n    id: {\n      type: String,\n      default: \"\"\n    }\n  },\n  setup(props) {\n    const store = useStore();\n    const router = useRouter();\n    const { id } = toRefs(props);\n    const rightContainer = ref<iCreateDialog | null>(null)\n    const usersDialog = ref<iCreateDialog | null>(null);\n    const createStageDialog = ref<iCreateDialog | null>(null);\n    const editStageDialog = ref<iCreateDialog | null>(null);\n    const informDialog = ref<iCreateDialog | null>(null);\n    const endDialog = ref<iCreateDialog | null>(null);\n\n    const projectData = ref<Project | null>(null);\n    const projectStage = ref<ProjectStage | null>(null);\n    const fabricData = ref<FabricDetailResponse | null>(null);\n    const stageData = ref<Stage | null>(null);\n    const garmentFactories = ref<{ id: number; name: string }[] | null>(null);\n    const discussionValue = ref(\"\");\n    const editDiscussionId = ref(-1);\n    const isOpenInputDiscussion = ref(true);\n    const filesStore = ref<FileList | null>(null);\n    const newestId = ref(-1);\n\n    const hasButtons = computed(() => getHasButtons(projectData.value));\n\n    const getGarmentFactoryName = (id: number): string => {\n      if (!garmentFactories.value) return \"\";\n      const target = garmentFactories.value!.find(\n        (it: { id: number; name: string }) => it.id === id\n      );\n      return target ? target.name : \"\";\n    };\n\n    const fetchStageDetail = async (stage: ProjectStage) => {\n      projectStage.value = stage;\n      const { data } = await getProjectStage(stage.id);\n      stageData.value = data;\n      // @ts-ignore\n      rightContainer.value && (rightContainer.value.$el.scrollTop = 0)\n    };\n\n    const init = async () => {\n      const loadingInstance = loading();\n      try {\n        const { data: factories } = await getAvaliableOptions(\n          \"garment_factory\"\n        );\n        garmentFactories.value = factories.brands;\n        const { data } = await getProject(parseInt(id.value, 10));\n        projectData.value = data;\n        if (data.stages.length) {\n          const target = data.stages.sort((a, b) => b.id - a.id)[0];\n          newestId.value = target.id;\n          await fetchStageDetail(target);\n        }\n        if (data.start_fabric) {\n          const { data: fabricResponse } = await getFabric(data.start_fabric);\n          fabricData.value = fabricResponse;\n        }\n\n        // Set all notifications read.\n        await store.dispatch(\n          PostNotificationReadByProject,\n          parseInt(id.value, 10)\n        );\n      } catch (_) {\n        await router.replace({ name: \"Error\" });\n      } finally {\n        loadingInstance.close();\n      }\n    };\n\n    onMounted(init);\n    watch([id], init);\n\n    const onUsersClick = () => {\n      if (!usersDialog.value || !projectData.value) return;\n      usersDialog.value.open(projectData.value);\n    };\n\n    const onAddStageClick = () => {\n      if (!createStageDialog.value || !projectData.value) return;\n      if (!projectData.value.can_add_stage) {\n        return ElNotification({\n          type: \"warning\",\n          title: \"No permission\",\n          message: \"You have no permission to do this.\"\n        });\n      }\n      createStageDialog.value.open(projectData.value);\n    };\n    const onEditStageClick = () => {\n      if (!editStageDialog.value || !projectStage.value) return;\n      editStageDialog.value.open({\n        project: projectData.value,\n        stage: projectStage.value\n      });\n    };\n    const onInformClick = () => {\n      if (!informDialog.value || !projectData.value) return;\n      informDialog.value.open(projectData.value);\n    };\n    const onEndClick = () => {\n      if (!endDialog.value || !projectData.value) return;\n      endDialog.value.open(projectData.value);\n    };\n    const onStageClick = async (data: ProjectStage) => {\n      await fetchStageDetail(data);\n    };\n    const onNewline = () => {\n      discussionValue.value = `${discussionValue.value}\\n`;\n    };\n    const onDiscuss = async () => {\n      if (!discussionValue.value && !filesStore.value) return;\n\n      isOpenInputDiscussion.value = false;\n      try {\n        const params: DiscussionInput = {\n          project: parseInt(id.value, 10),\n          message: discussionValue.value\n        };\n        if (filesStore.value) params.files = filesStore.value;\n\n        // Reset\n        discussionValue.value = \"\";\n        filesStore.value = null;\n\n        await postCreateDiscussion(params);\n\n        // re-fetch\n        const { data } = await getProject(parseInt(id.value, 10));\n        projectData.value = data;\n      } finally {\n        isOpenInputDiscussion.value = true;\n      }\n    };\n    const onDiscussionEditClick = async (_id: number, message: string) => {\n      await postEditDiscussion(_id, message);\n      const { data } = await getProject(parseInt(id.value, 10));\n      projectData.value = data;\n      editDiscussionId.value = -1;\n    };\n    const onDiscussionDeleteClick = async (_id: number) => {\n      await postDeleteDiscussion(_id);\n      ElNotification({\n        type: \"success\",\n        title: \"Delete Discussion\",\n        message: \"Success delete discussion.\"\n      });\n      const { data } = await getProject(parseInt(id.value, 10));\n      projectData.value = data;\n    };\n    const onDiscussionFileDeleteClick = async (_id: number) => {\n      await deleteDicussionFile(_id);\n      ElNotification({\n        type: \"success\",\n        title: \"Delete File\",\n        message: \"Success delete file.\"\n      });\n      const { data } = await getProject(parseInt(id.value, 10));\n      projectData.value = data;\n    };\n    const onUploadClick = () => {\n      if (!projectStage.value) return;\n\n      const element = document.createElement(\"input\");\n      element.type = \"file\";\n      element.accept = \"image/*\";\n      element.multiple = true;\n      element.addEventListener(\"change\", async () => {\n        if (!projectStage.value) return;\n\n        if (element.files) {\n          filesStore.value = element.files;\n        }\n      });\n      element.click();\n    };\n\n    const onAttachmentDownload = (data: Attachment) => {\n      window.open(formatImageUrl(data.file));\n    };\n\n    const onLoad = async () => {\n      await init();\n    };\n\n    const onStageFabricsLoad = async () => {\n      if (!projectStage.value) return;\n      const { data } = await getProjectStage(projectStage.value.id);\n      stageData.value = data;\n    };\n\n    return {\n      rightContainer,\n      usersDialog,\n      createStageDialog,\n      editStageDialog,\n      informDialog,\n      endDialog,\n      projectData,\n      fabricData,\n      stageData,\n      garmentFactories,\n      discussionValue,\n      isOpenInputDiscussion,\n      filesStore,\n      projectStage,\n      newestId,\n      editDiscussionId,\n      hasButtons,\n\n      onUsersClick,\n      onAddStageClick,\n      onEditStageClick,\n      onInformClick,\n      onEndClick,\n      onStageClick,\n      onNewline,\n      onDiscuss,\n      onDiscussionEditClick,\n      onDiscussionDeleteClick,\n      onDiscussionFileDeleteClick,\n      onUploadClick,\n      onAttachmentDownload,\n      onLoad,\n      onStageFabricsLoad,\n\n      getTagColor,\n      getGarmentFactoryName,\n      dayjs\n    };\n  }\n});\n\nexport default Component;\n","import { render } from \"./ProjectDetail.vue?vue&type=template&id=43f62cba&scoped=true\"\nimport script from \"./ProjectDetail.vue?vue&type=script&lang=ts\"\nexport * from \"./ProjectDetail.vue?vue&type=script&lang=ts\"\n\nimport \"./ProjectDetail.vue?vue&type=style&index=0&id=43f62cba&scoped=true&lang=stylus\"\nimport \"./ProjectDetail.vue?vue&type=style&index=1&id=43f62cba&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-43f62cba\"\n\nexport default script","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./StageFabricsDialog.vue?vue&type=style&index=0&id=4c875014&scoped=true&lang=stylus\"","<template>\n  <el-tag\n    id=\"filter-tag-component\"\n    type=\"success\"\n    size=\"medium\"\n    :closable=\"closable\"\n    :disable-transitions=\"false\"\n    @close=\"onCloseTag\"\n  >\n    {{ data }}\n  </el-tag>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, toRefs } from \"vue\";\n\nconst Component = defineComponent({\n  name: \"FilterTag\",\n  props: {\n    data: {\n      type: String,\n      default: \"\"\n    },\n    closable: {\n      type: Boolean,\n      default: false\n    }\n  },\n  setup(props, context) {\n    const { data } = toRefs(props);\n\n    const onCloseTag = () => {\n      context.emit(\"close\", data.value);\n    };\n\n    return {\n      onCloseTag\n    };\n  }\n});\n\nexport default Component;\n</script>\n\n<style scoped lang=\"stylus\">\n#filter-tag-component\n  margin 0 15px 10px 0\n  background $color-tag-background\n  color $color-tag-text\n  padding 0 15px\n  height 40px\n  line-height 38px\n  font-size $font-size-large\n</style>\n","\nimport { defineComponent, toRefs } from \"vue\";\n\nconst Component = defineComponent({\n  name: \"FilterTag\",\n  props: {\n    data: {\n      type: String,\n      default: \"\"\n    },\n    closable: {\n      type: Boolean,\n      default: false\n    }\n  },\n  setup(props, context) {\n    const { data } = toRefs(props);\n\n    const onCloseTag = () => {\n      context.emit(\"close\", data.value);\n    };\n\n    return {\n      onCloseTag\n    };\n  }\n});\n\nexport default Component;\n","import { render } from \"./FilterTag.vue?vue&type=template&id=b8791da2&scoped=true\"\nimport script from \"./FilterTag.vue?vue&type=script&lang=ts\"\nexport * from \"./FilterTag.vue?vue&type=script&lang=ts\"\n\nimport \"./FilterTag.vue?vue&type=style&index=0&id=b8791da2&scoped=true&lang=stylus\"\nscript.render = render\nscript.__scopeId = \"data-v-b8791da2\"\n\nexport default script","var UA = require('../internals/engine-user-agent');\n\nmodule.exports = /MSIE|Trident/.test(UA);\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./StageFabrics.vue?vue&type=style&index=0&id=64eb0c4e&scoped=true&lang=stylus\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./EndDialog.vue?vue&type=style&index=1&id=49821e12&lang=stylus\""],"sourceRoot":""}