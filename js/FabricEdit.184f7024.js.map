{"version":3,"sources":["webpack:///./src/views/Fabric/FabricEdit.vue","webpack:///./src/views/Fabric/FabricEdit.vue?3d6b","webpack:///./src/views/Fabric/FabricEdit.vue?f850","webpack:///./src/apis/member.ts","webpack:///./src/views/Fabric/FabricEdit.vue?fec9","webpack:///./src/utils/fabric.ts","webpack:///./src/assets/images/icons/png/upload.png"],"names":["id","class","onPhotosUpload","src","iconUploadUrl","alt","photosBase64","base64","index","key","content","name","placement","effect","icon","onPhotoRemove","type","form","tg3d_fabric_id","video_urls","url","style","model-value","value","onVideoUrlChange","onVideoUrlAdd","sap_art_no","disabled","isSapArtNoDisabled","art_no","isArtNoDisabled","fetch-suggestions","onQuerySearch","toNameUpperCase","real_composition","onQuerySearchComposition","width","weight","status","statusOptions","item","label","exclusive_for","brandOptions","family_fabric_art_no","fabric_works_skus","tagType","options","tagTypeOptions","placeholder","fabricTypeValue","onQuerySearchFabricType","length","onSelectFabricType","tags","tag","closable","getTagType","parent_name","onTagClose","tag_name","visible","onCancel","onSave","top","onDelete","checked","Component","props","Number","default","setup","router","main_photo","photos","photos_with_id","storeMainPhoto","storePhotos","storePhotosWithId","fabricTypes","timeId","undefined","sapArtNoInputStatus","artNoInputStatus","mainPhotoBase64","nameList","compositionList","reader","FileReader","onload","e","target","result","readAsDataURL","i","concat","file","data","map","it","clearTimeout","setTimeout","valid","init","loadingInstance","detail","names","compositions","teams","media","tag_parent","parent","reduce","close","createFilter","queryString","option","toLowerCase","indexOf","types","obj","forEach","cb","results","filter","text","onMainPhotoUpload","element","document","createElement","accept","addEventListener","files","click","some","multiple","ary","title","message","push","back","params","getLastViewTimeString","render","__scopeId","getMembers","method","getMember","getMemberRoles","getMemberTeams","getMemberBusinessUnits","postMember","email","nickname","role","phone","active","business_unit","postMemberPassword","postMemberAvatar","FormData","append","JSON","stringify","postContactUs","splitRules","splitAry","split","letter","includes","_index","toUpperCase","join","removeEmptyChildren","children","findTagTypeItem","typeId","flatten","flattenList","find","module","exports"],"mappings":"kRACOA,GAAG,4B,GACDC,MAAM,Q,GACJA,MAAM,Q,0eAYJA,MAAM,mB,GAIJA,MAAM,U,GAkBVA,MAAM,Q,EACT,yBAAmC,KAAhCA,MAAM,SAAQ,kBAAc,G,EAO/B,yBAA8B,KAA3BA,MAAM,SAAQ,aAAS,G,GAkBvBA,MAAM,gB,GACJA,MAAM,Q,EACT,yBAA2C,KAAxCA,MAAM,SAAQ,0BAAsB,G,EAYzC,yBAAoB,KAAjBA,MAAM,MAAK,MAAE,G,GACXA,MAAM,Q,EACT,yBAAgC,KAA7BA,MAAM,SAAQ,eAAW,G,EAahC,yBAAwB,OAAnBA,MAAM,QAAM,S,GACZA,MAAM,Q,EACT,yBAAyD,KAAtDA,MAAM,SAAO,C,6BAAC,QAAI,yBAAgC,QAA1BA,MAAM,aAAY,O,MAQ1CA,MAAM,Q,EACT,yBAAqE,KAAlEA,MAAM,SAAO,C,6BAAC,oBAAgB,yBAAgC,QAA1BA,MAAM,aAAY,O,MAQtDA,MAAM,Q,EACT,yBAAiE,KAA9DA,MAAM,SAAO,C,6BAAC,gBAAY,yBAAgC,QAA1BA,MAAM,aAAY,O,MAChDA,MAAM,a,EAET,yBAAW,SAAR,QAAI,G,GAGNA,MAAM,Q,EACT,yBAAmE,KAAhEA,MAAM,SAAO,C,6BAAC,kBAAc,yBAAgC,QAA1BA,MAAM,aAAY,O,MAGpDA,MAAM,Q,EACT,yBAA2D,KAAxDA,MAAM,SAAO,C,6BAAC,UAAM,yBAAgC,QAA1BA,MAAM,aAAY,O,MAU5CA,MAAM,Q,EACT,yBAAuC,KAApCA,MAAM,SAAQ,sBAAkB,G,GAchCA,MAAM,Q,EACT,yBAEI,KAFDA,MAAM,SAAQ,mDAEjB,G,GAOGA,MAAM,Q,EACT,yBAEI,KAFDA,MAAM,SAAQ,qDAEjB,G,EAOF,yBAAwB,OAAnBA,MAAM,QAAM,S,GACZA,MAAM,Q,EACT,yBAAkC,KAA/BA,MAAM,SAAQ,iBAAa,G,GACzBA,MAAM,e,GAkBRA,MAAM,Q,EACT,yBAAyB,KAAtBA,MAAM,SAAQ,QAAI,G,GAChBA,MAAM,e,GAcRA,MAAM,oB,+BACwC,U,+BACR,U,+BACC,U,GAKxCA,MAAM,gB,GACLA,MAAM,yB,+BACkC,Y,+BAGK,Y,0jBAzNtD,yBA8NM,MA9NN,EA8NM,CA7NJ,yBAgNM,MAhNN,EAgNM,CA/MJ,yBAiCM,MAjCN,EAiCM,CAhCJ,EAWA,yBAoBM,MApBN,EAoBM,CAnBJ,yBAEM,OAFDA,MAAM,cAAe,QAAK,8BAAE,EAAAC,gBAAA,EAAAA,eAAA,sB,CAC/B,yBAAyC,OAAnCC,IAAK,EAAAC,cAAeC,IAAI,U,kBAEhC,yBAeM,MAfN,EAeM,E,2BAdJ,yBAaM,2CAZsB,EAAAC,cAAY,SAA9BC,EAAQC,G,gCADlB,yBAaM,OAXHC,IAAKD,EACNP,MAAM,S,CAEN,yBAEa,IAFAS,QAASH,EAAOI,KAAMC,UAAU,MAAMC,OAAO,S,YACxD,iBAA4C,CAA5C,yBAA4C,OAAtCV,IAAKI,EAAOJ,IAAME,IAAKE,EAAOI,M,iDAEtC,yBAIqB,IAHnBV,MAAM,OACLa,KAAM,CAAC,MAAO,gBACd,QAAK,mBAAE,EAAAC,cAAcP,K,qCAMhC,yBAyBM,MAzBN,EAyBM,CAxBJ,EACA,yBAIY,IAHVP,MAAM,QACNe,KAAK,O,WACI,EAAAC,KAAKC,e,qDAAL,EAAAD,KAAKC,eAAc,K,uBAG9B,G,2BACA,yBAQY,2CAPa,EAAAD,KAAKE,YAAU,SAA9BC,EAAKZ,G,gCADf,yBAQY,IANTC,IAAKD,EACNP,MAAM,QACLoB,MAAO,qBACRL,KAAK,OACJM,cAAaF,EACb,QAAO,SAAAG,GAAK,OAAI,EAAAC,iBAAiBhB,EAAOe,K,2CAG3C,yBAKM,OALDtB,MAAM,WAAY,QAAK,8BAAE,EAAAwB,eAAA,EAAAA,cAAA,sB,CAC5B,yBAGqB,IAFnBxB,MAAM,OACLa,KAAM,CAAC,MAAO,qBAIrB,yBA4BM,MA5BN,EA4BM,CA3BJ,yBAYM,MAZN,EAYM,CAXJ,EACA,yBASY,IARVb,MAAK,CAAC,QAAO,C,QACuC,IAAnB,sB,MAAmE,IAAnB,wBAIjFe,KAAK,O,WACI,EAAAC,KAAKS,W,qDAAL,EAAAT,KAAKS,WAAU,IACvBC,SAAU,EAAAC,oB,4CAGf,EACA,yBAYM,MAZN,EAYM,CAXJ,EACA,yBASY,IARV3B,MAAK,CAAC,QAAO,C,QACoC,IAAhB,mB,MAA6D,IAAhB,qBAI9Ee,KAAK,O,WACI,EAAAC,KAAKY,O,qDAAL,EAAAZ,KAAKY,OAAM,IACnBF,SAAU,EAAAG,iB,8CAIjB,EACA,yBAQM,MARN,EAQM,CAPJ,EACA,yBAKmB,IAJjB7B,MAAM,QACLqB,cAAa,EAAAL,KAAKN,KAClBoB,oBAAmB,EAAAC,cACnB,QAAK,YAAE,SAAAT,GAAK,OAAK,EAAAN,KAAKN,KAAO,EAAAsB,gBAAgBV,M,8CAGlD,yBAQM,MARN,EAQM,CAPJ,EACA,yBAKmB,IAJjBtB,MAAM,QACLqB,cAAa,EAAAL,KAAKiB,iBAClBH,oBAAmB,EAAAI,yBACnB,QAAK,YAAE,SAAAZ,GAAK,OAAK,EAAAN,KAAKiB,iBAAmB,EAAAD,gBAAgBV,M,8CAG9D,yBAMM,MANN,EAMM,CALJ,EACA,yBAGM,MAHN,EAGM,CAFJ,yBAAsE,IAA5DtB,MAAM,QAAQe,KAAK,S,WAAkB,EAAAC,KAAKmB,M,qDAAL,EAAAnB,KAAKmB,MAAK,K,uBACzD,MAGJ,yBAGM,MAHN,EAGM,CAFJ,EACA,yBAAuE,IAA7DnC,MAAM,QAAQe,KAAK,S,WAAkB,EAAAC,KAAKoB,O,qDAAL,EAAApB,KAAKoB,OAAM,K,yBAE5D,yBAUM,MAVN,EAUM,CATJ,EACA,yBAOY,IAPDpC,MAAM,Q,WAAiB,EAAAgB,KAAKqB,O,uDAAL,EAAArB,KAAKqB,OAAM,K,YAEzC,iBAAsC,E,2BADxC,yBAKa,2CAJa,EAAAC,eAAa,SAA7BC,EAAMhC,G,gCADhB,yBAKa,IAHVC,IAAKD,EACLiC,MAAOD,EAAKC,MACZlB,MAAOiB,EAAKjB,O,gEAInB,yBAcM,MAdN,EAcM,CAbJ,EACA,yBAWY,IAVTI,SAAqB,cAAX,EAAAV,KAAKqB,OAChBrC,MAAM,Q,WACG,EAAAgB,KAAKyB,c,uDAAL,EAAAzB,KAAKyB,cAAa,K,YAGzB,iBAAqC,E,2BADvC,yBAKa,2CAJa,EAAAC,cAAY,SAA5BH,EAAMhC,G,gCADhB,yBAKa,IAHVC,IAAKD,EACLiC,MAAOD,EAAKC,MACZlB,MAAOiB,EAAKjB,O,2EAInB,yBASM,MATN,EASM,CARJ,EAGA,yBAIY,IAHVtB,MAAM,QACNe,KAAK,O,WACI,EAAAC,KAAK2B,qB,uDAAL,EAAA3B,KAAK2B,qBAAoB,K,yBAGtC,yBASM,MATN,EASM,CARJ,EAGA,yBAIY,IAHV3C,MAAM,QACNe,KAAK,O,WACI,EAAAC,KAAK4B,kB,uDAAL,EAAA5B,KAAK4B,kBAAiB,K,yBAGnC,EACA,yBAmBM,MAnBN,EAmBM,CAlBJ,EACA,yBAQM,MARN,EAQM,CAPJ,yBAMc,IALZ5C,MAAM,Q,WACG,EAAA6C,Q,uDAAA,EAAAA,QAAO,IACfC,QAAS,EAAAC,eACVC,YAAY,e,mCAIhB,yBAOmB,IANjBhD,MAAM,Q,WACG,EAAAiD,gB,uDAAA,EAAAA,gBAAe,IACvBnB,oBAAmB,EAAAoB,wBACnBxB,UAAW,EAAAmB,QAAQM,OACnB,UAAO,wDAAQ,EAAAC,mBAAkB,OAAU,EAAAH,oBAAe,YAC1D,SAAQ,EAAAG,oB,mEAGb,yBAcM,MAdN,EAcM,CAbJ,EACA,yBAWM,MAXN,EAWM,E,2BAVJ,yBASS,2CARgB,EAAApC,KAAKqC,MAAI,SAAxBC,EAAK/C,G,gCADf,yBASS,IAPNC,IAAKD,EACNP,MAAM,MACNuD,SAAA,GACCxC,KAAM,EAAAyC,WAAWF,EAAIG,aACrB,QAAK,mBAAE,EAAAC,WAAWJ,K,YAEnB,iBAA0C,C,oEAApCA,EAAIG,Y,YAAeH,EAAIK,WAAQ,O,2CAK3C,yBAIM,MAJN,EAIM,CAHJ,yBAAmE,IAAxD5C,KAAK,SAAU,QAAK,iCAAE,EAAA6C,SAAO,K,YAAS,iBAAM,C,YACvD,yBAA2D,IAAhD7C,KAAK,OAAQ,QAAO,EAAA8C,U,YAAU,iBAAM,C,0BAC/C,yBAA4D,IAAjD9C,KAAK,UAAW,QAAO,EAAA+C,Q,YAAQ,iBAAM,C,8BAIpD,yBAUY,I,WAVQ,EAAAF,Q,uDAAA,EAAAA,QAAO,IAAEzB,MAAM,QAAQ4B,IAAI,Q,YAC7C,iBAAoD,CAApD,yBAAoD,KAApD,EAAyB,UAAO,6BAAG,EAAA/C,KAAKN,MAAI,GAC5C,yBAOM,MAPN,EAOM,CANJ,yBAEY,IAFDK,KAAK,SAAU,QAAO,EAAAiD,U,YAAU,iBAE3C,C,0BACA,yBAEY,IAFDjD,KAAK,OAAQ,QAAK,iCAAE,EAAA6C,SAAO,K,YAAU,iBAEhD,C,kOC5LFtB,GAA8B,CAClC,CAAEE,MAAO,SAAUlB,MAAO,SAAU2C,SAAS,GAC7C,CAAEzB,MAAO,UAAWlB,MAAO,UAAW2C,SAAS,GAC/C,CAAEzB,MAAO,oBAAqBlB,MAAO,YAAa2C,SAAS,IASvDC,GAAY,6BAAgB,CAChCxD,KAAM,aACNyD,MAAO,CACLpE,GAAI,CACFgB,KAAMqD,OACNC,QAAS,IAGbC,MARgC,SAQ1BH,GACJ,IAAMI,EAAS,kBACf,EAAe,oBAAOJ,GAAdpE,EAAR,EAAQA,GACFiB,EAAO,sBAAiC,CAC5CwD,WAAY,KACZC,OAAQ,GACRC,eAAgB,GAChBxD,WAAY,GACZD,eAAgB,GAChBQ,WAAY,GACZG,OAAQ,GACRlB,KAAM,GACNuB,iBAAkB,GAClBE,MAAO,EACPC,OAAQ,EACRC,OAAQ,SACRI,cAAe,KACfE,qBAAsB,GACtBC,kBAAmB,GACnBS,KAAM,KAEFO,EAAU,kBAAI,GACde,EAAiB,iBAAiB,MAClCC,EAAc,iBAAY,IAC1BC,EAAoB,iBAA0B,IAC9ChC,EAAU,iBAAc,IACxBI,EAAkB,iBAAI,IACtB6B,EAAc,iBAAc,IAC5BnD,EAAqB,kBAAI,GACzBE,EAAkB,kBAAI,GACtBkD,EAAS,sBAA+CC,GACxDC,EAAsB,iBAAI,GAC1BC,EAAmB,iBAAI,GAEvBC,EAAkB,iBAAI,IACtB9E,EAAe,iBAAc,IAC7B+E,EAAW,iBAAc,IACzBC,EAAkB,iBAAc,IAChC3C,EAAe,iBAAkB,IACjCK,EAAiB,iBAAkB,IAEzC,mBAAM,CAAC4B,IAAiB,WACtB,IAAKA,EAAerD,MAAO,MAAO,GAClC,IAAMgE,EAAS,IAAIC,WACnBD,EAAOE,OAAS,SAASC,GACvBN,EAAgB7D,MAAQmE,EAAEC,OAAOC,QAEnCL,EAAOM,cAAcjB,EAAerD,OACpCN,EAAKwD,WAAaG,EAAerD,SAGnC,mBAAM,CAACsD,IAAc,WAEnB,GADA5D,EAAKyD,OAASG,EAAYtD,MACrBsD,EAAYtD,MAAM6B,OACvB,IAHwB,eAGf0C,GACP,IAAMP,EAAS,IAAIC,WACnBD,EAAOE,OAAS,SAASC,GACvBpF,EAAaiB,MAAQjB,EAAaiB,MAAMwE,OAAO,CAC7C/E,KAAM,QACNL,KAAMkE,EAAYtD,MAAMuE,GAAGnF,KAC3BR,IAAKuF,EAAEC,OAAOC,UAGlBL,EAAOM,cAAchB,EAAYtD,MAAMuE,KAThCA,EAAI,EAAGA,EAAIjB,EAAYtD,MAAM6B,OAAQ0C,IAAK,EAA1CA,MAaX,mBAAM,CAAChB,IAAoB,WAEzB,GADA7D,EAAK0D,eAAiBG,EAAkBvD,MACnCuD,EAAkBvD,MAAM6B,OAC7B,IAAK,IAAI0C,EAAI,EAAGA,EAAIhB,EAAkBvD,MAAM6B,OAAQ0C,IAClDxF,EAAaiB,MAAQjB,EAAaiB,MAAMwE,OAAO,CAC7C/E,KAAM,gBACNL,KAAMmE,EAAkBvD,MAAMuE,GAAGnF,KACjCR,IAAK2E,EAAkBvD,MAAMuE,GAAGE,UAKtC,mBAAM,CAAClD,GAAF,yCAAY,0GACXA,EAAQvB,MAAM6B,OADH,gCAEU,gBACrBN,EAAQvB,MAAMuB,EAAQvB,MAAM6B,OAAS,IAH1B,gBAEL6C,EAFK,EAELA,KAGRlB,EAAYxD,MAAQ0E,EAAKC,KAAI,SAACC,GAAD,OAAoBA,EAAGxF,QALvC,4CASjB,oBACE,kBAAMM,EAAKS,cACX,WACEsD,EAAOzD,OAAS6E,aAAapB,EAAOzD,OACpCyD,EAAOzD,MAAQ8E,WAAU,yCAAC,yGACnBpF,EAAKS,WADc,uBAEtBwD,EAAoB3D,MAAQ,EAFN,0CAKD,gBAAW,CAAEG,WAAYT,EAAKS,aAL7B,gBAKhBuE,EALgB,EAKhBA,KACRf,EAAoB3D,MAAQ0E,EAAKK,MAAQ,EAAI,EANrB,2CAOvB,QAIP,oBACE,kBAAMrF,EAAKY,UACX,WACEmD,EAAOzD,OAAS6E,aAAapB,EAAOzD,OACpCyD,EAAOzD,MAAQ8E,WAAU,yCAAC,yGACnBpF,EAAKY,OADc,uBAEtBsD,EAAiB5D,MAAQ,EAFH,0CAKD,gBAAW,CAAEM,OAAQZ,EAAKY,SALzB,gBAKhBoE,EALgB,EAKhBA,KACRd,EAAiB5D,MAAQ0E,EAAKK,MAAQ,EAAI,EANlB,2CAOvB,QAIP,oBACE,kBAAMrF,EAAKqB,UACX,WACsB,cAAhBrB,EAAKqB,SACPrB,EAAKyB,cAAgB,SAK3B,IAAM6D,EAAI,0DAAG,+HACLC,EAAkB,kBADb,kBAGsB,gBAAUxG,EAAGuB,OAHnC,uBAGKkF,EAHL,EAGDR,KAHC,SAIqB,kBAJrB,uBAIKS,EAJL,EAIDT,KAJC,UAK4B,kBAL5B,wBAKKU,EALL,EAKDV,KALC,UAMqB,kBANrB,wBAMKW,EANL,EAMDX,KANC,UAOoB,kBAPpB,iBAOK3C,EAPL,EAOD2C,KAERnB,EAAkBvD,MAAQkF,EAAOI,MACjC5F,EAAKE,WAAasF,EAAOtF,WACzBF,EAAKS,WAAa+E,EAAO/E,WACzBT,EAAKY,OAAS4E,EAAO5E,OACrBZ,EAAKN,KAAO8F,EAAO9F,KACnBM,EAAKiB,iBAAmBuE,EAAOvE,iBAC/BjB,EAAKmB,MAAQqE,EAAOrE,MACpBnB,EAAKoB,OAASoE,EAAOpE,OACrBpB,EAAKqB,OAASmE,EAAOnE,OACrBrB,EAAKyB,cAAgB+D,EAAO/D,cAC5BzB,EAAK2B,qBAAuB6D,EAAO7D,qBACnC3B,EAAK4B,kBAAoB4D,EAAO5D,kBAChC5B,EAAKC,eAAiBuF,EAAOvF,eAC7BD,EAAKqC,KAAOmD,EAAOnD,KAAK4C,KAAI,SAACC,GAAD,MAA4B,CACtDW,WAAYX,EAAGY,OACfnD,SAAUuC,EAAGxF,KACb+C,YAAayC,EAAGzC,gBAElB9B,EAAmBL,QAAUN,EAAKS,WAClCI,EAAgBP,QAAUN,EAAKY,OAE/BwD,EAAS9D,MAAQmF,EAAMA,MAAMR,KAAI,SAACC,GAAD,OAAkBA,EAAG,MACtDb,EAAgB/D,MAAQoF,EAAazE,iBAAiBgE,KACpD,SAACC,GAAD,OAAkBA,EAAG,MAEvBxD,EAAapB,MAAQqF,EAAMV,KAAI,SAACC,GAAD,MAAqB,CAClD1D,MAAO0D,EAAGxF,KACVY,MAAO4E,EAAGnG,GACVkE,SAAS,MAEXlB,EAAezB,MAAQ+B,EAAK0D,OAAO,QAAqB,IAvC/C,yBAyCTR,EAAgBS,QAzCP,2EAAH,qDA6CV,uBAAUV,GAEV,IAAMW,EAAe,SAACC,GACpB,OAAO,SAACC,GACN,OAAOA,EAAOC,cAAcC,QAAQH,EAAYE,gBAAkB,IAIhE5D,EAAa,SAACzC,GAClB,IAAMuG,EAAQ,CAAC,UAAW,UAAW,OAAQ,UAAW,UAClDC,EAAM,GAMZ,OALAxE,EAAezB,MAAMkG,SAAQ,SAACtB,EAAwB3F,GAEpDgH,EAAIrB,EAAG1D,OAAS8E,EAAM/G,EAAQ,MAGzBgH,EAAIxG,IAGPgB,EAAa,0DAAG,WAAOmF,EAAqBO,GAA5B,uFACdC,EAAUR,EACZ9B,EAAS9D,MAAMqG,OAAOV,EAAaC,IACnC9B,EAAS9D,MACbmG,EAAGC,EAAQzB,KAAI,SAAC2B,GAAD,MAAmB,CAAEtG,MAAOsG,OAJvB,2CAAH,wDAOb1F,EAAwB,0DAAG,WAC/BgF,EACAO,GAF+B,uFAIzBC,EAAUR,EACZ7B,EAAgB/D,MAAMqG,OAAOV,EAAaC,IAC1C7B,EAAgB/D,MACpBmG,EAAGC,EAAQzB,KAAI,SAAC2B,GAAD,MAAmB,CAAEtG,MAAOsG,OAPZ,2CAAH,wDAUxB1E,EAAuB,0DAAG,WAC9BgE,EACAO,GAF8B,uFAIxBC,EAAUR,EACZpC,EAAYxD,MAAMqG,OAAOV,EAAaC,IACtCpC,EAAYxD,MAChBmG,EAAGC,EAAQzB,KAAI,SAAC2B,GAAD,MAAmB,CAAEtG,MAAOsG,OAPb,2CAAH,wDAUvBC,EAAoB,WACxB,IAAMC,EAAUC,SAASC,cAAc,SACvCF,EAAQ/G,KAAO,OACf+G,EAAQG,OAAS,UACjBH,EAAQI,iBAAiB,SAAzB,yCAAmC,8FAC7BJ,EAAQK,QACVxD,EAAerD,MAAQwG,EAAQK,MAAM,IAFN,4CAKnCL,EAAQM,SAGJhF,EAAqB,SAAC4C,GAC1B,GAAKA,EAAK1E,MAAV,CAEA,IAAMoE,EAAS,gBAAgB7C,EAAQvB,MAAOyB,EAAezB,OACxDoE,IAEH1E,EAAKqC,MACLrC,EAAKqC,KAAKgF,MACR,SAACnC,GAAD,OACEA,EAAGvC,WAAaqC,EAAK1E,OAAS4E,EAAGW,aAAenB,EAAOpE,WAO7DN,EAAKqC,KAAL,0BACKrC,EAAKqC,MADV,CAEE,CACEI,YAAaiC,EAAOlD,MACpBmB,SAAUqC,EAAK1E,MACfuF,WAAYnB,EAAOpE,UATrB2B,EAAgB3B,MAAQ,MAetBoC,EAAa,SAACsC,GAClBhF,EAAKqC,KAAOrC,EAAKqC,KAAKsE,QACpB,SAACzB,GAAD,OACEA,EAAGvC,WAAaqC,EAAKrC,UAAYuC,EAAGW,aAAeb,EAAKa,eAIxD5G,EAAiB,WACrB,IAAM6H,EAAUC,SAASC,cAAc,SACvCF,EAAQ/G,KAAO,OACf+G,EAAQG,OAAS,UACjBH,EAAQQ,UAAW,EACnBR,EAAQI,iBAAiB,SAAzB,yCAAmC,sGACjC,GAAIJ,EAAQK,MAAO,CAEjB,IADII,EAAc,GACT1C,EAAI,EAAGA,EAAIiC,EAAQK,MAAMhF,OAAQ0C,IACxC0C,EAAM,GAAH,uBAAOA,GAAP,CAAYT,EAAQK,MAAMtC,KAE/BjB,EAAYtD,MAAQiH,EANW,4CASnCT,EAAQM,SAGJtH,EAAgB,SAACP,GACrB,IAAMmF,EAAiBrF,EAAaiB,MAAMf,GAE1C,GADAF,EAAaiB,MAAQ,GACD,UAAhBoE,EAAO3E,KAAkB,CAI3B,GAHA6D,EAAYtD,MAAQsD,EAAYtD,MAAMqG,QACpC,SAACzB,GAAD,OAAcA,EAAGxF,OAASgF,EAAOhF,SAE9BmE,EAAkBvD,MAAM6B,OAAQ,OACrC,IAAK,IAAI0C,EAAI,EAAGA,EAAIhB,EAAkBvD,MAAM6B,OAAQ0C,IAClDxF,EAAaiB,MAAQjB,EAAaiB,MAAMwE,OAAO,CAC7C/E,KAAM,gBACNL,KAAMmE,EAAkBvD,MAAMuE,GAAGnF,KACjCR,IAAK2E,EAAkBvD,MAAMuE,GAAGE,OAItC,GAAoB,kBAAhBL,EAAO3E,KAA0B,CAInC,GAHA8D,EAAkBvD,MAAQuD,EAAkBvD,MAAMqG,QAChD,SAACzB,GAAD,OAA4BA,EAAGxF,OAASgF,EAAOhF,SAE5CkE,EAAYtD,MAAM6B,OAAQ,OAC/B,IALmC,eAK1B,GACP,IAAMmC,EAAS,IAAIC,WACnBD,EAAOE,OAAS,SAASC,GACvBpF,EAAaiB,MAAQjB,EAAaiB,MAAMwE,OAAO,CAC7C/E,KAAM,QACNL,KAAMkE,EAAYtD,MAAM,GAAGZ,KAC3BR,IAAKuF,EAAEC,OAAOC,UAGlBL,EAAOM,cAAchB,EAAYtD,MAAM,KAThC,EAAI,EAAG,EAAIsD,EAAYtD,MAAM6B,OAAQ,IAAK,EAA1C,KAcP3B,EAAgB,WACfR,EAAKE,aACVF,EAAKE,WAAL,0BAAsBF,EAAKE,YAA3B,CAAuC,OAGnCK,EAAmB,SAAChB,EAAee,GAEvCN,EAAKE,WAAWX,GAASe,GAGrB0C,EAAQ,0DAAG,2GACTuC,EAAkB,kBADT,kBAGP,gBAAiBxG,EAAGuB,OAHb,cAIb,gBAAe,CACbkH,MAAO,UACPzH,KAAM,UACN0H,QAAS,UAAF,OAAYzH,EAAKN,KAAjB,kBAETkD,EAAQtC,OAAQ,EATH,SAUPiD,EAAOmE,KAAK,CAAEhI,KAAM,YAVb,uBAYb6F,EAAgBS,QAZH,yEAAH,qDAgBRnD,EAAQ,0DAAG,8GACTU,EAAOoE,OADE,2CAAH,qDAIR7E,EAAM,0DAAG,+GACPyC,EAAkB,kBADX,kBAGY,gBAAiBxG,EAAGuB,MAAON,GAHvC,uBAGHgF,EAHG,EAGHA,KAHG,SAILzB,EAAOmE,KAAK,CAAEhI,KAAM,eAAgBkI,OAAQ,CAAE7I,GAAIiG,EAAKjG,MAJlD,uBAMXwG,EAAgBS,QANL,yEAAH,qDAUZ,MAAO,CACLhG,OACA4C,UACAuB,kBACA9E,eACAwC,UACAI,kBAEAtB,qBACAE,kBACAoD,sBACAC,mBACA5C,iBACAI,eACAK,iBAEAhB,gBACAG,2BACAgB,0BACAE,qBACAM,aACAmE,oBACA5H,iBACAa,gBACAU,gBACAD,mBACAyC,WACAH,WACAC,SAEA9B,gBAAA,QACAwB,aACAqF,sBAAA,QACA1I,cAAA,SAKS,M,UCzbf,GAAO2I,OAASA,GAChB,GAAOC,UAAY,kBAEJ,iB,oCCRf,kUAIM,SAAUC,EAAWhD,GACzB,OAAO,eAAQ,CACb7E,IAAK,YACL8H,OAAQ,MACRL,OAAQ5C,IAIN,SAAUkD,EAAUnJ,GACxB,OAAIA,EACK,eAAQ,CACboB,IAAK,WAAF,OAAapB,EAAb,KACHkJ,OAAQ,QAGL,eAAQ,CACb9H,IAAK,WACL8H,OAAQ,QAIN,SAAUE,EAAepJ,EAAa6I,GAC1C,OAAI7I,EACK,eAAQ,CACboB,IAAK,WAAF,OAAapB,EAAb,WACHkJ,OAAQ,MACRL,WAGG,eAAQ,CACbzH,IAAK,iBACL8H,OAAQ,MACRL,WAKE,SAAUQ,EACdrJ,EACA6I,GAEA,OAAI7I,EACK,eAAQ,CACboB,IAAK,WAAF,OAAapB,EAAb,WACHkJ,OAAQ,MACRL,WAGG,eAAQ,CACbzH,IAAK,iBACL8H,OAAQ,MACRL,WAIE,SAAUS,EAAuBtJ,GACrC,OAAIA,EACK,eAAQ,CACboB,IAAK,WAAF,OAAapB,EAAb,oBACHkJ,OAAQ,QAGL,eAAQ,CACb9H,IAAK,0BACL8H,OAAQ,QAIN,SAAUK,EAAWV,EAAgB7I,GACzC,IAAMiG,EAAO,CACXuD,MAAOX,EAAOW,MACdC,SAAUZ,EAAOY,SACjBC,KAAMb,EAAOa,KACb9C,MAAOiC,EAAOjC,MACd+C,MAAOd,EAAOc,MACdC,OAAQf,EAAOe,OACfC,cAAehB,EAAOgB,eAExB,OAAI7J,EACK,eAAQ,CACboB,IAAK,WAAF,OAAapB,EAAb,KACHkJ,OAAQ,MACRjD,SAGG,eAAQ,CACb7E,IAAK,WACL8H,OAAQ,MACRjD,SAIE,SAAU6D,EAAmB7D,GACjC,OAAO,eAAQ,CACb7E,IAAK,WACL8H,OAAQ,MACRjD,SAIE,SAAU8D,EAAiB/D,EAAYhG,GAC3C,IAAMiG,EAAO,IAAI+D,SAIjB,OAHA/D,EAAKgE,OAAO,OAAQjE,GAChBhG,GAAIiG,EAAKgE,OAAO,SAAUC,KAAKC,UAAUnK,IAEtC,eAAQ,CACboB,IAAK,kBACL8H,OAAQ,OACRjD,SAIE,SAAUmE,EAAcnE,GAC5B,OAAO,eAAQ,CACb7E,IAAK,oBACL8H,OAAQ,OACRjD,W,kCCxHJ,Y,8NCEM,SAAUhE,EAAgBtB,GAC9B,IAAM0J,EAAa,CAAC,IAAK,IAAK,IAAK,KAC7BC,EAAqB3J,EACxB4J,MAAM,IACNvD,QAAO,SAACwB,EAAegC,EAAgBhK,GACtC,OAAc,IAAVA,GACFgI,EAAIG,KAAK6B,GACFhC,IAEL6B,EAAWI,SAASD,GACtBhC,EAAIG,KAAK6B,GAEThC,EAAIA,EAAIpF,OAAS,GAAjB,UAAyBoF,EAAIA,EAAIpF,OAAS,GAAKoH,GAE1ChC,KACN,IAEL,OAAO8B,EACJpE,KAAI,SAACC,EAAY3F,GAChB,OAAO2F,EACJoE,MAAM,IACNrE,KAAI,SAACsE,EAAgBE,GACpB,OAAOA,KAAsB,IAAVlK,EAAc,EAAI,GACjCgK,EAAOG,cACPH,EAAOnD,iBAEZuD,KAAK,OAETA,KAAK,IAGH,IAAMC,EAAsB,SAAtBA,EACXjF,EACAO,GAcA,OAZIA,EAAG2E,UAAY3E,EAAG2E,SAAS1H,OAC7BwC,EAAO+C,KAAK,CACVlG,MAAO0D,EAAG1D,MACVlB,MAAO4E,EAAG5E,MACVuJ,SAAU3E,EAAG2E,SAAS9D,OAAO6D,EAAqB,MAGpDjF,EAAO+C,KAAK,CACVlG,MAAO0D,EAAG1D,MACVlB,MAAO4E,EAAG5E,QAGPqE,GAGImF,EAAkB,SAACxD,EAAiBxE,GAC/C,IAAMiI,EAASzD,EAAMA,EAAMnE,OAAS,GAC9B6H,EAAU,SAAVA,EACJrF,EACAO,GAOA,OALIA,EAAG2E,UAAY3E,EAAG2E,SAAS1H,OAC7BwC,EAAS,GAAH,sBAAOA,GAAP,CAAeO,GAAf,eAAsBA,EAAG2E,SAAS9D,OAAOiE,EAAS,MAExDrF,EAAO+C,KAAKxC,GAEPP,GAEHsF,EAAcnI,EAAQiE,OAAOiE,EAAS,IAC5C,OAAOC,EAAYC,MACjB,SAAChF,GAAD,OAA4BA,EAAG5E,QAAUyJ,O,qBCnE7CI,EAAOC,QAAU,IAA0B","file":"js/FabricEdit.184f7024.js","sourcesContent":["<template>\n  <div id=\"fabrics-upload-component\">\n    <div class=\"card\">\n      <div class=\"item\">\n        <p class=\"label\">Photos<span class=\"red-point\">*</span></p>\n        <div class=\"main-photo-container\">\n          <div class=\"note-container\">\n            <div class=\"note\">\n              <p>File Name: cloth number + _ + name</p>\n              <p>Photo within 1MB</p>\n              <p>1) Fabric picture: 10x10cm / 300dpi</p>\n              <p>2) Large image: 2000pixel / 300dpi</p>\n            </div>\n          </div>\n        </div>\n        <div class=\"photo-container\">\n          <div class=\"icon-upload\" @click=\"onPhotosUpload\">\n            <img :src=\"iconUploadUrl\" alt=\"upload\" />\n          </div>\n          <div class=\"photos\">\n            <div\n              v-for=\"(base64, index) in photosBase64\"\n              :key=\"index\"\n              class=\"photo\"\n            >\n              <el-tooltip :content=\"base64.name\" placement=\"top\" effect=\"light\">\n                <img :src=\"base64.src\" :alt=\"base64.name\" />\n              </el-tooltip>\n              <font-awesome-icon\n                class=\"icon\"\n                :icon=\"['far', 'times-circle']\"\n                @click=\"onPhotoRemove(index)\"\n              ></font-awesome-icon>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class=\"item\">\n        <p class=\"label\">TG3D Fabric ID</p>\n        <el-input\n          class=\"value\"\n          type=\"text\"\n          v-model=\"form.tg3d_fabric_id\"\n        ></el-input>\n\n        <p class=\"label\">Video Url</p>\n        <el-input\n          v-for=\"(url, index) in form.video_urls\"\n          :key=\"index\"\n          class=\"value\"\n          :style=\"{ marginBottom: '8px' }\"\n          type=\"text\"\n          :model-value=\"url\"\n          @input=\"value => onVideoUrlChange(index, value)\"\n        ></el-input>\n\n        <div class=\"icon-add\" @click=\"onVideoUrlAdd\">\n          <font-awesome-icon\n            class=\"icon\"\n            :icon=\"['fas', 'plus-circle']\"\n          ></font-awesome-icon>\n        </div>\n      </div>\n      <div class=\"or-container\">\n        <div class=\"item\">\n          <p class=\"label\">New Art No in SAP (擇一)</p>\n          <el-input\n            class=\"value\"\n            :class=\"{\n              success: sapArtNoInputStatus === 1,\n              error: sapArtNoInputStatus === 2\n            }\"\n            type=\"text\"\n            v-model=\"form.sap_art_no\"\n            :disabled=\"isSapArtNoDisabled\"\n          ></el-input>\n        </div>\n        <p class=\"or\">Or</p>\n        <div class=\"item\">\n          <p class=\"label\">Art No (擇一)</p>\n          <el-input\n            class=\"value\"\n            :class=\"{\n              success: artNoInputStatus === 1,\n              error: artNoInputStatus === 2\n            }\"\n            type=\"text\"\n            v-model=\"form.art_no\"\n            :disabled=\"isArtNoDisabled\"\n          ></el-input>\n        </div>\n      </div>\n      <div class=\"line\"></div>\n      <div class=\"item\">\n        <p class=\"label\">Name<span class=\"red-point\">*</span></p>\n        <el-autocomplete\n          class=\"value\"\n          :model-value=\"form.name\"\n          :fetch-suggestions=\"onQuerySearch\"\n          @input=\"value => (form.name = toNameUpperCase(value))\"\n        ></el-autocomplete>\n      </div>\n      <div class=\"item\">\n        <p class=\"label\">Real Composition<span class=\"red-point\">*</span></p>\n        <el-autocomplete\n          class=\"value\"\n          :model-value=\"form.real_composition\"\n          :fetch-suggestions=\"onQuerySearchComposition\"\n          @input=\"value => (form.real_composition = toNameUpperCase(value))\"\n        ></el-autocomplete>\n      </div>\n      <div class=\"item\">\n        <p class=\"label\">Usable Width<span class=\"red-point\">*</span></p>\n        <div class=\"inch-item\">\n          <el-input class=\"value\" type=\"number\" v-model=\"form.width\"></el-input>\n          <p>Inch</p>\n        </div>\n      </div>\n      <div class=\"item\">\n        <p class=\"label\">Weight in g/m²<span class=\"red-point\">*</span></p>\n        <el-input class=\"value\" type=\"number\" v-model=\"form.weight\"></el-input>\n      </div>\n      <div class=\"item\">\n        <p class=\"label\">Status<span class=\"red-point\">*</span></p>\n        <el-select class=\"value\" v-model=\"form.status\">\n          <el-option\n            v-for=\"(item, index) in statusOptions\"\n            :key=\"index\"\n            :label=\"item.label\"\n            :value=\"item.value\"\n          ></el-option>\n        </el-select>\n      </div>\n      <div class=\"item\">\n        <p class=\"label\">Limited Brand Name</p>\n        <el-select\n          :disabled=\"form.status !== 'exclusive'\"\n          class=\"value\"\n          v-model=\"form.exclusive_for\"\n        >\n          <el-option\n            v-for=\"(item, index) in brandOptions\"\n            :key=\"index\"\n            :label=\"item.label\"\n            :value=\"item.value\"\n          ></el-option>\n        </el-select>\n      </div>\n      <div class=\"item\">\n        <p class=\"label\">\n          Family Fabrics (art_no) (use \",\" to separate)\n        </p>\n        <el-input\n          class=\"value\"\n          type=\"text\"\n          v-model=\"form.family_fabric_art_no\"\n        ></el-input>\n      </div>\n      <div class=\"item\">\n        <p class=\"label\">\n          Fabric Works - SKU number (use \",\" to separate)\n        </p>\n        <el-input\n          class=\"value\"\n          type=\"text\"\n          v-model=\"form.fabric_works_skus\"\n        ></el-input>\n      </div>\n      <div class=\"line\"></div>\n      <div class=\"item\">\n        <p class=\"label\">Tags Selector</p>\n        <div class=\"tag-wrapper\">\n          <el-cascader\n            class=\"input\"\n            v-model=\"tagType\"\n            :options=\"tagTypeOptions\"\n            placeholder=\"Tag Type...\"\n          >\n          </el-cascader>\n        </div>\n        <el-autocomplete\n          class=\"input\"\n          v-model=\"fabricTypeValue\"\n          :fetch-suggestions=\"onQuerySearchFabricType\"\n          :disabled=\"!tagType.length\"\n          @keydown.enter=\"onSelectFabricType({ value: fabricTypeValue })\"\n          @select=\"onSelectFabricType\"\n        ></el-autocomplete>\n      </div>\n      <div class=\"item\">\n        <p class=\"label\">Tags</p>\n        <div class=\"tag-wrapper\">\n          <el-tag\n            v-for=\"(tag, index) in form.tags\"\n            :key=\"index\"\n            class=\"tag\"\n            closable\n            :type=\"getTagType(tag.parent_name)\"\n            @close=\"onTagClose(tag)\"\n          >\n            {{ `${tag.parent_name}-${tag.tag_name}` }}\n          </el-tag>\n        </div>\n      </div>\n\n      <div class=\"footer-container\">\n        <el-button type=\"danger\" @click=\"visible = true\">Delete</el-button>\n        <el-button type=\"info\" @click=\"onCancel\">Cancel</el-button>\n        <el-button type=\"success\" @click=\"onSave\">Update</el-button>\n      </div>\n    </div>\n\n    <el-dialog v-model=\"visible\" width=\"600px\" top=\"45px\">\n      <h1 class=\"dialog-title\">Delete {{ form.name }}</h1>\n      <div class=\"dialog-button-wrapper\">\n        <el-button type=\"danger\" @click=\"onDelete\">\n          Delete\n        </el-button>\n        <el-button type=\"info\" @click=\"visible = false\">\n          Cancel\n        </el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, ref, toRefs, reactive, onMounted, watch } from \"vue\";\nimport { getLastViewTimeString, loading } from \"@/utils\";\nimport { useRouter } from \"vue-router\";\nimport iconUploadUrl from \"@/assets/images/icons/png/upload.png\";\nimport {\n  checkArtNo,\n  getFabric,\n  getFabricCompositionList,\n  getFabricNameList,\n  getFabricTagsType,\n  postDeleteFabric,\n  postUpdateFabric\n} from \"@/apis/fabric\";\nimport { CascaderOptionItem, OptionItem } from \"@/typings/asideFilter\";\nimport { getMemberTeams } from \"@/apis/member\";\nimport { getFabricTags } from \"@/apis/fabric\";\nimport { MemberTeam } from \"@/typings/member\";\nimport {\n  FabricFileResponse,\n  FabricTag,\n  FabricTagResponse,\n  FabricType,\n  PostUploadFabricParams\n} from \"@/typings/fabric\";\nimport {\n  findTagTypeItem,\n  removeEmptyChildren,\n  toNameUpperCase\n} from \"@/utils/fabric\";\nimport { ElNotification } from \"element-plus\";\n\nconst statusOptions: OptionItem[] = [\n  { label: \"Public\", value: \"public\", checked: false },\n  { label: \"Private\", value: \"private\", checked: false },\n  { label: \"Exclusive - Brand\", value: \"exclusive\", checked: false }\n];\n\ninterface Base64 {\n  type: string;\n  name: string;\n  src: string;\n}\n\nconst Component = defineComponent({\n  name: \"FabricEdit\",\n  props: {\n    id: {\n      type: Number,\n      default: 0\n    }\n  },\n  setup(props) {\n    const router = useRouter();\n    const { id } = toRefs(props);\n    const form = reactive<PostUploadFabricParams>({\n      main_photo: null,\n      photos: [],\n      photos_with_id: [],\n      video_urls: [],\n      tg3d_fabric_id: \"\",\n      sap_art_no: \"\",\n      art_no: \"\",\n      name: \"\",\n      real_composition: \"\",\n      width: 0,\n      weight: 0,\n      status: \"public\",\n      exclusive_for: null,\n      family_fabric_art_no: \"\",\n      fabric_works_skus: \"\",\n      tags: []\n    });\n    const visible = ref(false);\n    const storeMainPhoto = ref<File | null>(null);\n    const storePhotos = ref<File[]>([]);\n    const storePhotosWithId = ref<FabricFileResponse[]>([]);\n    const tagType = ref<number[]>([]);\n    const fabricTypeValue = ref(\"\");\n    const fabricTypes = ref<string[]>([]);\n    const isSapArtNoDisabled = ref(false);\n    const isArtNoDisabled = ref(false);\n    const timeId = ref<ReturnType<typeof setTimeout> | undefined>(undefined);\n    const sapArtNoInputStatus = ref(0);\n    const artNoInputStatus = ref(0);\n\n    const mainPhotoBase64 = ref(\"\");\n    const photosBase64 = ref<Base64[]>([]);\n    const nameList = ref<string[]>([]);\n    const compositionList = ref<string[]>([]);\n    const brandOptions = ref<OptionItem[]>([]);\n    const tagTypeOptions = ref<OptionItem[]>([]);\n\n    watch([storeMainPhoto], () => {\n      if (!storeMainPhoto.value) return {};\n      const reader = new FileReader();\n      reader.onload = function(e: any) {\n        mainPhotoBase64.value = e.target.result;\n      };\n      reader.readAsDataURL(storeMainPhoto.value);\n      form.main_photo = storeMainPhoto.value;\n    });\n\n    watch([storePhotos], () => {\n      form.photos = storePhotos.value;\n      if (!storePhotos.value.length) return;\n      for (let i = 0; i < storePhotos.value.length; i++) {\n        const reader = new FileReader();\n        reader.onload = function(e: any) {\n          photosBase64.value = photosBase64.value.concat({\n            type: \"photo\",\n            name: storePhotos.value[i].name,\n            src: e.target.result\n          });\n        };\n        reader.readAsDataURL(storePhotos.value[i]);\n      }\n    });\n\n    watch([storePhotosWithId], () => {\n      form.photos_with_id = storePhotosWithId.value;\n      if (!storePhotosWithId.value.length) return;\n      for (let i = 0; i < storePhotosWithId.value.length; i++) {\n        photosBase64.value = photosBase64.value.concat({\n          type: \"photo_with_id\",\n          name: storePhotosWithId.value[i].name,\n          src: storePhotosWithId.value[i].file\n        });\n      }\n    });\n\n    watch([tagType], async () => {\n      if (tagType.value.length) {\n        const { data } = await getFabricTags(\n          tagType.value[tagType.value.length - 1]\n        );\n        fabricTypes.value = data.map((it: FabricType) => it.name);\n      }\n    });\n\n    watch(\n      () => form.sap_art_no,\n      () => {\n        timeId.value && clearTimeout(timeId.value);\n        timeId.value = setTimeout(async () => {\n          if (!form.sap_art_no) {\n            sapArtNoInputStatus.value = 0;\n            return;\n          }\n          const { data } = await checkArtNo({ sap_art_no: form.sap_art_no });\n          sapArtNoInputStatus.value = data.valid ? 1 : 2;\n        }, 500);\n      }\n    );\n\n    watch(\n      () => form.art_no,\n      () => {\n        timeId.value && clearTimeout(timeId.value);\n        timeId.value = setTimeout(async () => {\n          if (!form.art_no) {\n            artNoInputStatus.value = 0;\n            return;\n          }\n          const { data } = await checkArtNo({ art_no: form.art_no });\n          artNoInputStatus.value = data.valid ? 1 : 2;\n        }, 500);\n      }\n    );\n\n    watch(\n      () => form.status,\n      () => {\n        if (form.status !== \"exclusive\") {\n          form.exclusive_for = null;\n        }\n      }\n    );\n\n    const init = async () => {\n      const loadingInstance = loading();\n      try {\n        const { data: detail } = await getFabric(id.value);\n        const { data: names } = await getFabricNameList();\n        const { data: compositions } = await getFabricCompositionList();\n        const { data: teams } = await getMemberTeams();\n        const { data: tags } = await getFabricTagsType();\n\n        storePhotosWithId.value = detail.media;\n        form.video_urls = detail.video_urls;\n        form.sap_art_no = detail.sap_art_no;\n        form.art_no = detail.art_no;\n        form.name = detail.name;\n        form.real_composition = detail.real_composition;\n        form.width = detail.width;\n        form.weight = detail.weight;\n        form.status = detail.status;\n        form.exclusive_for = detail.exclusive_for;\n        form.family_fabric_art_no = detail.family_fabric_art_no;\n        form.fabric_works_skus = detail.fabric_works_skus;\n        form.tg3d_fabric_id = detail.tg3d_fabric_id;\n        form.tags = detail.tags.map((it: FabricTagResponse) => ({\n          tag_parent: it.parent,\n          tag_name: it.name,\n          parent_name: it.parent_name\n        }));\n        isSapArtNoDisabled.value = !!form.sap_art_no;\n        isArtNoDisabled.value = !!form.art_no;\n\n        nameList.value = names.names.map((it: string[]) => it[0]);\n        compositionList.value = compositions.real_composition.map(\n          (it: string[]) => it[0]\n        );\n        brandOptions.value = teams.map((it: MemberTeam) => ({\n          label: it.name,\n          value: it.id,\n          checked: false\n        }));\n        tagTypeOptions.value = tags.reduce(removeEmptyChildren, []);\n      } finally {\n        loadingInstance.close();\n      }\n    };\n\n    onMounted(init);\n\n    const createFilter = (queryString: string) => {\n      return (option: string) => {\n        return option.toLowerCase().indexOf(queryString.toLowerCase()) > -1;\n      };\n    };\n\n    const getTagType = (type: string) => {\n      const types = [\"primary\", \"success\", \"info\", \"warning\", \"danger\"];\n      const obj = {};\n      tagTypeOptions.value.forEach((it: CascaderOptionItem, index: number) => {\n        // @ts-ignore\n        obj[it.label] = types[index % 5];\n      });\n      // @ts-ignore\n      return obj[type];\n    };\n\n    const onQuerySearch = async (queryString: string, cb: Function) => {\n      const results = queryString\n        ? nameList.value.filter(createFilter(queryString))\n        : nameList.value;\n      cb(results.map((text: string) => ({ value: text })));\n    };\n\n    const onQuerySearchComposition = async (\n      queryString: string,\n      cb: Function\n    ) => {\n      const results = queryString\n        ? compositionList.value.filter(createFilter(queryString))\n        : compositionList.value;\n      cb(results.map((text: string) => ({ value: text })));\n    };\n\n    const onQuerySearchFabricType = async (\n      queryString: string,\n      cb: Function\n    ) => {\n      const results = queryString\n        ? fabricTypes.value.filter(createFilter(queryString))\n        : fabricTypes.value;\n      cb(results.map((text: string) => ({ value: text })));\n    };\n\n    const onMainPhotoUpload = () => {\n      const element = document.createElement(\"input\");\n      element.type = \"file\";\n      element.accept = \"image/*\";\n      element.addEventListener(\"change\", async () => {\n        if (element.files) {\n          storeMainPhoto.value = element.files[0];\n        }\n      });\n      element.click();\n    };\n\n    const onSelectFabricType = (data: { value: string }) => {\n      if (!data.value) return;\n\n      const target = findTagTypeItem(tagType.value, tagTypeOptions.value);\n      if (!target) return;\n      if (\n        form.tags &&\n        form.tags.some(\n          (it: FabricTag) =>\n            it.tag_name === data.value && it.tag_parent === target.value\n        )\n      ) {\n        fabricTypeValue.value = \"\";\n        return;\n      }\n\n      form.tags = [\n        ...form.tags!,\n        {\n          parent_name: target.label,\n          tag_name: data.value,\n          tag_parent: target.value,\n        }\n      ];\n      fabricTypeValue.value = \"\";\n    };\n\n    const onTagClose = (data: FabricTag) => {\n      form.tags = form.tags.filter(\n        (it: FabricTag) =>\n          it.tag_name !== data.tag_name || it.tag_parent !== data.tag_parent\n      );\n    };\n\n    const onPhotosUpload = () => {\n      const element = document.createElement(\"input\");\n      element.type = \"file\";\n      element.accept = \"image/*\";\n      element.multiple = true;\n      element.addEventListener(\"change\", async () => {\n        if (element.files) {\n          let ary: File[] = [];\n          for (let i = 0; i < element.files.length; i++) {\n            ary = [...ary, element.files[i]];\n          }\n          storePhotos.value = ary;\n        }\n      });\n      element.click();\n    };\n\n    const onPhotoRemove = (index: number) => {\n      const target: Base64 = photosBase64.value[index];\n      photosBase64.value = [];\n      if (target.type === \"photo\") {\n        storePhotos.value = storePhotos.value.filter(\n          (it: File) => it.name !== target.name\n        );\n        if (!storePhotosWithId.value.length) return;\n        for (let i = 0; i < storePhotosWithId.value.length; i++) {\n          photosBase64.value = photosBase64.value.concat({\n            type: \"photo_with_id\",\n            name: storePhotosWithId.value[i].name,\n            src: storePhotosWithId.value[i].file\n          });\n        }\n      }\n      if (target.type === \"photo_with_id\") {\n        storePhotosWithId.value = storePhotosWithId.value.filter(\n          (it: FabricFileResponse) => it.name !== target.name\n        );\n        if (!storePhotos.value.length) return;\n        for (let i = 0; i < storePhotos.value.length; i++) {\n          const reader = new FileReader();\n          reader.onload = function(e: any) {\n            photosBase64.value = photosBase64.value.concat({\n              type: \"photo\",\n              name: storePhotos.value[i].name,\n              src: e.target.result\n            });\n          };\n          reader.readAsDataURL(storePhotos.value[i]);\n        }\n      }\n    };\n\n    const onVideoUrlAdd = () => {\n      if (!form.video_urls) return;\n      form.video_urls = [...form.video_urls, \"\"];\n    };\n\n    const onVideoUrlChange = (index: number, value: string) => {\n      // @ts-ignore\n      form.video_urls[index] = value;\n    };\n\n    const onDelete = async () => {\n      const loadingInstance = loading();\n      try {\n        await postDeleteFabric(id.value);\n        ElNotification({\n          title: \"Success\",\n          type: \"success\",\n          message: `Fabric ${form.name} is removed.`\n        });\n        visible.value = false;\n        await router.push({ name: \"Fabrics\" });\n      } finally {\n        loadingInstance.close();\n      }\n    };\n\n    const onCancel = async () => {\n      await router.back();\n    };\n\n    const onSave = async () => {\n      const loadingInstance = loading();\n      try {\n        const { data } = await postUpdateFabric(id.value, form);\n        await router.push({ name: \"FabricDetail\", params: { id: data.id } });\n      } finally {\n        loadingInstance.close();\n      }\n    };\n\n    return {\n      form,\n      visible,\n      mainPhotoBase64,\n      photosBase64,\n      tagType,\n      fabricTypeValue,\n\n      isSapArtNoDisabled,\n      isArtNoDisabled,\n      sapArtNoInputStatus,\n      artNoInputStatus,\n      statusOptions,\n      brandOptions,\n      tagTypeOptions,\n\n      onQuerySearch,\n      onQuerySearchComposition,\n      onQuerySearchFabricType,\n      onSelectFabricType,\n      onTagClose,\n      onMainPhotoUpload,\n      onPhotosUpload,\n      onPhotoRemove,\n      onVideoUrlAdd,\n      onVideoUrlChange,\n      onDelete,\n      onCancel,\n      onSave,\n\n      toNameUpperCase,\n      getTagType,\n      getLastViewTimeString,\n      iconUploadUrl\n    };\n  }\n});\n\nexport default Component;\n</script>\n\n<style scoped lang=\"stylus\">\n#fabrics-upload-component\n  page-container()\n  .card\n    border-radius 15px\n    background white\n    padding 30px\n    flex-wrap wrap\n    flex(flex-start, flex-start)\n\n    .red-point\n      color red\n      margin 0 8px\n\n    .line\n      width 100%\n      height 2px\n      margin 15px 20px\n      background $color-secondary\n\n    .or-container\n      width 100%\n      flex()\n      .item\n        width calc(50% - 15px)\n      .or\n        padding-top 30px\n    .item\n      width calc(50% - 30px)\n      margin 0 15px 15px\n\n      :deep() .el-select\n        width 100%\n      :deep() .el-autocomplete\n        width calc(100% - 16px)\n        padding 0 8px\n\n      .label\n        padding 15px 8px 8px\n        font-size $font-size-large\n\n      .value\n        box-sizing border-box\n        width 100%\n        border-radius 4px\n        background white\n        padding 0 8px\n        font-size $font-size-lg2x\n        font-weight 400\n\n        &:focus\n          outline unset\n\n      .inch-item\n        flex()\n        margin 0 15px 0 0\n\n    .main-photo-container\n      flex(flex-start, flex-start)\n      .note-container\n        flex()\n        .note\n          font-size $font-size-normal\n          line-height 1.5\n    .photo-container\n      flex(flex-start)\n      margin 30px 0 0\n      .icon-upload\n        flex()\n        width 50px\n        height 50px\n        cursor pointer\n        margin 0 15px 0 0\n        img\n          width 30px\n          height 30px\n      .photos\n        flex(flex-start)\n        flex-wrap wrap\n        .photo\n          position relative\n          width 48px\n          height 48px\n          margin 0 8px 8px 0\n          border 1px solid black\n          background-repeat no-repeat\n          background-position center\n          background-size cover\n          img\n            width 100%\n            height 100%\n          .icon\n            position absolute\n            right -9px\n            top -9px\n            width 18px\n            height 18px\n            background white\n            cursor pointer\n    .icon-add\n      flex()\n      width 50px\n      height 50px\n      cursor pointer\n      .icon\n        width 30px\n        height 30px\n\n    .tag-wrapper\n      box-sizing border-box\n      padding 5px 8px\n      width 100%\n      font-size $font-size-lg2x\n      font-weight 400\n      border-radius 10px\n      background white\n\n      :deep() .el-cascader\n        width 100%\n      :deep() .el-autocomplete\n        width 100%\n      .tag\n        margin 0 8px 8px 0\n  .footer-container\n    width 100%\n    margin 30px 0 0\n    flex(flex-end)\n\n  .dialog-title\n    font-size $font-size-lg4x\n    text-align center\n  .dialog-button-wrapper\n    flex()\n    margin 30px auto 0\n    width 300px\n</style>\n","\nimport { defineComponent, ref, toRefs, reactive, onMounted, watch } from \"vue\";\nimport { getLastViewTimeString, loading } from \"@/utils\";\nimport { useRouter } from \"vue-router\";\nimport iconUploadUrl from \"@/assets/images/icons/png/upload.png\";\nimport {\n  checkArtNo,\n  getFabric,\n  getFabricCompositionList,\n  getFabricNameList,\n  getFabricTagsType,\n  postDeleteFabric,\n  postUpdateFabric\n} from \"@/apis/fabric\";\nimport { CascaderOptionItem, OptionItem } from \"@/typings/asideFilter\";\nimport { getMemberTeams } from \"@/apis/member\";\nimport { getFabricTags } from \"@/apis/fabric\";\nimport { MemberTeam } from \"@/typings/member\";\nimport {\n  FabricFileResponse,\n  FabricTag,\n  FabricTagResponse,\n  FabricType,\n  PostUploadFabricParams\n} from \"@/typings/fabric\";\nimport {\n  findTagTypeItem,\n  removeEmptyChildren,\n  toNameUpperCase\n} from \"@/utils/fabric\";\nimport { ElNotification } from \"element-plus\";\n\nconst statusOptions: OptionItem[] = [\n  { label: \"Public\", value: \"public\", checked: false },\n  { label: \"Private\", value: \"private\", checked: false },\n  { label: \"Exclusive - Brand\", value: \"exclusive\", checked: false }\n];\n\ninterface Base64 {\n  type: string;\n  name: string;\n  src: string;\n}\n\nconst Component = defineComponent({\n  name: \"FabricEdit\",\n  props: {\n    id: {\n      type: Number,\n      default: 0\n    }\n  },\n  setup(props) {\n    const router = useRouter();\n    const { id } = toRefs(props);\n    const form = reactive<PostUploadFabricParams>({\n      main_photo: null,\n      photos: [],\n      photos_with_id: [],\n      video_urls: [],\n      tg3d_fabric_id: \"\",\n      sap_art_no: \"\",\n      art_no: \"\",\n      name: \"\",\n      real_composition: \"\",\n      width: 0,\n      weight: 0,\n      status: \"public\",\n      exclusive_for: null,\n      family_fabric_art_no: \"\",\n      fabric_works_skus: \"\",\n      tags: []\n    });\n    const visible = ref(false);\n    const storeMainPhoto = ref<File | null>(null);\n    const storePhotos = ref<File[]>([]);\n    const storePhotosWithId = ref<FabricFileResponse[]>([]);\n    const tagType = ref<number[]>([]);\n    const fabricTypeValue = ref(\"\");\n    const fabricTypes = ref<string[]>([]);\n    const isSapArtNoDisabled = ref(false);\n    const isArtNoDisabled = ref(false);\n    const timeId = ref<ReturnType<typeof setTimeout> | undefined>(undefined);\n    const sapArtNoInputStatus = ref(0);\n    const artNoInputStatus = ref(0);\n\n    const mainPhotoBase64 = ref(\"\");\n    const photosBase64 = ref<Base64[]>([]);\n    const nameList = ref<string[]>([]);\n    const compositionList = ref<string[]>([]);\n    const brandOptions = ref<OptionItem[]>([]);\n    const tagTypeOptions = ref<OptionItem[]>([]);\n\n    watch([storeMainPhoto], () => {\n      if (!storeMainPhoto.value) return {};\n      const reader = new FileReader();\n      reader.onload = function(e: any) {\n        mainPhotoBase64.value = e.target.result;\n      };\n      reader.readAsDataURL(storeMainPhoto.value);\n      form.main_photo = storeMainPhoto.value;\n    });\n\n    watch([storePhotos], () => {\n      form.photos = storePhotos.value;\n      if (!storePhotos.value.length) return;\n      for (let i = 0; i < storePhotos.value.length; i++) {\n        const reader = new FileReader();\n        reader.onload = function(e: any) {\n          photosBase64.value = photosBase64.value.concat({\n            type: \"photo\",\n            name: storePhotos.value[i].name,\n            src: e.target.result\n          });\n        };\n        reader.readAsDataURL(storePhotos.value[i]);\n      }\n    });\n\n    watch([storePhotosWithId], () => {\n      form.photos_with_id = storePhotosWithId.value;\n      if (!storePhotosWithId.value.length) return;\n      for (let i = 0; i < storePhotosWithId.value.length; i++) {\n        photosBase64.value = photosBase64.value.concat({\n          type: \"photo_with_id\",\n          name: storePhotosWithId.value[i].name,\n          src: storePhotosWithId.value[i].file\n        });\n      }\n    });\n\n    watch([tagType], async () => {\n      if (tagType.value.length) {\n        const { data } = await getFabricTags(\n          tagType.value[tagType.value.length - 1]\n        );\n        fabricTypes.value = data.map((it: FabricType) => it.name);\n      }\n    });\n\n    watch(\n      () => form.sap_art_no,\n      () => {\n        timeId.value && clearTimeout(timeId.value);\n        timeId.value = setTimeout(async () => {\n          if (!form.sap_art_no) {\n            sapArtNoInputStatus.value = 0;\n            return;\n          }\n          const { data } = await checkArtNo({ sap_art_no: form.sap_art_no });\n          sapArtNoInputStatus.value = data.valid ? 1 : 2;\n        }, 500);\n      }\n    );\n\n    watch(\n      () => form.art_no,\n      () => {\n        timeId.value && clearTimeout(timeId.value);\n        timeId.value = setTimeout(async () => {\n          if (!form.art_no) {\n            artNoInputStatus.value = 0;\n            return;\n          }\n          const { data } = await checkArtNo({ art_no: form.art_no });\n          artNoInputStatus.value = data.valid ? 1 : 2;\n        }, 500);\n      }\n    );\n\n    watch(\n      () => form.status,\n      () => {\n        if (form.status !== \"exclusive\") {\n          form.exclusive_for = null;\n        }\n      }\n    );\n\n    const init = async () => {\n      const loadingInstance = loading();\n      try {\n        const { data: detail } = await getFabric(id.value);\n        const { data: names } = await getFabricNameList();\n        const { data: compositions } = await getFabricCompositionList();\n        const { data: teams } = await getMemberTeams();\n        const { data: tags } = await getFabricTagsType();\n\n        storePhotosWithId.value = detail.media;\n        form.video_urls = detail.video_urls;\n        form.sap_art_no = detail.sap_art_no;\n        form.art_no = detail.art_no;\n        form.name = detail.name;\n        form.real_composition = detail.real_composition;\n        form.width = detail.width;\n        form.weight = detail.weight;\n        form.status = detail.status;\n        form.exclusive_for = detail.exclusive_for;\n        form.family_fabric_art_no = detail.family_fabric_art_no;\n        form.fabric_works_skus = detail.fabric_works_skus;\n        form.tg3d_fabric_id = detail.tg3d_fabric_id;\n        form.tags = detail.tags.map((it: FabricTagResponse) => ({\n          tag_parent: it.parent,\n          tag_name: it.name,\n          parent_name: it.parent_name\n        }));\n        isSapArtNoDisabled.value = !!form.sap_art_no;\n        isArtNoDisabled.value = !!form.art_no;\n\n        nameList.value = names.names.map((it: string[]) => it[0]);\n        compositionList.value = compositions.real_composition.map(\n          (it: string[]) => it[0]\n        );\n        brandOptions.value = teams.map((it: MemberTeam) => ({\n          label: it.name,\n          value: it.id,\n          checked: false\n        }));\n        tagTypeOptions.value = tags.reduce(removeEmptyChildren, []);\n      } finally {\n        loadingInstance.close();\n      }\n    };\n\n    onMounted(init);\n\n    const createFilter = (queryString: string) => {\n      return (option: string) => {\n        return option.toLowerCase().indexOf(queryString.toLowerCase()) > -1;\n      };\n    };\n\n    const getTagType = (type: string) => {\n      const types = [\"primary\", \"success\", \"info\", \"warning\", \"danger\"];\n      const obj = {};\n      tagTypeOptions.value.forEach((it: CascaderOptionItem, index: number) => {\n        // @ts-ignore\n        obj[it.label] = types[index % 5];\n      });\n      // @ts-ignore\n      return obj[type];\n    };\n\n    const onQuerySearch = async (queryString: string, cb: Function) => {\n      const results = queryString\n        ? nameList.value.filter(createFilter(queryString))\n        : nameList.value;\n      cb(results.map((text: string) => ({ value: text })));\n    };\n\n    const onQuerySearchComposition = async (\n      queryString: string,\n      cb: Function\n    ) => {\n      const results = queryString\n        ? compositionList.value.filter(createFilter(queryString))\n        : compositionList.value;\n      cb(results.map((text: string) => ({ value: text })));\n    };\n\n    const onQuerySearchFabricType = async (\n      queryString: string,\n      cb: Function\n    ) => {\n      const results = queryString\n        ? fabricTypes.value.filter(createFilter(queryString))\n        : fabricTypes.value;\n      cb(results.map((text: string) => ({ value: text })));\n    };\n\n    const onMainPhotoUpload = () => {\n      const element = document.createElement(\"input\");\n      element.type = \"file\";\n      element.accept = \"image/*\";\n      element.addEventListener(\"change\", async () => {\n        if (element.files) {\n          storeMainPhoto.value = element.files[0];\n        }\n      });\n      element.click();\n    };\n\n    const onSelectFabricType = (data: { value: string }) => {\n      if (!data.value) return;\n\n      const target = findTagTypeItem(tagType.value, tagTypeOptions.value);\n      if (!target) return;\n      if (\n        form.tags &&\n        form.tags.some(\n          (it: FabricTag) =>\n            it.tag_name === data.value && it.tag_parent === target.value\n        )\n      ) {\n        fabricTypeValue.value = \"\";\n        return;\n      }\n\n      form.tags = [\n        ...form.tags!,\n        {\n          parent_name: target.label,\n          tag_name: data.value,\n          tag_parent: target.value,\n        }\n      ];\n      fabricTypeValue.value = \"\";\n    };\n\n    const onTagClose = (data: FabricTag) => {\n      form.tags = form.tags.filter(\n        (it: FabricTag) =>\n          it.tag_name !== data.tag_name || it.tag_parent !== data.tag_parent\n      );\n    };\n\n    const onPhotosUpload = () => {\n      const element = document.createElement(\"input\");\n      element.type = \"file\";\n      element.accept = \"image/*\";\n      element.multiple = true;\n      element.addEventListener(\"change\", async () => {\n        if (element.files) {\n          let ary: File[] = [];\n          for (let i = 0; i < element.files.length; i++) {\n            ary = [...ary, element.files[i]];\n          }\n          storePhotos.value = ary;\n        }\n      });\n      element.click();\n    };\n\n    const onPhotoRemove = (index: number) => {\n      const target: Base64 = photosBase64.value[index];\n      photosBase64.value = [];\n      if (target.type === \"photo\") {\n        storePhotos.value = storePhotos.value.filter(\n          (it: File) => it.name !== target.name\n        );\n        if (!storePhotosWithId.value.length) return;\n        for (let i = 0; i < storePhotosWithId.value.length; i++) {\n          photosBase64.value = photosBase64.value.concat({\n            type: \"photo_with_id\",\n            name: storePhotosWithId.value[i].name,\n            src: storePhotosWithId.value[i].file\n          });\n        }\n      }\n      if (target.type === \"photo_with_id\") {\n        storePhotosWithId.value = storePhotosWithId.value.filter(\n          (it: FabricFileResponse) => it.name !== target.name\n        );\n        if (!storePhotos.value.length) return;\n        for (let i = 0; i < storePhotos.value.length; i++) {\n          const reader = new FileReader();\n          reader.onload = function(e: any) {\n            photosBase64.value = photosBase64.value.concat({\n              type: \"photo\",\n              name: storePhotos.value[i].name,\n              src: e.target.result\n            });\n          };\n          reader.readAsDataURL(storePhotos.value[i]);\n        }\n      }\n    };\n\n    const onVideoUrlAdd = () => {\n      if (!form.video_urls) return;\n      form.video_urls = [...form.video_urls, \"\"];\n    };\n\n    const onVideoUrlChange = (index: number, value: string) => {\n      // @ts-ignore\n      form.video_urls[index] = value;\n    };\n\n    const onDelete = async () => {\n      const loadingInstance = loading();\n      try {\n        await postDeleteFabric(id.value);\n        ElNotification({\n          title: \"Success\",\n          type: \"success\",\n          message: `Fabric ${form.name} is removed.`\n        });\n        visible.value = false;\n        await router.push({ name: \"Fabrics\" });\n      } finally {\n        loadingInstance.close();\n      }\n    };\n\n    const onCancel = async () => {\n      await router.back();\n    };\n\n    const onSave = async () => {\n      const loadingInstance = loading();\n      try {\n        const { data } = await postUpdateFabric(id.value, form);\n        await router.push({ name: \"FabricDetail\", params: { id: data.id } });\n      } finally {\n        loadingInstance.close();\n      }\n    };\n\n    return {\n      form,\n      visible,\n      mainPhotoBase64,\n      photosBase64,\n      tagType,\n      fabricTypeValue,\n\n      isSapArtNoDisabled,\n      isArtNoDisabled,\n      sapArtNoInputStatus,\n      artNoInputStatus,\n      statusOptions,\n      brandOptions,\n      tagTypeOptions,\n\n      onQuerySearch,\n      onQuerySearchComposition,\n      onQuerySearchFabricType,\n      onSelectFabricType,\n      onTagClose,\n      onMainPhotoUpload,\n      onPhotosUpload,\n      onPhotoRemove,\n      onVideoUrlAdd,\n      onVideoUrlChange,\n      onDelete,\n      onCancel,\n      onSave,\n\n      toNameUpperCase,\n      getTagType,\n      getLastViewTimeString,\n      iconUploadUrl\n    };\n  }\n});\n\nexport default Component;\n","import { render } from \"./FabricEdit.vue?vue&type=template&id=49f31f22&scoped=true\"\nimport script from \"./FabricEdit.vue?vue&type=script&lang=ts\"\nexport * from \"./FabricEdit.vue?vue&type=script&lang=ts\"\n\nimport \"./FabricEdit.vue?vue&type=style&index=0&id=49f31f22&scoped=true&lang=stylus\"\nscript.render = render\nscript.__scopeId = \"data-v-49f31f22\"\n\nexport default script","import request from \"@/apis/http\";\nimport { AxiosPromise } from \"axios\";\nimport { Member, MemberTeam, ContactUsParams, MemberRole, MembersParams } from \"@/typings/member\";\n\nexport function getMembers(data: MembersParams): AxiosPromise<Member[]> {\n  return request({\n    url: \"/members/\",\n    method: \"GET\",\n    params: data\n  });\n}\n\nexport function getMember(id?: number): AxiosPromise<Member> {\n  if (id) {\n    return request({\n      url: `/member/${id}/`,\n      method: \"GET\"\n    });\n  }\n  return request({\n    url: `/member/`,\n    method: \"GET\"\n  });\n}\n\nexport function getMemberRoles(id?: number, params?: { category?: string }): AxiosPromise<MemberRole[]> {\n  if (id) {\n    return request({\n      url: `/member/${id}/roles/`,\n      method: \"GET\",\n      params\n    });\n  }\n  return request({\n    url: `/member/roles/`,\n    method: \"GET\",\n    params\n  });\n}\n\n// Haven't id means get self teams data by token.\nexport function getMemberTeams(\n  id?: number,\n  params?: { category?: string }\n): AxiosPromise<MemberTeam[]> {\n  if (id) {\n    return request({\n      url: `/member/${id}/teams/`,\n      method: \"GET\",\n      params\n    });\n  }\n  return request({\n    url: \"/member/teams/\",\n    method: \"GET\",\n    params\n  });\n}\n\nexport function getMemberBusinessUnits(id?: number): AxiosPromise<string[]> {\n  if (id) {\n    return request({\n      url: `/member/${id}/business_units/`,\n      method: \"GET\"\n    });\n  }\n  return request({\n    url: \"/member/business_units/\",\n    method: \"GET\"\n  });\n}\n\nexport function postMember(params: Member, id?: number) {\n  const data = {\n    email: params.email,\n    nickname: params.nickname,\n    role: params.role,\n    teams: params.teams,\n    phone: params.phone,\n    active: params.active,\n    business_unit: params.business_unit\n  };\n  if (id) {\n    return request({\n      url: `/member/${id}/`,\n      method: \"PUT\",\n      data\n    });\n  }\n  return request({\n    url: `/member/`,\n    method: \"PUT\",\n    data\n  });\n}\n\nexport function postMemberPassword(data: { password: string }) {\n  return request({\n    url: `/member/`,\n    method: \"PUT\",\n    data\n  });\n}\n\nexport function postMemberAvatar(file: File, id?: number) {\n  const data = new FormData();\n  data.append(\"file\", file);\n  if (id) data.append(\"member\", JSON.stringify(id));\n\n  return request({\n    url: \"/member/medias/\",\n    method: \"POST\",\n    data\n  });\n}\n\nexport function postContactUs(data: ContactUsParams) {\n  return request({\n    url: `/mail/contact_us/`,\n    method: \"POST\",\n    data\n  });\n}\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./FabricEdit.vue?vue&type=style&index=0&id=49f31f22&scoped=true&lang=stylus\"","import { CascaderOptionItem } from \"@/typings/asideFilter\";\n\nexport function toNameUpperCase(name: string) {\n  const splitRules = [\" \", \"/\", \"+\", \"%\"];\n  const splitAry: string[] = name\n    .split(\"\")\n    .reduce((ary: string[], letter: string, index: number) => {\n      if (index === 0) {\n        ary.push(letter);\n        return ary;\n      }\n      if (splitRules.includes(letter)) {\n        ary.push(letter);\n      } else {\n        ary[ary.length - 1] = `${ary[ary.length - 1] + letter}`;\n      }\n      return ary;\n    }, []);\n\n  return splitAry\n    .map((it: string, index: number) => {\n      return it\n        .split(\"\")\n        .map((letter: string, _index: number) => {\n          return _index === (index === 0 ? 0 : 1)\n            ? letter.toUpperCase()\n            : letter.toLowerCase();\n        })\n        .join(\"\");\n    })\n    .join(\"\");\n}\n\nexport const removeEmptyChildren = (\n  result: CascaderOptionItem[],\n  it: CascaderOptionItem\n): CascaderOptionItem[] => {\n  if (it.children && it.children.length) {\n    result.push({\n      label: it.label,\n      value: it.value,\n      children: it.children.reduce(removeEmptyChildren, [])\n    });\n  } else {\n    result.push({\n      label: it.label,\n      value: it.value\n    });\n  }\n  return result;\n};\n\nexport const findTagTypeItem = (types: number[], options: CascaderOptionItem[]): CascaderOptionItem | undefined => {\n  const typeId = types[types.length - 1];\n  const flatten = (\n    result: CascaderOptionItem[],\n    it: CascaderOptionItem\n  ): CascaderOptionItem[] => {\n    if (it.children && it.children.length) {\n      result = [...result, it, ...it.children.reduce(flatten, [])];\n    } else {\n      result.push(it);\n    }\n    return result;\n  };\n  const flattenList = options.reduce(flatten, []);\n  return flattenList.find(\n    (it: CascaderOptionItem) => it.value === typeId\n  );\n};\n","module.exports = __webpack_public_path__ + \"img/upload.42ffdf67.png\";"],"sourceRoot":""}